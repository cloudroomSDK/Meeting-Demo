!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(self,(()=>(()=>{var __webpack_modules__={8249:function(e,t,i){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&"undefined"!=typeof global&&global.crypto&&(n=global.crypto),!n)try{n=i(2480)}catch(e){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),s={},a=s.lib={},c=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=c.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes,r=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<r;o++){var s=i[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=s<<24-(n+o)%4*8}else for(var a=0;a<r;a+=4)t[n+a>>>2]=i[a>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],i=0;i<e;i+=4)t.push(r());return new l.init(t,e)}}),d=s.enc={},u=d.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r++){var o=t[r>>>2]>>>24-r%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(i,t/2)}},h=d.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r++){var o=t[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(i,t)}},f=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i,n=this._data,r=n.words,o=n.sigBytes,s=this.blockSize,a=o/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,d=e.min(4*c,o);if(c){for(var u=0;u<c;u+=s)this._doProcessBlock(r,u);i=r.splice(0,c),n.sigBytes-=d}return new l.init(i,d)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),_=(a.Hasher=p.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new _.HMAC.init(e,i).finalize(t)}}}),s.algo={});return s}(Math),n)},2153:function(e,t,i){var n;e.exports=(n=i(8249),function(e){var t=n,i=t.lib,r=i.WordArray,o=i.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var i=e.sqrt(t),n=2;n<=i;n++)if(!(t%n))return!1;return!0}function i(e){return 4294967296*(e-(0|e))|0}for(var n=2,r=0;r<64;)t(n)&&(r<8&&(a[r]=i(e.pow(n,.5))),c[r]=i(e.pow(n,1/3)),r++),n++}();var l=[],d=s.SHA256=o.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],o=i[2],s=i[3],a=i[4],d=i[5],u=i[6],h=i[7],f=0;f<64;f++){if(f<16)l[f]=0|e[t+f];else{var p=l[f-15],_=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,C=l[f-2],g=(C<<15|C>>>17)^(C<<13|C>>>19)^C>>>10;l[f]=_+l[f-7]+g+l[f-16]}var m=n&r^n&o^r&o,R=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),S=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&d^~a&u)+c[f]+l[f];h=u,u=d,d=a,a=s+S|0,s=o,o=r,r=n,n=S+(R+m)|0}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+o|0,i[3]=i[3]+s|0,i[4]=i[4]+a|0,i[5]=i[5]+d|0,i[6]=i[6]+u|0,i[7]=i[7]+h|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return i[r>>>5]|=128<<24-r%32,i[14+(r+64>>>9<<4)]=e.floor(n/4294967296),i[15+(r+64>>>9<<4)]=n,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(d),t.HmacSHA256=o._createHmacHelper(d)}(Math),n.SHA256)},7923:()=>{!function(){var e="undefined"!=typeof window?window:self;e.Glacier2=e.Glacier2||{};var t=Ice.Slice;IceMX.SessionMetrics=t.defineObject((function(e,t,i,n,r,o,s,a,c,l,d,u){IceMX.Metrics.call(this,e,t,i,n,r),this.forwardedClient=void 0!==o?o:0,this.forwardedServer=void 0!==s?s:0,this.routingTableSize=void 0!==a?a:0,this.queuedClient=void 0!==c?c:0,this.queuedServer=void 0!==l?l:0,this.overriddenClient=void 0!==d?d:0,this.overriddenServer=void 0!==u?u:0}),IceMX.Metrics,void 0,2,["::Ice::Object","::IceMX::Metrics","::IceMX::SessionMetrics"],-1,(function(e){e.writeInt(this.forwardedClient),e.writeInt(this.forwardedServer),e.writeInt(this.routingTableSize),e.writeInt(this.queuedClient),e.writeInt(this.queuedServer),e.writeInt(this.overriddenClient),e.writeInt(this.overriddenServer)}),(function(e){this.forwardedClient=e.readInt(),this.forwardedServer=e.readInt(),this.routingTableSize=e.readInt(),this.queuedClient=e.readInt(),this.queuedServer=e.readInt(),this.overriddenClient=e.readInt(),this.overriddenServer=e.readInt()}),!1),IceMX.SessionMetricsPrx=t.defineProxy(IceMX.MetricsPrx,IceMX.SessionMetrics.ice_staticId,void 0),t.defineOperations(IceMX.SessionMetrics,IceMX.SessionMetricsPrx),Glacier2.SSLInfo=t.defineStruct((function(e,t,i,n,r,o){this.remoteHost=void 0!==e?e:"",this.remotePort=void 0!==t?t:0,this.localHost=void 0!==i?i:"",this.localPort=void 0!==n?n:0,this.cipher=void 0!==r?r:"",this.certs=void 0!==o?o:null}),!0,(function(e){e.writeString(this.remoteHost),e.writeInt(this.remotePort),e.writeString(this.localHost),e.writeInt(this.localPort),e.writeString(this.cipher),Ice.StringSeqHelper.write(e,this.certs)}),(function(e){this.remoteHost=e.readString(),this.remotePort=e.readInt(),this.localHost=e.readString(),this.localPort=e.readInt(),this.cipher=e.readString(),this.certs=Ice.StringSeqHelper.read(e)}),12,!1),Glacier2.CannotCreateSessionException=t.defineUserException((function(e,t){Ice.UserException.call(this,t),this.reason=void 0!==e?e:""}),Ice.UserException,"Glacier2::CannotCreateSessionException",(function(e){e.writeString(this.reason)}),(function(e){this.reason=e.readString()}),!0,!1),Glacier2.Session=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::Session","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.Session.ice_staticId,void 0),t.defineOperations(Glacier2.Session,Glacier2.SessionPrx,{destroy:[,,,,,,,,,,]}),Glacier2.StringSet=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::StringSet","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.StringSetPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.StringSet.ice_staticId,void 0),t.defineOperations(Glacier2.StringSet,Glacier2.StringSetPrx,{add:[,2,2,,,,[["Ice.StringSeqHelper"]],,,,],remove:[,2,2,,,,[["Ice.StringSeqHelper"]],,,,],get:[,2,2,,,["Ice.StringSeqHelper"],,,,,]}),Glacier2.IdentitySet=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::IdentitySet","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.IdentitySetPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.IdentitySet.ice_staticId,void 0),t.defineOperations(Glacier2.IdentitySet,Glacier2.IdentitySetPrx,{add:[,2,2,,,,[["Ice.IdentitySeqHelper"]],,,,],remove:[,2,2,,,,[["Ice.IdentitySeqHelper"]],,,,],get:[,2,2,,,["Ice.IdentitySeqHelper"],,,,,]}),Glacier2.SessionControl=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SessionControl","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionControlPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SessionControl.ice_staticId,void 0),t.defineOperations(Glacier2.SessionControl,Glacier2.SessionControlPrx,{categories:[,,,,,["Glacier2.StringSetPrx"],,,,,],adapterIds:[,,,,,["Glacier2.StringSetPrx"],,,,,],identities:[,,,,,["Glacier2.IdentitySetPrx"],,,,,],getSessionTimeout:[,2,2,,,[3],,,,,],destroy:[,,,,,,,,,,]}),Glacier2.SessionManager=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SessionManager","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionManagerPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SessionManager.ice_staticId,void 0),t.defineOperations(Glacier2.SessionManager,Glacier2.SessionManagerPrx,{create:[,,,,2,["Glacier2.SessionPrx"],[[7],["Glacier2.SessionControlPrx"]],,[Glacier2.CannotCreateSessionException],,]}),Glacier2.SSLSessionManager=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SSLSessionManager","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SSLSessionManagerPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SSLSessionManager.ice_staticId,void 0),t.defineOperations(Glacier2.SSLSessionManager,Glacier2.SSLSessionManagerPrx,{create:[,,,,2,["Glacier2.SessionPrx"],[[Glacier2.SSLInfo],["Glacier2.SessionControlPrx"]],,[Glacier2.CannotCreateSessionException],,]}),Glacier2.PermissionDeniedException=t.defineUserException((function(e,t){Ice.UserException.call(this,t),this.reason=void 0!==e?e:""}),Ice.UserException,"Glacier2::PermissionDeniedException",(function(e){e.writeString(this.reason)}),(function(e){this.reason=e.readString()}),!0,!1),Glacier2.PermissionsVerifier=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::PermissionsVerifier","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.PermissionsVerifierPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.PermissionsVerifier.ice_staticId,void 0),t.defineOperations(Glacier2.PermissionsVerifier,Glacier2.PermissionsVerifierPrx,{checkPermissions:[,2,1,,2,[1],[[7],[7]],[[7]],[Glacier2.PermissionDeniedException],,]}),Glacier2.SSLPermissionsVerifier=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SSLPermissionsVerifier","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SSLPermissionsVerifierPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SSLPermissionsVerifier.ice_staticId,void 0),t.defineOperations(Glacier2.SSLPermissionsVerifier,Glacier2.SSLPermissionsVerifierPrx,{authorize:[,2,1,,2,[1],[[Glacier2.SSLInfo]],[[7]],[Glacier2.PermissionDeniedException],,]}),Glacier2.SessionNotExistException=t.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Glacier2::SessionNotExistException",void 0,void 0,!1,!1),Glacier2.Router=t.defineObject(void 0,Ice.Object,[Ice.Router],0,["::Glacier2::Router","::Ice::Object","::Ice::Router"],-1,void 0,void 0,!1),Glacier2.RouterPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.Router.ice_staticId,[Ice.RouterPrx]),t.defineOperations(Glacier2.Router,Glacier2.RouterPrx,{getCategoryForClient:[,2,1,,,[7],,,,,],createSession:[,,,1,2,["Glacier2.SessionPrx"],[[7],[7]],,[Glacier2.CannotCreateSessionException,Glacier2.PermissionDeniedException],,],createSessionFromSecureConnection:[,,,1,2,["Glacier2.SessionPrx"],,,[Glacier2.CannotCreateSessionException,Glacier2.PermissionDeniedException],,],refreshSession:[,,,1,,,,,[Glacier2.SessionNotExistException],,],destroySession:[,,,,,,,,[Glacier2.SessionNotExistException],,],getSessionTimeout:[,2,1,,,[4],,,,,],getACMTimeout:[,2,1,,,[3],,,,,]}),e.Glacier2=Glacier2}()},896:()=>{!function(){var e="undefined"!=typeof window?window:self;e.Ice=e.Ice||{},Ice.Slice=Ice.Slice||{},e.IceMX=e.IceMX||{},e.IceSSL=e.IceSSL||{};var t,i,n,r,o,s,a,c,l,d,u,h,f,p,_,C,g,m,R,S,I,y,v,w,E,b,D,M,P,x,T,A,O,V,k,N=Ice.Slice;!function(){var e="undefined"!=typeof window?window:self,t={module:function(t){var i=e[t];return void 0===i&&(i={},e[t]=i),i},require:function(t){return e},type:function(t){if(void 0!==t){for(var i=t.split("."),n=e,r=0,o=i.length;r<o;++r)if(void 0===(n=n[i[r]]))return;return n}}};Ice.__require=function(){return e},Ice.Slice=Ice.Slice||{},Ice.__M=t}(),function(){var e=Ice.__M,t=Ice.Slice,i=function(e,t){return e===t||null!=e&&null!=t&&(e.prototype===t.prototype&&("function"==typeof e.equals?e.equals(t):e instanceof Array&&n.equals(e,t,i)))},n={clone:function(e){return void 0===e?e:null===e?[]:e.slice()},equals:function(e,t,n){if(e.length!=t.length)return!1;var r,o,s=n||i;for(r=0,o=e.length;r<o;++r)if(!s.call(s,e[r],t[r]))return!1;return!0},shuffle:function(e){for(var t=e.length;t>1;--t){var i=e[t-1],n=Math.floor(Math.random()*t);e[t-1]=e[n],e[n]=i}},indexOf:function(e,t,i){if(null==i)return e.indexOf(t);for(var n=0;n<e.length;++n)if(i.call(i,e[n],t))return n;return-1},filter:function(e,t,i){i=void 0===i?t:i;for(var n=[],r=0;r<e.length;++r)t.call(i,e[r],r,e)&&n.push(e[r]);return n}};n.eq=i,t.defineSequence=function(t,i,n,r,o){var s=null;Object.defineProperty(t,i,{get:function(){return null===s&&(s=Ice.StreamHelpers.generateSeqHelper(e.type(n),r,e.type(o))),s}})},Ice.ArrayUtil=n}(),Ice.Class=function(){var e,t,i;1==arguments.length?t=arguments[0]:2==arguments.length&&(e=arguments[0],t=arguments[1]),void 0!==t&&(i=t.__init__)&&delete t.__init__;var n=i||function(){};if(void 0!==e&&(n.prototype=new e,n.prototype.constructor=n),void 0!==t)for(var r in t)n.prototype[r]=t[r];return n},function(){var e=Ice.Class,t=function(e,i,n,r){if(r+="  ",null===i)return"\n"+r+e+": (null)";if(void 0===i)return"\n"+r+e+": (undefined)";if("stack"==e||"function"==typeof i)return"";if("object"!=typeof i)return"\n"+r+e+': "'+i+'"';if(-1!=n.indexOf(i))return"\n"+r+e+": (recursive)";n.push(i);var o="\n"+r+e+":";for(var s in i)0!==e.indexOf("_")&&"function"!=typeof i[s]&&(o+=r+t(s,i[s],n,r));return o},i=e(Error,{__init__:function(e){e&&(this.ice_cause=e)},ice_name:function(){return"Ice::Exception"},toString:function(){if(this._inToStringAlready)return"";this._inToStringAlready=!0;var e=this.ice_name();for(var i in this)"_inToStringAlready"!=i&&(e+=t(i,this[i],[],""));return!0===Ice.__printStackTraces&&this.stack&&(e+="\n"+this.stack),this._inToStringAlready=!1,e}});i.captureStackTrace=function(e){var t=(new Error).stack;void 0!==t&&Object.defineProperty(e,"stack",{get:function(){return t}})},Ice.Exception=i;var n=e(i,{__init__:function(e){i.call(this,e),i.captureStackTrace(this)},ice_name:function(){return"Ice::LocalException"}});Ice.LocalException=n;var r=Ice.Slice;r.defineLocalException=function(e,t,i){var n=e;return n.prototype=new t,n.prototype.constructor=n,n.prototype.ice_name=function(){return i},n};var o=e(i,{__init__:function(e){i.call(this,e),i.captureStackTrace(this)},ice_name:function(){return"Ice::UserException"},__write:function(e){e.startWriteException(null),s(this,e,this.__mostDerivedType()),e.endWriteException()},__read:function(e){e.startReadException(),a(this,e,this.__mostDerivedType()),e.endReadException(!1)},__usesClasses:function(){return!1}});Ice.UserException=o;var s=function(e,t,i){void 0!==i&&i!==o&&(t.startWriteSlice(i.__id,-1,i.__parent===o),i.prototype.__writeMemberImpl&&i.prototype.__writeMemberImpl.call(e,t),t.endWriteSlice(),s(e,t,i.__parent))},a=function(e,t,i){void 0!==i&&i!==o&&(t.startReadSlice(),i.prototype.__readMemberImpl&&i.prototype.__readMemberImpl.call(e,t),t.endReadSlice(),a(e,t,i.__parent))},c=function(e){e.startWriteException(this.__slicedData),s(this,e,this.__mostDerivedType()),e.endWriteException()},l=function(e){e.startReadException(),a(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadException(!0)};r.defineUserException=function(e,t,i,n,r,o,s){var a=e;return a.__parent=t,a.prototype=new t,a.__id="::"+i,a.prototype.ice_name=function(){return i},a.prototype.constructor=a,a.prototype.__mostDerivedType=function(){return a},o&&(a.prototype.__write=c,a.prototype.__read=l),a.prototype.__writeMemberImpl=n,a.prototype.__readMemberImpl=r,s&&(a.prototype.__usesClasses=function(){return!0}),a}}(),Ice.AsyncStatus={Queued:0,Sent:1},(t=Ice.Class({__init__:function(e,i){if(i<0||i>t.MAX_UINT32)throw new RangeError("Low word must be between 0 and 0xFFFFFFFF");if(e<0||e>t.MAX_UINT32)throw new RangeError("High word must be between 0 and 0xFFFFFFFF");this.high=e,this.low=i},hashCode:function(){return this.low},equals:function(e){return this===e||e instanceof t&&this.high===e.high&&this.low===e.low},toString:function(){return this.high+":"+this.low},toNumber:function(){if(0!=(this.high&t.SIGN_MASK)){if(this.high===t.MAX_UINT32&&0!==this.low)return-(1+~this.low);var e=1+~this.high;return e>t.HIGH_MAX?Number.NEGATIVE_INFINITY:e*t.HIGH_MASK*-1+this.low}return this.high>t.HIGH_MAX?Number.POSITIVE_INFINITY:this.high*t.HIGH_MASK+this.low}})).MAX_UINT32=4294967295,t.SIGN_MASK=2147483648,t.HIGH_MASK=4294967296,t.HIGH_MAX=2097151,Ice.Long=t,Ice.AssertionFailedException=Ice.Class(Error,{__init__:function(e){Error.call(this),Ice.Exception.captureStackTrace(this),this.message=e}}),Ice.Debug={assert:function(e,t){if(!e)throw console.crlog&&console.crlog(void 0===t?"assertion failed":t),console.crlog&&console.crlog(Error().stack),new Ice.AssertionFailedException(void 0===t?"assertion failed":t)}},Ice.DispatchStatus={DispatchOK:0,DispatchUserException:1,DispatchAsync:2},function(){var e=Ice.Class({__init__:function(e,t){this._name=e,this._value=t},equals:function(e){return this===e||e instanceof Object.getPrototypeOf(this).constructor&&this._value==e._value},hashCode:function(){return this._value},toString:function(){return this._name}});Ice.EnumBase=e;var t=e.prototype;try{Object.defineProperty(t,"name",{enumerable:!0,get:function(){return this._name}}),Object.defineProperty(t,"value",{enumerable:!0,get:function(){return this._value}})}catch(e){}var i=Ice.Class({__init__:function(e){this._enumType=e},write:function(e,t){this._enumType.__write(e,t)},writeOpt:function(e,t,i){this._enumType.__writeOpt(e,t,i)},read:function(e){return this._enumType.__read(e)},readOpt:function(e,t){return this._enumType.__readOpt(e,t)}});Ice.EnumHelper=i,Ice.Slice.defineEnum=function(t){var n=function(t,i){e.call(this,t,i)};(n.prototype=new e).constructor=n;var r=[],o=0,s=null;for(var a in t){var c=t[a][0],l=t[a][1],d=new n(c,l);r[l]=d,s||(s=d),Object.defineProperty(n,c,{enumerable:!0,value:d}),l>o&&(o=l)}return Object.defineProperty(n,"minWireSize",{get:function(){return 1}}),n.__write=function(e,t){t?e.writeEnum(t):e.writeEnum(s)},n.__read=function(e){return e.readEnum(n)},n.__writeOpt=function(e,t,i){void 0!==i&&e.writeOpt(t,Ice.OptionalFormat.Size)&&n.__write(e,i)},n.__readOpt=function(e,t){return e.readOptEnum(t,n)},n.__helper=new i(n),Object.defineProperty(n,"valueOf",{value:function(e){return void 0===e?n:r[e]}}),Object.defineProperty(n,"maxValue",{value:o}),Object.defineProperty(n.prototype,"maxValue",{value:o}),n}}(),Ice.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:7&i|8).toString(16)}))},Ice.FormatType=Ice.Slice.defineEnum([["DefaultFormat",0],["CompactFormat",1],["SlicedFormat",2]]),function(){var e=Ice.Debug;function t(e,t,i){switch(e){case 92:t.push("\\\\");break;case 39:t.push("\\'");break;case 34:t.push('\\"');break;case 8:t.push("\\b");break;case 12:t.push("\\f");break;case 10:t.push("\\n");break;case 13:t.push("\\r");break;case 9:t.push("\\t");break;default:if(e>=32&&e<=126){var n=String.fromCharCode(e);null!==i&&-1!==i.indexOf(n)?(t.push("\\"),t.push(n)):t.push(n)}else{t.push("\\");for(var r=e.toString(8),o=r.length;o<3;o++)t.push("0");t.push(r)}}}function i(e,t){var i,n=e.charCodeAt(t);if(!(n>=32&&n<=126))throw i=t>0?"character after `"+e.substring(0,t)+"'":"first character",i+=" is not a printable ASCII character (ordinal "+n+")",new Error(i);return n}function n(t,n,r,o){if(e.assert(n>=0),e.assert(r<=t.length),n>=r)throw new Error("EOF while decoding string");var s;if("\\"!=t.charAt(n))s=i(t,n++);else{if(n+1==r)throw new Error("trailing backslash");switch(t.charAt(++n)){case"\\":case"'":case'"':s=t.charCodeAt(n++);break;case"b":++n,s="\b".charCodeAt(0);break;case"f":++n,s="\f".charCodeAt(0);break;case"n":++n,s="\n".charCodeAt(0);break;case"r":++n,s="\r".charCodeAt(0);break;case"t":++n,s="\t".charCodeAt(0);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":for(var a=0,c=0;c<3&&n<r;++c){var l=t.charAt(n++);if(-1=="01234567".indexOf(l)){--n;break}a=8*a+parseInt(l)}if(a>255){var d="octal value \\"+a.toString(8)+" ("+a+") is out of range";throw new Error(d)}s=a;break;default:s=i(t,n++)}}return o.value=n,s}Ice.StringUtil={findFirstOf:function(e,t,i){i=void 0===i?0:i;for(var n=e.length,r=i;r<n;r++){var o=e.charAt(r);if(-1!=t.indexOf(o))return r}return-1},findFirstNotOf:function(e,t,i){i=void 0===i?0:i;for(var n=e.length,r=i;r<n;r++){var o=e.charAt(r);if(-1==t.indexOf(o))return r}return-1},escapeString:function(e,i){var n,r;if(null!==(i=void 0===i?null:i))for(n=0,r=i.length;n<r;++n)if(i.charCodeAt(n)<32||i.charCodeAt(n)>126)throw new Error("special characters must be in ASCII range 32-126");var o,s=[];for(n=0,r=e.length;n<r;++n)(o=e.charCodeAt(n))<128?t(o,s,i):o>127&&o<2048?(t(o>>6|192,s,i),t(63&o|128,s,i)):(t(o>>12|224,s,i),t(o>>6&63|128,s,i),t(63&o|128,s,i));return s.join("")},unescapeString:function(t,i,r){i=void 0===i?0:i,r=void 0===r?t.length:r,e.assert(i>=0&&i<=r&&r<=t.length);var o=[];return function(e,t,i,r){var o,s,a,c={value:0};for(;t<i;)o=n(e,t,i,c),t=c.value,o<128?r.push(String.fromCharCode(o)):o>191&&o<224?(s=n(e,t,i,c),t=c.value,r.push(String.fromCharCode((31&o)<<6|63&s))):(s=n(e,t,i,c),a=n(e,t=c.value,i,c),t=c.value,r.push(String.fromCharCode((15&o)<<12|(63&s)<<6|63&a)))}(t,i,r,o),o.join("")},splitString:function(e,t){for(var i=[],n="",r=0,o=null;r<e.length;)if(null!==o||'"'!==e.charAt(r)&&"'"!==e.charAt(r)){if(null===o&&"\\"===e.charAt(r)&&r+1<e.length&&('"'===e.charAt(r+1)||"'"===e.charAt(r+1)))++r;else if(null!==o&&"\\"===e.charAt(r)&&r+1<e.length&&e.charAt(r+1)===o)++r;else{if(null!==o&&e.charAt(r)===o){++r,o=null;continue}if(-1!==t.indexOf(e.charAt(r))&&null===o){++r,n.length>0&&(i.push(n),n="");continue}}r<e.length&&(n+=e.charAt(r++))}else o=e.charAt(r++);return n.length>0&&i.push(n),null!==o?null:i},checkQuote:function(e,t){t=void 0===t?0:t;var i=e.charAt(t);if('"'==i||"'"==i){t++;for(var n,r=e.length;t<r&&-1!=(n=e.indexOf(i,t));){if("\\"!=e.charAt(n-1))return n;t=n+1}return-1}return 0},hashCode:function(e){for(var t=0,i=e.length,n=0;n<i;n++)t=31*t+e.charCodeAt(n);return t},toInt:function(e){var t=parseInt(e,10);if(isNaN(t))throw new Error("conversion of `"+e+"' to int failed");return t}}}(),function(){var e=Ice.__M,t=Ice.StringUtil;function i(e,t,i,n,r){for(var o=e._table[r];null!==o;o=o._nextInBucket)if(o._hash===n&&e.keysEqual(t,o._key))return void(o._value=i);e.add(t,i,n,r)}function n(e,t){return e===t}var r=Ice.Class({__init__:function(e,t){var i,o,s,a,c;if("function"==typeof e?(o=e,s=t):e instanceof r&&(o=(i=e).keyComparator,s=i.valueComparator),this._size=0,this._head=null,this._initialCapacity=32,this._loadFactor=.75,this._table=[],this._keyComparator="function"==typeof o?o:n,this._valueComparator="function"==typeof s?s:n,i instanceof r&&i._size>0){for(this._threshold=i._threshold,c=i._table.length,this._table.length=c,a=0;a<c;a++)this._table[a]=null;this.merge(i)}else for(this._threshold=this._initialCapacity*this._loadFactor,a=0;a<this._initialCapacity;a++)this._table[a]=null},set:function(e,t){var n=this.computeHash(e),r=this.hashIndex(n.hash,this._table.length);return i(this,n.key,t,n.hash,r)},get:function(e){var t=this.computeHash(e),i=this.findEntry(t.key,t.hash);return void 0!==i?i._value:void 0},has:function(e){var t=this.computeHash(e);return void 0!==this.findEntry(t.key,t.hash)},del:function(e){for(var t=this.computeHash(e),i=this.hashIndex(t.hash,this._table.length),n=null,r=this._table[i];null!==r;r=r._nextInBucket){if(r._hash===t.hash&&this.keysEqual(t.key,r._key))return this._size--,null!==n?n._nextInBucket=r._nextInBucket:this._table[i]=r._nextInBucket,null!==r._prev&&(r._prev._next=r._next),null!==r._next&&(r._next._prev=r._prev),this._head===r&&(this._head=r._next),r._value;n=r}},clear:function(){for(var e=0;e<this._table.length;++e)this._table[e]=null;this._head=null,this._size=0},forEach:function(e,t){t=void 0===t?e:t;for(var i=this._head;null!==i;i=i._next)e.call(t,i._key,i._value)},keys:function(){for(var e=[],t=0,i=this._head;null!==i;i=i._next)e[t++]=i._key;return e},values:function(){for(var e=[],t=0,i=this._head;null!==i;i=i._next)e[t++]=i._value;return e},equals:function(e,t){if(null===e||!(e instanceof r)||this._size!==e._size)return!1;for(var i=this,n=t||function(e,t){return i._valueComparator.call(i._valueComparator,e,t)},o=this._head;null!==o;o=o._next){var s=e.findEntry(o._key,o._hash);if(void 0===s||!n(o._value,s._value))return!1}return!0},clone:function(){return new r(this)},merge:function(e){for(var t=e._head;null!==t;t=t._next)i(this,t._key,t._value,t._hash,this.hashIndex(t._hash,this._table.length))},add:function(e,t,i,n){var r=Object.create(null,{key:{enumerable:!0,get:function(){return this._key}},value:{enumerable:!0,get:function(){return this._value}},next:{enumerable:!0,get:function(){return this._next}},_key:{enumerable:!1,writable:!0,value:e},_value:{enumerable:!1,writable:!0,value:t},_prev:{enumerable:!1,writable:!0,value:null},_next:{enumerable:!1,writable:!0,value:null},_nextInBucket:{enumerable:!1,writable:!0,value:null},_hash:{enumerable:!1,writable:!0,value:i}});r._nextInBucket=this._table[n],this._table[n]=r,r._next=this._head,null!==this._head&&(this._head._prev=r),this._head=r,this._size++,this._size>=this._threshold&&this.resize(2*this._table.length)},resize:function(e){this._table;for(var t=[],i=0;i<e;i++)t[i]=null;for(var n=this._head;null!==n;n=n._next){var r=this.hashIndex(n._hash,e);n._nextInBucket=t[r],t[r]=n}this._table=t,this._threshold=e*this._loadFactor},findEntry:function(e,t){for(var i=this.hashIndex(t,this._table.length),n=this._table[i];null!==n;n=n._nextInBucket)if(n._hash===t&&this.keysEqual(e,n._key))return n},hashIndex:function(e,t){return e&t-1},computeHash:function(e){var i;if(0===e||-0===e)return{key:0,hash:0};if(null===e)return null===r._null&&(i=Ice.generateUUID(),r._null={key:i,hash:t.hashCode(i)}),r._null;if(void 0===e)throw new Error("cannot compute hash for undefined value");if("function"==typeof e.hashCode)return{key:e,hash:e.hashCode()};var n=typeof e;if("string"===n||e instanceof String)return{key:e,hash:t.hashCode(e)};if("number"===n||e instanceof Number)return isNaN(e)?(null===r._nan&&(i=Ice.generateUUID(),r._nan={key:i,hash:t.hashCode(i)}),r._nan):{key:e,hash:e.toFixed(0)};if("boolean"===n||e instanceof Boolean)return{key:e,hash:e?1:0};throw new Error("cannot compute hash for value of type "+n)},keysEqual:function(e,t){return this._keyComparator.call(this._keyComparator,e,t)}});Ice.HashMap=r,r.compareEquals=function(e,t){return e===t||null!=e&&null!=t&&e.equals(t)},r.compareIdentity=n,r._null=null,r._nan=null;var o=r.prototype;Object.defineProperty(o,"size",{get:function(){return this._size}}),Object.defineProperty(o,"entries",{get:function(){return this._head}}),Ice.Slice.defineDictionary=function(t,i,n,o,s,a,c,l,d){t[i]=void 0!==c||void 0!==d?function(e){return new r(e||c,d)}:r;var u=null;Object.defineProperty(t,n,{get:function(){return null===u&&(u=Ice.StreamHelpers.generateDictHelper(e.type(o),e.type(s),a,e.type(l),t[i])),u}})}}(),Ice.OptionalFormat=Ice.Slice.defineEnum([["F1",0],["F2",1],["F4",2],["F8",3],["Size",4],["VSize",5],["FSize",6],["Class",7]]),function(){var e=Ice.Class,t=Object.defineProperty,i=(Ice.HashMap,Ice.OptionalFormat),n={FSizeOptHelper:function(){this.writeOpt=function(e,t,n){if(void 0!==n&&e.writeOpt(t,i.FSize)){var r=e.startSize();this.write(e,n),e.endSize(r)}},this.readOpt=function(e,t){var n;return e.readOpt(t,i.FSize)&&(e.skip(4),n=this.read(e)),n}},VSizeOptHelper:function(){this.writeOpt=function(e,t,n){void 0!==n&&e.writeOpt(t,i.VSize)&&(e.writeSize(this.minWireSize),this.write(e,n))},this.readOpt=function(e,t){var n;return e.readOpt(t,i.VSize)&&(e.skipSize(),n=this.read(e)),n}},VSizeContainerOptHelper:function(e){this.writeOpt=function(t,n,r){if(void 0!==r&&t.writeOpt(n,i.VSize)){var o=this.size(r);t.writeSize(o>254?o*e+5:o*e+1),this.write(t,r)}},this.readOpt=function(e,t){var n;return e.readOpt(t,i.VSize)&&(e.skipSize(),n=this.read(e)),n}},VSizeContainer1OptHelper:function(){this.writeOpt=function(e,t,n){void 0!==n&&e.writeOpt(t,i.VSize)&&this.write(e,n)},this.readOpt=function(e,t){var n;return e.readOpt(t,i.VSize)&&(n=this.read(e)),n}}},r=e({write:function(e,t){if(null===t||0===t.length)e.writeSize(0);else{var i=this.elementHelper;e.writeSize(t.length);for(var n=0;n<t.length;++n)i.write(e,t[n])}},read:function(e){var t=this.elementHelper,i=e.readAndCheckSeqSize(t.minWireSize),n=[];n.length=i;for(var r=0;r<i;++r)n[r]=t.read(e);return n},size:function(e){return null==e?0:e.length}});t(r.prototype,"minWireSize",{get:function(){return 1}});var o=new r;o.write=function(e,t){return e.writeByteSeq(t)},o.read=function(e){return e.readByteSeq()},t(o,"elementHelper",{get:function(){return Ice.ByteHelper}}),n.VSizeContainer1OptHelper.call(o);var s=function(e){var t=e.readAndCheckSeqSize(1),i=[];i.length=t;for(var n=this.elementType,r=function(t){e.readObject((function(e){i[t]=e}),n)},o=0;o<t;++o)r(o);return i};n.generateSeqHelper=function(e,i,a){if(e===Ice.ByteHelper)return o;var c=new r;return i?1===e.minWireSize?n.VSizeContainer1OptHelper.call(c):n.VSizeContainerOptHelper.call(c,e.minWireSize):n.FSizeOptHelper.call(c),t(c,"elementHelper",{get:function(){return e}}),e==Ice.ObjectHelper&&(t(c,"elementType",{get:function(){return a}}),c.read=s),c};var a=e({write:function(e,t){if(null==t||0===t.size)e.writeSize(0);else{var i=this.keyHelper,n=this.valueHelper;e.writeSize(t.size);for(var r=t.entries;null!==r;r=r.next)i.write(e,r.key),n.write(e,r.value)}},read:function(e){for(var t=new(0,this.mapType),i=e.readSize(),n=this.keyHelper,r=this.valueHelper,o=0;o<i;++o)t.set(n.read(e),r.read(e));return t},size:function(e){return null==e?0:e.size}});Object.defineProperty(a.prototype,"minWireSize",{get:function(){return 1}});var c=function(e){for(var t=e.readSize(),i=new(0,this.mapType),n=this.valueType,r=function(t){e.readObject((function(e){i.set(t,e)}),n)},o=this.keyHelper,s=0;s<t;++s)r(o.read(e));return i};n.generateDictHelper=function(e,i,r,o,s){var l=new a;return r?n.VSizeContainerOptHelper.call(l,e.minWireSize+i.minWireSize):n.FSizeOptHelper.call(l),t(l,"mapType",{get:function(){return s}}),t(l,"keyHelper",{get:function(){return e}}),t(l,"valueHelper",{get:function(){return i}}),i==Ice.ObjectHelper&&(t(l,"valueType",{get:function(){return o}}),l.read=c),l},Ice.StreamHelpers=n}(),function(){var e,t=Ice.HashMap,i=Number.MAX_SAFE_INTEGER||9007199254740991,n=new t,r={},o=0,s=function(){return o==i&&(o=0),o++};r.setTimeout=function(t,i){var r=s();return n.set(r,t),e.postMessage({type:0,id:r,ms:i}),r},r.clearTimeout=function(t){n.del(t),e.postMessage({type:3,id:t})},r.setInterval=function(t,i){var r=s();return n.set(r,t),e.postMessage({type:1,id:r,ms:i}),r},r.clearInterval=function(t){n.del(t),e.postMessage({type:4,id:t})},r.setImmediate=function(t){var i=s();return n.set(i,t),e.postMessage({type:2,id:i}),i},r.onmessage=function(e){var t;void 0!==(t=1===e.data.type?n.get(e.data.id):n.del(e.data.id))&&t.call()};var a;if(void 0===e)try{a=URL.createObjectURL(new Blob(["("+function(){var e={};self.onmessage=function(t){0==t.data.type?e[t.data.id]=setTimeout((function(){self.postMessage(t.data)}),t.data.ms):1==t.data.type?e[t.data.id]=setInterval((function(){self.postMessage(t.data)}),t.data.ms):2==t.data.type?self.postMessage(t.data):3==t.data.type?(clearTimeout(e[t.data.id]),delete e[t.data.id]):4==t.data.type&&(clearInterval(e[t.data.id]),delete e[t.data.id])}}.toString()+"());"],{type:"text/javascript"})),(e=new Worker(a)).onmessage=r.onmessage,Ice.Timer=r}catch(e){URL.revokeObjectURL(a),Ice.Timer=function(){var e={setTimeout:function(){setTimeout.apply(null,arguments)},clearTimeout:function(){clearTimeout.apply(null,arguments)},setInterval:function(){setInterval.apply(null,arguments)},clearInterval:function(){clearInterval.apply(null,arguments)}};return e.setImmediate="function"==typeof setImmediate?function(){setImmediate.apply(null,arguments)}:function(){setTimeout.apply(null,arguments)},e}()}}(),function(){var e=Ice.Class,t=0,i=e({__init__:function(){this.__address=t++},hashCode:function(){return this.__address},ice_isA:function(e,t){return this.__mostDerivedType().__ids.indexOf(e)>=0},ice_ping:function(e){},ice_ids:function(e){return this.__mostDerivedType().__ids},ice_id:function(e){return this.__mostDerivedType().__id},toString:function(){return"[object "+this.ice_id()+"]"},ice_preMarshal:function(){},ice_postUnmarshal:function(){},__write:function(e){e.startWriteObject(null),n(this,e,this.__mostDerivedType()),e.endWriteObject()},__read:function(e){e.startReadObject(),r(this,e,this.__mostDerivedType()),e.endReadObject(!1)},ice_instanceof:function(e){return!!e&&(this instanceof e||this.__mostDerivedType().__instanceof(e))},__mostDerivedType:function(){return i},equals:function(e){return this===e}});i.write=function(e,t){e.writeObject(t)},i.writeOpt=function(e,t,i){e.writeOptObject(t,i)},i.read=function(e){var t={value:null};return e.readObject((function(e){t.value=e}),i),t},i.readOpt=function(e,t){var n={value:void 0};return e.readOptObject(t,(function(e){n.value=e}),i),n},i.ice_staticId=function(){return i.__id},i.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return!!this.__parent&&this.__parent.__instanceof(e)},i.__ids=["::Ice::Object"],i.__id=i.__ids[0],i.__compactId=-1,i.__preserved=!1;var n=function(e,t,r){void 0!==r&&r!==i&&(t.startWriteSlice(r.__id,r.__compactId,r.__parent===i),r.prototype.__writeMemberImpl&&r.prototype.__writeMemberImpl.call(e,t),t.endWriteSlice(),n(e,t,r.__parent))},r=function(e,t,n){void 0!==n&&n!==i&&(t.startReadSlice(),n.prototype.__readMemberImpl&&n.prototype.__readMemberImpl.call(e,t),t.endReadSlice(),r(e,t,n.__parent))},o=function(e){e.startWriteObject(this.__slicedData),n(this,e,this.__mostDerivedType()),e.endWriteObject()},s=function(e){e.startReadObject(),r(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadObject(!0)};Ice.Object=i;var a=Ice.Slice;a.defineLocalObject=function(e,t){var i=e||function(){};return void 0!==t&&(i.prototype=new t,i.__parent=t,i.prototype.constructor=e),i},a.defineObject=function(e,t,n,r,a,c,l,d,u){var h=e||function(){};return h.prototype=new t,h.__parent=t,h.__ids=a,h.__id=a[r],h.__compactId=c,h.__instanceof=i.__instanceof,h.__implements=n,h.write=function(e,t){e.writeObject(t)},h.writeOpt=function(e,t,i){e.writeOptObject(t,i)},h.read=function(e){var t={value:null};return e.readObject((function(e){t.value=e}),h),t},h.readOpt=function(e,t){var i={value:void 0};return e.readOptObject(t,(function(e){i.value=e}),h),i},h.ice_staticId=function(){return a[r]},h.prototype.constructor=h,h.prototype.__mostDerivedType=function(){return h},u&&(h.prototype.__write=o,h.prototype.__read=s),h.prototype.__writeMemberImpl=l,h.prototype.__readMemberImpl=d,h}}(),i=Ice.StringUtil,Ice.HashUtil={addBoolean:function(e,t){return(e<<5)+e^(t?0:1)},addString:function(e,t){return null!=t&&(e=(e<<5)+e^i.hashCode(t)),e},addNumber:function(e,t){return(e<<5)+e^t},addHashable:function(e,t){return null!=t&&(e=(e<<5)+e^t.hashCode()),e},addArray:function(e,t,i){if(null!=t)for(var n=0;n<t.length;++n)e=i(e,t[n]);return e}},n=Ice.ArrayUtil,r=n.eq,o=function(e){if(this===e)return!0;if(null==e)return!1;if(this.prototype!==e.prototype)return!1;var t,i;for(var n in this)if(t=this[n],i=e[n],"function"!=typeof t&&!r(t,i))return!1;return!0},s=function(){var e,t=new this.constructor;for(var i in this)if(null==(e=this[i]))t[i]=e;else{if("function"==typeof e)continue;"function"==typeof e.clone?t[i]=e.clone():t[i]=e instanceof Array?n.clone(e):e}return t},a=function(e,t){if("function"==typeof t.hashCode)return Ice.HashUtil.addHashable(e,t);if(t instanceof Array)return Ice.HashUtil.addArray(e,t,a);var i=typeof t;return t instanceof String||"string"==i?Ice.HashUtil.addString(e,t):t instanceof Number||"number"==i?Ice.HashUtil.addNumber(e,t):t instanceof Boolean||"boolean"==i?Ice.HashUtil.addBoolean(e,t):void 0},c=function(){var e,t=5381;for(var i in this)null!=(e=this[i])&&"function"!=typeof e&&(t=a(t,e));return t},Ice.Slice.defineStruct=function(e,t,i,n,r,a){var l=e;return l.prototype.clone=s,l.prototype.equals=o,t&&(l.prototype.hashCode=c),n&&i&&(l.prototype.__write=i,l.prototype.__read=n,l.write=function(e,t){t||(l.prototype._nullMarshalValue||(l.prototype._nullMarshalValue=new this),t=l.prototype._nullMarshalValue),t.__write(e)},l.read=function(e,t){return t&&t instanceof this||(t=new this),t.__read(e),t},Object.defineProperty(l,"minWireSize",{get:function(){return r}}),a?Ice.StreamHelpers.VSizeOptHelper.call(l):Ice.StreamHelpers.FSizeOptHelper.call(l)),l},Ice.CompactIdRegistry=new Ice.HashMap,N.defineSequence(Ice,"BoolSeqHelper","Ice.BoolHelper",!0),N.defineSequence(Ice,"ByteSeqHelper","Ice.ByteHelper",!0),N.defineSequence(Ice,"ShortSeqHelper","Ice.ShortHelper",!0),N.defineSequence(Ice,"IntSeqHelper","Ice.IntHelper",!0),N.defineSequence(Ice,"LongSeqHelper","Ice.LongHelper",!0),N.defineSequence(Ice,"FloatSeqHelper","Ice.FloatHelper",!0),N.defineSequence(Ice,"DoubleSeqHelper","Ice.DoubleHelper",!0),N.defineSequence(Ice,"StringSeqHelper","Ice.StringHelper",!1),N.defineSequence(Ice,"ObjectSeqHelper","Ice.ObjectHelper",!1,"Ice.Object"),N.defineSequence(Ice,"ObjectProxySeqHelper","Ice.ObjectPrx",!1),Ice.ReferenceMode={ModeTwoway:0,ModeOneway:1,ModeBatchOneway:2,ModeDatagram:3,ModeBatchDatagram:4,ModeLast:4},function(){var e=Ice.Long;ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var i=new Uint8Array(this);t=void 0===t?i.length:t;for(var n=new Uint8Array(new ArrayBuffer(t-e)),r=0,o=n.length;r<o;r++)n[r]=i[r+e];return n.buffer});var t="BufferOverflowException",i="BufferUnderflowException",n="IndexOutOfBoundsException",r=Ice.Class({__init__:function(e){void 0!==e?(this.b=e,this.v=new DataView(this.b)):(this.b=null,this.v=null),this._position=0,this._limit=0,this._shrinkCounter=0},empty:function(){return 0===this._limit},resize:function(e){0===e?this.clear():e>this.capacity&&this.reserve(e),this._limit=e},clear:function(){this.b=null,this.v=null,this._position=0,this._limit=0},expand:function(e){var t=0===this.capacity?e:this._position+e;t>this._limit&&this.resize(t)},reset:function(){this._limit>0&&2*this._limit<this.capacity?++this._shrinkCounter>2&&(this.reserve(this._limit),this._shrinkCounter=0):this._shrinkCounter=0,this._limit=0,this._position=0},reserve:function(e){if(e>this.capacity){var t=Math.max(e,2*this.capacity);if(t=Math.max(1024,t),this.b){var i=new Uint8Array(t);i.set(new Uint8Array(this.b)),this.b=i.buffer}else this.b=new ArrayBuffer(t);this.v=new DataView(this.b)}else{if(!(e<this.capacity))return;this.b=this.b.slice(0,this.capacity),this.v=new DataView(this.b)}},put:function(e){if(this._position===this._limit)throw new Error(t);this.v.setUint8(this._position,e),this._position++},putAt:function(e,t){if(e>=this._limit)throw new Error(n);this.v.setUint8(e,t)},putArray:function(e){if(!(e instanceof Uint8Array))throw new TypeError("argument is not a Uint8Array");if(e.byteLength>0){if(this._position+e.length>this._limit)throw new Error(t);new Uint8Array(this.b,0,this.b.byteLength).set(e,this._position),this._position+=e.byteLength}},putShort:function(e){if(this._position+2>this._limit)throw new Error(t);this.v.setInt16(this._position,e,!0),this._position+=2},putInt:function(e){if(this._position+4>this._limit)throw new Error(t);this.v.setInt32(this._position,e,!0),this._position+=4},putIntAt:function(e,t){if(e+4>this._limit||e<0)throw new Error(n);this.v.setInt32(e,t,!0)},putFloat:function(e){if(this._position+4>this._limit)throw new Error(t);this.v.setFloat32(this._position,e,!0),this._position+=4},putDouble:function(e){if(this._position+8>this._limit)throw new Error(t);this.v.setFloat64(this._position,e,!0),this._position+=8},putLong:function(e){if(this._position+8>this._limit)throw new Error(t);this.v.setInt32(this._position,e.low,!0),this._position+=4,this.v.setInt32(this._position,e.high,!0),this._position+=4},writeString:function(e,t){var i=unescape(encodeURIComponent(t));e.writeSize(i.length),e.expand(i.length),this.putString(i,i.length)},putString:function(e,i){if(this._position+i>this._limit)throw new Error(t);for(var n=0;n<i;++n)this.v.setUint8(this._position,e.charCodeAt(n)),this._position++},get:function(){if(this._position>=this._limit)throw new Error(i);var e=this.v.getUint8(this._position);return this._position++,e},getAt:function(e){if(e<0||e>=this._limit)throw new Error(n);return this.v.getUint8(e)},getArray:function(e){if(this._position+e>this._limit)throw new Error(i);var t=this.b.slice(this._position,this._position+e);return this._position+=e,new Uint8Array(t)},getArrayAt:function(e,t){if(e+t>this._limit)throw new Error(i);return t=void 0===t?this.b.byteLength-e:t,new Uint8Array(this.b.slice(e,e+t))},getShort:function(){if(this._limit-this._position<2)throw new Error(i);var e=this.v.getInt16(this._position,!0);return this._position+=2,e},getInt:function(){if(this._limit-this._position<4)throw new Error(i);var e=this.v.getInt32(this._position,!0);return this._position+=4,e},getFloat:function(){if(this._limit-this._position<4)throw new Error(i);var e=this.v.getFloat32(this._position,!0);return this._position+=4,e},getDouble:function(){if(this._limit-this._position<8)throw new Error(i);var e=this.v.getFloat64(this._position,!0);return this._position+=8,e},getLong:function(){if(this._limit-this._position<8)throw new Error(i);var t=new e;return t.low=this.v.getUint32(this._position,!0),this._position+=4,t.high=this.v.getUint32(this._position,!0),this._position+=4,t},getString:function(e){if(this._position+e>this._limit)throw new Error(i);for(var t=new DataView(this.b,this._position,e),n="",r=0;r<e;++r)n+=String.fromCharCode(t.getUint8(r));return this._position+=e,n=decodeURIComponent(escape(n))}}),o=r.prototype;Object.defineProperty(o,"position",{get:function(){return this._position},set:function(e){e>=0&&e<=this._limit&&(this._position=e)}}),Object.defineProperty(o,"limit",{get:function(){return this._limit},set:function(e){e<=this.capacity&&(this._limit=e,this._position>e&&(this._position=e))}}),Object.defineProperty(o,"capacity",{get:function(){return null===this.b?0:this.b.byteLength}}),Object.defineProperty(o,"remaining",{get:function(){return this._limit-this._position}}),r.createNative=function(e){return void 0===e?new Uint8Array(0):new Uint8Array(e)},Ice.Buffer=r}(),function(){var e=Ice.Buffer,t={},i="A".charCodeAt(0),n="a".charCodeAt(0),r="0".charCodeAt(0);function o(e){return e<26?String.fromCharCode(i+e):e<52?String.fromCharCode(n+(e-26)):e<62?String.fromCharCode(r+(e-52)):62==e?"+":"/"}function s(e){return e>="A"&&e<="Z"?e.charCodeAt(0)-i:e>="a"&&e<="z"?e.charCodeAt(0)-n+26:e>="0"&&e<="9"?e.charCodeAt(0)-r+52:"+"==e?62:63}t.encode=function(e){if(null===e||0===e.length)return"";e.length;for(var t,i,n,r,s,a,c,l=[],d=0;d<e.length;d+=3)t=255&e[d],i=0,n=0,d+1<e.length&&(i=255&e[d+1]),d+2<e.length&&(n=255&e[d+2]),r=t>>2&255,s=255&((3&t)<<4|i>>4),a=255&((15&i)<<2|n>>6),c=63&n,l.push(o(r)),l.push(o(s)),d+1<e.length?l.push(o(a)):l.push("="),d+2<e.length?l.push(o(c)):l.push("=");for(var u=l.join(""),h=[],f=0;u.length-f>76;)h.push(u.substring(f,f+76)),h.push("\r\n"),f+=76;return h.push(u.substring(f)),h.join("")},t.decode=function(i){for(var n=[],r=0;r<i.length;r++){var o=i.charAt(r);t.isBase64(o)&&n.push(o)}if(0===n.length)return null;var a,c,l,d,u,h,f,p,_=3*n.length/4+1,C=new e;C.resize(_);for(var g=0;g<n.length;g+=4)"A",h="A",f="A",p="A",u=n[g],g+1<n.length&&(h=n[g+1]),g+2<n.length&&(f=n[g+2]),g+3<n.length&&(p=n[g+3]),a=255&s(u),c=255&s(h),l=255&s(f),d=255&s(p),C.put(a<<2|c>>4),"="!=f&&C.put((15&c)<<4|l>>2),"="!=p&&C.put((3&l)<<6|d);return C.remaining>0?C.getArrayAt(0,C.position):C.getArrayAt(0)},t.isBase64=function(e){return e>="A"&&e<="Z"||(e>="a"&&e<="z"||(e>="0"&&e<="9"||("+"==e||("/"==e||"="==e))))},Ice.Base64=t}(),Ice.Identity=N.defineStruct((function(e,t){this.name=void 0!==e?e:"",this.category=void 0!==t?t:""}),!0,(function(e){e.writeString(this.name),e.writeString(this.category)}),(function(e){this.name=e.readString(),this.category=e.readString()}),2,!1),N.defineDictionary(Ice,"ObjectDict","ObjectDictHelper","Ice.Identity","Ice.ObjectHelper",!1,Ice.HashMap.compareEquals,"Ice.Object"),N.defineSequence(Ice,"IdentitySeqHelper","Ice.Identity",!1),Ice.ProtocolVersion=N.defineStruct((function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0}),!0,(function(e){e.writeByte(this.major),e.writeByte(this.minor)}),(function(e){this.major=e.readByte(),this.minor=e.readByte()}),2,!0),Ice.EncodingVersion=N.defineStruct((function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0}),!0,(function(e){e.writeByte(this.major),e.writeByte(this.minor)}),(function(e){this.major=e.readByte(),this.minor=e.readByte()}),2,!0),function(){Ice.SliceInfo=function(){this.typeId="",this.compactId=-1,this.bytes=[],this.objects=[],this.hasOptionalMembers=!1,this.isLastSlice=!1};Ice.SlicedData=function(e){this.slices=e};var e=Ice.Class(Ice.Object,{__init__:function(e){this._unknownTypeId=e},getUnknownTypeId:function(){return this._unknownTypeId},__write:function(e){e.startWriteObject(this._slicedData),e.endWriteObject()},__read:function(e){e.startReadObject(),this._slicedData=e.endReadObject(!0)}});Ice.UnknownSlicedObject=e}(),function(){var e=Ice.HashMap,t=Ice.Debug,i=Ice.Class({__init__:function(){this._adapterEndpointsTable=new e,this._objectTable=new e(e.compareEquals)},clear:function(){this._adapterEndpointsTable.clear(),this._objectTable.clear()},getAdapterEndpoints:function(e,t,i){if(0===t)return i.value=!1,null;var n=this._adapterEndpointsTable.get(e);return void 0!==n?(i.value=this.checkTTL(n.time,t),n.endpoints):(i.value=!1,null)},addAdapterEndpoints:function(e,t){this._adapterEndpointsTable.set(e,new n(Date.now(),t))},removeAdapterEndpoints:function(e){var t=this._adapterEndpointsTable.get(e);return this._adapterEndpointsTable.del(e),void 0!==t?t.endpoints:null},getObjectReference:function(e,t,i){if(0===t)return i.value=!1,null;var n=this._objectTable.get(e);return void 0!==n?(i.value=this.checkTTL(n.time,t),n.reference):(i.value=!1,null)},addObjectReference:function(e,t){this._objectTable.set(e,new r(Date.now(),t))},removeObjectReference:function(e){var t=this._objectTable.get(e);return this._objectTable.del(e),void 0!==t?t.reference:null},checkTTL:function(e,i){return t.assert(0!==i),i<0||Date.now()-e<=1e3*i}});Ice.LocatorTable=i;var n=function(e,t){this.time=e,this.endpoints=t},r=function(e,t){this.time=e,this.reference=t}}(),function(){var e=Ice.Timer,t=0,i=1,n=2,r=function(e,t){var n=e.__state===i?t.onResponse:t.onException;try{if("function"!=typeof n)t.promise.setState(e.__state,e._args);else{var r=n.apply(null,e._args);r&&"function"==typeof r.then?r.then((function(){var e=arguments;t.promise.succeed.apply(t.promise,e)}),(function(){var e=arguments;t.promise.fail.apply(t.promise,e)})):t.promise.succeed(r)}}catch(e){t.promise.fail.call(t.promise,e)}},o=Ice.Class({__init__:function(){this.__state=t,this.__listeners=[]},then:function(t,i){var n=new o,r=this;return e.setImmediate((function(){r.__listeners.push({promise:n,onResponse:t,onException:i}),r.resolve()})),n},exception:function(e){return this.then(null,e)},finally2:function(t){var i=new o,n=this,r=function(e){return function(){var n=arguments;try{var r=t.apply(null,n);if(r&&"function"==typeof r.then){var o=function(){e.apply(i,n)};r.then(o).exception(o)}else e.apply(i,n)}catch(t){e.apply(i,n)}}};return e.setImmediate((function(){n.then(r(i.succeed),r(i.fail))})),i},delay:function(t){var i=new o,n=this,r=function(i,n){return function(){var r=arguments;e.setTimeout((function(){n.apply(i,r)}),t)}};return e.setImmediate((function(){n.then(r(i,i.succeed),r(i,i.fail))})),i},resolve:function(){if(this.__state!==t)for(var e;e=this.__listeners.pop();)r(this,e)},setState:function(e,i){this.__state===t&&e!==t&&(this.__state=e,this._args=i,this.resolve())},succeed:function(){var e=arguments;return this.setState(i,e),this},fail:function(){var e=arguments;return this.setState(n,e),this},succeeded:function(){return this.__state===i},failed:function(){return this.__state===n},completed:function(){return this.__state!==t}});o.all=function(){if(1===arguments.length&&arguments[0]instanceof Array)return o.all.apply(this,arguments[0]);var e=new o,t=Array.prototype.slice.call(arguments),i=new Array(arguments.length),n=t.length;0===n&&e.succeed.apply(e,i);for(var r=0;r<t.length;++r)!function(r){t[r]&&"function"==typeof t[r].then?t[r].then((function(){i[r]=arguments,0===--n&&e.succeed.apply(e,i)}),(function(){e.fail.apply(e,arguments)})):(i[r]=t[r],0===--n&&e.succeed.apply(e,i))}(r);return e},o.try2=function(e){return(new o).succeed().then(e)},o.delay=function(e){if(arguments.length>1){var t=new o,i=Array.prototype.slice.call(arguments);return e=i.pop(),t.succeed.apply(t,i).delay(e)}return(new o).succeed().delay(e)},Ice.Promise=o}(),l=Ice.Class({__init__:function(e){void 0!==e&&e.length>0?this._prefix=e+": ":this._prefix="",this._dateformat={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}},print:function(e){this.write(e,!1)},trace:function(e,t){var i=[];new Date,i.push("-- "),i.push(this.timestamp()),i.push(" "),i.push(this._prefix),i.push(e),i.push(": "),i.push(t),this.write(i.join(""),!0)},warning:function(e){var t=[];new Date,t.push("-! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("warning: "),t.push(e),this.write(t.join(""),!0)},error:function(e){var t=[];new Date,t.push("!! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("error: "),t.push(e),this.write(t.join(""),!0)},cloneWithPrefix:function(e){return new l(e)},write:function(e,t){t&&(e=e.replace(/\n/g,"\n   ")),console.crlog&&console.crlog(e)},timestamp:function(){var e=new Date;return e.toLocaleString("en-US",this._dateformat)+"."+e.getMilliseconds()}}),Ice.Logger=l,Ice.InitializationException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::InitializationException"),Ice.PluginInitializationException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::PluginInitializationException"),Ice.CollocationOptimizationException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::CollocationOptimizationException"),Ice.AlreadyRegisteredException=N.defineLocalException((function(e,t,i){Ice.LocalException.call(this,i),this.kindOfObject=void 0!==e?e:"",this.id=void 0!==t?t:""}),Ice.LocalException,"Ice::AlreadyRegisteredException"),Ice.NotRegisteredException=N.defineLocalException((function(e,t,i){Ice.LocalException.call(this,i),this.kindOfObject=void 0!==e?e:"",this.id=void 0!==t?t:""}),Ice.LocalException,"Ice::NotRegisteredException"),Ice.TwowayOnlyException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.operation=void 0!==e?e:""}),Ice.LocalException,"Ice::TwowayOnlyException"),Ice.CloneNotImplementedException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::CloneNotImplementedException"),Ice.UnknownException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.unknown=void 0!==e?e:""}),Ice.LocalException,"Ice::UnknownException"),Ice.UnknownLocalException=N.defineLocalException((function(e,t){Ice.UnknownException.call(this,e,t)}),Ice.UnknownException,"Ice::UnknownLocalException"),Ice.UnknownUserException=N.defineLocalException((function(e,t){Ice.UnknownException.call(this,e,t)}),Ice.UnknownException,"Ice::UnknownUserException"),Ice.VersionMismatchException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::VersionMismatchException"),Ice.CommunicatorDestroyedException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::CommunicatorDestroyedException"),Ice.ObjectAdapterDeactivatedException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.name=void 0!==e?e:""}),Ice.LocalException,"Ice::ObjectAdapterDeactivatedException"),Ice.ObjectAdapterIdInUseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:""}),Ice.LocalException,"Ice::ObjectAdapterIdInUseException"),Ice.NoEndpointException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.proxy=void 0!==e?e:""}),Ice.LocalException,"Ice::NoEndpointException"),Ice.EndpointParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::EndpointParseException"),Ice.EndpointSelectionTypeParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::EndpointSelectionTypeParseException"),Ice.VersionParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::VersionParseException"),Ice.IdentityParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::IdentityParseException"),Ice.ProxyParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::ProxyParseException"),Ice.IllegalIdentityException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:new Ice.Identity}),Ice.LocalException,"Ice::IllegalIdentityException"),Ice.IllegalServantException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::IllegalServantException"),Ice.RequestFailedException=N.defineLocalException((function(e,t,i,n){Ice.LocalException.call(this,n),this.id=void 0!==e?e:new Ice.Identity,this.facet=void 0!==t?t:"",this.operation=void 0!==i?i:""}),Ice.LocalException,"Ice::RequestFailedException"),Ice.ObjectNotExistException=N.defineLocalException((function(e,t,i,n){Ice.RequestFailedException.call(this,e,t,i,n)}),Ice.RequestFailedException,"Ice::ObjectNotExistException"),Ice.FacetNotExistException=N.defineLocalException((function(e,t,i,n){Ice.RequestFailedException.call(this,e,t,i,n)}),Ice.RequestFailedException,"Ice::FacetNotExistException"),Ice.OperationNotExistException=N.defineLocalException((function(e,t,i,n){Ice.RequestFailedException.call(this,e,t,i,n)}),Ice.RequestFailedException,"Ice::OperationNotExistException"),Ice.SyscallException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.error=void 0!==e?e:0}),Ice.LocalException,"Ice::SyscallException"),Ice.SocketException=N.defineLocalException((function(e,t){Ice.SyscallException.call(this,e,t)}),Ice.SyscallException,"Ice::SocketException"),Ice.FileException=N.defineLocalException((function(e,t,i){Ice.SyscallException.call(this,e,i),this.path=void 0!==t?t:""}),Ice.SyscallException,"Ice::FileException"),Ice.ConnectFailedException=N.defineLocalException((function(e,t){Ice.SocketException.call(this,e,t)}),Ice.SocketException,"Ice::ConnectFailedException"),Ice.ConnectionRefusedException=N.defineLocalException((function(e,t){Ice.ConnectFailedException.call(this,e,t)}),Ice.ConnectFailedException,"Ice::ConnectionRefusedException"),Ice.ConnectionLostException=N.defineLocalException((function(e,t){Ice.SocketException.call(this,e,t)}),Ice.SocketException,"Ice::ConnectionLostException"),Ice.DNSException=N.defineLocalException((function(e,t,i){Ice.LocalException.call(this,i),this.error=void 0!==e?e:0,this.host=void 0!==t?t:""}),Ice.LocalException,"Ice::DNSException"),Ice.OperationInterruptedException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::OperationInterruptedException"),Ice.TimeoutException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::TimeoutException"),Ice.ConnectTimeoutException=N.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::ConnectTimeoutException"),Ice.CloseTimeoutException=N.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::CloseTimeoutException"),Ice.ConnectionTimeoutException=N.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::ConnectionTimeoutException"),Ice.InvocationTimeoutException=N.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::InvocationTimeoutException"),Ice.InvocationCanceledException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::InvocationCanceledException"),Ice.ProtocolException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::ProtocolException"),Ice.BadMagicException=N.defineLocalException((function(e,t,i){Ice.ProtocolException.call(this,e,i),this.badMagic=void 0!==t?t:null}),Ice.ProtocolException,"Ice::BadMagicException"),Ice.UnsupportedProtocolException=N.defineLocalException((function(e,t,i,n){Ice.ProtocolException.call(this,e,n),this.bad=void 0!==t?t:new Ice.ProtocolVersion,this.supported=void 0!==i?i:new Ice.ProtocolVersion}),Ice.ProtocolException,"Ice::UnsupportedProtocolException"),Ice.UnsupportedEncodingException=N.defineLocalException((function(e,t,i,n){Ice.ProtocolException.call(this,e,n),this.bad=void 0!==t?t:new Ice.EncodingVersion,this.supported=void 0!==i?i:new Ice.EncodingVersion}),Ice.ProtocolException,"Ice::UnsupportedEncodingException"),Ice.UnknownMessageException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::UnknownMessageException"),Ice.ConnectionNotValidatedException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::ConnectionNotValidatedException"),Ice.UnknownRequestIdException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::UnknownRequestIdException"),Ice.UnknownReplyStatusException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::UnknownReplyStatusException"),Ice.CloseConnectionException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::CloseConnectionException"),Ice.ForcedCloseConnectionException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::ForcedCloseConnectionException"),Ice.IllegalMessageSizeException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::IllegalMessageSizeException"),Ice.CompressionException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::CompressionException"),Ice.DatagramLimitException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::DatagramLimitException"),Ice.MarshalException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::MarshalException"),Ice.ProxyUnmarshalException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::ProxyUnmarshalException"),Ice.UnmarshalOutOfBoundsException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::UnmarshalOutOfBoundsException"),Ice.NoObjectFactoryException=N.defineLocalException((function(e,t,i){Ice.MarshalException.call(this,e,i),this.type=void 0!==t?t:""}),Ice.MarshalException,"Ice::NoObjectFactoryException"),Ice.UnexpectedObjectException=N.defineLocalException((function(e,t,i,n){Ice.MarshalException.call(this,e,n),this.type=void 0!==t?t:"",this.expectedType=void 0!==i?i:""}),Ice.MarshalException,"Ice::UnexpectedObjectException"),Ice.MemoryLimitException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::MemoryLimitException"),Ice.StringConversionException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::StringConversionException"),Ice.EncapsulationException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::EncapsulationException"),Ice.FeatureNotSupportedException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.unsupportedFeature=void 0!==e?e:""}),Ice.LocalException,"Ice::FeatureNotSupportedException"),Ice.SecurityException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::SecurityException"),Ice.FixedProxyException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::FixedProxyException"),Ice.ResponseSentException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::ResponseSentException"),function(){var e=Ice.StringUtil,t={};function i(t){var i=t.indexOf(".");if(-1===i)throw new Ice.VersionParseException("malformed version value `"+t+"'");var n,r=t.substring(0,i);try{n=e.toInt(r)}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}if(n<1||n>255)throw new Ice.VersionParseException("range error in version `"+t+"'");return n}function n(t){var i=t.indexOf(".");if(-1===i)throw new Ice.VersionParseException("malformed version value `"+t+"'");var n,r=t.substring(i+1);try{n=e.toInt(r)}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}if(n<0||n>255)throw new Ice.VersionParseException("range error in version `"+t+"'");return n}function r(e,t){return e+"."+t}Ice.Encoding_1_0=new Ice.EncodingVersion(1,0),Ice.Encoding_1_1=new Ice.EncodingVersion(1,1),Ice.Protocol_1_0=new Ice.ProtocolVersion(1,0),t.headerSize=14,t.magic=Ice.Buffer.createNative([73,99,101,80]),t.protocolMajor=1,t.protocolMinor=0,t.protocolEncodingMajor=1,t.protocolEncodingMinor=0,t.encodingMajor=1,t.encodingMinor=1,t.requestMsg=0,t.requestBatchMsg=1,t.replyMsg=2,t.validateConnectionMsg=3,t.closeConnectionMsg=4,t.replyOK=0,t.replyUserException=1,t.replyObjectNotExist=2,t.replyFacetNotExist=3,t.replyOperationNotExist=4,t.replyUnknownLocalException=5,t.replyUnknownUserException=6,t.replyUnknownException=7,t.requestHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestMsg,0,0,0,0,0,0,0,0,0]),t.requestBatchHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestBatchMsg,0,0,0,0,0,0,0,0,0]),t.replyHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.replyMsg,0,0,0,0,0]),t.currentProtocol=new Ice.ProtocolVersion(t.protocolMajor,t.protocolMinor),t.currentProtocolEncoding=new Ice.EncodingVersion(t.protocolEncodingMajor,t.protocolEncodingMinor),t.currentEncoding=new Ice.EncodingVersion(t.encodingMajor,t.encodingMinor),t.checkSupportedProtocol=function(e){if(e.major!==t.currentProtocol.major||e.minor>t.currentProtocol.minor)throw new Ice.UnsupportedProtocolException("",e,t.currentProtocol)},t.checkSupportedProtocolEncoding=function(e){if(e.major!==t.currentProtocolEncoding.major||e.minor>t.currentProtocolEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,t.currentProtocolEncoding)},t.checkSupportedEncoding=function(e){if(e.major!==t.currentEncoding.major||e.minor>t.currentEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,t.currentEncoding)},t.getCompatibleProtocol=function(e){return e.major!==t.currentProtocol.major||e.minor<t.currentProtocol.minor?e:t.currentProtocol},t.getCompatibleEncoding=function(e){return e.major!==t.currentEncoding.major||e.minor<t.currentEncoding.minor?e:t.currentEncoding},t.isSupported=function(e,t){return e.major===t.major&&e.minor<=t.minor},Ice.stringToProtocolVersion=function(e){return new Ice.ProtocolVersion(i(e),n(e))},Ice.stringToEncodingVersion=function(e){return new Ice.EncodingVersion(i(e),n(e))},Ice.protocolVersionToString=function(e){return r(e.major,e.minor)},Ice.encodingVersionToString=function(e){return r(e.major,e.minor)},Ice.Protocol=t}(),d=function(e,t,i){this._pattern=e,this._deprecated=t,this._deprecatedBy=i},Object.defineProperty(d.prototype,"pattern",{get:function(){return this._pattern}}),Object.defineProperty(d.prototype,"deprecated",{get:function(){return this._deprecated}}),Object.defineProperty(d.prototype,"deprecatedBy",{get:function(){return this._deprecatedBy}}),Ice.Property=d,function(){var e={},t=Ice.Property;e.IceProps=[new t("/^Ice.ACM.Client/",!0,null),new t("/^Ice.ACM.Server/",!0,null),new t("/^Ice.ACM.Timeout/",!1,null),new t("/^Ice.ACM.Heartbeat/",!1,null),new t("/^Ice.ACM.Close/",!1,null),new t("/^Ice.ACM/",!1,null),new t("/^Ice.ACM.Client.Timeout/",!1,null),new t("/^Ice.ACM.Client.Heartbeat/",!1,null),new t("/^Ice.ACM.Client.Close/",!1,null),new t("/^Ice.ACM.Client/",!1,null),new t("/^Ice.ACM.Server.Timeout/",!1,null),new t("/^Ice.ACM.Server.Heartbeat/",!1,null),new t("/^Ice.ACM.Server.Close/",!1,null),new t("/^Ice.ACM.Server/",!1,null),new t("/^Ice.Admin.ACM.Timeout/",!1,null),new t("/^Ice.Admin.ACM.Heartbeat/",!1,null),new t("/^Ice.Admin.ACM.Close/",!1,null),new t("/^Ice.Admin.ACM/",!1,null),new t("/^Ice.Admin.AdapterId/",!1,null),new t("/^Ice.Admin.Endpoints/",!1,null),new t("/^Ice.Admin.Locator.EndpointSelection/",!1,null),new t("/^Ice.Admin.Locator.ConnectionCached/",!1,null),new t("/^Ice.Admin.Locator.PreferSecure/",!1,null),new t("/^Ice.Admin.Locator.LocatorCacheTimeout/",!1,null),new t("/^Ice.Admin.Locator.InvocationTimeout/",!1,null),new t("/^Ice.Admin.Locator.Locator/",!1,null),new t("/^Ice.Admin.Locator.Router/",!1,null),new t("/^Ice.Admin.Locator.CollocationOptimized/",!1,null),new t("/^Ice.Admin.Locator.Context../",!1,null),new t("/^Ice.Admin.Locator/",!1,null),new t("/^Ice.Admin.PublishedEndpoints/",!1,null),new t("/^Ice.Admin.ReplicaGroupId/",!1,null),new t("/^Ice.Admin.Router.EndpointSelection/",!1,null),new t("/^Ice.Admin.Router.ConnectionCached/",!1,null),new t("/^Ice.Admin.Router.PreferSecure/",!1,null),new t("/^Ice.Admin.Router.LocatorCacheTimeout/",!1,null),new t("/^Ice.Admin.Router.InvocationTimeout/",!1,null),new t("/^Ice.Admin.Router.Locator/",!1,null),new t("/^Ice.Admin.Router.Router/",!1,null),new t("/^Ice.Admin.Router.CollocationOptimized/",!1,null),new t("/^Ice.Admin.Router.Context../",!1,null),new t("/^Ice.Admin.Router/",!1,null),new t("/^Ice.Admin.ProxyOptions/",!1,null),new t("/^Ice.Admin.ThreadPool.Size/",!1,null),new t("/^Ice.Admin.ThreadPool.SizeMax/",!1,null),new t("/^Ice.Admin.ThreadPool.SizeWarn/",!1,null),new t("/^Ice.Admin.ThreadPool.StackSize/",!1,null),new t("/^Ice.Admin.ThreadPool.Serialize/",!1,null),new t("/^Ice.Admin.ThreadPool.ThreadIdleTime/",!1,null),new t("/^Ice.Admin.ThreadPool.ThreadPriority/",!1,null),new t("/^Ice.Admin.MessageSizeMax/",!1,null),new t("/^Ice.Admin.DelayCreation/",!1,null),new t("/^Ice.Admin.Enabled/",!1,null),new t("/^Ice.Admin.Facets/",!1,null),new t("/^Ice.Admin.InstanceName/",!1,null),new t("/^Ice.Admin.Logger.KeepLogs/",!1,null),new t("/^Ice.Admin.Logger.KeepTraces/",!1,null),new t("/^Ice.Admin.Logger.Properties/",!1,null),new t("/^Ice.Admin.ServerId/",!1,null),new t("/^Ice.BackgroundLocatorCacheUpdates/",!1,null),new t("/^Ice.BatchAutoFlush/",!0,null),new t("/^Ice.BatchAutoFlushSize/",!1,null),new t("/^Ice.ChangeUser/",!1,null),new t("/^Ice.ClientAccessPolicyProtocol/",!1,null),new t("/^Ice.Compression.Level/",!1,null),new t("/^Ice.CollectObjects/",!1,null),new t("/^Ice.Config/",!1,null),new t("/^Ice.ConsoleListener/",!1,null),new t("/^Ice.Default.CollocationOptimized/",!1,null),new t("/^Ice.Default.EncodingVersion/",!1,null),new t("/^Ice.Default.EndpointSelection/",!1,null),new t("/^Ice.Default.Host/",!1,null),new t("/^Ice.Default.Locator.EndpointSelection/",!1,null),new t("/^Ice.Default.Locator.ConnectionCached/",!1,null),new t("/^Ice.Default.Locator.PreferSecure/",!1,null),new t("/^Ice.Default.Locator.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.Locator.InvocationTimeout/",!1,null),new t("/^Ice.Default.Locator.Locator/",!1,null),new t("/^Ice.Default.Locator.Router/",!1,null),new t("/^Ice.Default.Locator.CollocationOptimized/",!1,null),new t("/^Ice.Default.Locator.Context../",!1,null),new t("/^Ice.Default.Locator/",!1,null),new t("/^Ice.Default.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.InvocationTimeout/",!1,null),new t("/^Ice.Default.Package/",!1,null),new t("/^Ice.Default.PreferSecure/",!1,null),new t("/^Ice.Default.Protocol/",!1,null),new t("/^Ice.Default.Router.EndpointSelection/",!1,null),new t("/^Ice.Default.Router.ConnectionCached/",!1,null),new t("/^Ice.Default.Router.PreferSecure/",!1,null),new t("/^Ice.Default.Router.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.Router.InvocationTimeout/",!1,null),new t("/^Ice.Default.Router.Locator/",!1,null),new t("/^Ice.Default.Router.Router/",!1,null),new t("/^Ice.Default.Router.CollocationOptimized/",!1,null),new t("/^Ice.Default.Router.Context../",!1,null),new t("/^Ice.Default.Router/",!1,null),new t("/^Ice.Default.SlicedFormat/",!1,null),new t("/^Ice.Default.SourceAddress/",!1,null),new t("/^Ice.Default.Timeout/",!1,null),new t("/^Ice.EventLog.Source/",!1,null),new t("/^Ice.FactoryAssemblies/",!1,null),new t("/^Ice.HTTPProxyHost/",!1,null),new t("/^Ice.HTTPProxyPort/",!1,null),new t("/^Ice.ImplicitContext/",!1,null),new t("/^Ice.InitPlugins/",!1,null),new t("/^Ice.IPv4/",!1,null),new t("/^Ice.IPv6/",!1,null),new t("/^Ice.LogFile/",!1,null),new t("/^Ice.LogStdErr.Convert/",!1,null),new t("/^Ice.MessageSizeMax/",!1,null),new t("/^Ice.Nohup/",!1,null),new t("/^Ice.NullHandleAbort/",!1,null),new t("/^Ice.Override.CloseTimeout/",!1,null),new t("/^Ice.Override.Compress/",!1,null),new t("/^Ice.Override.ConnectTimeout/",!1,null),new t("/^Ice.Override.Timeout/",!1,null),new t("/^Ice.Override.Secure/",!1,null),new t("/^Ice.Package../",!1,null),new t("/^Ice.Plugin../",!1,null),new t("/^Ice.PluginLoadOrder/",!1,null),new t("/^Ice.PreferIPv6Address/",!1,null),new t("/^Ice.PrintAdapterReady/",!1,null),new t("/^Ice.PrintProcessId/",!1,null),new t("/^Ice.PrintStackTraces/",!1,null),new t("/^Ice.ProgramName/",!1,null),new t("/^Ice.RetryIntervals/",!1,null),new t("/^Ice.ServerIdleTime/",!1,null),new t("/^Ice.SOCKSProxyHost/",!1,null),new t("/^Ice.SOCKSProxyPort/",!1,null),new t("/^Ice.StdErr/",!1,null),new t("/^Ice.StdOut/",!1,null),new t("/^Ice.SyslogFacility/",!1,null),new t("/^Ice.ThreadPool.Client.Size/",!1,null),new t("/^Ice.ThreadPool.Client.SizeMax/",!1,null),new t("/^Ice.ThreadPool.Client.SizeWarn/",!1,null),new t("/^Ice.ThreadPool.Client.StackSize/",!1,null),new t("/^Ice.ThreadPool.Client.Serialize/",!1,null),new t("/^Ice.ThreadPool.Client.ThreadIdleTime/",!1,null),new t("/^Ice.ThreadPool.Client.ThreadPriority/",!1,null),new t("/^Ice.ThreadPool.Server.Size/",!1,null),new t("/^Ice.ThreadPool.Server.SizeMax/",!1,null),new t("/^Ice.ThreadPool.Server.SizeWarn/",!1,null),new t("/^Ice.ThreadPool.Server.StackSize/",!1,null),new t("/^Ice.ThreadPool.Server.Serialize/",!1,null),new t("/^Ice.ThreadPool.Server.ThreadIdleTime/",!1,null),new t("/^Ice.ThreadPool.Server.ThreadPriority/",!1,null),new t("/^Ice.ThreadPriority/",!1,null),new t("/^Ice.Trace.Admin.Properties/",!1,null),new t("/^Ice.Trace.Admin.Logger/",!1,null),new t("/^Ice.Trace.Locator/",!1,null),new t("/^Ice.Trace.Network/",!1,null),new t("/^Ice.Trace.Protocol/",!1,null),new t("/^Ice.Trace.Retry/",!1,null),new t("/^Ice.Trace.Slicing/",!1,null),new t("/^Ice.Trace.ThreadPool/",!1,null),new t("/^Ice.UDP.RcvSize/",!1,null),new t("/^Ice.UDP.SndSize/",!1,null),new t("/^Ice.TCP.Backlog/",!1,null),new t("/^Ice.TCP.RcvSize/",!1,null),new t("/^Ice.TCP.SndSize/",!1,null),new t("/^Ice.UseApplicationClassLoader/",!1,null),new t("/^Ice.UseSyslog/",!1,null),new t("/^Ice.Warn.AMICallback/",!1,null),new t("/^Ice.Warn.Connections/",!1,null),new t("/^Ice.Warn.Datagrams/",!1,null),new t("/^Ice.Warn.Dispatch/",!1,null),new t("/^Ice.Warn.Endpoints/",!1,null),new t("/^Ice.Warn.UnknownProperties/",!1,null),new t("/^Ice.Warn.UnusedProperties/",!1,null),new t("/^Ice.CacheMessageBuffers/",!1,null),new t("/^Ice.ThreadInterruptSafe/",!1,null),new t("/^Ice.Voip/",!1,null)],e.validProps=[e.IceProps],e.clPropNames=["Ice"],Ice.PropertyNames=e}(),u=Ice.HashMap,h=Ice.AlreadyRegisteredException,f=Ice.NotRegisteredException,p=Ice.Class({__init__:function(){this._factoryMap=new u},add:function(e,t){var i;if(void 0!==this._factoryMap.get(t))throw(i=new h).id=t,i.kindOfObject="object factory",i;this._factoryMap.set(t,e)},remove:function(e){var t,i;if(void 0===(t=this._factoryMap.get(e)))throw(i=new f).id=e,i.kindOfObject="object factory",i;this._factoryMap.del(e),t.destroy()},find:function(e){return this._factoryMap.get(e)},destroy:function(){var e=this._factoryMap.entries;for(this._factoryMap=new u;null!==e;)e.value.destroy(),e=e.next}}),Ice.ObjectFactoryManager=p,function(){var e=Ice.Promise,t=Ice.Class(e,{__init__:function(t,i,n,r,o){e.call(this),void 0!==t&&(this._communicator=t,this._instance=null!==t?t.instance:null,this._operation=i,this._connection=n,this._proxy=r,this._adapter=o)}}),i=t.prototype,n=Object.defineProperty;n(i,"communicator",{get:function(){return this._communicator}}),n(i,"connection",{get:function(){return this._connection}}),n(i,"proxy",{get:function(){return this._proxy}}),n(i,"adapter",{get:function(){return this._adapter}}),n(i,"operation",{get:function(){return this._operation}}),Ice.AsyncResultBase=t}(),N.defineDictionary(Ice,"Context","ContextHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.OperationMode=N.defineEnum([["Normal",0],["Nonmutating",1],["Idempotent",2]]),Ice.Current=N.defineStruct((function(e,t,i,n,r,o,s,a,c){this.adapter=void 0!==e?e:null,this.con=void 0!==t?t:null,this.id=void 0!==i?i:new Ice.Identity,this.facet=void 0!==n?n:"",this.operation=void 0!==r?r:"",this.mode=void 0!==o?o:Ice.OperationMode.Normal,this.ctx=void 0!==s?s:null,this.requestId=void 0!==a?a:0,this.encoding=void 0!==c?c:new Ice.EncodingVersion}),!1),Ice.ObjectFactory=Ice.Class({create:function(e){throw new Error("not implemented")},destroy:function(){throw new Error("not implemented")}}),_=Ice.Class(Error,{__init__:function(e){e instanceof Ice.LocalException?this._ex=e:(Ice.Debug.assert(e instanceof _),this._ex=e._ex)}}),C=_.prototype,Object.defineProperty(C,"inner",{get:function(){return this._ex}}),Ice.RetryException=_,Ice.EndpointSelectionType=N.defineEnum([["Random",0],["Ordered",1]]),function(){Ice.Promise;var e=Ice.ReferenceMode,t=Ice.Class({__init__:function(t,i,n){this._reference=t,this._response=t.getMode()==e.ModeTwoway,this._connection=i,this._compress=n},update:function(e,t){try{if(e===this)return t;if(e.getConnection()===this._connection)return t}catch(e){}return this},sendAsyncRequest:function(e){return e.__invokeRemote(this._connection,this._compress,this._response)},asyncRequestCanceled:function(e){return this._connection.asyncRequestCanceled(e)},getReference:function(){return this._reference},getConnection:function(){return this._connection}});Ice.ConnectionRequestHandler=t}(),function(){var e=Ice.Debug,t=Ice.HashMap,i=Ice.Protocol,n=Ice.StringUtil,r=Ice.OperationMode,o=Ice.Identity,s={traceSend:function(e,t,i){if(i.protocol>=1){var n=e.pos;e.pos=0;var r=[],o=l(r,e);t.trace(i.protocolCat,"sending "+d(o)+" "+r.join("")),e.pos=n}},traceRecv:function(e,t,i){if(i.protocol>=1){var n=e.pos;e.pos=0;var r=[],o=l(r,e);t.trace(i.protocolCat,"received "+d(o)+" "+r.join("")),e.pos=n}},trace:function(e,t,i,n){if(n.protocol>=1){var r=t.pos;t.pos=0;var o=[];o.push(e),l(o,t),i.trace(n.protocolCat,o.join("")),t.pos=r}}};new t;function a(e,t){var i=new o;i.__read(t),e.push("\nidentity = "+t.instance.identityToString(i));var r=Ice.StringSeqHelper.read(t);e.push("\nfacet = "),r.length>0&&e.push(n.escapeString(r[0],""));var s=t.readString();e.push("\noperation = "+s)}function c(e,t){a(e,t);var i=t.readByte();switch(e.push("\nmode = "+i+" "),r.valueOf(i)){case r.Normal:e.push("(normal)");break;case r.Nonmutating:e.push("(nonmutating)");break;case r.Idempotent:e.push("(idempotent)");break;default:e.push("(unknown)")}var n=t.readSize();for(e.push("\ncontext = ");n-- >0;){var o=t.readString(),s=t.readString();e.push(o+"/"+s),n>0&&e.push(", ")}var c=t.skipEncaps();c.equals(Ice.Encoding_1_0)||(e.push("\nencoding = "),e.push(Ice.encodingVersionToString(c)))}function l(t,n){var r=function(e,t){t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte();var i=t.readByte();e.push("\nmessage type = "+i+" ("+d(i)+")");var n=t.readByte();switch(e.push("\ncompression status = "+n+" "),n){case 0:e.push("(not compressed; do not compress response, if any)");break;case 1:e.push("(not compressed; compress response, if any)");break;case 2:e.push("(compressed; compress response, if any)");break;default:e.push("(unknown)")}var r=t.readInt();return e.push("\nmessage size = "+r),i}(t,n);switch(r){case i.closeConnectionMsg:case i.validateConnectionMsg:break;case i.requestMsg:!function(e,t){var i=t.readInt();e.push("\nrequest id = "+i),0===i&&e.push(" (oneway)"),c(e,t)}(t,n);break;case i.requestBatchMsg:!function(e,t){var i=t.readInt();e.push("\nnumber of requests = "+i);for(var n=0;n<i;++n)e.push("\nrequest #"+n+":"),c(e,t)}(t,n);break;case i.replyMsg:!function(t,n){var r=n.readInt();t.push("\nrequest id = "+r);var o=n.readByte();switch(t.push("\nreply status = "+o+" "),o){case i.replyOK:t.push("(ok)");break;case i.replyUserException:t.push("(user exception)");break;case i.replyObjectNotExist:case i.replyFacetNotExist:case i.replyOperationNotExist:switch(o){case i.replyObjectNotExist:t.push("(object not exist)");break;case i.replyFacetNotExist:t.push("(facet not exist)");break;case i.replyOperationNotExist:t.push("(operation not exist)");break;default:e.assert(!1)}a(t,n);break;case i.replyUnknownException:case i.replyUnknownLocalException:case i.replyUnknownUserException:switch(o){case i.replyUnknownException:t.push("(unknown exception)");break;case i.replyUnknownLocalException:t.push("(unknown local exception)");break;case i.replyUnknownUserException:t.push("(unknown user exception)");break;default:e.assert(!1)}var s=n.readString();t.push("\nunknown = "+s);break;default:t.push("(unknown)")}if(o===i.replyOK||o===i.replyUserException){var c=n.skipEncaps();c.equals(Ice.Encoding_1_0)||(t.push("\nencoding = "),t.push(Ice.encodingVersionToString(c)))}}(t,n)}return r}function d(e){switch(e){case i.requestMsg:return"request";case i.requestBatchMsg:return"batch request";case i.replyMsg:return"reply";case i.closeConnectionMsg:return"close connection";case i.validateConnectionMsg:return"validate connection";default:return"unknown"}}s.dumpStream=function(e){var t=e.pos;e.pos=0;var i=e.readBlob(e.size());s.dumpOctets(i),e.pos=t},s.dumpOctets=function(e){for(var t=[],i=0;i<e.length;i+=8){var n;for(n=i;n-i<8;n++)if(n<e.length){var r,o=e[n];o<0&&(o+=256),r=o<10?"  "+o:o<100?" "+o:""+o,t.push(r+" ")}else t.push("    ");for(t.push('"'),n=i;n<e.length&&n-i<8;n++)e[n]>=32&&e[n]<127?t.push(String.fromCharCode(e[n])):t.push(".");t.push('"\n')}console.crlog&&console.crlog(t.join(""))},Ice.TraceUtil=s}(),function(){var e=Ice.Logger,t=null;Ice.getProcessLogger=function(){return null===t&&(t=new e("","")),t},Ice.setProcessLogger=function(e){t=e}}(),g=Ice.UnexpectedObjectException,m=Ice.MemoryLimitException,Ice.ExUtil={throwUOE:function(e,t){var i=t.ice_id();throw new g("expected element of type `"+e+"' but received '"+i,i,e)},throwMemoryLimitException:function(e,t){throw new m("requested "+e+" bytes, maximum allowed is "+t+" bytes (see Ice.MessageSizeMax)")}},function(){var e=Ice.StringUtil,t=Ice.HashMap,i=(Ice.Promise,Ice.PropertyNames),n=Ice.Debug,r=(Ice.ProcessLogger,Ice.getProcessLogger),o=Ice.InitializationException,s=Ice.Class({__init__:function(e,i){if(this._properties=new t,null!=i)for(var n=i._properties.entries;null!==n;n=n.next)this._properties.set(n.key,{value:n.value.value,used:!1});if(null!=e){var r=this.parseIceCommandLineOptions(e);e.length=0;for(var o=0;o<r.length;++o)e.push(r[o])}},getProperty:function(e){return this.getPropertyWithDefault(e,"")},getPropertyWithDefault:function(e,t){var i=this._properties.get(e);return void 0!==i?(i.used=!0,i.value):t},getPropertyAsInt:function(e){return this.getPropertyAsIntWithDefault(e,0)},getPropertyAsIntWithDefault:function(e,t){var i=this._properties.get(e);return void 0!==i?(i.used=!0,parseInt(i.value)):t},getPropertyAsList:function(e){return this.getPropertyAsListWithDefault(e,0)},getPropertyAsListWithDefault:function(t,i){null==i&&(i=[]);var n=this._properties.get(t);if(void 0!==n){n.used=!0;var o=e.splitString(n.value,", \t\r\n");return null===o?(r().warning("mismatched quotes in property "+t+"'s value, returning default value"),i):(0===o.length&&(o=i),o)}return i},getPropertiesForPrefix:function(e){for(var i=new t,n=this._properties.entries;null!==n;n=n.next)null!=e&&0!==n.key.indexOf(e)||(n.value.used=!0,i.set(n.key,n.value.value));return i},setProperty:function(e,t){null!=e&&(e=e.trim());var s=r();if(null==e||0===e.length)throw new o("Attempt to set property with empty key");var a=e.indexOf(".");if(-1!==a)for(var c=e.substr(0,a),l=0;l<i.validProps.length;++l){var d=i.validProps[l][0].pattern;if(a=d.indexOf("."),n.assert(-1!=a),d.substring(0,a-1)==c){for(var u,h=!1,f=!1,p=0;p<i.validProps[l][p].length&&!h;++p){d=i.validProps[l][p].pattern();var _=new RegExp(d);if((h=_.test(e))&&i.validProps[l][p].deprecated&&(s.warning("deprecated property: "+e),null!==i.validProps[l][p].deprecatedBy&&(e=i.validProps[l][p].deprecatedBy)),h)break;if(h=(_=new RegExp(d.toUpperCase())).test(e.toUpperCase())){f=!0,u=(u=(u=d.substr(2)).substr(0,u.length-1)).replace(/\\/g,"");break}}h?f&&s.warning("unknown property: `"+e+"'; did you mean `"+u+"'"):s.warning("unknown property: "+e)}}if(null!=t&&t.length>0){var C=this._properties.get(e);void 0!==C?C.value=t:this._properties.set(e,{value:t,used:!1})}else this._properties.del(e)},getCommandLineOptions:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)e.push("--"+t.key+"="+t.pv.value);return e},parseCommandLineOptions:function(e,t){e.length>0&&"."!=e.charAt(e.length-1)&&(e+="."),e="--"+e;var i=[],n=this;return t.forEach((function(t){0===t.indexOf(e)?(-1===t.indexOf("=")&&(t+="=1"),n.parseLine(t.substring(2))):i.push(t)})),i},parseIceCommandLineOptions:function(e){for(var t=e.slice(),n=0;n<i.clPropNames.length;++n)t=this.parseCommandLineOptions(i.clPropNames[n],t);return t},parse:function(e){for(var t,i=e.match(/[^\r\n]+/g);t=i.shift();)this.parseLine(t)},parseLine:function(e){for(var t="",i="",n=0,o="",s="",a=!1,c=0;c<e.length;++c){var l=e.charAt(c);switch(n){case 0:switch(l){case"\\":if(c<e.length-1)switch(l=e.charAt(++c)){case"\\":case"#":case"=":t+=o,o="",t+=l;break;case" ":0!==t.length&&(o+=l);break;default:t+=o,o="",t+="\\",t+=l}else t+=o,t+=l;break;case" ":case"\t":case"\r":case"\n":0!==t.length&&(o+=l);break;case"=":o="",n=1;break;case"#":a=!0;break;default:t+=o,o="",t+=l}break;case 1:switch(l){case"\\":if(c<e.length-1)switch(l=e.charAt(++c)){case"\\":case"#":case"=":i+=0===i.length?s:o,o="",s="",i+=l;break;case" ":o+=l,s+=l;break;default:i+=0===i.length?s:o,o="",s="",i+="\\",i+=l}else i+=0===i.length?s:o,i+=l;break;case" ":case"\t":case"\r":case"\n":0!==i.length&&(o+=l);break;case"#":a=!0;break;default:i+=0===i.length?s:o,o="",s="",i+=l}}if(a)break}i+=s,0===n&&0!==t.length||1==n&&0===t.length?r().warning('invalid config file entry: "'+e+'"'):0!==t.length&&this.setProperty(t,i)},clone:function(){return new s(null,this)},getUnusedProperties:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)t.pv.used||e.push(t.key);return e}});s.createProperties=function(e,t){return new s(e,t)},Ice.Properties=s}(),function(){var e=Ice.Debug,t=Ice.HashMap,i=Ice.StringUtil,n=Ice.Class({__init__:function(e,i){this._instance=e,this._adapterName=i,this._servantMapMap=new t(t.compareEquals),this._defaultServantMap=new t,this._locatorMap=new t},addServant:function(n,r,o){e.assert(null!==this._instance),null===o&&(o="");var s=this._servantMapMap.get(r);if(void 0===s)s=new t,this._servantMapMap.set(r,s);else if(s.has(o)){var a=new Ice.AlreadyRegisteredException;throw a.id=this._instance.identityToString(r),a.kindOfObject="servant",o.length>0&&(a.id+=" -f "+i.escapeString(o,"")),a}s.set(o,n)},addDefaultServant:function(t,i){if(e.assert(null!==this._instance),void 0!==this._defaultServantMap.get(i)){var n=new Ice.AlreadyRegisteredException;throw n.kindOfObject="default servant",n.id=i,n}this._defaultServantMap.set(i,t)},removeServant:function(t,n){e.assert(null!==this._instance),null===n&&(n="");var r=this._servantMapMap.get(t);if(void 0===r||!r.has(n)){var o=new Ice.NotRegisteredException;throw o.id=this._instance.identityToString(t),o.kindOfObject="servant",n.length>0&&(o.id+=" -f "+i.escapeString(n,"")),o}var s=r.get(n);return r.del(n),0===r.size&&this._servantMapMap.del(t),s},removeDefaultServant:function(t){e.assert(null!==this._instance);var i=this._defaultServantMap.get(t);if(void 0===i){var n=new Ice.NotRegisteredException;throw n.kindOfObject="default servant",n.id=t,n}return this._defaultServantMap.del(t),i},removeAllFacets:function(t){e.assert(null!==this._instance);var i=this._servantMapMap.get(t);if(void 0===i){var n=new Ice.NotRegisteredException;throw n.id=this._instance.identityToString(t),n.kindOfObject="servant",n}return this._servantMapMap.del(t),i},findServant:function(e,t){null===t&&(t="");var i=this._servantMapMap.get(e),n=null;return void 0===i?void 0===(n=this._defaultServantMap.get(e.category))&&(n=this._defaultServantMap.get("")):n=i.get(t),void 0===n?null:n},findDefaultServant:function(t){e.assert(null!==this._instance);var i=this._defaultServantMap.get(t);return void 0===i?null:i},findAllFacets:function(i){e.assert(null!==this._instance);var n=this._servantMapMap.get(i);return void 0!==n?n.clone():new t},hasServant:function(t){var i=this._servantMapMap.get(t);return void 0!==i&&(e.assert(i.size>0),!0)},addServantLocator:function(t,n){if(e.assert(null!==this._instance),void 0!==this._locatorMap.get(n)){var r=new Ice.AlreadyRegisteredException;throw r.id=i.escapeString(n,""),r.kindOfObject="servant locator",r}this._locatorMap.set(n,t)},removeServantLocator:function(t){e.assert(null!==this._instance);var n=this._locatorMap.get(t);if(void 0===n){var r=new Ice.NotRegisteredException;throw r.id=i.escapeString(t,""),r.kindOfObject="servant locator",r}return this._locatorMap.del(t),n},findServantLocator:function(e){var t=this._locatorMap.get(e);return void 0===t?null:t},destroy:function(){e.assert(null!==this._instance);var t=this._instance.initializationData().logger;this._servantMapMap.clear(),this._defaultServantMap.clear();var i=this._locatorMap.clone();this._locatorMap.clear(),this._instance=null;for(var n=i.entries;null!==n;n=n.next){var r=n.value;try{r.deactivate(n.key)}catch(e){var o="exception during locator deactivation:\nobject adapter: `"+this._adapterName+"'\nlocator category: `"+n.key+"'\n"+e.toString();t.error(o)}}}});Ice.ServantManager=n}(),function(){var e=Ice.__M,t=Ice.Debug,i=Ice.ExUtil,n=Ice.FormatType,r=Ice.HashMap,o=Ice.Object,s=Ice.OptionalFormat,a=Ice.Protocol,c=Ice.TraceUtil,l=Ice.ArrayUtil,d=Ice.SlicedData,u={NoSlice:0,ObjectSlice:1,ExceptionSlice:2};Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&isNaN(e)};var h=function(e,t){this.index=e,this.patcher=t},f=Ice.Class,p=f({__init__:function(e,t,i,n){this._stream=e,this._encaps=t,this._sliceObjects=i,this._servantFactoryManager=n,this._patchMap=null,this._unmarshaledMap=new r,this._typeIdMap=null,this._typeIdIndex=0,this._objectList=null},readOpt:function(){return!1},readPendingObjects:function(){},readTypeId:function(e){var t,i;if(null===this._typeIdMap&&(this._typeIdMap=new r),e){if(i=this._stream.readSize(),void 0===(t=this._typeIdMap.get(i)))throw new Ice.UnmarshalOutOfBoundsException}else t=this._stream.readString(),this._typeIdMap.set(++this._typeIdIndex,t);return t},newInstance:function(e){var t=this._servantFactoryManager.find(e),i=null;return void 0!==t&&(i=t.create(e)),null==i&&void 0!==(t=this._servantFactoryManager.find(""))&&(i=t.create(e)),null==i&&(i=this._stream.createObject(e)),i},addPatchEntry:function(e,i){t.assert(e>0);var n=this._unmarshaledMap.get(e);if(null==n){null===this._patchMap&&(this._patchMap=new r);var o=this._patchMap.get(e);void 0===o&&(o=[],this._patchMap.set(e,o)),o.push(i)}else i.call(null,n)},unmarshal:function(e,i){var n,r,o;if(this._unmarshaledMap.set(e,i),i.__read(this._stream),null!==this._patchMap&&void 0!==(o=this._patchMap.get(e))){for(t.assert(o.length>0),n=0,r=o.length;n<r;++n)o[n](i);this._patchMap.del(e)}if(null!==this._patchMap&&0!==this._patchMap.size||null!==this._objectList){if(null===this._objectList&&(this._objectList=[]),this._objectList.push(i),null===this._patchMap||0===this._patchMap.size){for(n=0,r=this._objectList.length;n<r;n++)try{this._objectList[n].ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}this._objectList=[]}}else try{i.ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}}}),_=f(p,{__init__:function(e,t,i,n){p.call(this,e,t,i,n),this._sliceType=u.NoSlice},readObject:function(e){t.assert(null!==e);var i=this._stream.readInt();if(i>0)throw new Ice.MarshalException("invalid object id");0===(i=-i)?e.call(null,null):this.addPatchEntry(i,e)},throwException:function(){t.assert(this._sliceType===u.NoSlice);var e=this._stream.readBool();this._sliceType=u.ExceptionSlice,this._skipFirstSlice=!1,this.startSlice();for(var i=this._typeId;;){var n=this._stream.createUserException(this._typeId);if(null!==n)throw n.__read(this._stream),e&&this.readPendingObjects(),n;this.skipSlice();try{this.startSlice()}catch(e){throw e instanceof Ice.UnmarshalOutOfBoundsException&&(e.reason="unknown exception type `"+i+"'"),e}}},startInstance:function(e){t.assert(this._sliceType===e),this._skipFirstSlice=!0},endInstance:function(){if(this._sliceType===u.ObjectSlice){if(this.startSlice(),0!==this._stream.readSize())throw new Ice.MarshalException("invalid Object slice");this.endSlice()}return this._sliceType=u.NoSlice,null},startSlice:function(){var e;if(this._skipFirstSlice)return this._skipFirstSlice=!1,this._typeId;if(this._sliceType===u.ObjectSlice?(e=this._stream.readBool(),this._typeId=this.readTypeId(e)):this._typeId=this._stream.readString(),this._sliceSize=this._stream.readInt(),this._sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException;return this._typeId},endSlice:function(){},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger;this._sliceType===u.ObjectSlice?c.traceSlicing("object",this._typeId,this._stream.instance.traceLevels().slicingCat,e):c.traceSlicing("exception",this._typeId,this._stream.instance.traceLevels().slicingCat,e)}t.assert(this._sliceSize>=4),this._stream.skip(this._sliceSize-4)},readPendingObjects:function(){var e,t;do{for(e=t=this._stream.readSize();e>0;--e)this.readInstance()}while(t>0);if(null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance")},readInstance:function(){var e,t=this._stream.readInt(),i=null;if(t<=0)throw new Ice.MarshalException("invalid object id");for(this._sliceType=u.ObjectSlice,this._skipFirstSlice=!1,this.startSlice(),e=this._typeId;;){if(this._typeId==o.ice_staticId())throw new Ice.NoObjectFactoryException("",e);if(i=this.newInstance(this._typeId))break;if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._typeId);this.skipSlice(),this.startSlice()}this.unmarshal(t,i)}}),C=f(p,{__init__:function(e,t,i,n){p.call(this,e,t,i,n),this._current=null,this._objectIdIndex=1},readObject:function(e){t.assert(void 0!==e);var i=this._stream.readSize();if(i<0)throw new Ice.MarshalException("invalid object id");if(0===i)null!==e&&e.call(null,null);else if(null!==this._current&&0!=(8&this._current.sliceFlags)){if(null!==e){null===this._current.indirectPatchList&&(this._current.indirectPatchList=[]);var n=new h;n.index=i-1,n.patcher=e,this._current.indirectPatchList.push(n)}}else this.readInstance(i,e)},throwException:function(){t.assert(null===this._current),this.push(u.ExceptionSlice),this.startSlice();for(var e=this._current.typeId;;){var i=this._stream.createUserException(this._current.typeId);if(null!==i)throw i.__read(this._stream),i;if(this.skipSlice(),0!=(32&this._current.sliceFlags)){if(0===e.indexOf("::"))throw new Ice.UnknownUserException(e.substr(2));throw new Ice.UnknownUserException(e)}this.startSlice()}},startInstance:function(e){t.assert(void 0!==e),t.assert(null!==this._current.sliceType&&this._current.sliceType===e),this._current.skipFirstSlice=!0},endInstance:function(e){var t=null;return e&&(t=this.readSlicedData()),null!==this._current.slices&&(this._current.slices.length=0,this._current.indirectionTables.length=0),this._current=this._current.previous,t},startSlice:function(){if(this._current.skipFirstSlice)return this._current.skipFirstSlice=!1,this._current.typeId;if(this._current.sliceFlags=this._stream.readByte(),this._current.sliceType===u.ObjectSlice?3==(3&this._current.sliceFlags)?(this._current.typeId="",this._current.compactId=this._stream.readSize()):0!=(3&this._current.sliceFlags)?(this._current.typeId=this.readTypeId(0!=(2&this._current.sliceFlags)),this._current.compactId=-1):(this._current.typeId="",this._current.compactId=-1):(this._current.typeId=this._stream.readString(),this._current.compactId=-1),0!=(16&this._current.sliceFlags)){if(this._current.sliceSize=this._stream.readInt(),this._current.sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException}else this._current.sliceSize=0;return this._current.typeId},endSlice:function(){var e,i,n,r=[];if(0!=(4&this._current.sliceFlags)&&this._stream.skipOpts(),0!=(8&this._current.sliceFlags)){for(n=this._stream.readAndCheckSeqSize(1),i=0;i<n;++i)r[i]=this.readInstance(this._stream.readSize(),null);if(0===r.length)throw new Ice.MarshalException("empty indirection table");if((null===this._current.indirectPatchList||0===this._current.indirectPatchList.length)&&0==(4&this._current.sliceFlags))throw new Ice.MarshalException("no references to indirection table");if(null!==this._current.indirectPatchList){for(i=0,n=this._current.indirectPatchList.length;i<n;++i){if(e=this._current.indirectPatchList[i],t.assert(e.index>=0),e.index>=r.length)throw new Ice.MarshalException("indirection out of range");this.addPatchEntry(r[e.index],e.patcher)}this._current.indirectPatchList.length=0}}},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger,i=this._stream.instance.traceLevels().slicingCat;this._current.sliceType===u.ExceptionSlice?c.traceSlicing("exception",this._current.typeId,i,e):c.traceSlicing("object",this._current.typeId,i,e)}var n=this._stream.pos;if(0==(16&this._current.sliceFlags)){if(this._current.sliceType===u.ObjectSlice)throw new Ice.NoObjectFactoryException("no object factory found and compact format prevents slicing (the sender should use the sliced format instead)",this._current.typeId);if(0===this._current.typeId.indexOf("::"))throw new Ice.UnknownUserException(this._current.typeId.substring(2));throw new Ice.UnknownUserException(this._current.typeId)}t.assert(this._current.sliceSize>=4),this._stream.skip(this._current.sliceSize-4);var r=new Ice.SliceInfo;r.typeId=this._current.typeId,r.compactId=this._current.compactId,r.hasOptionalMembers=0!=(4&this._current.sliceFlags),r.isLastSlice=0!=(32&this._current.sliceFlags);var o=this._stream._buf,s=o.position,a=s;if(r.hasOptionalMembers&&--a,o.position=n,r.bytes=o.getArray(a-n),o.position=s,null===this._current.slices&&(this._current.slices=[],this._current.indirectionTables=[]),0!=(8&this._current.sliceFlags)){for(var l=this._stream.readAndCheckSeqSize(1),d=[],h=0;h<l;++h)d[h]=this.readInstance(this._stream.readSize(),null);this._current.indirectionTables.push(d)}else this._current.indirectionTables.push(null);this._current.slices.push(r)},readOpt:function(e,t){return(null===this._current||0!=(4&this._current.sliceFlags))&&this._stream.readOptImpl(e,t)},readInstance:function(e,i){t.assert(e>0);var n,r=null;if(e>1)return null!==i&&this.addPatchEntry(e,i),e;for(this.push(u.ObjectSlice),e=++this._objectIdIndex,this.startSlice(),n=this._current.typeId;this._current.compactId>=0&&(this._current.typeId="",0===this._current.typeId.length&&(this._current.typeId=this._stream.getTypeId(this._current.compactId))),!(this._current.typeId.length>0&&null!=(r=this.newInstance(this._current.typeId)));){if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._current.typeId);if(this.skipSlice(),0!=(32&this._current.sliceFlags)){r=new Ice.UnknownSlicedObject(n);break}this.startSlice()}if(this.unmarshal(e,r),null===this._current&&null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance");return null!==i&&i.call(null,r),e},readSlicedData:function(){var e,i,n,r,s,a;if(null===this._current.slices)return null;for(t.assert(this._current.slices.length===this._current.indirectionTables.length),e=0,i=this._current.slices.length;e<i;++e)for(n=this._current.indirectionTables[e],(r=this._current.slices[e]).objects=[],a=n?n.length:0,s=0;s<a;++s)this.addPatchEntry(n[s],g(r.objects,s,o));return new d(l.clone(this._current.slices))},push:function(e){null===this._current?this._current=new C.InstanceData(null):this._current=this._current.next?this._current.next:new C.InstanceData(this._current),this._current.sliceType=e,this._current.skipFirstSlice=!1}});C.InstanceData=function(e){null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.skipFirstSlice=!1,this.slices=null,this.indirectionTables=null,this.sliceFlags=0,this.sliceSize=0,this.typeId=null,this.compactId=0,this.indirectPatchList=null};var g=function(e,t,n){return function(r){null===r||r instanceof n||i.throwUOE(n.ice_staticId(),r),e[t]=r}},m=f({__init__:function(e,t){this._stream=e,this._encaps=t,this._marshaledMap=new r,this._typeIdMap=null,this._typeIdIndex=0},writeOpt:function(){return!1},writePendingObjects:function(){},registerTypeId:function(e){null===this._typeIdMap&&(this._typeIdMap=new r);var t=this._typeIdMap.get(e);return void 0!==t?t:(this._typeIdMap.set(e,++this._typeIdIndex),-1)}}),R=f(m,{__init__:function(e,t){m.call(this,e,t),this._sliceType=u.NoSlice,this._writeSlice=0,this._objectIdIndex=0,this._toBeMarshaledMap=new r},writeObject:function(e){t.assert(void 0!==e),null!==e?this._stream.writeInt(-this.registerObject(e)):this._stream.writeInt(0)},writeUserException:function(e){t.assert(null!=e);var i=e.__usesClasses();this._stream.writeBool(i),e.__write(this._stream),i&&this.writePendingObjects()},startInstance:function(e){this._sliceType=e},endInstance:function(){this._sliceType===u.ObjectSlice&&(this.startSlice(o.ice_staticId(),-1,!0),this._stream.writeSize(0),this.endSlice()),this._sliceType=u.NoSlice},startSlice:function(e){if(this._sliceType===u.ObjectSlice){var t=this.registerTypeId(e);t<0?(this._stream.writeBool(!1),this._stream.writeString(e)):(this._stream.writeBool(!0),this._stream.writeSize(t))}else this._stream.writeString(e);this._stream.writeInt(0),this._writeSlice=this._stream.pos},endSlice:function(){var e=this._stream.pos-this._writeSlice+4;this._stream.rewriteInt(e,this._writeSlice-4)},writePendingObjects:function(){for(var e,t=this,i=function(e,i){t._stream.writeInt(i);try{e.ice_preMarshal()}catch(e){t._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}e.__write(t._stream)};this._toBeMarshaledMap.size>0;)this._marshaledMap.merge(this._toBeMarshaledMap),e=this._toBeMarshaledMap,this._toBeMarshaledMap=new r,this._stream.writeSize(e.size),e.forEach(i);this._stream.writeSize(0)},registerObject:function(e){t.assert(null!==e);var i=this._toBeMarshaledMap.get(e);return void 0!==i||void 0!==(i=this._marshaledMap.get(e))?i:(this._toBeMarshaledMap.set(e,++this._objectIdIndex),this._objectIdIndex)}}),S=f(m,{__init__:function(e,t){m.call(this,e,t),this._current=null,this._objectIdIndex=1},writeObject:function(e){var i,o;t.assert(void 0!==e),null===e?this._stream.writeSize(0):null!==this._current&&this._encaps.format===n.SlicedFormat?(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new r),void 0===(i=this._current.indirectionMap.get(e))?(this._current.indirectionTable.push(e),o=this._current.indirectionTable.length,this._current.indirectionMap.set(e,o),this._stream.writeSize(o)):this._stream.writeSize(i)):this.writeInstance(e)},writePendingObjects:function(){},writeUserException:function(e){t.assert(null!=e),e.__write(this._stream)},startInstance:function(e,t){null===this._current?this._current=new S.InstanceData(null):this._current=null===this._current.next?new S.InstanceData(this._current):this._current.next,this._current.sliceType=e,this._current.firstSlice=!0,null!=t&&this.writeSlicedData(t)},endInstance:function(){this._current=this._current.previous},startSlice:function(e,i,r){if(t.assert(!(null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length||null!==this._current.indirectionMap&&0!==this._current.indirectionMap.size)),this._current.sliceFlagsPos=this._stream.pos,this._current.sliceFlags=0,this._encaps.format===n.SlicedFormat&&(this._current.sliceFlags|=16),r&&(this._current.sliceFlags|=32),this._stream.writeByte(0),this._current.sliceType===u.ObjectSlice){if(this._encaps.format===n.SlicedFormat||this._current.firstSlice)if(i>=0)this._current.sliceFlags|=3,this._stream.writeSize(i);else{var o=this.registerTypeId(e);o<0?(this._current.sliceFlags|=1,this._stream.writeString(e)):(this._current.sliceFlags|=2,this._stream.writeSize(o))}}else this._stream.writeString(e);0!=(16&this._current.sliceFlags)&&this._stream.writeInt(0),this._current.writeSlice=this._stream.pos,this._current.firstSlice=!1},endSlice:function(){var e,i,r;if(0!=(4&this._current.sliceFlags)&&this._stream.writeByte(255),0!=(16&this._current.sliceFlags)&&(e=this._stream.pos-this._current.writeSlice+4,this._stream.rewriteInt(e,this._current.writeSlice-4)),null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length){for(t.assert(this._encaps.format===n.SlicedFormat),this._current.sliceFlags|=8,this._stream.writeSize(this._current.indirectionTable.length),i=0,r=this._current.indirectionTable.length;i<r;++i)this.writeInstance(this._current.indirectionTable[i]);this._current.indirectionTable.length=0,this._current.indirectionMap.clear()}this._stream.rewriteByte(this._current.sliceFlags,this._current.sliceFlagsPos)},writeOpt:function(e,t){return null===this._current?this._stream.writeOptImpl(e,t):!!this._stream.writeOptImpl(e,t)&&(this._current.sliceFlags|=4,!0)},writeSlicedData:function(e){var i,o,s,a,c;if(t.assert(null!=e),this._encaps.format===n.SlicedFormat)for(i=0,o=e.slices.length;i<o;++i){if(s=e.slices[i],this.startSlice(s.typeId,s.compactId,s.isLastSlice),this._stream.writeBlob(s.bytes),s.hasOptionalMembers&&(this._current.sliceFlags|=4),null!==s.objects&&s.objects.length>0)for(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new r),a=0,c=s.objects.length;a<c;++a)this._current.indirectionTable.push(s.objects[a]);this.endSlice()}},writeInstance:function(e){t.assert(null!=e);var i=this._marshaledMap.get(e);if(void 0===i){this._marshaledMap.set(e,++this._objectIdIndex);try{e.ice_preMarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}this._stream.writeSize(1),e.__write(this._stream)}else this._stream.writeSize(i)}});S.InstanceData=function(e){t.assert(void 0!==e),null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.firstSlice=!1,this.sliceFlags=0,this.writeSlice=0,this.sliceFlagsPos=0,this.indirectionTable=null,this.indirectionMap=null};var I=f({__init__:function(){this.start=0,this.sz=0,this.encoding=null,this.encoding_1_0=!1,this.decoder=null,this.next=null},reset:function(){this.decoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),y=f({__init__:function(){this.start=0,this.format=n.DefaultFormat,this.encoding=null,this.encoding_1_0=!1,this.encoder=null,this.next=null},reset:function(){this.encoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),v=f({__init__:function(e,t,i){this._instance=e,this._closure=null,this._encoding=t,this._readEncapsStack=null,this._writeEncapsStack=null,this._readEncapsCache=null,this._writeEncapsCache=null,this._sliceObjects=!0,this._startSeq=-1,this._sizePos=-1,this._buf=void 0!==i?new Ice.Buffer(i):new Ice.Buffer},reset:function(){this._buf.reset(),this.clear()},clear:function(){null!==this._readEncapsStack&&(t.assert(this._readEncapsStack.next),this._readEncapsStack.next=this._readEncapsCache,this._readEncapsCache=this._readEncapsStack,this._readEncapsCache.reset(),this._readEncapsStack=null),null!==this._writeEncapsStack&&(t.assert(this._writeEncapsStack.next),this._writeEncapsStack.next=this._writeEncapsCache,this._writeEncapsCache=this._writeEncapsStack,this._writeEncapsCache.reset(),this._writeEncapsStack=null),this._startSeq=-1,this._sliceObjects=!0},swap:function(e){var i,n,r,o,s;t.assert(this._instance===e._instance),i=e._buf,e._buf=this._buf,this._buf=i,n=e._closure,e._closure=this._closure,this._closure=n,this.resetEncaps(),e.resetEncaps(),r=e._startSeq,e._startSeq=this._startSeq,this._startSeq=r,o=e._minSeqSize,e._minSeqSize=this._minSeqSize,this._minSeqSize=o,s=e._sizePos,e._sizePos=this._sizePos,this._sizePos=s},resetEncaps:function(){this._readEncapsStack=null,this._writeEncapsStack=null},resize:function(e){this._buf.resize(e),this._buf.position=e},prepareWrite:function(){return this._buf.position=0,this._buf},startWriteObject:function(e){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startInstance(u.ObjectSlice,e)},endWriteObject:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endInstance()},startReadObject:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startInstance(u.ObjectSlice)},endReadObject:function(e){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endInstance(e)},startWriteException:function(e){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startInstance(u.ExceptionSlice,e)},endWriteException:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endInstance()},startReadException:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startInstance(u.ExceptionSlice)},endReadException:function(e){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endInstance(e)},startWriteEncaps:function(e,t){void 0===e&&(null!==this._writeEncapsStack?(e=this._writeEncapsStack.encoding,t=this._writeEncapsStack.format):(e=this._encoding,t=n.DefaultFormat)),a.checkSupportedEncoding(e);var i=this._writeEncapsCache;null!==i?(i.reset(),this._writeEncapsCache=this._writeEncapsCache.next):i=new y,i.next=this._writeEncapsStack,this._writeEncapsStack=i,this._writeEncapsStack.format=t,this._writeEncapsStack.setEncoding(e),this._writeEncapsStack.start=this._buf.limit,this.writeInt(0),this._writeEncapsStack.encoding.__write(this)},endWriteEncaps:function(){t.assert(this._writeEncapsStack);var e=this._writeEncapsStack.start,i=this._buf.limit-e;this._buf.putIntAt(e,i);var n=this._writeEncapsStack;this._writeEncapsStack=n.next,n.next=this._writeEncapsCache,this._writeEncapsCache=n,this._writeEncapsCache.reset()},endWriteEncapsChecked:function(){if(null===this._writeEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endWriteEncaps()},writeEmptyEncaps:function(e){a.checkSupportedEncoding(e),this.writeInt(6),e.__write(this)},writeEncaps:function(e){if(e.length<6)throw new Ice.EncapsulationException;this.expand(e.length),this._buf.putArray(e)},getWriteEncoding:function(){return null!==this._writeEncapsStack?this._writeEncapsStack.encoding:this._encoding},startReadEncaps:function(){var e=this._readEncapsCache;null!==e?(e.reset(),this._readEncapsCache=this._readEncapsCache.next):e=new I,e.next=this._readEncapsStack,this._readEncapsStack=e,this._readEncapsStack.start=this._buf.position;var t=this.readInt();if(t<6)throw new Ice.UnmarshalOutOfBoundsException;if(t-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._readEncapsStack.sz=t;var i=new Ice.EncodingVersion;return i.__read(this),a.checkSupportedEncoding(i),this._readEncapsStack.setEncoding(i),i},endReadEncaps:function(){if(t.assert(null!==this._readEncapsStack),this._readEncapsStack.encoding_1_0){if(this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz){if(this._buf.position+1!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;try{this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}}else if(this.skipOpts(),this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;var e=this._readEncapsStack;this._readEncapsStack=e.next,e.next=this._readEncapsCache,this._readEncapsCache=e,this._readEncapsCache.reset()},skipEmptyEncaps:function(e){if(t.assert(void 0!==e),6!==this.readInt())throw new Ice.EncapsulationException;var i=this._buf.position;if(i+2>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;null!==e?e.__read(this):this._buf.position=i+2},endReadEncapsChecked:function(){if(null===this._readEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endReadEncaps()},readEncaps:function(e){t.assert(void 0!==e);var i=this.readInt();if(i<6)throw new Ice.UnmarshalOutOfBoundsException;if(i-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;null!==e?(e.__read(this),this._buf.position=this._buf.position-6):this._buf.position=this._buf.position-4;try{return this._buf.getArray(i)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},getReadEncoding:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding:this._encoding},getReadEncapsSize:function(){return t.assert(null!==this._readEncapsStack),this._readEncapsStack.sz-6},skipEncaps:function(){var e=this.readInt();if(e<6)throw new Ice.UnmarshalOutOfBoundsException;var t=new Ice.EncodingVersion;t.__read(this);try{this._buf.position=this._buf.position+e-6}catch(e){throw new Ice.UnmarshalOutOfBoundsException}return t},startWriteSlice:function(e,i,n){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startSlice(e,i,n)},endWriteSlice:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endSlice()},startReadSlice:function(){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startSlice()},endReadSlice:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endSlice()},skipSlice:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.skipSlice()},readPendingObjects:function(){null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readPendingObjects():(null!==this._readEncapsStack&&this._readEncapsStack.encoding_1_0||null===this._readEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.skipSize()},writePendingObjects:function(){null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writePendingObjects():(null!==this._writeEncapsStack&&this._writeEncapsStack.encoding_1_0||null===this._writeEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.writeSize(0)},writeSize:function(e){e>254?(this.expand(5),this._buf.put(255),this._buf.putInt(e)):(this.expand(1),this._buf.put(e))},readSize:function(){try{var e=this._buf.get();if(255===e){var t=this._buf.getInt();if(t<0)throw new Ice.UnmarshalOutOfBoundsException;return t}return e}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},readAndCheckSeqSize:function(e){var t=this.readSize();if(0===t)return t;if(-1===this._startSeq||this._buf.position>this._startSeq+this._minSeqSize?(this._startSeq=this._buf.position,this._minSeqSize=t*e):this._minSeqSize+=t*e,this._startSeq+this._minSeqSize>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;return t},startSize:function(){var e=this._buf.position;return this.writeInt(0),e},endSize:function(e){t.assert(e>=0),this.rewriteInt(this._buf.position-e-4,e)},writeBlob:function(e){null!==e&&(this.expand(e.length),this._buf.putArray(e))},readBlob:function(e){if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getArray(e)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeOpt:function(e,i){return t.assert(null!==this._writeEncapsStack),null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writeOpt(e,i):this.writeOptImpl(e,i)},readOpt:function(e,i){return t.assert(null!==this._readEncapsStack),null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readOpt(e,i):this.readOptImpl(e,i)},writeOptValue:function(e,t,i,n){void 0!==n&&this.writeOpt(e,t)&&i.call(this,n)},readOptValue:function(e,t,i){return this.readOpt(e,t)?i.call(this):void 0},writeByte:function(e){this.expand(1),this._buf.put(e)},rewriteByte:function(e,t){this._buf.putAt(t,e)},readByte:function(){try{return this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeByteSeq:function(e){null===e||0===e.length?this.writeSize(0):(this.writeSize(e.length),this.expand(e.length),this._buf.putArray(e))},readByteSeq:function(){return this._buf.getArray(this.readAndCheckSeqSize(1))},writeBool:function(e){this.expand(1),this._buf.put(e?1:0)},rewriteBool:function(e,t){this._buf.putAt(t,e?1:0)},readBool:function(){try{return 1===this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeShort:function(e){this.expand(2),this._buf.putShort(e)},readShort:function(){try{return this._buf.getShort()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeInt:function(e){this.expand(4),this._buf.putInt(e)},rewriteInt:function(e,t){this._buf.putIntAt(t,e)},readInt:function(){try{return this._buf.getInt()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeLong:function(e){this.expand(8),this._buf.putLong(e)},readLong:function(){try{return this._buf.getLong()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeFloat:function(e){this.expand(4),this._buf.putFloat(e)},readFloat:function(){try{return this._buf.getFloat()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeDouble:function(e){this.expand(8),this._buf.putDouble(e)},readDouble:function(){try{return this._buf.getDouble()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeString:function(e){null==e||0===e.length?this.writeSize(0):this._buf.writeString(this,e)},readString:function(){var e=this.readSize();if(0===e)return"";if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getString(e)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeProxy:function(e){this._instance.proxyFactory().proxyToStream(e,this)},writeOptProxy:function(e,t){if(void 0!==t&&this.writeOpt(e,s.FSize)){var i=this.startSize();this.writeProxy(t),this.endSize(i)}},readProxy:function(e){return this._instance.proxyFactory().streamToProxy(this,e)},readOptProxy:function(e,t){return this.readOpt(e,s.FSize)?(this.skip(4),this.readProxy(t)):void 0},writeEnum:function(e){this.isWriteEncoding_1_0()?e.maxValue<127?this.writeByte(e.value):e.maxValue<32767?this.writeShort(e.value):this.writeInt(e.value):this.writeSize(e.value)},readEnum:function(e){var t;t=this.getReadEncoding().equals(Ice.Encoding_1_0)?e.maxValue<127?this.readByte():e.maxValue<32767?this.readShort():this.readInt():this.readSize();var i=e.valueOf(t);if(void 0===i)throw new Ice.MarshalException("enumerator value "+t+" is out of range");return i},readOptEnum:function(e,t){return this.readOpt(e,s.Size)?this.readEnum(t):void 0},writeObject:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeObject(e)},writeOptObject:function(e,t){void 0!==t&&this.writeOpt(e,s.Class)&&this.writeObject(t)},readObject:function(e,t){this.initReadEncaps(),this._readEncapsStack.decoder.readObject.call(this._readEncapsStack.decoder,(function(n){null===n||n.ice_instanceof(t)||i.throwUOE(t.ice_staticId(),n),e(n)}))},readOptObject:function(e,t,i){this.readOpt(e,s.Class)?this.readObject(t,i):t(void 0)},writeUserException:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeUserException(e)},throwException:function(){this.initReadEncaps(),this._readEncapsStack.decoder.throwException()},sliceObjects:function(e){this._sliceObjects=e},readOptImpl:function(e,t){var i,n,r,o;if(this.isReadEncoding_1_0())return!1;for(;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return!1;if(255===(i=this.readByte()))return this._buf.position-=1,!1;if(n=s.valueOf(7&i),30===(r=i>>3)&&(r=this.readSize()),r>e)return o=r<30?1:r<255?2:6,this._buf.position-=o,!1;if(!(r<e)){if(n!==t)throw new Ice.MarshalException("invalid optional data member `"+r+"': unexpected format");return!0}this.skipOpt(n)}},writeOptImpl:function(e,t){if(this.isWriteEncoding_1_0())return!1;var i=t.value;return e<30?(i|=e<<3,this.writeByte(i)):(i|=240,this.writeByte(i),this.writeSize(e)),!0},skipOpt:function(e){switch(e){case s.F1:this.skip(1);break;case s.F2:this.skip(2);break;case s.F4:this.skip(4);break;case s.F8:this.skip(8);break;case s.Size:this.skipSize();break;case s.VSize:this.skip(this.readSize());break;case s.FSize:this.skip(this.readInt());break;case s.Class:this.readObject(null,Ice.Object)}},skipOpts:function(){for(var e,t,i;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return;if(255===(t=(e=this.readByte())<0?e+256:e))return;i=s.valueOf(7&t),t>>3==30&&this.skipSize(),this.skipOpt(i)}},skip:function(e){if(e>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._buf.position+=e},skipSize:function(){255===this.readByte()&&this.skip(4)},isEmpty:function(){return this._buf.empty()},expand:function(e){this._buf.expand(e)},createObject:function(t){var i,n=null;try{var r=t.length>2?t.substr(2).replace(/::/g,"."):"";void 0!==(i=e.type(r))&&(n=new i)}catch(e){throw new Ice.NoObjectFactoryException("no object factory",t,e)}return n},getTypeId:function(e){var t=Ice.CompactIdRegistry.get(e);return void 0===t?"":t},isReadEncoding_1_0:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},isWriteEncoding_1_0:function(){return this._writeEncapsStack?this._writeEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},initReadEncaps:function(){if(null===this._readEncapsStack&&(this._readEncapsStack=this._readEncapsCache,null!==this._readEncapsStack?this._readEncapsCache=this._readEncapsCache.next:this._readEncapsStack=new I,this._readEncapsStack.setEncoding(this._encoding),this._readEncapsStack.sz=this._buf.limit),null===this._readEncapsStack.decoder){var e=this._instance.servantFactoryManager();this._readEncapsStack.encoding_1_0?this._readEncapsStack.decoder=new _(this,this._readEncapsStack,this._sliceObjects,e):this._readEncapsStack.decoder=new C(this,this._readEncapsStack,this._sliceObjects,e)}},initWriteEncaps:function(){this._writeEncapsStack||(this._writeEncapsStack=this._writeEncapsCache,this._writeEncapsStack?this._writeEncapsCache=this._writeEncapsCache.next:this._writeEncapsStack=new y,this._writeEncapsStack.setEncoding(this._encoding)),this._writeEncapsStack.format===n.DefaultFormat&&(this._writeEncapsStack.format=this._instance.defaultsAndOverrides().defaultFormat),this._writeEncapsStack.encoder||(this._writeEncapsStack.encoding_1_0?this._writeEncapsStack.encoder=new R(this,this._writeEncapsStack):this._writeEncapsStack.encoder=new S(this,this._writeEncapsStack))},createUserException:function(t){var i,n=null;try{var r=t.length>2?t.substr(2).replace(/::/g,"."):"";void 0!==(i=e.type(r))&&(n=new i)}catch(e){throw new Ice.MarshalException(e)}return n}}),w=Object.defineProperty;w(v.prototype,"pos",{get:function(){return this._buf.position},set:function(e){this._buf.position=e}}),w(v.prototype,"size",{get:function(){return this._buf.limit}}),w(v.prototype,"instance",{get:function(){return this._instance}}),w(v.prototype,"closure",{get:function(){return this._type},set:function(e){this._type=e}}),w(v.prototype,"buffer",{get:function(){return this._buf}});var E=function(e,t,i,n,r,o){var s={write:function(t,i){return e.call(t,i)},read:function(e){return t.call(e)},writeOpt:function(t,i,r){t.writeOptValue(i,n,e,r)},readOpt:function(e,i){return e.readOptValue(i,n,t)}};return void 0!==r&&void 0!==o&&(s.validate=function(e){return e>=r&&e<=o}),w(s,"minWireSize",{get:function(){return i}}),s},b=v.prototype,D=4294967295,M=-34028234664e28,P=34028234664e28;Ice.ByteHelper=E(b.writeByte,b.readByte,1,Ice.OptionalFormat.F1,0,255),Ice.ShortHelper=E(b.writeShort,b.readShort,2,Ice.OptionalFormat.F2,-32768,32767),Ice.IntHelper=E(b.writeInt,b.readInt,4,Ice.OptionalFormat.F4,-2147483648,2147483647),Ice.FloatHelper=E(b.writeFloat,b.readFloat,4,Ice.OptionalFormat.F4,M,P),Ice.FloatHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=M&&e<=P},Ice.DoubleHelper=E(b.writeDouble,b.readDouble,8,Ice.OptionalFormat.F8,-Number.MAX_VALUE,Number.MAX_VALUE),Ice.DoubleHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=-Number.MAX_VALUE&&e<=Number.MAX_VALUE},Ice.BoolHelper=E(b.writeBool,b.readBool,1,Ice.OptionalFormat.F1),Ice.LongHelper=E(b.writeLong,b.readLong,8,Ice.OptionalFormat.F8),Ice.LongHelper.validate=function(e){return e.low>=0&&e.low<=D&&e.high>=0&&e.high<=D},Ice.StringHelper=E(b.writeString,b.readString,1,Ice.OptionalFormat.VSize),Ice.ObjectHelper={write:function(e,t){e.writeObject(t)},read:function(e){var t;return e.readObject((function(e){t=e}),Ice.Object),t},writeOpt:function(e,t,i){e.writeOptValue(t,Ice.OptionalFormat.Class,b.writeObject,i)},readOpt:function(e,t){var i;return e.readOptObject(t,(function(e){i=e}),Ice.Object),i}},w(Ice.ObjectHelper,"minWireSize",{get:function(){return 1}}),Ice.BasicStream=v}(),Ice.SocketOperation={None:0,Read:1,Write:2,Connect:2},R=Ice.Class({__init__:function(e,t,i,n){this._instance=e,this._traceLevel=e.traceLevels().network,this._traceCategory=e.traceLevels().networkCat,this._logger=e.initializationData().logger,this._properties=e.initializationData().properties,this._type=t,this._protocol=i,this._secure=n},traceLevel:function(){return this._traceLevel},traceCategory:function(){return this._traceCategory},logger:function(){return this._logger},protocol:function(){return this._protocol},type:function(){return this._type},secure:function(){return this._secure},properties:function(){return this._properties},defaultHost:function(){return this._instance.defaultsAndOverrides().defaultHost},defaultSourceAddress:function(){return this._instance.defaultsAndOverrides().defaultSourceAddress},defaultEncoding:function(){return this._instance.defaultsAndOverrides().defaultEncoding},defaultTimeout:function(){return this._instance.defaultsAndOverrides().defaultTimeout},messageSizeMax:function(){return this._instance.messageSizeMax()}}),Ice.ProtocolInstance=R,N.defineSequence(Ice,"EndpointSeqHelper","Ice.ObjectHelper",!1,"Ice.Endpoint"),S=Ice.AsyncResultBase,I=Ice.Debug,Ice.Promise,y=Ice.Protocol,v=Ice.UserException,w=Ice.BasicStream,(E=Ice.Class(S,{__init__:function(e,t,i,n,r,o){S.call(this,e,t,i,n,r),void 0!==e&&(this._completed=o,this._is=null,this._os=null!==e?new w(this._instance,y.currentProtocolEncoding):null,this._state=0,this._exception=null,this._sentSynchronously=!1)},cancel:function(){this.__cancel(new Ice.InvocationCanceledException)},isCompleted:function(){return(this._state&E.Done)>0},isSent:function(){return(this._state&E.Sent)>0},throwLocalException:function(){if(null!==this._exception)throw this._exception},sentSynchronously:function(){return this._sentSynchronously},__markSent:function(e){I.assert(0==(this._state&E.Done)),this._state|=E.Sent,e&&(this._state|=E.Done|E.OK,this._cancellationHandler=null,this.succeed(this))},__markFinished:function(e,t){I.assert(0==(this._state&E.Done)),this._state|=E.Done,e&&(this._state|=E.OK),this._cancellationHandler=null,t?t(this):this.succeed(this)},__markFinishedEx:function(e){I.assert(0==(this._state&E.Done)),this._exception=e,this._state|=E.Done,this._cancellationHandler=null,this.fail(e,this)},__cancel:function(e){this._cancellationException=e,this._cancellationHandler&&this._cancellationHandler.asyncRequestCanceled(this,e)},__cancelable:function(e){if(this._cancellationException)try{throw this._cancellationException}finally{this._cancellationException=null}this._cancellationHandler=e},__os:function(){return this._os},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(I.assert(0!=(this._state&E.Done)),0==(this._state&E.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof v&&this._is.endReadEncaps(),e}}})).OK=1,E.Done=2,E.Sent=4,Ice.AsyncResult=E,Ice.Address=function(e,t){this.host=e,this.port=t},function(){var e=Ice.BasicStream,t=Ice.Debug,i=(Ice.ExUtil,Ice.Class),n=Ice.Protocol,r=i({__init__:function(t,i){if(this._batchStreamInUse=!1,this._batchRequestNum=0,this._batchStream=new e(t,n.currentProtocolEncoding),this._batchStream.writeBlob(n.requestBatchHdr),this._batchMarker=this._batchStream.size,this._exception=null,this._maxSize=t.batchAutoFlushSize(),this._maxSize>0&&i){var r=t.initializationData().properties.getPropertyAsIntWithDefault("Ice.UDP.SndSize",65507);r<this._maxSize&&(this._maxSize=r)}},prepareBatchRequest:function(e){if(this._exception)throw this._exception;this._batchStream.swap(e)},finishBatchRequest:function(e,i,n){this._batchStream.swap(e);try{this._maxSize>0&&this._batchStream.size>=this._maxSize&&i.ice_flushBatchRequests(),t.assert(this._batchMarker<this._batchStream.size),this._batchMarker=this._batchStream.size,++this._batchRequestNum}finally{this._batchStream.resize(this._batchMarker)}},abortBatchRequest:function(e){this._batchStream.swap(e),this._batchStream.resize(this._batchMarker)},swap:function(e){if(0===this._batchRequestNum)return 0;var t=null;if(this._batchMarker<this._batchStream.size){var i=this._batchStream.size-this._batchMarker;this._batchStream.pos=this._batchMarker,t=this._batchStream.buffer.getArray(i),this._batchStream.resize(this._batchMarker)}var r=this._batchRequestNum;return this._batchStream.swap(e),this._batchRequestNum=0,this._batchStream.writeBlob(n.requestBatchHdr),this._batchMarker=this._batchStream.size,null!==t&&this._batchStream.writeBlob(t),r},destroy:function(e){this._exception=e},isEmpty:function(){return this._batchStream.size===n.requestBatchHdr.length}});Ice.BatchRequestQueue=r}(),function(){var e=Ice.HashMap,t=Ice.CommunicatorDestroyedException,i=Ice.Class({__init__:function(t){this._logger=t,this._destroyed=!1,this._tokenId=0,this._tokens=new e},destroy:function(){var e=this;this._tokens.forEach((function(t,i){e.cancel(t)})),this._destroyed=!0,this._tokens.clear()},schedule:function(e,n){if(this._destroyed)throw new t;var r=this._tokenId++,o=this,s=i.setTimeout((function(){o.handleTimeout(r)}),n);return this._tokens.set(r,{callback:e,id:s,isInterval:!1}),r},scheduleRepeated:function(e,n){if(this._destroyed)throw new t;var r=this._tokenId++,o=this,s=i.setInterval((function(){o.handleInterval(r)}),n);return this._tokens.set(r,{callback:e,id:s,isInterval:!0}),r},cancel:function(e){if(this._destroyed)return!1;var t=this._tokens.get(e);return void 0!==t&&(this._tokens.del(e),t.isInterval?i.clearInterval(t.id):i.clearTimeout(t.id),!0)},handleTimeout:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t){this._tokens.del(e);try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}},handleInterval:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t)try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}});i.setTimeout=Ice.Timer.setTimeout,i.clearTimeout=Ice.Timer.clearTimeout,i.setInterval=Ice.Timer.setInterval,i.clearInterval=Ice.Timer.clearInterval,i.setImmediate=Ice.Timer.setImmediate,Ice.Timer=i}(),function(){var e=Ice.Class,t=e({__init__:function(e){this._instance=e,this._requests=[]},add:function(e,t){if(null===this._instance)throw new Ice.CommunicatorDestroyedException;var n=new i(this._instance,this,e);e.__cancelable(n),n.token=this._instance.timer().schedule((function(){n.run()}),t),this._requests.push(n)},destroy:function(){for(var e=0;e<this._requests.length;++e)this._instance.timer().cancel(this._requests[e].token),this._requests[e].destroy();this._requests=[],this._instance=null},remove:function(e){var t=this._requests.indexOf(e);t>=0&&this._requests.splice(t,1)},cancel:function(e){var t=this._requests.indexOf(e);return t>=0&&(this._requests.splice(t,1),this._instance.timer().cancel(e.token))}});Ice.RetryQueue=t;var i=e({__init__:function(e,t,i,n){this._instance=e,this._queue=t,this._outAsync=i},run:function(){this._outAsync.__retry(),this._queue.remove(this)},destroy:function(){try{this._outAsync.__abort(new Ice.CommunicatorDestroyedException)}catch(e){}},asyncRequestCanceled:function(e,t){this._queue.cancel(this)&&(this._instance.traceLevels().retry>=1&&this._instance.initializationData().logger.trace(this._instance.traceLevels().retryCat,"operation retry canceled\n"+t.toString()),this._outAsync.__completedEx(t))}})}(),function(){var e=Ice.ArrayUtil,t=Ice.Debug,i=Ice.HashMap,n=Ice.Promise,r=Ice.Class({__init__:function(e){this._router=e,t.assert(null!==this._router),this._clientEndpoints=null,this._serverEndpoints=null,this._adapter=null,this._identities=new i(i.compareEquals),this._evictedIdentities=[]},destroy:function(){this._clientEndpoints=[],this._serverEndpoints=[],this._adapter=null,this._identities.clear()},equals:function(e){return this===e||e instanceof r&&this._router.equals(e._router)},hashCode:function(){return this._router.hashCode()},getRouter:function(){return this._router},getClientEndpoints:function(){var e=new n;if(null!==this._clientEndpoints)e.succeed(this._clientEndpoints);else{var t=this;this._router.getClientProxy().then((function(i){t.setClientEndpoints(i,e)})).exception((function(t){e.fail(t)}))}return e},getServerEndpoints:function(){if(null!==this._serverEndpoints)return(new n).succeed(this._serverEndpoints);var e=this;return this._router.getServerProxy().then((function(t){return e.setServerEndpoints(t)}))},addProxy:function(e){if(t.assert(null!==e),this._identities.has(e.ice_getIdentity()))return(new n).succeed();var i=this;return this._router.addProxies([e]).then((function(t){i.addAndEvictProxies(e,t)}))},setAdapter:function(e){this._adapter=e},getAdapter:function(){return this._adapter},clearCache:function(e){this._identities.del(e.getIdentity())},setClientEndpoints:function(e,t){if(null===this._clientEndpoints)if(null===e)this._clientEndpoints=this._router.__reference().getEndpoints(),t.succeed(this._clientEndpoints);else{e=e.ice_router(null);var i=this;this._router.ice_getConnection().then((function(n){var r=e.ice_timeout(n.timeout());i._clientEndpoints=r.__reference().getEndpoints(),t.succeed(i._clientEndpoints)})).exception((function(e){t.fail(e)}))}else t.succeed(this._clientEndpoints)},setServerEndpoints:function(e){if(null===e)throw new Ice.NoEndpointException;return e=e.ice_router(null),this._serverEndpoints=e.__reference().getEndpoints(),this._serverEndpoints},addAndEvictProxies:function(t,i){var n=e.indexOf(this._evictedIdentities,t.ice_getIdentity(),(function(e,t){return e.equals(t)}));n>=0?this._evictedIdentities.splice(n,1):this._identities.set(t.ice_getIdentity(),1);for(var r=0;r<i.length;++r)this._identities.del(i[r].ice_getIdentity())}});Ice.RouterInfo=r}(),function(){var e=Ice.AsyncStatus,t=Ice.AsyncResult,i=Ice.BasicStream,n=Ice.Debug,r=Ice.HashMap,o=Ice.RetryException,s=(Ice.OperationMode,Ice.Protocol),a=Ice.Identity,c=Ice.Class(t,{__init__:function(e,n,r,o,a){void 0!==e?(t.call(this,e,n,r,o,a),this._os=new i(this._instance,s.currentProtocolEncoding)):t.call(this)},__os:function(){return this._os},__sent:function(){this.__markSent(!0)},__completedEx:function(e){this.__markFinishedEx(e)}}),l=Ice.Class(c,{__init__:function(e,i){void 0!==e?(c.call(this,e.ice_getCommunicator(),i,null,e,null),this._mode=null,this._cnt=0,this._sent=!1,this._handler=null):t.call(this)},__completedEx:function(e){try{this._instance.retryQueue().add(this,this.__handleException(e))}catch(e){this.__markFinishedEx(e)}},__retryException:function(e){try{this._proxy.__updateRequestHandler(this._handler,null),this._instance.retryQueue().add(this,0)}catch(e){this.__completedEx(e)}},__retry:function(){this.__invokeImpl(!1)},__abort:function(e){this.__markFinishedEx(e)},__invokeImpl:function(t){try{if(t){var i=this._proxy.__reference().getInvocationTimeout();if(i>0){var n=this;this._timeoutToken=this._instance.timer().schedule((function(){n.__cancel(new Ice.InvocationTimeoutException)}),i)}}for(;;)try{return this._sent=!1,this._handler=this._proxy.__getRequestHandler(),void((this._handler.sendAsyncRequest(this)&e.Sent)>0&&t&&(this._sentSynchronously=!0))}catch(e){if(e instanceof o)this._proxy.__updateRequestHandler(this._handler,null);else{var r=this.__handleException(e);if(r>0)return void this._instance.retryQueue().add(this,r)}}}catch(e){this.__markFinishedEx(e)}},__markSent:function(e){this._sent=!0,e&&this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),c.prototype.__markSent.call(this,e)},__markFinishedEx:function(e){this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),c.prototype.__markFinishedEx.call(this,e)},__handleException:function(e){var t={value:0};return this._cnt=this._proxy.__handleException(e,this._handler,this._mode,this._sent,t,this._cnt),t.value}}),d=Ice.Class(l,{__init__:function(e,t,i){void 0!==e?(l.call(this,e,t),this._encoding=s.getCompatibleEncoding(this._proxy.__reference().getEncoding()),this._completed=i):l.call(this)},__prepare:function(e,t,i){s.checkSupportedProtocol(s.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this._mode=t,null===i&&(i=d._emptyContext),this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()?this._proxy.__getBatchRequestQueue().prepareBatchRequest(this._os):this._os.writeBlob(s.requestHdr);var n=this._proxy.__reference();n.getIdentity().__write(this._os);var o=n.getFacet();if(null===o||0===o.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[o]),this._os.writeString(this._operation),this._os.writeByte(t.value),void 0!==i){if(null!==i&&!(i instanceof r))throw new Error("illegal context value, expecting null or HashMap");Ice.ContextHelper.write(this._os,i)}else{var a=n.getInstance().getImplicitContext(),c=n.getContext();null===a?Ice.ContextHelper.write(this._os,c):a.write(c,this._os)}},__sent:function(){this.__markSent(!this._proxy.ice_isTwoway())},__invokeRemote:function(e,t,i){return e.sendAsyncRequest(this,t,i,0)},__abort:function(e){(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())&&this._proxy.__getBatchRequestQueue().abortBatchRequest(this._os),l.prototype.__abort.call(this,e)},__invoke:function(){if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())return this._sentSynchronously=!0,this._proxy.__getBatchRequestQueue().finishBatchRequest(this._os,this._proxy,this._operation),void this.__markFinished(!0);this.__invokeImpl(!0)},__completed:function(e){var t;n.assert(this._proxy.ice_isTwoway());try{switch(null===this._is&&(this._is=new i(this._instance,s.currentProtocolEncoding)),this._is.swap(e),t=this._is.readByte()){case s.replyOK:case s.replyUserException:break;case s.replyObjectNotExist:case s.replyFacetNotExist:case s.replyOperationNotExist:var r=new a;r.__read(this._is);var o,c=Ice.StringSeqHelper.read(this._is);if(c.length>0){if(c.length>1)throw new Ice.MarshalException;o=c[0]}else o="";var l=this._is.readString(),d=null;switch(t){case s.replyObjectNotExist:d=new Ice.ObjectNotExistException;break;case s.replyFacetNotExist:d=new Ice.FacetNotExistException;break;case s.replyOperationNotExist:d=new Ice.OperationNotExistException;break;default:n.assert(!1)}throw d.id=r,d.facet=o,d.operation=l,d;case s.replyUnknownException:case s.replyUnknownLocalException:case s.replyUnknownUserException:var u=this._is.readString(),h=null;switch(t){case s.replyUnknownException:h=new Ice.UnknownException;break;case s.replyUnknownLocalException:h=new Ice.UnknownLocalException;break;case s.replyUnknownUserException:h=new Ice.UnknownUserException;break;default:n.assert(!1)}throw h.unknown=u,h;default:throw new Ice.UnknownReplyStatusException}this.__markFinished(t==s.replyOK,this._completed)}catch(e){this.__completedEx(e)}},__startWriteParams:function(e){return this._os.startWriteEncaps(this._encoding,e),this._os},__endWriteParams:function(){this._os.endWriteEncaps()},__writeEmptyParams:function(){this._os.writeEmptyEncaps(this._encoding)},__writeParamEncaps:function(e){null===e||0===e.length?this._os.writeEmptyEncaps(this._encoding):this._os.writeEncaps(e)},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(n.assert(0!=(this._state&t.Done)),0==(this._state&t.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof Ice.UserException&&this._is.endReadEncaps(),e}}});d._emptyContext=new r;var u=Ice.Class(l,{__init__:function(e,t){l.call(this,e,t),this._batchRequestNum=e.__getBatchRequestQueue().swap(this._os)},__invokeRemote:function(t,i,n){return 0===this._batchRequestNum?(this.__sent(),e.Sent):t.sendAsyncRequest(this,i,n,this._batchRequestNum)},__invoke:function(){s.checkSupportedProtocol(s.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this.__invokeImpl(!0)}}),h=Ice.Class(l,{__init__:function(e,t){l.call(this,e,t)},__invokeRemote:function(t,i,n){return this.__markFinished(!0,(function(e){e.succeed(t)})),e.Sent},__invoke:function(){this.__invokeImpl(!0)}}),f=Ice.Class(c,{__init__:function(e,t,i){c.call(this,t,i,e,null,null)},__invoke:function(){try{var t,i=this._connection.getBatchRequestQueue().swap(this._os);0===i?(this.__sent(),t=e.Sent):t=this._connection.sendAsyncRequest(this,!1,!1,i),(t&e.Sent)>0&&(this._sentSynchronously=!0)}catch(e){this.__completedEx(e)}}});Ice.OutgoingAsync=d,Ice.ProxyFlushBatch=u,Ice.ProxyGetConnection=h,Ice.ConnectionFlushBatch=f}(),function(){var e=Ice.ArrayUtil,t=Ice.AsyncResultBase,i=(Ice.AsyncResult,Ice.Debug),n=(Ice.FormatType,Ice.HashMap),r=Ice.OutgoingAsync,o=Ice.ProxyFlushBatch,s=Ice.ProxyGetConnection,a=Ice.ReferenceMode,c=Ice.OperationMode,l=Ice.Class({__init__:function(){this._reference=null,this._requestHandler=null},hashCode:function(e){return this._reference.hashCode()},ice_getCommunicator:function(){return this._reference.getCommunicator()},toString:function(){return this._reference.toString()},ice_getIdentity:function(){return this._reference.getIdentity().clone()},ice_identity:function(e){if(null==e||0===e.name.length)throw new Ice.IllegalIdentityException;if(e.equals(this._reference.getIdentity()))return this;var t=new l;return t.__setup(this._reference.changeIdentity(e)),t},ice_getContext:function(){return new n(this._reference.getContext())},ice_context:function(e){return this.__newInstance(this._reference.changeContext(e))},ice_getFacet:function(){return this._reference.getFacet()},ice_facet:function(e){if(null==e&&(e=""),e===this._reference.getFacet())return this;var t=new l;return t.__setup(this._reference.changeFacet(e)),t},ice_getAdapterId:function(){return this._reference.getAdapterId()},ice_adapterId:function(e){return null==e&&(e=""),e===this._reference.getAdapterId()?this:this.__newInstance(this._reference.changeAdapterId(e))},ice_getEndpoints:function(){return e.clone(this._reference.getEndpoints())},ice_endpoints:function(t){return null==t&&(t=[]),e.equals(t,this._reference.getEndpoints())?this:this.__newInstance(this._reference.changeEndpoints(t))},ice_getLocatorCacheTimeout:function(){return this._reference.getLocatorCacheTimeout()},ice_locatorCacheTimeout:function(e){if(e<-1)throw new Error("invalid value passed to ice_locatorCacheTimeout: "+e);return e===this._reference.getLocatorCacheTimeout()?this:this.__newInstance(this._reference.changeLocatorCacheTimeout(e))},ice_getInvocationTimeout:function(){return this._reference.getInvocationTimeout()},ice_invocationTimeout:function(e){if(e<1&&-1!==e)throw new Error("invalid value passed to ice_invocationTimeout: "+e);return e===this._reference.getInvocationTimeout()?this:this.__newInstance(this._reference.changeInvocationTimeout(e))},ice_isConnectionCached:function(){return this._reference.getCacheConnection()},ice_connectionCached:function(e){return e===this._reference.getCacheConnection()?this:this.__newInstance(this._reference.changeCacheConnection(e))},ice_getEndpointSelection:function(){return this._reference.getEndpointSelection()},ice_endpointSelection:function(e){return e===this._reference.getEndpointSelection()?this:this.__newInstance(this._reference.changeEndpointSelection(e))},ice_isSecure:function(){return this._reference.getSecure()},ice_secure:function(e){return e===this._reference.getSecure()?this:this.__newInstance(this._reference.changeSecure(e))},ice_getEncodingVersion:function(){return this._reference.getEncoding().clone()},ice_encodingVersion:function(e){return e.equals(this._reference.getEncoding())?this:this.__newInstance(this._reference.changeEncoding(e))},ice_isPreferSecure:function(){return this._reference.getPreferSecure()},ice_preferSecure:function(e){return e===this._reference.getPreferSecure()?this:this.__newInstance(this._reference.changePreferSecure(e))},ice_getRouter:function(){var e=this._reference.getRouterInfo();return null!==e?e.getRouter():null},ice_router:function(e){var t=this._reference.changeRouter(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getLocator:function(){var e=this._reference.getLocatorInfo();return null!==e?e.getLocator():null},ice_locator:function(e){var t=this._reference.changeLocator(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_isTwoway:function(){return this._reference.getMode()===a.ModeTwoway},ice_twoway:function(){return this._reference.getMode()===a.ModeTwoway?this:this.__newInstance(this._reference.changeMode(a.ModeTwoway))},ice_isOneway:function(){return this._reference.getMode()===a.ModeOneway},ice_oneway:function(){return this._reference.getMode()===a.ModeOneway?this:this.__newInstance(this._reference.changeMode(a.ModeOneway))},ice_isBatchOneway:function(){return this._reference.getMode()===a.ModeBatchOneway},ice_batchOneway:function(){return this._reference.getMode()===a.ModeBatchOneway?this:this.__newInstance(this._reference.changeMode(a.ModeBatchOneway))},ice_isDatagram:function(){return this._reference.getMode()===a.ModeDatagram},ice_datagram:function(){return this._reference.getMode()===a.ModeDatagram?this:this.__newInstance(this._reference.changeMode(a.ModeDatagram))},ice_isBatchDatagram:function(){return this._reference.getMode()===a.ModeBatchDatagram},ice_batchDatagram:function(){return this._reference.getMode()===a.ModeBatchDatagram?this:this.__newInstance(this._reference.changeMode(a.ModeBatchDatagram))},ice_compress:function(e){var t=this._reference.changeCompress(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_timeout:function(e){if(e<1&&-1!==e)throw new Error("invalid value passed to ice_timeout: "+e);var t=this._reference.changeTimeout(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnectionId:function(){return this._reference.getConnectionId()},ice_connectionId:function(e){var t=this._reference.changeConnectionId(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnection:function(){var e=new s(this,"ice_getConnection");try{e.__invoke()}catch(t){e.__abort(t)}return e},ice_getCachedConnection:function(){return this._requestHandler?this._requestHandler.getConnection():null},ice_flushBatchRequests:function(){var e=new o(this,"ice_flushBatchRequests");try{e.__invoke()}catch(t){e.__abort(t)}return e},equals:function(e){return this===e||e instanceof l&&this._reference.equals(e._reference)},__reference:function(){return this._reference},__copyFrom:function(e){i.assert(null===this._reference),i.assert(null===this._requestHandler),this._reference=e._reference,this._requestHandler=e._requestHandler},__handleException:function(e,t,i,n,r,o){if(this.__updateRequestHandler(t,null),!(e instanceof Ice.LocalException&&(!n||i==c.Nonmutating||i==c.Idempotent||e instanceof Ice.CloseConnectionException||e instanceof Ice.ObjectNotExistException)))throw e;try{return this._reference.getInstance().proxyFactory().checkRetryAfterException(e,this._reference,r,o)}catch(t){throw t instanceof Ice.CommunicatorDestroyedException?e:t}},__checkAsyncTwowayOnly:function(e){if(!this.ice_isTwoway())throw new Error("`"+e+"' can only be called with a twoway proxy")},__getRequestHandler:function(){return this._reference.getCacheConnection()&&this._requestHandler?this._requestHandler:this._reference.getRequestHandler(this)},__getBatchRequestQueue:function(){return this._batchRequestQueue||(this._batchRequestQueue=this._reference.getBatchRequestQueue()),this._batchRequestQueue},__setRequestHandler:function(e){return this._reference.getCacheConnection()?(this._requestHandler||(this._requestHandler=e),this._requestHandler):e},__updateRequestHandler:function(e,t){this._reference.getCacheConnection()&&null!==e&&this._requestHandler&&this._requestHandler!==t&&(this._requestHandler=this._requestHandler.update(e,t))},__setup:function(e){i.assert(null===this._reference),this._reference=e},__newInstance:function(e){var t=new this.constructor;return t.__setup(e),t},ice_instanceof:function(e){return!!e&&(this instanceof e||this.constructor.__instanceof(e))}});l.__invoke=function(e,t,i,n,o,s,a,c,d){(null!==a||c.length>0)&&e.__checkAsyncTwowayOnly(t);var u=new r(e,t,(function(e){l.__completed(e,a,c)}));try{if(u.__prepare(t,i,o),null===s)u.__writeEmptyParams();else{var h=u.__startWriteParams(n);s.call(null,h,d),u.__endWriteParams()}u.__invoke()}catch(e){u.__abort(e)}return u},l.__completed=function(e,t,i){if(l.__check(e,i))try{if(null===t)e.__readEmptyParams(),e.succeed(e);else{var n=t(e);e.succeed.apply(e,n)}}catch(t){return void l.__dispatchLocalException(e,t)}},l.__returns_bool=function(e,t){t.push(e.readBool())},l.__returns_byte=function(e,t){t.push(e.readByte())},l.__returns_short=function(e,t){t.push(e.readShort())},l.__returns_int=function(e,t){t.push(e.readInt())},l.__returns_long=function(e,t){t.push(e.readLong())},l.__returns_float=function(e,t){t.push(e.readFloat())},l.__returns_double=function(e,t){t.push(e.readDouble())},l.__returns_string=function(e,t){t.push(e.readString())},l.__returns_ObjectPrx=function(e,t){t.push(e.readProxy())},l.__returns_Object=function(e,t){e.readObject((function(e){t.push(e)}),Ice.Object),e.readPendingObjects()},l.__check=function(e,t){try{e.__throwUserException()}catch(n){if(n instanceof Ice.UserException){if(null!==t)for(var i=0;i<t.length;++i)if(n instanceof t[i])return e.fail(n,e),!1;return e.fail(new Ice.UnknownUserException(n.ice_name()),e),!1}return e.fail(n,e),!1}return!0},l.__dispatchLocalException=function(e,t){e.fail(t,e)},l.ice_staticId=Ice.Object.ice_staticId,l.checkedCast=function(e,i,n){var r=null;if(null==e)(r=new t(null,"checkedCast",null,null,null)).succeed(null,r);else{void 0!==i&&(e=e.ice_facet(i));var o=this;r=new t(e.ice_getCommunicator(),"checkedCast",null,e,null),e.ice_isA(this.ice_staticId(),n).then((function(t,i){if(i){var n=new o;n.__copyFrom(e),r.succeed(n,r)}else r.succeed(null,r)})).exception((function(e){e instanceof Ice.FacetNotExistException?r.succeed(null,r):r.fail(e,r)}))}return r},l.uncheckedCast=function(e,t){var i=null;return null!=e&&(i=new this,void 0!==t&&(e=e.ice_facet(t)),i.__copyFrom(e)),i},Object.defineProperty(l,"minWireSize",{get:function(){return 2}}),l.write=function(e,t){e.writeProxy(t)},l.read=function(e){return e.readProxy(this)},l.writeOpt=function(e,t,i){e.writeOptProxy(t,i)},l.readOpt=function(e,t){return e.readOptProxy(t,this)},l.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return!!this.__parent&&this.__parent.__instanceof(e)},Ice.Slice.defineProxy=function(e,t,i){var n=function(){e.call(this)};return n.__parent=e,n.__implements=i,(n.prototype=new e).constructor=n,n.ice_staticId=t,n.checkedCast=l.checkedCast,n.uncheckedCast=l.uncheckedCast,n.write=l.write,n.writeOpt=l.writeOpt,n.read=l.read,n.readOpt=l.readOpt,n.__instanceof=l.__instanceof,Object.defineProperty(n,"minWireSize",{get:function(){return 2}}),n},Ice.ObjectPrx=l}(),Object.defineProperty(Ice,"TCPEndpointType",{value:1}),Object.defineProperty(Ice,"SSLEndpointType",{value:2}),Object.defineProperty(Ice,"UDPEndpointType",{value:3}),Object.defineProperty(Ice,"WSEndpointType",{value:4}),Object.defineProperty(Ice,"WSSEndpointType",{value:5}),Ice.EndpointInfo=N.defineLocalObject((function(e,t){this.timeout=void 0!==e?e:0,this.compress=void 0!==t&&t})),Ice.Endpoint=N.defineLocalObject(),Ice.IPEndpointInfo=N.defineLocalObject((function(e,t,i,n,r){Ice.EndpointInfo.call(this,e,t),this.host=void 0!==i?i:"",this.port=void 0!==n?n:0,this.sourceAddress=void 0!==r?r:""}),Ice.EndpointInfo),Ice.TCPEndpointInfo=N.defineLocalObject((function(e,t,i,n,r){Ice.IPEndpointInfo.call(this,e,t,i,n,r)}),Ice.IPEndpointInfo),Ice.UDPEndpointInfo=N.defineLocalObject((function(e,t,i,n,r,o,s){Ice.IPEndpointInfo.call(this,e,t,i,n,r),this.mcastInterface=void 0!==o?o:"",this.mcastTtl=void 0!==s?s:0}),Ice.IPEndpointInfo),Ice.WSEndpointInfo=N.defineLocalObject((function(e,t,i,n,r,o){Ice.TCPEndpointInfo.call(this,e,t,i,n,r),this.resource=void 0!==o?o:""}),Ice.TCPEndpointInfo),Ice.OpaqueEndpointInfo=N.defineLocalObject((function(e,t,i,n){Ice.EndpointInfo.call(this,e,t),this.rawEncoding=void 0!==i?i:new Ice.EncodingVersion,this.rawBytes=void 0!==n?n:null}),Ice.EndpointInfo),b=(0,Ice.Class)(Ice.Endpoint,{toString:function(){return this.protocol()+this.options()},initWithOptions:function(e){var t,i=[],n="`"+this.protocol();for(t=0;t<e.length;++t)-1!==e[t].search(/[ \t\n\r]+/)?n+=' "'+e[t]+'"':n+=" "+e[t];for(n+="'",t=0;t<e.length;){var r=e[t++];if(r.length<2||"-"!=r.charAt(0))i.push(r);else{var o=null;t<e.length&&"-"!=e[t].charAt(0)&&(o=e[t++]),this.checkOption(r,o,n)||(i.push(r),null!==o&&i.push(o))}}for(e.length=0,t=0;t<i.length;t++)e.push(i[t])},equals:function(e){return e instanceof b&&0===this.compareTo(e)},checkOption:function(){return!1}}),Ice.EndpointI=b,function(){var e=Ice.__M,t=Ice.Class,i=[Ice.ByteHelper,Ice.BoolHelper,Ice.ShortHelper,Ice.IntHelper,Ice.LongHelper,Ice.FloatHelper,Ice.DoubleHelper,Ice.StringHelper,Ice.Object,Ice.ObjectPrx];function n(t){var n=t[0],r=typeof n;return"number"===r?n=i[t[0]]:"string"===r&&(n=e.type(n)),{type:n,isObject:!0===t[1],tag:t[2]}}function r(e,t){var i,r,o,s={};s.name=e,s.mode=t[1]?Ice.OperationMode.valueOf(t[1]):Ice.OperationMode.Normal,s.sendMode=t[2]?Ice.OperationMode.valueOf(t[2]):Ice.OperationMode.Normal,s.amd=!!t[3],s.format=t[4]?Ice.FormatType.valueOf(t[4]):Ice.FormatType.DefaultFormat,s.amd?s.servantMethod=e+"_async":s.servantMethod=t[0]?t[0]:e,t[5]&&((o=n(t[5])).pos=0),s.returns=o;var a=[],c=[];if(t[6])for(i=0;i<t[6].length;++i)(r=n(t[6][i])).pos=i,a.push(r),r.tag&&c.push(r);c.sort((function(e,t){return e.tag-t.tag})),s.inParams=a,s.inParamsOpt=c;var l=[],d=[];if(t[7]){var u=o?1:0;for(i=0;i<t[7].length;++i)(r=n(t[7][i])).pos=i+u,l.push(r),r.tag&&d.push(r)}o&&o.tag&&d.push(o),d.sort((function(e,t){return e.tag-t.tag})),s.outParams=l,s.outParamsOpt=d;var h=[];if(t[8])for(i=0;i<t[8].length;++i)h.push(t[8][i]);return s.exceptions=h,s.sendsClasses=!0===t[9],s.returnsClasses=!0===t[10],s}var o=t({__init__:function(e){this.raw=e,this.parsed={}},find:function(e){var t=this.parsed[e];return void 0===t&&void 0!==this.raw[e]&&(t=r(e,this.raw[e]),this.parsed[e]=t),t}});function s(e,t,i,n,r,o,s){var a,c,l;for(a=0;a<i.length;++a)(c=i[a]).tag||(l=c.type.read(e),o[c.pos+s]=l);for(t&&(l=t.type.read(e),o[t.pos+s]=l),a=0;a<n.length;++a)l=(c=n[a]).type.readOpt(e,c.tag),o[c.pos+s]=l;r&&e.readPendingObjects()}function a(e,t,i,n,r,o){var s,a;for(s=0;s<n.length;++s)(a=n[s]).tag||a.type.write(e,t[a.pos]);for(i&&i.type.write(e,t[i.pos]),s=0;s<r.length;++s)(a=r[s]).type.writeOpt(e,a.tag,t[a.pos]);o&&e.writePendingObjects()}var c=t({__init__:function(e,t){this.incomingAsync=e,this.op=t},ice_response:function(){var e=arguments;if(this.incomingAsync.__validateResponse(!0))try{this.__sendResponse(e),this.incomingAsync.__response()}catch(e){this.incomingAsync.__exception(e)}},ice_exception:function(e){this.__checkException(e)?this.incomingAsync.__validateResponse(!1)&&(this.__sendException(e),this.incomingAsync.__response()):this.incomingAsync.ice_exception(e)},__sendResponse:function(e){if(void 0===this.op.returns&&0===this.op.outParams.length){if(e&&e.length>0)throw new Error("ice_response called with invalid arguments");this.incomingAsync.__writeEmptyParams()}else{var t,i=this.incomingAsync.__startWriteParams(this.op.format);this.op.returns&&!this.op.returns.tag&&(t=this.op.returns),a(i,e,t,this.op.outParams,this.op.outParamsOpt,this.op.returnsClasses),this.incomingAsync.__endWriteParams(!0)}},__checkException:function(e){for(var t=0;t<this.op.exceptions.length;++t)if(e instanceof this.op.exceptions[t])return!0;return!1},__sendException:function(e){this.incomingAsync.__writeUserException(e,this.op.format)}});function l(e,t,i){for(var n,r=0;void 0===n&&r<e.length;++r){var o=e[r];void 0===(n=o[t])&&(-1===i.indexOf(o)&&i.push(o),o.__implements&&(n=l(o.__implements,t,i)))}return n}function d(e,t){var i,n="__op_"+t,r=e[n];if(void 0===r){i=[];for(var o=e;o&&void 0===r;)o.__implements&&(r=l(o.__implements,n,i)),o=o.__parent;void 0!==r&&(e[n]=r)}if(void 0===r){var a,d;if(e.__ops&&(a=e.__ops.find(t)),void 0===a){for(var u=e.__parent;void 0===a&&u;)u.__ops&&void 0!==(a=u.__ops.find(t))&&(d=u),u=u.__parent;for(var h=0;void 0===a&&h<i.length;++h){var f=i[h];f.__ops&&void 0!==(a=f.__ops.find(t))&&(d=f)}}void 0!==a&&(r=function(e,t,i){return function(e,t,i,n){var r=e[t.servantMethod];if(void 0===r||"function"!=typeof r){var o="servant for identity "+n.adapter.getCommunicator().identityToString(n.id)+" does not define operation `"+t.servantMethod+"'";throw new Ice.UnknownException(o)}var a=new c(i,t);try{var l=t.amd?[null]:[];if(0===t.inParams.length)i.readEmptyParams();else{var d=i.startReadParams(),u=t.amd?1:0;if(s(d,void 0,t.inParams,t.inParamsOpt,t.sendsClasses,l,u),i.endReadParams(),t.inParams.length>0&&(t.sendsClasses||t.inParamsOpt.length>0))for(var h=0;h<t.inParams.length;++h){var f=t.inParams[h];f.isObject&&void 0!==l[f.pos+u]&&(l[f.pos+u]=l[f.pos+u].value)}}if(l.push(n),t.amd){l[0]=a;try{r.apply(e,l)}catch(e){a.ice_exception(e)}return Ice.DispatchStatus.DispatchAsync}var p=t.outParams.length;t.returns&&++p;var _=r.apply(e,l);if(p>1&&!(_ instanceof Array))throw new Ice.MarshalException("operation `"+t.servantMethod+"' should return an array of length "+p);return 1===p&&(_=[_]),a.__sendResponse(_),Ice.DispatchStatus.DispatchOK}catch(e){if(a.__checkException(e))return a.__sendException(e),Ice.DispatchStatus.DispatchUserException;throw e}}(e,a,t,i)},e[n]=r,d&&(d[n]=r))}return r}function u(e,t,i){var n=i[0]?i[0]:t,o=null;e.prototype[n]=function(){var e=arguments;null===o&&(o=r(t,i));var n=e[o.inParams.length],c=null;o.inParams.length>0&&(c=function(e,t){var i,n,r;for(i=0;i<o.inParams.length;++i)if(r=t[(n=o.inParams[i]).pos],!(n.tag&&void 0===r||"function"!=typeof n.type.validate||n.type.validate(r)))throw new Ice.MarshalException("invalid value for argument "+(i+1)+" in operation `"+o.servantMethod+"'");a(e,t,void 0,o.inParams,o.inParamsOpt,o.sendsClasses)});var l=null;return(o.returns||o.outParams.length>0)&&(l=function(e){var t,i=[],n=e.__startReadParams();if(o.returns&&!o.returns.tag&&(t=o.returns),s(n,t,o.outParams,o.outParamsOpt,o.returnsClasses,i,0),e.__endReadParams(),o.returnsClasses||o.outParamsOpt.length>0){o.returns&&o.returns.isObject&&void 0!==i[o.returns.pos+0]&&(i[o.returns.pos+0]=i[o.returns.pos+0].value);for(var r=0;r<o.outParams.length;++r){var a=o.outParams[r];a.isObject&&void 0!==i[a.pos+0]&&(i[a.pos+0]=i[a.pos+0].value)}}return i.push(e),i}),Ice.ObjectPrx.__invoke(this,o.name,o.sendMode,o.format,n,c,l,o.exceptions,Array.prototype.slice.call(e))}}var h=Ice.Slice;h.defineOperations=function(e,t,i){if(i&&(e.__ops=new o(i)),e.prototype.__dispatch=function(t,i){var n=d(e,i.operation);if(void 0===n||"function"!=typeof n)throw new Ice.OperationNotExistException(i.id,i.facet,i.operation);return n.call(n,this,t,i)},i)for(var n in i)u(t,n,i[n]);if(t.__implements)for(var r in t.__implements){var s=t.__implements[r].prototype;for(var a in s)"function"==typeof s[a]&&void 0===t.prototype[a]&&(t.prototype[a]=s[a])}},h.defineOperations(Ice.Object,Ice.ObjectPrx,{ice_ping:[,1,1,,,,,,],ice_isA:[,1,1,,,[1],[[7]],,],ice_id:[,1,1,,,[7],,,],ice_ids:[,1,1,,,["Ice.StringSeqHelper"],,,]})}(),function(){var e=Ice.Address,t=Ice.HashUtil,i=Ice.StringUtil,n=Ice.Class,r=Ice.EndpointParseException,o=n(Ice.EndpointI,{__init__:function(e,t,i,n,r){this._instance=e,this._host=void 0===t?null:t,this._port=void 0===i?null:i,this._sourceAddr=void 0===n?null:n,this._connectionId=void 0===r?"":r},streamWrite:function(e){e.startWriteEncaps(),this.streamWriteImpl(e),e.endWriteEncaps()},getInfo:function(){var e=new Ice.IPEndpointInfo;return this.fillEndpointInfo(e),e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},secure:function(){return this._instance.secure()},connectionId:function(){return this._connectionId},changeConnectionId:function(e){return e===this._connectionId?this:this.createEndpoint(this._host,this._port,e)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this.hashInit(5381)),this._hashCode},options:function(){var e="";if(null!==this._host&&this._host.length>0){e+=" -h ";var t=-1!=this._host.indexOf(":");t&&(e+='"'),e+=this._host,t&&(e+='"')}return e+=" -p "+this._port,null!==this._sourceAddr&&this._sourceAddr.length>0&&(e+=" --sourceAddr "+this._sourceAddr),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof o?this._port<e._port?-1:e._port<this._port?1:this._host!=e._host?this._host<e._host?-1:1:this._sourceAddr!=e._sourceAddr?this._sourceAddr<e._sourceAddr?-1:1:this._connectionId!=e._connectionId?this._connectionId<e._connectionId?-1:1:0:this.type()<e.type()?-1:1},getAddress:function(){return new e(this._host,this._port)},toConnectorString:function(){return this._host+":"+this._port},streamWriteImpl:function(e){e.writeString(this._host),e.writeInt(this._port)},hashInit:function(e){return e=t.addNumber(e,this.type()),e=t.addString(e,this._host),e=t.addNumber(e,this._port),e=t.addString(e,this._sourceAddr),e=t.addString(e,this._connectionId)},fillEndpointInfo:function(e){var t=this;e.type=function(){return t.type()},e.datagram=function(){return t.datagram()},e.secure=function(){return t.secure()},e.host=this._host,e.port=this._port,e.sourceAddress=this._sourceAddr},initWithOptions:function(e,t){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),null===this._host||0===this._host.length)this._host=this._instance.defaultHost();else if("*"==this._host){if(!t)throw new r("`-h *' not valid for proxy endpoint `"+this+"'");this._host=""}if(null===this._host&&(this._host=""),null===this._sourceAddr)t||(this._sourceAddr=this._instance.defaultSourceAddress());else if(t)throw new r("`--sourceAddress not valid for object adapter endpoint `"+this+"'")},initWithStream:function(e){this._host=e.readString(),this._port=e.readInt()},checkOption:function(e,t,n){if("-h"===e){if(null===t)throw new r("no argument provided for -h option in endpoint "+n);this._host=t}else if("-p"===e){if(null===t)throw new r("no argument provided for -p option in endpoint "+n);try{this._port=i.toInt(t)}catch(e){throw new r("invalid port value `"+t+"' in endpoint "+n)}if(this._port<0||this._port>65535)throw new r("port value `"+t+"' out of range in endpoint "+n)}else{if("--sourceAddress"!==e)return!1;if(null===t)throw new r("no argument provided for --sourceAddress option in endpoint "+n);this._sourceAddr=t}return!0}});Ice.IPEndpointI=o}(),Object.defineProperty(IceSSL,"EndpointType",{value:Ice.SSLEndpointType}),IceSSL.EndpointInfo=N.defineLocalObject((function(e,t,i,n,r){Ice.IPEndpointInfo.call(this,e,t,i,n,r)}),Ice.IPEndpointInfo),IceSSL.WSSEndpointInfo=N.defineLocalObject((function(e,t,i,n,r,o){IceSSL.EndpointInfo.call(this,e,t,i,n,r),this.resource=void 0!==o?o:""}),IceSSL.EndpointInfo),Ice.ConnectionInfo=N.defineLocalObject((function(e,t,i,n,r){this.incoming=void 0!==e&&e,this.adapterName=void 0!==t?t:"",this.connectionId=void 0!==i?i:"",this.rcvSize=void 0!==n?n:0,this.sndSize=void 0!==r?r:0})),Ice.ConnectionCallback=N.defineLocalObject(),Ice.ACMClose=N.defineEnum([["CloseOff",0],["CloseOnIdle",1],["CloseOnInvocation",2],["CloseOnInvocationAndIdle",3],["CloseOnIdleForceful",4]]),Ice.ACMHeartbeat=N.defineEnum([["HeartbeatOff",0],["HeartbeatOnInvocation",1],["HeartbeatOnIdle",2],["HeartbeatAlways",3]]),Ice.ACM=N.defineStruct((function(e,t,i){this.timeout=void 0!==e?e:0,this.close=void 0!==t?t:Ice.ACMClose.CloseOff,this.heartbeat=void 0!==i?i:Ice.ACMHeartbeat.HeartbeatOff}),!0),Ice.Connection=N.defineLocalObject(),Ice.IPConnectionInfo=N.defineLocalObject((function(e,t,i,n,r,o,s,a,c){Ice.ConnectionInfo.call(this,e,t,i,n,r),this.localAddress=void 0!==o?o:"",this.localPort=void 0!==s?s:-1,this.remoteAddress=void 0!==a?a:"",this.remotePort=void 0!==c?c:-1}),Ice.ConnectionInfo),Ice.TCPConnectionInfo=N.defineLocalObject((function(e,t,i,n,r,o,s,a,c){Ice.IPConnectionInfo.call(this,e,t,i,n,r,o,s,a,c)}),Ice.IPConnectionInfo),Ice.UDPConnectionInfo=N.defineLocalObject((function(e,t,i,n,r,o,s,a,c,l,d){Ice.IPConnectionInfo.call(this,e,t,i,n,r,o,s,a,c),this.mcastAddress=void 0!==l?l:"",this.mcastPort=void 0!==d?d:-1}),Ice.IPConnectionInfo),N.defineDictionary(Ice,"HeaderDict","HeaderDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.WSConnectionInfo=N.defineLocalObject((function(e,t,i,n,r,o,s,a,c,l){Ice.TCPConnectionInfo.call(this,e,t,i,n,r,o,s,a,c),this.headers=void 0!==l?l:null}),Ice.TCPConnectionInfo),Ice.TraceLevels=function(e){var t="Network",i="Protocol",n="Retry",r="Locator",o="Slicing",s="Ice.Trace.",a=e.getPropertyAsInt(s+t),c=e.getPropertyAsInt(s+i),l=e.getPropertyAsInt(s+n),d=e.getPropertyAsInt(s+r),u=e.getPropertyAsInt(s+o);return e.getPropertyAsInt(s+"ThreadPool"),Object.create(null,{network:{get:function(){return a}},networkCat:{get:function(){return t}},protocol:{get:function(){return c}},protocolCat:{get:function(){return i}},retry:{get:function(){return l}},retryCat:{get:function(){return n}},location:{get:function(){return d}},locationCat:{get:function(){return r}},slicing:{get:function(){return u}},slicingCat:{get:function(){return o}}})},function(){var e=Ice.Base64,t=Ice.Debug,i=Ice.HashUtil,n=(Ice.Protocol,Ice.StringUtil),r=Ice.EndpointParseException,o=Ice.Class,s=o(Ice.EndpointI,{__init__:function(e){this._rawEncoding=Ice.Encoding_1_0,this._type=void 0===e?-1:e,this._rawBytes=null},streamWrite:function(e){e.startWriteEncaps(this._rawEncoding,Ice.FormatType.DefaultFormat),e.writeBlob(this._rawBytes),e.endWriteEncaps()},getInfo:function(){return new a(-1,!1,this._rawEncoding,this._rawBytes,this._type)},type:function(){return this._type},protocol:function(){return"opaque"},timeout:function(){return-1},changeTimeout:function(e){return this},changeConnectionId:function(e){return this},compress:function(){return!1},changeCompress:function(e){return this},datagram:function(){return!1},secure:function(){return!1},rawBytes:function(){return this._rawBytes},transceiver:function(e){return e.value=null,null},acceptor:function(e,t){return e.value=this,null},connect:function(){return null},hashCode:function(){if(void 0===this._hashCode){var e=5381;e=i.addNumber(e,this._type),e=i.addHashable(e,this._rawEncoding),e=i.addArray(e,this._rawBytes,i.addNumber),this._hashCode=e}return this._hashCode},options:function(){var t="";return t+=" -t "+this._type,t+=" -e "+Ice.encodingVersionToString(this._rawEncoding),t+=" -v "+e.encode(this._rawBytes)},equals:function(e){if(!(e instanceof s))return!1;if(this===e)return!0;if(this._type!==e._type)return!1;if(!this._rawEncoding.equals(e._rawEncoding))return!1;if(this._rawBytes.length!==e._rawBytes.length)return!1;for(var t=0;t<this._rawBytes.length;t++)if(this._rawBytes[t]!==e._rawBytes[t])return!1;return!0},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof s))return this.type()<e.type()?-1:1;if(this._type<e._type)return-1;if(e._type<this._type)return 1;if(this._rawEncoding.major<e._rawEncoding.major)return-1;if(e._rawEncoding.major<this._rawEncoding.major)return 1;if(this._rawEncoding.minor<e._rawEncoding.minor)return-1;if(e._rawEncoding.minor<this._rawEncoding.minor)return 1;if(this._rawBytes.length<e._rawBytes.length)return-1;if(e._rawBytes.length<this._rawBytes.length)return 1;for(var t=0;t<this._rawBytes.length;t++){if(this._rawBytes[t]<e._rawBytes[t])return-1;if(e._rawBytes[t]<this._rawBytes[t])return 1}return 0},checkOption:function(t,i,o){switch(t.charAt(1)){case"t":if(this._type>-1)throw new r("multiple -t options in endpoint "+o);if(null===i)throw new r("no argument provided for -t option in endpoint "+o);var s;try{s=n.toInt(i)}catch(e){throw new r("invalid type value `"+i+"' in endpoint "+o)}if(s<0||s>65535)throw new r("type value `"+i+"' out of range in endpoint "+o);return this._type=s,!0;case"v":if(this._rawBytes)throw new r("multiple -v options in endpoint "+o);if(null===i||0===i.length)throw new r("no argument provided for -v option in endpoint "+o);for(var a=0;a<i.length;++a)if(!e.isBase64(i.charAt(a)))throw new r("invalid base64 character `"+i.charAt(a)+"' (ordinal "+i.charCodeAt(a)+") in endpoint "+o);return this._rawBytes=e.decode(i),!0;case"e":if(null===i)throw new r("no argument provided for -e option in endpoint "+o);try{this._rawEncoding=Ice.stringToEncodingVersion(i)}catch(e){throw new r("invalid encoding version `"+i+"' in endpoint "+o+":\n"+e.str)}return!0;default:return!1}},initWithOptions:function(e){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),t.assert(this._rawEncoding),this._type<0)throw new r("no -t option in endpoint `"+this+"'");if(null===this._rawBytes||0===this._rawBytes.length)throw new r("no -v option in endpoint `"+this+"'")},initWithStream:function(e){this._rawEncoding=e.getReadEncoding();var t=e.getReadEncapsSize();this._rawBytes=e.readBlob(t)}}),a=o(Ice.OpaqueEndpointInfo,{__init__:function(e,t,i,n,r){Ice.OpaqueEndpointInfo.call(this,-1,!1,i,n),this._type=r},type:function(){return this._type},datagram:function(){return!1},secure:function(){return!1}});Ice.OpaqueEndpointI=s}(),function(){var e=Ice.BasicStream,t=Ice.Current,i=Ice.Debug,n=Ice.FormatType,r=Ice.Context,o=Ice.Identity,s=Ice.Protocol,a=Ice.StringUtil,c=Ice.Class({__init__:function(i,n,r,a,c,l){this._instance=i,this._response=a,this._compress=c,this._response&&(this._os=new e(i,s.currentProtocolEncoding)),this._connection=n,this._current=new t,this._current.id=new o,this._current.adapter=r,this._current.con=this._connection,this._current.requestId=l,this._servant=null,this._locator=null,this._cookie={value:null},a&&(this._os.writeBlob(s.replyHdr),this._os.writeInt(l)),this._is=null,this._cb=null,this._active=!0},__startWriteParams:function(e){if(!this._response)throw new Ice.MarshalException("can't marshal out parameters for oneway dispatch");return i.assert(this._os.size==s.headerSize+4),i.assert(null!==this._current.encoding),this._os.writeByte(0),this._os.startWriteEncaps(this._current.encoding,e),this._os},__endWriteParams:function(e){if(this._response){var t=this._os.pos;this._os.pos=s.headerSize+4,this._os.writeByte(e?s.replyOK:s.replyUserException),this._os.pos=t,this._os.endWriteEncaps()}},__writeEmptyParams:function(){this._response&&(i.assert(this._os.size===s.headerSize+4),i.assert(null!==this._current.encoding),this._os.writeByte(s.replyOK),this._os.writeEmptyEncaps(this._current.encoding))},__writeParamEncaps:function(e,t){this._response&&(i.assert(this._os.size===s.headerSize+4),i.assert(null!==this._current.encoding),this._os.writeByte(t?s.replyOK:s.replyUserException),null===e||0===e.length?this._os.writeEmptyEncaps(this._current.encoding):this._os.writeEncaps(e))},__writeUserException:function(e,t){this.__startWriteParams(t).writeUserException(e),this.__endWriteParams(!1)},__warning:function(e){i.assert(null!==this._instance);var t=[];if(t.push("dispatch exception:"),t.push("\nidentity: "+this._instance.identityToString(this._current.id)),t.push("\nfacet: "+a.escapeString(this._current.facet,"")),t.push("\noperation: "+this._current.operation),null!==this._connection){var n=this._connection.getInfo();if(n instanceof Ice.IPConnectionInfo){var r=n;t.push("\nremote host: "+r.remoteAddress+" remote port: "+r.remotePort)}}e.stack&&(t.push("\n"),t.push(e.stack)),this._instance.initializationData().logger.warning(t.join(""))},__servantLocatorFinished:function(){i.assert(null!==this._locator&&null!==this._servant);try{return this._locator.finished(this._current,this._servant,this._cookie.value),!0}catch(e){return e instanceof Ice.UserException?(i.assert(null!==this._connection),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUserException),this._os.startWriteEncaps(),this._os.writeUserException(e),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),this._connection=null):this.__handleException(e),!1}},__handleException:function(e){i.assert(null!==this._connection);var t,n=this._instance.initializationData().properties;e instanceof Ice.RequestFailedException?(null===e.id&&(e.id=this._current.id),null===e.facet&&(e.facet=this._current.facet),null!==e.operation&&0!==e.operation.length||(e.operation=this._current.operation),n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>1&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),e instanceof Ice.ObjectNotExistException?this._os.writeByte(s.replyObjectNotExist):e instanceof Ice.FacetNotExistException?this._os.writeByte(s.replyFacetNotExist):e instanceof Ice.OperationNotExistException?this._os.writeByte(s.replyOperationNotExist):i.assert(!1),e.id.__write(this._os),null===e.facet||0===e.facet.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[e.facet]),this._os.writeString(e.operation),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownLocalException?(n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownLocalException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownUserException?(n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownUserException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownException?(n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.LocalException?(n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownLocalException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UserException?(n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownUserException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):(n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownException),this._os.writeString(e.stack?e.stack:""),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()),this._connection=null},invoke:function(e,t){this._is=t;this._is.pos;this._current.id.__read(this._is);var o=Ice.StringSeqHelper.read(this._is);if(o.length>0){if(o.length>1)throw new Ice.MarshalException;this._current.facet=o[0]}else this._current.facet="";this._current.operation=this._is.readString(),this._current.mode=Ice.OperationMode.valueOf(this._is.readByte()),this._current.ctx=new r;for(var a=this._is.readSize();a-- >0;){var c=this._is.readString(),l=this._is.readString();this._current.ctx.set(c,l)}if(null!==e&&(this._servant=e.findServant(this._current.id,this._current.facet),null===this._servant&&(this._locator=e.findServantLocator(this._current.id.category),null===this._locator&&this._current.id.category.length>0&&(this._locator=e.findServantLocator("")),null!==this._locator)))try{this._servant=this._locator.locate(this._current,this._cookie)}catch(e){if(e instanceof Ice.UserException){var d=this._is.skipEncaps();return this._response?(this._os.writeByte(s.replyUserException),this._os.startWriteEncaps(d,n.DefaultFormat),this._os.writeUserException(e),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),void(this._connection=null)}return this._is.skipEncaps(),void this.__handleException(e)}try{if(null===this._servant)throw this._is.skipEncaps(),null!==e&&e.hasServant(this._current.id)?new Ice.FacetNotExistException(this._current.id,this._current.facet,this._current.operation):new Ice.ObjectNotExistException(this._current.id,this._current.facet,this._current.operation);if(this._servant.__dispatch(this,this._current)===Ice.DispatchStatus.DispatchAsync)return;if(null!==this._locator&&!this.__servantLocatorFinished())return}catch(e){if(null!==this._servant&&null!==this._locator&&!this.__servantLocatorFinished())return;return void this.__handleException(e)}i.assert(null!==this._connection),this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null},startReadParams:function(){return this._current.encoding=this._is.startReadEncaps(),this._is},endReadParams:function(){this._is.endReadEncaps()},readEmptyParams:function(){this._current.encoding=new Ice.EncodingVersion,this._is.skipEmptyEncaps(this._current.encoding)},readParamEncaps:function(){return this._current.encoding=new Ice.EncodingVersion,this._is.readEncaps(this._current.encoding)},__response:function(){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;i.assert(null!==this._connection),this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null}catch(e){this._connection.invokeException(e,1)}},__exception:function(e){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;this.__handleException(e)}catch(e){this._connection.invokeException(e,1)}},__validateResponse:function(e){return!!this._active&&(this._active=!1,!0)},ice_exception:function(e){this._active&&(this._active=!1,null!==this._connection?this.__exception(e):this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e))}});Ice.IncomingAsync=c}(),function(){Ice.AsyncResult;var e=Ice.AsyncStatus,t=(Ice.BasicStream,Ice.ConnectionRequestHandler),i=Ice.Debug,n=(Ice.ExUtil,Ice.RetryException),r=(Ice.OutgoingAsync,Ice.Protocol,Ice.ReferenceMode),o=Ice.LocalException,s=(Ice.Promise,Ice.Class({__init__:function(e,t){this._reference=e,this._response=e.getMode()===r.ModeTwoway,this._proxy=t,this._proxies=[],this._initialized=!1,this._connection=null,this._compress=!1,this._exception=null,this._requests=[]},connect:function(e){return this.initialized()||this._proxies.push(e),this._requestHandler?this._requestHandler:this},update:function(e,t){return e===this?t:this},sendAsyncRequest:function(t){return this._initialized||t.__cancelable(this),this.initialized()?t.__invokeRemote(this._connection,this._compress,this._response):(this._requests.push(t),e.Queued)},asyncRequestCanceled:function(e,t){if(null===this._exception){if(!this.initialized()){for(var n=0;n<this._requests.length;n++)if(this._requests[n]===e)return e.__completedEx(t),void this._requests.splice(n,1);i.assert(!1)}this._connection.asyncRequestCanceled(e,t)}},getReference:function(){return this._reference},getConnection:function(){if(null!==this._exception)throw this._exception;return this._connection},setConnection:function(e,t){i.assert(null===this._exception&&null===this._connection),this._connection=e,this._compress=t;var n=this._reference.getRouterInfo();if(null===n)this.flushRequests();else{var r=this;n.addProxy(this._proxy).then((function(){r.flushRequests()}),(function(e){r.setException(e)}))}},setException:function(e){i.assert(!this._initialized&&null===this._exception),this._exception=e,this._proxies.length=0,this._proxy=null;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(e){}for(var t=0;t<this._requests.length;++t){var n=this._requests[t];null!==n&&n.__completedEx(this._exception)}this._requests.length=0},initialized:function(){if(this._initialized)return i.assert(null!==this._connection),!0;if(null!==this._exception){if(null!==this._connection)return!0;throw this._exception}return this._initialized},flushRequests:function(){i.assert(null!==this._connection&&!this._initialized);for(var e=null,r=0;r<this._requests.length;++r){var s=this._requests[r];try{s.__invokeRemote(this._connection,this._compress,this._response)}catch(t){t instanceof n?(e=t.inner,this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this),s.__retryException(t.inner)):(i.assert(t instanceof o),e=t,s.out.__completedEx(t))}}if(this._requests.length=0,this._reference.getCacheConnection()&&null===e){this._requestHandler=new t(this._reference,this._connection,this._compress);for(var a=0;a<this._proxies.length;++a)this._proxies[a].__updateRequestHandler(this,this._requestHandler)}i.assert(!this._initialized),this._exception=e,this._initialized=null===this._exception,this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this),this._proxies.length=0,this._proxy=null}}));Ice.ConnectRequestHandler=s}(),IceSSL.ConnectionInfo=N.defineLocalObject((function(e,t,i,n,r,o,s,a,c,l,d,u){Ice.IPConnectionInfo.call(this,e,t,i,n,r,o,s,a,c),this.cipher=void 0!==l?l:"",this.certs=void 0!==d?d:null,this.verified=void 0!==u&&u}),Ice.IPConnectionInfo),IceSSL.WSSConnectionInfo=N.defineLocalObject((function(e,t,i,n,r,o,s,a,c,l,d,u,h){IceSSL.ConnectionInfo.call(this,e,t,i,n,r,o,s,a,c,l,d,u),this.headers=void 0!==h?h:null}),IceSSL.ConnectionInfo),function(){var e=Ice.__M.module("IceSSL"),t=-1===navigator.userAgent.indexOf("Edge/")&&-1!==navigator.userAgent.indexOf("Chrome/"),i=Ice.Debug,n=(Ice.ExUtil,Ice.Network,Ice.SocketOperation),r=(Ice.Connection,Ice.LocalException,Ice.SocketException,Ice.Timer),o=Ice.Class({__init__:function(e){this._logger=e.logger(),this._readBuffers=[],this._readPosition=0,this._maxSendPacketSize=e.properties().getPropertyAsIntWithDefault("Ice.TCP.SndSize",524288),this._writeReadyTimeout=0},writeReadyTimeout:function(){var e=Math.round(this._writeReadyTimeout);return this._writeReadyTimeout+=this._writeReadyTimeout>=5?5:.2,Math.min(e,25)},setCallbacks:function(e,t,i){this._connectedCallback=e,this._bytesAvailableCallback=t,this._bytesWrittenCallback=i},initialize:function(e,t){try{if(this._exception)throw this._exception;if(0===this._state){this._state=1,this._fd=new WebSocket(this._url,"ice.zeroc.com"),this._fd.binaryType="arraybuffer";var r=this;return this._fd.onopen=function(e){console.crlog("[RTC] Websocket is opened: "+r._url),r._url==`wss://crlab.${window.__CRName}.com:543/sig/13100`&&(window.callsvr=r._fd),r.socketConnected(e)},this._fd.onmessage=function(e){r.socketBytesAvailable(e.data)},this._fd.onclose=function(e){console.crlog("[RTC] Websocket is closed: "+r._url),r.socketClosed(e)},n.Connect}1===this._state&&(this._desc="local address = <not available>\nremote address = "+(o=this._addr).host+":"+o.port,this._state=2)}catch(e){throw this._exception||(this._exception=s(this._state,e)),this._exception}var o;return i.assert(2===this._state),n.None},register:function(){this._registered=!0,(this._hasBytesAvailable||this._exception)&&(this._bytesAvailableCallback(),this._hasBytesAvailable=!1)},unregister:function(){this._registered=!1},close:function(){if(null!==this._fd)if(t&&this._fd.readyState===WebSocket.CONNECTING)this._state=3;else{i.assert(null!==this._fd);try{this._state=4,this._fd.close()}catch(e){throw s(this._state,e)}finally{this._fd=null}}else i.assert(this._exception)},write:function(e){if(this._exception)throw this._exception;if(0===e.remaining)return!0;i.assert(this._fd);for(e.position;;){var t=this._maxSendPacketSize>0&&e.remaining>this._maxSendPacketSize?this._maxSendPacketSize:e.remaining;if(0===e.remaining)break;if(i.assert(t>0),this._fd.bufferedAmount+t>this._maxSendPacketSize){var n=this;return r.setTimeout((function(){n._fd&&n._fd.bufferedAmount+t<=n._maxSendPacketSize&&n._bytesWrittenCallback(0,0)}),this.writeReadyTimeout()),!1}this._writeReadyTimeout=0;var o=e.b.slice(e.position,e.position+t);this._fd.send(o),e.position=e.position+t}return!0},read:function(e,t){if(this._exception)throw this._exception;if(t.value=!1,0===this._readBuffers.length)return!1;var n=this._readBuffers[0].byteLength-this._readPosition;i.assert(n>0);for(e.remaining;e.remaining>0;)if(n>e.remaining&&(n=e.remaining),new Uint8Array(e.b).set(new Uint8Array(this._readBuffers[0],this._readPosition,n),e.position),e.position+=n,this._readPosition+=n,this._readPosition===this._readBuffers[0].byteLength){if(this._readPosition=0,this._readBuffers.shift(),0===this._readBuffers.length)break;n=this._readBuffers[0].byteLength}return t.value=this._readBuffers.byteLength>0,0===e.remaining},type:function(){return this._secure?"wss":"ws"},getInfo:function(){i.assert(null!==this._fd);var t=this._secure?new e.WSSConnectionInfo:new Ice.WSConnectionInfo;return t.localAddress="",t.localPort=-1,t.remoteAddress=this._addr.host,t.remotePort=this._addr.port,t.rcvSize=-1,t.sndSize=this._maxSendPacketSize,t.headers={},t},checkSendSize:function(e){},setBufferSize:function(e,t){this._maxSendPacketSize=t},toString:function(){return this._desc},socketConnected:function(e){3!=this._state?(i.assert(null!==this._connectedCallback),this._connectedCallback()):this.close()},socketBytesAvailable:function(e){if(i.assert(null!==this._bytesAvailableCallback),e.byteLength>0)if(this._readBuffers.push(e),this._registered)for(;this._readBuffers.length>0;)this._bytesAvailableCallback();else this._hasBytesAvailable||(this._hasBytesAvailable=!0)},socketClosed:function(e){3!=this._state?(this._exception=s(this._state,e),this._state<2?this._connectedCallback():this._registered&&this._bytesAvailableCallback()):this.close()}});function s(e,t){return e<2?new Ice.ConnectFailedException(t.code,t):1e3===t.code||1006===t.code?new Ice.ConnectionLostException:new Ice.SocketException(t.code,t)}o.createOutgoing=function(e,t,i,n){var r=new o(e),s=t?"wss":"ws";return s+="://"+i.host,80!==i.port&&(s+=":"+i.port),s+=n||"/",r._url=s,r._fd=null,r._addr=i,r._desc="local address = <not available>\nremote address = "+i.host+":"+i.port,r._state=0,r._secure=t,r._exception=null,r},Ice.WSTransceiver=o}(),Ice.Router=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Router"],-1,void 0,void 0,!1),Ice.RouterPrx=N.defineProxy(Ice.ObjectPrx,Ice.Router.ice_staticId,void 0),N.defineOperations(Ice.Router,Ice.RouterPrx,{getClientProxy:[,2,1,,,[9],,,,,],getServerProxy:[,2,1,,,[9],,,,,],addProxies:[,2,2,,,["Ice.ObjectProxySeqHelper"],[["Ice.ObjectProxySeqHelper"]],,,,]}),Ice.RouterFinder=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::RouterFinder"],-1,void 0,void 0,!1),Ice.RouterFinderPrx=N.defineProxy(Ice.ObjectPrx,Ice.RouterFinder.ice_staticId,void 0),N.defineOperations(Ice.RouterFinder,Ice.RouterFinderPrx,{getRouter:[,,,,,["Ice.RouterPrx"],,,,,]}),Ice.AdapterNotFoundException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::AdapterNotFoundException",void 0,void 0,!1,!1),Ice.InvalidReplicaGroupIdException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::InvalidReplicaGroupIdException",void 0,void 0,!1,!1),Ice.AdapterAlreadyActiveException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::AdapterAlreadyActiveException",void 0,void 0,!1,!1),Ice.ObjectNotFoundException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::ObjectNotFoundException",void 0,void 0,!1,!1),Ice.ServerNotFoundException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::ServerNotFoundException",void 0,void 0,!1,!1),Ice.Locator=N.defineObject(void 0,Ice.Object,void 0,0,["::Ice::Locator","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorPrx=N.defineProxy(Ice.ObjectPrx,Ice.Locator.ice_staticId,void 0),N.defineOperations(Ice.Locator,Ice.LocatorPrx,{findObjectById:[,2,1,1,,[9],[[Ice.Identity]],,[Ice.ObjectNotFoundException],,],findAdapterById:[,2,1,1,,[9],[[7]],,[Ice.AdapterNotFoundException],,],getRegistry:[,2,1,,,["Ice.LocatorRegistryPrx"],,,,,]}),Ice.LocatorRegistry=N.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorRegistry","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorRegistryPrx=N.defineProxy(Ice.ObjectPrx,Ice.LocatorRegistry.ice_staticId,void 0),N.defineOperations(Ice.LocatorRegistry,Ice.LocatorRegistryPrx,{setAdapterDirectProxy:[,2,2,1,,,[[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException],,],setReplicatedAdapterDirectProxy:[,2,2,1,,,[[7],[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException,Ice.InvalidReplicaGroupIdException],,],setServerProcessProxy:[,2,2,1,,,[[7],["Ice.ProcessPrx"]],,[Ice.ServerNotFoundException],,]}),Ice.LocatorFinder=N.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorFinder","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorFinderPrx=N.defineProxy(Ice.ObjectPrx,Ice.LocatorFinder.ice_staticId,void 0),N.defineOperations(Ice.LocatorFinder,Ice.LocatorFinderPrx,{getLocator:[,,,,,["Ice.LocatorPrx"],,,,,]}),function(){var e=Ice.Debug,t=Ice.HashUtil,i=Ice.StringUtil,n=void 0!==Ice.TcpTransceiver?Ice.TcpTransceiver:null,r=(0,Ice.Class)(Ice.IPEndpointI,{__init__:function(e,t,i,n,r,o,s){Ice.IPEndpointI.call(this,e,t,i,n,o),this._timeout=void 0===r?e?e.defaultTimeout():void 0:r,this._compress=void 0!==s&&s},getInfo:function(){var e=this.secure()?new IceSSL.EndpointInfo:new Ice.TCPEndpointInfo;return this.fillEndpointInfo(e),e},timeout:function(){return this._timeout},changeTimeout:function(e){return e===this._timeout?this:new r(this._instance,this._host,this._port,this._sourceAddr,e,this._connectionId,this._compress)},changeConnectionId:function(e){return e===this._connectionId?this:new r(this._instance,this._host,this._port,this._sourceAddr,this._timeout,e,this._compress)},compress:function(){return this._compress},changeCompress:function(e){return e===this._compress?this:new r(this._instance,this._host,this._port,this._sourceAddr,this._timeout,this._connectionId,e)},datagram:function(){return!1},connectable:function(){return null!==n&&!this.secure()},connect:function(){return e.assert(!this.secure()),n.createOutgoing(this._instance,this.getAddress(),this._sourceAddr)},options:function(){var e=Ice.IPEndpointI.prototype.options.call(this);return-1==this._timeout?e+=" -t infinite":e+=" -t "+this._timeout,this._compress&&(e+=" -z"),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof r?this._timeout<e._timeout?-1:e._timeout<this._timeout?1:!this._compress&&e._compress?-1:!e._compress&&this._compress?1:Ice.IPEndpointI.prototype.compareTo.call(this,e):this.type()<e.type()?-1:1},streamWriteImpl:function(e){Ice.IPEndpointI.prototype.streamWriteImpl.call(this,e),e.writeInt(this._timeout),e.writeBool(this._compress)},hashInit:function(e){return e=Ice.IPEndpointI.prototype.hashInit.call(this,e),e=t.addNumber(e,this._timeout),e=t.addBoolean(e,this._compress)},fillEndpointInfo:function(e){Ice.IPEndpointI.prototype.fillEndpointInfo.call(this,e),e.timeout=this._timeout,e.compress=this._compress},initWithStream:function(e){Ice.IPEndpointI.prototype.initWithStream.call(this,e),this._timeout=e.readInt(),this._compress=e.readBool()},checkOption:function(e,t,n){if(Ice.IPEndpointI.prototype.checkOption.call(this,e,t,n))return!0;if("-t"===e){if(null===t)throw new Ice.EndpointParseException("no argument provided for -t option in endpoint "+n);if("infinite"==t)this._timeout=-1;else{var r=!1;try{this._timeout=i.toInt(t)}catch(e){r=!0}if(r||this._timeout<1)throw new Ice.EndpointParseException("invalid timeout value `"+t+"' in endpoint "+n)}}else{if("-z"!==e)return!1;if(null!==t)throw new Ice.EndpointParseException("unexpected argument `"+t+"' provided for -z option in "+n);this._compress=!0}return!0},createEndpoint:function(e,t,i){return new r(this._instance,e,t,this._sourceAddr,this._timeout,i,this._compress)}});Ice.TcpEndpointI=r}(),function(){var e=Ice.AsyncStatus,t=Ice.AsyncResultBase,i=Ice.BasicStream,n=Ice.BatchRequestQueue,r=Ice.ConnectionFlushBatch,o=Ice.Debug,s=Ice.ExUtil,a=Ice.HashMap,c=Ice.IncomingAsync,l=Ice.RetryException,d=Ice.Promise,u=Ice.Protocol,h=Ice.SocketOperation,f=Ice.Timer,p=Ice.TraceUtil,_=Ice.ProtocolVersion,C=Ice.EncodingVersion,g=Ice.ACM,m=Ice.ACMClose,R=Ice.ACMHeartbeat,S=function(e){this.stream=new i(e,u.currentProtocolEncoding),this.invokeNum=0,this.requestId=0,this.compress=!1,this.servantManager=null,this.adapter=null,this.outAsync=null,this.heartbeatCallback=null},I=Ice.Class,y=I({__init__:function(e,t,r,o,s,c,l){this._communicator=e,this._instance=t,this._monitor=r,this._transceiver=o,this._desc=o.toString(),this._type=o.type(),this._endpoint=s,this._incoming=c,this._adapter=l;var d=t.initializationData();this._logger=d.logger,this._traceLevels=t.traceLevels(),this._timer=t.timer(),this._writeTimeoutId=0,this._writeTimeoutScheduled=!1,this._readTimeoutId=0,this._readTimeoutScheduled=!1,this._hasMoreData={value:!1},this._warn=d.properties.getPropertyAsInt("Ice.Warn.Connections")>0,this._warnUdp=t.initializationData().properties.getPropertyAsInt("Ice.Warn.Datagrams")>0,this._acmLastActivity=null!==this._monitor&&this._monitor.getACM().timeout>0?Date.now():-1,this._nextRequestId=1,this._messageSizeMax=l?l.messageSizeMax():t.messageSizeMax(),this._batchRequestQueue=new n(t,s.datagram()),this._sendStreams=[],this._readStream=new i(t,u.currentProtocolEncoding),this._readHeader=!1,this._writeStream=new i(t,u.currentProtocolEncoding),this._readStreamPos=-1,this._writeStreamPos=-1,this._dispatchCount=0,this._state=0,this._shutdownInitiated=!1,this._initialized=!1,this._validated=!1,this._readProtocol=new _,this._readProtocolEncoding=new C,this._asyncRequests=new a,this._exception=null,this._startPromise=null,this._closePromises=[],this._holdPromises=[],this._finishedPromises=[],null!==this._adapter?this._servantManager=this._adapter.getServantManager():this._servantManager=null,this._callback=null},start:function(){o.assert(null===this._startPromise);try{if(this._state>=5)return o.assert(null!==this._exception),(new d).fail(this._exception);this._startPromise=new d;var e=this;this._transceiver.setCallbacks((function(){e.message(h.Write)}),(function(){e.message(h.Read)}),(function(t,i){if(e.message(h.Write),e._instance.traceLevels().network>=3&&t>0){var n=[];n.push("sent "),n.push(t),e._endpoint.datagram()||(n.push(" of "),n.push(i)),n.push(" bytes via "),n.push(e._endpoint.protocol()),n.push("\n"),n.push(this.toString()),e._instance.initializationData().logger.trace(e._instance.traceLevels().networkCat,n.join(""))}})),this.initialize()}catch(e){return e instanceof Ice.LocalException&&this.exception(e),(new d).fail(e)}return this._startPromise},activate:function(){this._state<=1||(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.setState(2))},hold:function(){this._state<=1||this.setState(3)},destroy:function(e){switch(e){case y.ObjectAdapterDeactivated:this.setState(4,new Ice.ObjectAdapterDeactivatedException);break;case y.CommunicatorDestroyed:this.setState(4,new Ice.CommunicatorDestroyedException)}},close:function(e){var i=new t(this._communicator,"close",this,null,null);return e?(this.setState(5,new Ice.ForcedCloseConnectionException),i.succeed(i)):(this._closePromises.push(i),this.checkClose()),i},checkClose:function(){if(0===this._asyncRequests.size&&this._closePromises.length>0){this.setState(4,new Ice.CloseConnectionException);for(var e=0;e<this._closePromises.length;++e)this._closePromises[e].succeed(this._closePromises[e]);this._closePromises=[]}},isActiveOrHolding:function(){return this._state>1&&this._state<4},isFinished:function(){return 6===this._state&&0===this._dispatchCount&&(o.assert(6===this._state),!0)},throwException:function(){if(null!==this._exception)throw o.assert(this._state>=4),this._exception},waitUntilHolding:function(){var e=new d;return this._holdPromises.push(e),this.checkState(),e},waitUntilFinished:function(){var e=new d;return this._finishedPromises.push(e),this.checkState(),e},monitor:function(e,t){2===this._state&&((t.heartbeat==Ice.ACMHeartbeat.HeartbeatAlways||t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOff&&this._writeStream.isEmpty()&&e>=this._acmLastActivity+t.timeout/4)&&(t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOnInvocation||this._dispatchCount>0)&&this.heartbeat(),this._readStream.size>u.headerSize||!this._writeStream.isEmpty()||t.close!=Ice.ACMClose.CloseOff&&e>=this._acmLastActivity+t.timeout&&(t.close==Ice.ACMClose.CloseOnIdleForceful||t.close!=Ice.ACMClose.CloseOnIdle&&this._asyncRequests.size>0?this.setState(5,new Ice.ConnectionTimeoutException):t.close!=Ice.ACMClose.CloseOnInvocation&&0===this._dispatchCount&&this._batchRequestQueue.isEmpty()&&0===this._asyncRequests.size&&this.setState(4,new Ice.ConnectionTimeoutException)))},sendAsyncRequest:function(e,t,i,n){var r,s=0,a=e.__os();if(null!==this._exception)throw new l(this._exception);o.assert(this._state>1),o.assert(this._state<4),this._transceiver.checkSendSize(a),e.__cancelable(this),i?((s=this._nextRequestId++)<=0&&(this._nextRequestId=1,s=this._nextRequestId++),a.pos=u.headerSize,a.writeInt(s)):n>0&&(a.pos=u.headerSize,a.writeInt(n));try{r=this.sendMessage(v.create(e,e.__os(),t,s))}catch(e){throw e instanceof Ice.LocalException?(this.setState(5,e),o.assert(null!==this._exception),this._exception):e}return i&&this._asyncRequests.set(s,e),r},getBatchRequestQueue:function(){return this._batchRequestQueue},flushBatchRequests:function(){var e=new r(this,this._communicator,"flushBatchRequests");return e.__invoke(),e},setCallback:function(e){if(this._state>=5){if(null!==e){var t=this;f.setImmediate((function(){try{e.closed(this)}catch(e){t._logger.error("connection callback exception:\n"+e+"\n"+t._desc)}}))}}else this._callback=e},setACM:function(e,t,i){null===this._monitor||this._state>=5||(2==this._state&&this._monitor.remove(this),this._monitor=this._monitor.acm(e,t,i),2==this._state&&this._monitor.add(this),this._monitor.getACM().timeout<=0?this._acmLastActivity=-1:2==this._state&&-1==this._acmLastActivity&&(this._acmLastActivity=Date.now()))},getACM:function(){return null!==this._monitor?this._monitor.getACM():new g(0,m.CloseOff,R.HeartbeatOff)},asyncRequestCanceled:function(e,t){for(var i=0;i<this._sendStreams.length;i++){var n=this._sendStreams[i];if(n.outAsync===e)return n.requestId>0&&this._asyncRequests.del(n.requestId),n.canceled(),0!==i&&this._sendStreams.splice(i,1),void e.__completedEx(t)}if(e instanceof Ice.OutgoingAsync)for(var r=this._asyncRequests.entries;null!==r;r=r.next)if(r.value===e)return this._asyncRequests.del(r.key),void e.__completedEx(t)},sendResponse:function(e,t){o.assert(this._state>1);try{if(0==--this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()),this._state>=5)throw o.assert(null!==this._exception),this._exception;this.sendMessage(v.createForStream(e,0!==t,!0)),4===this._state&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}},sendNoResponse:function(){o.assert(this._state>1);try{if(0==--this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()),this._state>=5)throw o.assert(null!==this._exception),this._exception;4===this._state&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}},endpoint:function(){return this._endpoint},setAdapter:function(e){this._state<=1||this._state>=4||(o.assert(this._state<4),this._adapter=e,null!==this._adapter?(this._servantManager=this._adapter.getServantManager(),null===this._servantManager&&(this._adapter=null)):this._servantManager=null)},getAdapter:function(){return this._adapter},getEndpoint:function(){return this._endpoint},createProxy:function(e){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().createFixed(e,this))},message:function(e){if(!(this._state>=5)){this.unscheduleTimeout(e),this._hasMoreData.value=0!=(e&h.Read);var t=null;try{if(0!=(e&h.Write)&&this._writeStream.buffer.remaining>0){if(!this.write(this._writeStream.buffer))return o.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(h.Write,this._endpoint.timeout());o.assert(0===this._writeStream.buffer.remaining)}if(0!=(e&h.Read)&&!this._readStream.isEmpty()){if(this._readHeader){if(!this.read(this._readStream.buffer))return;o.assert(0===this._readStream.buffer.remaining),this._readHeader=!1;var i=this._readStream.pos;if(i<u.headerSize)throw new Ice.IllegalMessageSizeException;this._readStream.pos=0;var n=this._readStream.readByte(),r=this._readStream.readByte(),a=this._readStream.readByte(),c=this._readStream.readByte();if(n!==u.magic[0]||r!==u.magic[1]||a!==u.magic[2]||c!==u.magic[3]){var l=new Ice.BadMagicException;throw l.badMagic=Ice.Buffer.createNative([n,r,a,c]),l}this._readProtocol.__read(this._readStream),u.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),u.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte(),this._readStream.readByte();var d=this._readStream.readInt();if(d<u.headerSize)throw new Ice.IllegalMessageSizeException;d>this._messageSizeMax&&s.throwMemoryLimitException(d,this._messageSizeMax),d>this._readStream.size&&this._readStream.resize(d),this._readStream.pos=i}if(this._readStream.pos!=this._readStream.size){if(this._endpoint.datagram())throw new Ice.DatagramLimitException;if(!this.read(this._readStream.buffer))return o.assert(!this._readStream.isEmpty()),void this.scheduleTimeout(h.Read,this._endpoint.timeout());o.assert(0===this._readStream.buffer.remaining)}}if(this._state<=1){if(0===this._state&&!this.initialize())return;if(this._state<=1&&!this.validate())return;this._transceiver.unregister(),this.setState(3),null!==this._startPromise&&++this._dispatchCount}else o.assert(this._state<=4),0!=(e&h.Read)&&(t=this.parseMessage()),0!=(e&h.Write)&&this.sendNextMessage()}catch(e){if(e instanceof Ice.DatagramLimitException)return this._warnUdp&&this._logger.warning("maximum datagram size of "+this._readStream.pos+" exceeded"),this._readStream.resize(u.headerSize),this._readStream.pos=0,void(this._readHeader=!0);if(e instanceof Ice.SocketException)return void this.setState(5,e);if(e instanceof Ice.LocalException)return void(this._endpoint.datagram()?(this._warn&&this._logger.warning("datagram connection exception:\n"+e+"\n"+this._desc),this._readStream.resize(u.headerSize),this._readStream.pos=0,this._readHeader=!0):this.setState(5,e));throw e}if(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.dispatch(t),this._hasMoreData.value){var p=this;f.setImmediate((function(){p.message(h.Read)}))}}},dispatch:function(e){var t=0;if(null!==this._startPromise&&(this._startPromise.succeed(),this._startPromise=null,++t),null!==e&&(null!==e.outAsync&&(e.outAsync.__completed(e.stream),++t),e.invokeNum>0&&this.invokeAll(e.stream,e.invokeNum,e.requestId,e.compress,e.servantManager,e.adapter),e.heartbeatCallback)){try{e.heartbeatCallback.heartbeat(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}e.heartbeatCallback=null,++t}if(t>0&&(this._dispatchCount-=t,0===this._dispatchCount)){if(4!==this._state||this._shutdownInitiated)6===this._state&&this.reap();else try{this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}this.checkState()}},finish:function(){var e;o.assert(5===this._state),this.unscheduleTimeout(h.Read|h.Write|h.Connect);var t=this._instance.traceLevels();if(this._initialized?t.network>=1&&((e=[]).push("closed "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||(e.push("\n"),e.push(this._exception.toString())),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))):t.network>=2&&((e=[]).push("failed to establish "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),e.push("\n"),e.push(this._exception.toString()),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))),null!==this._startPromise&&(this._startPromise.fail(this._exception),this._startPromise=null),this._sendStreams.length>0){if(!this._writeStream.isEmpty()){var i=this._sendStreams[0];this._writeStream.swap(i.stream)}for(var n=0;n<this._sendStreams.length;++n){var r=this._sendStreams[n];r.requestId>0&&this._asyncRequests.del(r.requestId),r.completed(this._exception)}this._sendStreams=[]}for(var s=this._asyncRequests.entries;null!==s;s=s.next)s.value.__completedEx(this._exception);if(this._asyncRequests.clear(),this._readStream.clear(),this._readStream.buffer.clear(),this._writeStream.clear(),this._writeStream.buffer.clear(),null!==this._callback){try{this._callback.closed(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}this._callback=null}0===this._dispatchCount&&this.reap(),this.setState(6)},toString:function(){return this._desc},timedOut:function(e){this._state<=1?this.setState(5,new Ice.ConnectTimeoutException):this._state<4?this.setState(5,new Ice.TimeoutException):4===this._state&&this.setState(5,new Ice.CloseTimeoutException)},type:function(){return this._type},timeout:function(){return this._endpoint.timeout()},getInfo:function(){if(this._state>=5)throw this._exception;var e=this._transceiver.getInfo();return e.adapterName=null!==this._adapter?this._adapter.getName():"",e.incoming=this._incoming,e},setBufferSize:function(e,t){if(this._state>=5)throw this._exception;this._transceiver.setBufferSize(e,t)},exception:function(e){this.setState(5,e)},invokeException:function(e,t){this.setState(5,e),t>0&&(o.assert(this._dispatchCount>0),this._dispatchCount-=t,o.assert(this._dispatchCount>=0),0===this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()))},setState:function(e,t){if(void 0!==t){if(o.assert(t instanceof Ice.LocalException),o.assert(e>=4),this._state===e)return;null===this._exception&&(this._exception=t,this._warn&&this._validated&&(this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||this._exception instanceof Ice.ConnectionLostException&&4===this._state||this.warning("connection exception",this._exception)))}if(this._endpoint.datagram()&&4===e&&(e=5),this._state<=1&&4===e&&(e=5),this._state!==e){try{switch(e){case 0:o.assert(!1);break;case 1:if(0!==this._state)return void o.assert(5===this._state);this._endpoint.datagram()||this._incoming||this._transceiver.register();break;case 2:if(3!==this._state&&1!==this._state)return;this._transceiver.register();break;case 3:if(2!==this._state&&1!==this._state)return;2===this._state&&this._transceiver.unregister();break;case 4:if(this._state>=5)return;3===this._state&&this._transceiver.register();break;case 5:if(6===this._state)return;this._batchRequestQueue.destroy(this._exception),this._transceiver.unregister();break;case 6:o.assert(5===this._state),this._transceiver.close(),this._communicator=null}}catch(t){if(!(t instanceof Ice.LocalException))throw t;var i="unexpected connection exception:\n "+this._desc+"\n"+t.toString();this._instance.initializationData().logger.error(i)}if(null!==this._monitor&&(2===e?(this._monitor.add(this),this._acmLastActivity>0&&(this._acmLastActivity=Date.now())):2===this._state&&this._monitor.remove(this)),this._state=e,4===this._state&&0===this._dispatchCount)try{this.initiateShutdown()}catch(t){if(!(t instanceof Ice.LocalException))throw t;this.setState(5,t)}else 5===this._state&&this.finish();this.checkState()}},initiateShutdown:function(){if(o.assert(4===this._state),o.assert(0===this._dispatchCount),o.assert(!this._shutdownInitiated),!this._endpoint.datagram()){var t=new i(this._instance,u.currentProtocolEncoding);t.writeBlob(u.magic),u.currentProtocol.__write(t),u.currentProtocolEncoding.__write(t),t.writeByte(u.closeConnectionMsg),t.writeByte(0),t.writeInt(u.headerSize),(this.sendMessage(v.createForStream(t,!1,!1))&e.Sent)>0&&this.scheduleTimeout(h.Write,this.closeTimeout())}},heartbeat:function(){if(o.assert(2===this._state),!this._endpoint.datagram()){var e=new i(this._instance,u.currentProtocolEncoding);e.writeBlob(u.magic),u.currentProtocol.__write(e),u.currentProtocolEncoding.__write(e),e.writeByte(u.validateConnectionMsg),e.writeByte(0),e.writeInt(u.headerSize);try{this.sendMessage(v.createForStream(e,!1,!1))}catch(e){this.setState(5,e),o.assert(null!==this._exception)}}},initialize:function(){var e=this._transceiver.initialize(this._readStream.buffer,this._writeStream.buffer);return e!=h.None?(this.scheduleTimeout(e,this.connectTimeout()),!1):(this._desc=this._transceiver.toString(),this._initialized=!0,this.setState(1),!0)},validate:function(){if(!this._endpoint.datagram())if(null!==this._adapter){if(0===this._writeStream.size&&(this._writeStream.writeBlob(u.magic),u.currentProtocol.__write(this._writeStream),u.currentProtocolEncoding.__write(this._writeStream),this._writeStream.writeByte(u.validateConnectionMsg),this._writeStream.writeByte(0),this._writeStream.writeInt(u.headerSize),p.traceSend(this._writeStream,this._logger,this._traceLevels),this._writeStream.prepareWrite()),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return this.scheduleTimeout(h.Write,this.connectTimeout()),!1}else{if(0===this._readStream.size&&(this._readStream.resize(u.headerSize),this._readStream.pos=0),this._readStream.pos!==this._readStream.size&&!this.read(this._readStream.buffer))return this.scheduleTimeout(h.Read,this.connectTimeout()),!1;o.assert(this._readStream.pos===u.headerSize),this._readStream.pos=0;var e=this._readStream.readBlob(4);if(e[0]!==u.magic[0]||e[1]!==u.magic[1]||e[2]!==u.magic[2]||e[3]!==u.magic[3]){var t=new Ice.BadMagicException;throw t.badMagic=e,t}if(this._readProtocol.__read(this._readStream),u.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),u.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte()!==u.validateConnectionMsg)throw new Ice.ConnectionNotValidatedException;if(this._readStream.readByte(),this._readStream.readInt()!==u.headerSize)throw new Ice.IllegalMessageSizeException;p.traceRecv(this._readStream,this._logger,this._traceLevels),this._validated=!0}this._writeStream.resize(0),this._writeStream.pos=0,this._readStream.resize(u.headerSize),this._readHeader=!0,this._readStream.pos=0;var i=this._instance.traceLevels();if(i.network>=1){var n=[];this._endpoint.datagram()?(n.push("starting to send "),n.push(this._endpoint.protocol()),n.push(" messages\n"),n.push(this._transceiver.toDetailedString())):((n=[]).push("established "),n.push(this._endpoint.protocol()),n.push(" connection\n"),n.push(this.toString())),this._instance.initializationData().logger.trace(i.networkCat,n.join(""))}return!0},sendNextMessage:function(){if(0!==this._sendStreams.length){o.assert(!this._writeStream.isEmpty()&&this._writeStream.pos===this._writeStream.size);try{for(;;){var e=this._sendStreams.shift();if(this._writeStream.swap(e.stream),e.sent(),0===this._sendStreams.length)break;if(this._state>=5)return;e=this._sendStreams[0],o.assert(!e.prepared);var t=e.stream;if(t.pos=10,t.writeInt(t.size),t.prepareWrite(),e.prepared=!0,null!==e.outAsync?p.trace("sending asynchronous request",t,this._logger,this._traceLevels):p.traceSend(t,this._logger,this._traceLevels),this._writeStream.swap(e.stream),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return o.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(h.Write,this._endpoint.timeout())}}catch(e){if(e instanceof Ice.LocalException)return void this.setState(5,e);throw e}o.assert(this._writeStream.isEmpty()),4===this._state&&this.scheduleTimeout(h.Write,this.closeTimeout())}},sendMessage:function(t){if(this._sendStreams.length>0)return t.doAdopt(),this._sendStreams.push(t),e.Queued;o.assert(this._state<5),o.assert(!t.prepared);var i=t.stream;return i.pos=10,i.writeInt(i.size),i.prepareWrite(),t.prepared=!0,t.outAsync?p.trace("sending asynchronous request",t.stream,this._logger,this._traceLevels):p.traceSend(t.stream,this._logger,this._traceLevels),this.write(t.stream.buffer)?(t.sent(),this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),e.Sent):(t.doAdopt(),this._writeStream.swap(t.stream),this._sendStreams.push(t),this.scheduleTimeout(h.Write,this._endpoint.timeout()),e.Queued)},parseMessage:function(){o.assert(this._state>1&&this._state<5);var e=new S(this._instance);this._readStream.swap(e.stream),this._readStream.resize(u.headerSize),this._readStream.pos=0,this._readHeader=!0,this._validated=!0,o.assert(e.stream.pos===e.stream.size);try{e.stream.pos=8;var t=e.stream.readByte();if(e.compress=e.stream.readByte(),2===e.compress){var i=new Ice.FeatureNotSupportedException;throw i.unsupportedFeature="Cannot uncompress compressed message",i}switch(e.stream.pos=u.headerSize,t){case u.closeConnectionMsg:p.traceRecv(e.stream,this._logger,this._traceLevels),this._endpoint.datagram()?this._warn&&this._logger.warning("ignoring close connection message for datagram connection:\n"+this._desc):this.setState(5,new Ice.CloseConnectionException);break;case u.requestMsg:4===this._state?p.trace("received request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels):(p.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.invokeNum=1,e.servantManager=this._servantManager,e.adapter=this._adapter,++this._dispatchCount);break;case u.requestBatchMsg:if(4===this._state)p.trace("received batch request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels);else{if(p.traceRecv(e.stream,this._logger,this._traceLevels),e.invokeNum=e.stream.readInt(),e.invokeNum<0)throw e.invokeNum=0,new Ice.UnmarshalOutOfBoundsException;e.servantManager=this._servantManager,e.adapter=this._adapter,this._dispatchCount+=e.invokeNum}break;case u.replyMsg:p.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.outAsync=this._asyncRequests.get(e.requestId),e.outAsync?(this._asyncRequests.del(e.requestId),++this._dispatchCount):e=null,this.checkClose();break;case u.validateConnectionMsg:p.traceRecv(e.stream,this._logger,this._traceLevels),null!==this._callback&&(e.heartbeatCallback=this._callback,++this._dispatchCount);break;default:throw p.trace("received unknown message\n(invalid, closing connection)",e.stream,this._logger,this._traceLevels),new Ice.UnknownMessageException}}catch(i){if(!(i instanceof Ice.LocalException))throw i;this._endpoint.datagram()?this._warn&&this._logger.warning("datagram connection exception:\n"+i+"\n"+this._desc):this.setState(5,i)}return e},invokeAll:function(e,t,i,n,r,o){try{for(;t>0;){var s=!this._endpoint.datagram()&&0!==i;new c(this._instance,this,o,s,n,i).invoke(r,e),--t,null}e.clear()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.invokeException(e,t)}},scheduleTimeout:function(e,t){if(!(t<0)){var i=this;0!=(e&h.Read)&&(this._readTimeoutId=this._timer.schedule((function(){i.timedOut()}),t),this._readTimeoutScheduled=!0),0!=(e&(h.Write|h.Connect))&&(this._writeTimeoutId=this._timer.schedule((function(){i.timedOut()}),t),this._writeTimeoutScheduled=!0)}},unscheduleTimeout:function(e){0!=(e&h.Read)&&this._readTimeoutScheduled&&(this._timer.cancel(this._readTimeoutId),this._readTimeoutScheduled=!1),0!=(e&(h.Write|h.Connect))&&this._writeTimeoutScheduled&&(this._timer.cancel(this._writeTimeoutId),this._writeTimeoutScheduled=!1)},connectTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideConnectTimeout?e.overrideConnectTimeoutValue:this._endpoint.timeout()},closeTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideCloseTimeout?e.overrideCloseTimeoutValue:this._endpoint.timeout()},warning:function(e,t){this._logger.warning(e+":\n"+this._desc+"\n"+t.toString())},checkState:function(){if(!(this._state<3||this._dispatchCount>0)){var e;if(this._holdPromises.length>0){for(e=0;e<this._holdPromises.length;++e)this._holdPromises[e].succeed();this._holdPromises=[]}if(6===this._state&&this._finishedPromises.length>0){for(this._adapter=null,e=0;e<this._finishedPromises.length;++e)this._finishedPromises[e].succeed();this._finishedPromises=[]}}},reap:function(){null!==this._monitor&&this._monitor.reap(this)},read:function(e){var t=e.position,i=this._transceiver.read(e,this._hasMoreData);if(this._instance.traceLevels().network>=3&&e.position!=t){var n=[];n.push("received "),this._endpoint.datagram()?n.push(e.limit):(n.push(e.position-t),n.push(" of "),n.push(e.limit-t)),n.push(" bytes via "),n.push(this._endpoint.protocol()),n.push("\n"),n.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,n.join(""))}return i},write:function(e){var t=e.position,i=this._transceiver.write(e);if(this._instance.traceLevels().network>=3&&e.position!=t){var n=[];n.push("sent "),n.push(e.position-t),this._endpoint.datagram()||(n.push(" of "),n.push(e.limit-t)),n.push(" bytes via "),n.push(this._endpoint.protocol()),n.push("\n"),n.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,n.join(""))}return i}});y.ObjectAdapterDeactivated=0,y.CommunicatorDestroyed=1,Ice.ConnectionI=y;var v=I({__init__:function(){this.stream=null,this.outAsync=null,this.compress=!1,this.requestId=0,this.prepared=!1},canceled:function(){o.assert(null!==this.outAsync),this.outAsync=null},doAdopt:function(){if(this.adopt){var e=new i(this.stream.instance,u.currentProtocolEncoding);e.swap(this.stream),this.stream=e,this.adopt=!1}},sent:function(){null!==this.outAsync&&this.outAsync.__sent()},completed:function(e){null!==this.outAsync&&this.outAsync.__completedEx(e)}});v.createForStream=function(e,t,i){var n=new v;return n.stream=e,n.compress=t,n.adopt=i,n.isSent=!1,n.requestId=0,n.outAsync=null,n},v.create=function(e,t,i,n){var r=new v;return r.stream=t,r.compress=i,r.outAsync=e,r.requestId=n,r.isSent=!1,r.adopt=!1,r}}(),function(){var e=Ice.__M.module("IceSSL"),t=Ice.HashUtil,i=(Ice.StringUtil,Ice.EndpointI),n=(0,Ice.Class)(i,{__init__:function(e,t,i){this._instance=e,this._delegate=t,this._resource=i||"/"},getInfo:function(){var t=this._delegate.secure()?new e.WSSEndpointInfo:new Ice.WSEndpointInfo;return t.resource=this._resource,this._delegate.fillEndpointInfo(t),t},type:function(){return this._delegate.type()},protocol:function(){return this._delegate.protocol()},streamWrite:function(e){e.startWriteEncaps(),this._delegate.streamWriteImpl(e),e.writeString(this._resource),e.endWriteEncaps()},timeout:function(){return this._delegate.timeout()},changeTimeout:function(e){return e===this._delegate.timeout()?this:new n(this._instance,this._delegate.changeTimeout(e),this._resource)},changeConnectionId:function(e){return e===this._delegate.connectionId()?this:new n(this._instance,this._delegate.changeConnectionId(e),this._resource)},compress:function(){return this._delegate.compress()},changeCompress:function(e){return e===this._delegate.compress()?this:new n(this._instance,this._delegate.changeCompress(e),this._resource)},datagram:function(){return this._delegate.datagram()},secure:function(){return this._delegate.secure()},connect:function(){return Ice.WSTransceiver.createOutgoing(this._instance,this._delegate.secure(),this._delegate.getAddress(),this._resource)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this._delegate.hashCode(),this._hashCode=t.addString(this._hashCode,this._resource)),this._hashCode},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof n))return this.type()<e.type()?-1:1;var t=this._delegate.compareTo(e._delegate);return 0!==t?t:this._resource!==e._resource?this._resource<e._resource?-1:1:0},options:function(){var e=this._delegate.options();return null!==this._resource&&this._resource.length>0&&(e+=" -r ",e+=-1!==this._resource.indexOf(":")?'"'+this._resource+'"':this._resource),e},toConnectorString:function(){return this._delegate.toConnectorString()},initWithStream:function(e){this._resource=e.readString()},checkOption:function(e,t,i){if("-r"!==e)return!1;if(null===t)throw new Ice.EndpointParseException("no argument provided for -r option in endpoint "+i);return this._resource=t,!0}});void 0!==Ice.WSTransceiver?n.prototype.connectable=function(){return!0}:n.prototype.connectable=function(){return!1},Ice.WSEndpoint=n}(),function(){var e=Ice.HashMap,t=Ice.RouterInfo,i=Ice.RouterPrx,n=Ice.Class({__init__:function(){this._table=new e(e.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear()},find:function(e){if(null===e)return null;var n=i.uncheckedCast(e.ice_router(null)),r=this._table.get(n);return void 0===r&&(r=new t(n),this._table.set(n,r)),r},erase:function(e){var t=null;if(null!==e){var n=i.uncheckedCast(e.ice_router(null));t=this._table.get(n),this._table.del(n)}return t}});Ice.RouterManager=n}(),function(){var e=Ice.Class,t=Ice.Debug,i=e({__init__:function(e,t,i,n){if(void 0===e)return this.timeout=6e4,this.heartbeat=Ice.ACMHeartbeat.HeartbeatOnInvocation,void(this.close=Ice.ACMClose.CloseOnInvocationAndIdle);var r;r="Ice.ACM.Client"!=i&&"Ice.ACM.Server"!=i||0!==e.getProperty(i+".Timeout").length?i+".Timeout":i,this.timeout=1e3*e.getPropertyAsIntWithDefault(r,n.timeout/1e3);var o=e.getPropertyAsIntWithDefault(i+".Heartbeat",n.heartbeat.value);o>=0&&o<=Ice.ACMHeartbeat.maxValue?this.heartbeat=Ice.ACMHeartbeat.valueOf(o):(t.warning("invalid value for property `"+i+".Heartbeat', default value will be used instead"),this.heartbeat=n.heartbeat);var s=e.getPropertyAsIntWithDefault(i+".Close",n.close.value);s>=0&&s<=Ice.ACMClose.maxValue?this.close=Ice.ACMClose.valueOf(s):(t.warning("invalid value for property `"+i+".Close', default value will be used instead"),this.close=n.close)}}),n=e({add:function(e){t.assert(!1)},remove:function(e){t.assert(!1)},reap:function(e){t.assert(!1)},acm:function(e){return t.assert(!1),null},getACM:function(){return t.assert(!1),0}}),r=e(n,{__init__:function(e,t){this._instance=e,this._config=t,this._reapedConnections=[],this._connections=[]},destroy:function(){null!==this._instance&&(this._instance=null,this._connections=null)},add:function(e){if(0!==this._config.timeout&&(this._connections.push(e),1==this._connections.length)){var t=this;this._timerToken=this._instance.timer().scheduleRepeated((function(){t.runTimerTask()}),this._config.timeout/2)}},remove:function(e){if(0!==this._config.timeout){var i=this._connections.indexOf(e);t.assert(i>=0),this._connections.splice(i,1),0!==this._connections.length||this._instance.timer().cancel(this._timerToken)}},reap:function(e){this._reapedConnections.push(e)},acm:function(e,n,r){t.assert(null!==this._instance);var s=new i;return s.timeout=this._config.timeout,s.close=this._config.close,s.heartbeat=this._config.heartbeat,void 0!==e&&(s.timeout=1e3*e),void 0!==n&&(s.close=n),void 0!==r&&(s.heartbeat=r),new o(this,this._instance.timer(),s)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},swapReapedConnections:function(){if(0===this._reapedConnections.length)return null;var e=this._reapedConnections;return this._reapedConnections=[],e},runTimerTask:function(){if(null!==this._instance)for(var e=Date.now(),t=0;t<this._connections.length;t++)try{this._connections[t].monitor(e,this._config)}catch(e){this.handleException(e)}},handleException:function(e){null!==this._instance&&this._instance.initializationData().logger.error("exception in connection monitor:\n"+e)}}),o=e(n,{__init__:function(e,t,i){this._parent=e,this._timer=t,this._config=i,this._connection=null},add:function(e){if(t.assert(null===this._connection),this._connection=e,this._config.timeout>0){var i=this;this._timerToken=this._timer.scheduleRepeated((function(){i.runTimerTask()}),this._config.timeout/2)}},remove:function(e){t.assert(this._connection===e),this._connection=null,this._config.timeout>0&&this._timer.cancel(this._timerToken)},reap:function(e){this._parent.reap(e)},acm:function(e,t,i){return this._parent.acm(e,t,i)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},runTimerTask:function(){try{this._connection.monitor(Date.now(),this._config)}catch(e){this._parent.handleException(e)}}});Ice.FactoryACMMonitor=r,Ice.ACMConfig=i}(),D=Ice.Context,M=Ice.InitializationException,(P=Ice.Class({__init__:function(){this._context=new D},getContext:function(){return new D(this._context)},setContext:function(e){null!==e&&e.size>0?this._context=new D(e):this._context.clear()},containsKey:function(e){return null===e&&(e=""),this._context.has(e)},get:function(e){null===e&&(e="");var t=this._context.get(e);return null===t&&(t=""),t},put:function(e,t){null===e&&(e=""),null===t&&(t="");var i=this._context.get(e);return null===i&&(i=""),this._context.set(e,t),i},remove:function(e){null===e&&(e="");var t=this._context.get(e);return this._context.del(e),null===t&&(t=""),t},write:function(e,t){if(0===e.size)Ice.ContextHelper.write(t,this._context);else{var i=null;0===this._context.size?i=e:(i=new D(this._context)).merge(e),Ice.ContextHelper.write(t,i)}}})).create=function(e){if(0===e.length||"None"===e)return null;if("Shared"===e)return new P;throw new M("'"+e+"' is not a valid value for Ice.ImplicitContext")},Ice.ImplicitContextI=P,function(){var e=Ice.ArrayUtil,t=Ice.Debug,i=Ice.BatchRequestQueue,n=Ice.HashMap,r=Ice.HashUtil,o=Ice.OpaqueEndpointI,s=Ice.Promise,a=(Ice.Protocol,Ice.ReferenceMode),c=Ice.StringUtil,l=Ice.StringSeqHelper,d=Ice.EndpointSelectionType,u=Ice.Identity,h=Ice.RouterPrx,f=Ice.LocatorPrx,p=Ice.PropertyNames,_=Ice.ConnectionRequestHandler,C=Ice.Class,g=["EndpointSelection","ConnectionCached","PreferSecure","EncodingVersion","LocatorCacheTimeout","InvocationTimeout","Locator","Router","CollocationOptimized"],m=C({__init__:function(e,t){this._instance=e,this._communicator=t,this._defaultRouter=null,this._defaultLocator=null},create:function(e,t,i,n){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,i.getMode(),i.getSecure(),i.getProtocol(),i.getEncoding(),n,null,null)},createWithAdapterId:function(e,t,i,n){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,i.getMode(),i.getSecure(),i.getProtocol(),i.getEncoding(),null,n,null)},createFixed:function(e,t){return 0===e.name.length&&0===e.category.length?null:new S(this._instance,this._communicator,e,"",t.endpoint().datagram()?a.ModeDatagram:a.ModeTwoway,t.endpoint().secure(),this._instance.defaultsAndOverrides().defaultEncoding,t)},copy:function(e){var t=e.getIdentity();return 0===t.name.length&&0===t.category.length?null:e.clone()},createFromString:function(e,i){if(null==e||0===e.length)return null;var n,r=" \t\n\r",o=0;if(-1==(n=c.findFirstNotOf(e,r,o)))throw new Ice.ProxyParseException("no non-whitespace characters found in `"+e+"'");var s=null;if(-1===(o=c.checkQuote(e,n)))throw new Ice.ProxyParseException("mismatched quotes around identity in `"+e+"'");if(0===o?(-1===(o=c.findFirstOf(e,r+":@",n))&&(o=e.length),s=e.substring(n,o)):(n++,s=e.substring(n,o),o++),n===o)throw new Ice.ProxyParseException("no identity in `"+e+"'");var l=this._instance.stringToIdentity(s);if(0===l.name.length){if(l.category.length>0)throw new Ice.IllegalIdentityException(l);if(-1!=c.findFirstNotOf(e,r,o))throw new Ice.ProxyParseException("invalid characters after identity in `"+e+"'");return null}for(var d="",u=a.ModeTwoway,h=!1,f=this._instance.defaultsAndOverrides().defaultEncoding,p=Ice.Protocol_1_0,_="";-1!==(n=c.findFirstNotOf(e,r,o))&&":"!=e.charAt(n)&&"@"!=e.charAt(n)&&(-1==(o=c.findFirstOf(e,r+":@",n))&&(o=e.length),n!=o);){var C=e.substring(n,o);if(2!=C.length||"-"!=C.charAt(0))throw new Ice.ProxyParseException("expected a proxy option but found `"+C+"' in `"+e+"'");var g=null,m=c.findFirstNotOf(e,r,o);if(-1!=m){var R=e.charAt(m);if("@"!=R&&":"!=R&&"-"!=R){if(n=m,-1==(o=c.checkQuote(e,n)))throw new Ice.ProxyParseException("mismatched quotes around value for "+C+" option in `"+e+"'");0===o?(-1===(o=c.findFirstOf(e,r+":@",n))&&(o=e.length),g=e.substring(n,o)):(n++,g=e.substring(n,o),o++)}}switch(C.charAt(1)){case"f":if(null===g)throw new Ice.ProxyParseException("no argument provided for -f option in `"+e+"'");try{d=c.unescapeString(g,0,g.length)}catch(t){throw new Ice.ProxyParseException("invalid facet in `"+e+"': "+t.message)}break;case"t":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -t option in `"+e+"'");u=a.ModeTwoway;break;case"o":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -o option in `"+e+"'");u=a.ModeOneway;break;case"O":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -O option in `"+e+"'");u=a.ModeBatchOneway;break;case"d":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -d option in `"+e+"'");u=a.ModeDatagram;break;case"D":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -D option in `"+e+"'");u=a.ModeBatchDatagram;break;case"s":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -s option in `"+e+"'");h=!0;break;case"e":if(null===g)throw new Ice.ProxyParseException("no argument provided for -e option in `"+e+"'");try{f=Ice.stringToEncodingVersion(g)}catch(t){throw new Ice.ProxyParseException("invalid encoding version `"+g+"' in `"+e+"':\n"+t.str)}break;case"p":if(null===g)throw new Ice.ProxyParseException("no argument provided for -p option in `"+e+"'");try{p=Ice.stringToProtocolVersion(g)}catch(t){throw new Ice.ProxyParseException("invalid protocol version `"+g+"' in `"+e+"':\n"+t.str)}break;default:throw new Ice.ProxyParseException("unknown option `"+C+"' in `"+e+"'")}}if(-1===n)return this.createImpl(l,d,u,h,p,f,null,null,i);var S=[];if(":"==e.charAt(n)){var I=[];for(o=n;o<e.length&&":"==e.charAt(o);){for(o=n=o+1;;){if(-1==(o=e.indexOf(":",o))){o=e.length;break}for(var y=!1,v=n;!(-1==(v=e.indexOf('"',v))||o<v)&&-1!=(v=e.indexOf('"',++v));){if(o<v){y=!0;break}++v}if(!y)break;++o}var w=e.substring(n,o),E=this._instance.endpointFactoryManager().create(w,!1);null!==E?S.push(E):I.push(w)}if(0===S.length)throw t.assert(I.length>0),new Ice.EndpointParseException("invalid endpoint `"+I[0]+"' in `"+e+"'");if(0!==I.length&&this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Endpoints",1)>0){var b=[];b.push("Proxy contains unknown endpoints:");for(var D=0;D<I.length;++D)b.push(" `"),b.push(I[D]),b.push("'");this._instance.initializationData().logger.warning(b.join(""))}return this.createImpl(l,d,u,h,p,f,S,null,i)}if("@"==e.charAt(n)){if(-1==(n=c.findFirstNotOf(e,r,n+1)))throw new Ice.ProxyParseException("missing adapter id in `"+e+"'");var M=null;if(-1===(o=c.checkQuote(e,n)))throw new Ice.ProxyParseException("mismatched quotes around adapter id in `"+e+"'");if(0===o?(-1===(o=c.findFirstOf(e,r,n))&&(o=e.length),M=e.substring(n,o)):(n++,M=e.substring(n,o),o++),o!==e.length&&-1!==c.findFirstNotOf(e,r,o))throw new Ice.ProxyParseException("invalid trailing characters after `"+e.substring(0,o+1)+"' in `"+e+"'");try{_=c.unescapeString(M,0,M.length)}catch(t){throw new Ice.ProxyParseException("invalid adapter id in `"+e+"': "+t.message)}if(0===_.length)throw new Ice.ProxyParseException("empty adapter id in `"+e+"'");return this.createImpl(l,d,u,h,p,f,null,_,i)}throw new Ice.ProxyParseException("malformed proxy `"+e+"'")},createFromStream:function(e,t){if(0===e.name.length&&0===e.category.length)return null;var i,n=l.read(t);if(n.length>0){if(n.length>1)throw new Ice.ProxyUnmarshalException;i=n[0]}else i="";var r=t.readByte();if(r<0||r>a.ModeLast)throw new Ice.ProxyUnmarshalException;var o=t.readBool(),s=null,c=null;t.getReadEncoding().equals(Ice.Encoding_1_0)?(s=Ice.Protocol_1_0,c=Ice.Encoding_1_0):((s=new Ice.ProtocolVersion).__read(t),(c=new Ice.EncodingVersion).__read(t));var d=null,u=null,h=t.readSize();if(h>0){d=[];for(var f=0;f<h;f++)d[f]=this._instance.endpointFactoryManager().read(t)}else u=t.readString();return this.createImpl(e,i,r,o,s,c,d,u,null)},setDefaultRouter:function(e){if(null===this._defaultRouter?null===e:this._defaultRouter.equals(e))return this;var t=new m(this._instance,this._communicator);return t._defaultLocator=this._defaultLocator,t._defaultRouter=e,t},getDefaultRouter:function(){return this._defaultRouter},setDefaultLocator:function(e){if(null===this._defaultLocator?null===e:this._defaultLocator.equals(e))return this;var t=new m(this._instance,this._communicator);return t._defaultRouter=this._defaultRouter,t._defaultLocator=e,t},getDefaultLocator:function(){return this._defaultLocator},checkForUnknownProperties:function(e){var t,i,n=[];for(t=0;t<p.clPropNames.length;++t)if(0===e.indexOf(p.clPropNames[t]+"."))return;for(var r=this._instance.initializationData().properties.getPropertiesForPrefix(e+".").entries;null!==r;r=r.next){var o=!1;for(t=0,i=g.length;t<i;++t)if(r.key===e+"."+g[t]){o=!0;break}o||n.push(r.key)}if(n.length>0){var s=[];for(s.push("found unknown properties for proxy '"),s.push(e),s.push("':"),t=0,i=n.length;t<i;++t)s.push("\n    "),s.push(n[t]);this._instance.initializationData().logger.warning(s.join(""))}},createImpl:function(e,t,i,n,r,o,s,a,c){var l=this._instance.defaultsAndOverrides(),u=null;null!==this._defaultLocator&&(u=this._defaultLocator.__reference().getEncoding().equals(o)?this._instance.locatorManager().find(this._defaultLocator):this._instance.locatorManager().find(this._defaultLocator.ice_encodingVersion(o)));var p=this._instance.routerManager().find(this._defaultRouter),_=!0,C=l.defaultPreferSecure,g=l.defaultEndpointSelection,m=l.defaultLocatorCacheTimeout,R=l.defaultInvocationTimeout;if(null!==c&&c.length>0){var S,y=this._instance.initializationData().properties;y.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0&&this.checkForUnknownProperties(c),S=c+".Locator";var v=f.uncheckedCast(this._communicator.propertyToProxy(S));null!==v&&(u=v.__reference().getEncoding().equals(o)?this._instance.locatorManager().find(v):this._instance.locatorManager().find(v.ice_encodingVersion(o))),S=c+".Router";var w=h.uncheckedCast(this._communicator.propertyToProxy(S));if(null!==w){var E=".Router";if(c.lastIndexOf(E)==c.length-7){var b="`"+S+"="+y.getProperty(S)+"': cannot set a router on a router; setting ignored";this._instance.initializationData().logger.warning(b)}else p=this._instance.routerManager().find(w)}if(S=c+".ConnectionCached",_=y.getPropertyAsIntWithDefault(S,_?1:0)>0,S=c+".PreferSecure",C=y.getPropertyAsIntWithDefault(S,C?1:0)>0,S=c+".EndpointSelection",y.getProperty(S).length>0){var D=y.getProperty(S);if("Random"==D)g=d.Random;else{if("Ordered"!=D)throw new Ice.EndpointSelectionTypeParseException("illegal value `"+D+"'; expected `Random' or `Ordered'");g=d.Ordered}}S=c+".LocatorCacheTimeout";var M=y.getProperty(S);0!==M.length&&(m=y.getPropertyAsIntWithDefault(S,m))<-1&&(m=-1,this._instance.initializationData().logger.warning("invalid value for"+S+"`"+y.getProperty(S)+"': defaulting to -1")),S=c+".InvocationTimeout",0!==(M=y.getProperty(S)).length&&(R=y.getPropertyAsIntWithDefault(S,R))<1&&-1!==R&&(R=-1,this._instance.initializationData().logger.warning("invalid value for"+S+"`"+y.getProperty(S)+"': defaulting to -1"))}return new I(this._instance,this._communicator,e,t,i,n,r,o,s,a,u,p,_,C,g,m,R)}});Ice.ReferenceFactory=m;var R=C({__init__:function(e,i,n,r,o,s,a,c,l){t.assert(void 0===n||null!==n.name),t.assert(void 0===n||null!==n.category),t.assert(void 0===r||null!==r),this._instance=e,this._communicator=i,this._mode=o,this._secure=s,this._identity=n,this._context=R._emptyContext,this._facet=r,this._protocol=a,this._encoding=c,this._invocationTimeout=l,this._hashInitialized=!1,this._overrideCompress=!1,this._compress=!1},getMode:function(){return this._mode},getSecure:function(){return this._secure},getProtocol:function(){return this._protocol},getEncoding:function(){return this._encoding},getIdentity:function(){return this._identity},getFacet:function(){return this._facet},getInstance:function(){return this._instance},getContext:function(){return this._context},getInvocationTimeout:function(){return this._invocationTimeout},getCommunicator:function(){return this._communicator},getEndpoints:function(){return t.assert(!1),null},getAdapterId:function(){return t.assert(!1),""},getRouterInfo:function(){return t.assert(!1),null},getLocatorInfo:function(){return t.assert(!1),null},getCacheConnection:function(){return t.assert(!1),!1},getPreferSecure:function(){return t.assert(!1),!1},getEndpointSelection:function(){return t.assert(!1),null},getLocatorCacheTimeout:function(){return t.assert(!1),0},getConnectionId:function(){return t.assert(!1),""},changeContext:function(e){null==e&&(e=R._emptyContext);var t=this._instance.referenceFactory().copy(this);return 0===e.size?t._context=R._emptyContext:t._context=new n(e),t},changeMode:function(e){if(e===this._mode)return this;var t=this._instance.referenceFactory().copy(this);return t._mode=e,t},changeSecure:function(e){if(e===this._secure)return this;var t=this._instance.referenceFactory().copy(this);return t._secure=e,t},changeIdentity:function(e){if(e.equals(this._identity))return this;var t=this._instance.referenceFactory().copy(this);return t._identity=new u(e.name,e.category),t},changeFacet:function(e){if(e===this._facet)return this;var t=this._instance.referenceFactory().copy(this);return t._facet=e,t},changeInvocationTimeout:function(e){if(e===this._invocationTimeout)return this;var t=this._instance.referenceFactory().copy(this);return t._invocationTimeout=e,t},changeEncoding:function(e){if(e.equals(this._encoding))return this;var t=this._instance.referenceFactory().copy(this);return t._encoding=e,t},changeCompress:function(e){if(this._overrideCompress&&this._compress===e)return this;var t=this._instance.referenceFactory().copy(this);return t._compress=e,t._overrideCompress=!0,t},changeAdapterId:function(e){return t.assert(!1),null},changeEndpoints:function(e){return t.assert(!1),null},changeLocator:function(e){return t.assert(!1),null},changeRouter:function(e){return t.assert(!1),null},changeCacheConnection:function(e){return t.assert(!1),null},changePreferSecure:function(e){return t.assert(!1),null},changeEndpointSelection:function(e){return t.assert(!1),null},changeLocatorCacheTimeout:function(e){return t.assert(!1),null},changeTimeout:function(e){return t.assert(!1),null},changeConnectionId:function(e){return t.assert(!1),null},hashCode:function(){if(this._hashInitialized)return this._hashValue;var e=5381;if(e=r.addNumber(e,this._mode),e=r.addBoolean(e,this._secure),e=r.addHashable(e,this._identity),null!==this._context&&void 0!==this._context)for(var t=this._context.entries;null!==t;t=t.next)e=r.addString(e,t.key),e=r.addString(e,t.value);return e=r.addString(e,this._facet),e=r.addBoolean(e,this._overrideCompress),this._overrideCompress&&(e=r.addBoolean(e,this._compress)),e=r.addHashable(e,this._protocol),e=r.addHashable(e,this._encoding),e=r.addNumber(e,this._invocationTimeout),this._hashValue=e,this._hashInitialized=!0,this._hashValue},isIndirect:function(){return t.assert(!1),!1},isWellKnown:function(){return t.assert(!1),!1},streamWrite:function(e){0===this._facet.length?e.writeSize(0):(e.writeSize(1),e.writeString(this._facet)),e.writeByte(this._mode),e.writeBool(this._secure),e.getWriteEncoding().equals(Ice.Encoding_1_0)||(this._protocol.__write(e),this._encoding.__write(e))},toString:function(){var e=[],t=this._instance.identityToString(this._identity);if(-1!=t.search(/[ :@]/)?(e.push('"'),e.push(t),e.push('"')):e.push(t),this._facet.length>0){e.push(" -f ");var i=c.escapeString(this._facet,"");-1!=i.search(/[ :@]/)?(e.push('"'),e.push(i),e.push('"')):e.push(i)}switch(this._mode){case a.ModeTwoway:e.push(" -t");break;case a.ModeOneway:e.push(" -o");break;case a.ModeBatchOneway:e.push(" -O");break;case a.ModeDatagram:e.push(" -d");break;case a.ModeBatchDatagram:e.push(" -D")}return this._secure&&e.push(" -s"),this._protocol.equals(Ice.Protocol_1_0)||(e.push(" -p "),e.push(Ice.protocolVersionToString(this._protocol))),e.push(" -e "),e.push(Ice.encodingVersionToString(this._encoding)),e.join("")},toProperty:function(e){return t.assert(!1),null},getRequestHandler:function(e){t.assert(!1)},getBatchRequestQueue:function(){t.assert(!1)},equals:function(e){return this._mode===e._mode&&(this._secure===e._secure&&(!!this._identity.equals(e._identity)&&(!!this._context.equals(e._context)&&(this._facet===e._facet&&(this._overrideCompress===e._overrideCompress&&((!this._overrideCompress||this._compress===e._compress)&&(!!this._protocol.equals(e._protocol)&&(!!this._encoding.equals(e._encoding)&&this._invocationTimeout===e._invocationTimeout))))))))},clone:function(){return t.assert(!1),null},copyMembers:function(e){e._context=this._context,e._overrideCompress=this._overrideCompress,e._compress=this._compress}});R._emptyContext=new n,R._emptyEndpoints=[],Ice.Reference=R;var S=C(R,{__init__:function(e,t,i,n,r,o,s,a){R.call(this,e,t,i,n,r,o,Ice.Protocol_1_0,s),this._fixedConnection=a},getEndpoints:function(){return R._emptyEndpoints},getAdapterId:function(){return""},getRouterInfo:function(){return null},getLocatorInfo:function(){return null},getCacheConnection:function(){return!0},getPreferSecure:function(){return!1},getEndpointSelection:function(){return d.Random},getLocatorCacheTimeout:function(){return 0},getConnectionId:function(){return""},changeAdapterId:function(e){throw new Ice.FixedProxyException},changeEndpoints:function(e){throw new Ice.FixedProxyException},changeLocator:function(e){throw new Ice.FixedProxyException},changeRouter:function(e){throw new Ice.FixedProxyException},changeCacheConnection:function(e){throw new Ice.FixedProxyException},changePreferSecure:function(e){throw new Ice.FixedProxyException},changeEndpointSelection:function(e){throw new Ice.FixedProxyException},changeLocatorCacheTimeout:function(e){throw new Ice.FixedProxyException},changeTimeout:function(e){throw new Ice.FixedProxyException},changeConnectionId:function(e){throw new Ice.FixedProxyException},isIndirect:function(){return!1},isWellKnown:function(){return!1},streamWrite:function(e){throw new Ice.FixedProxyException},toString:function(){throw new Ice.FixedProxyException},toProperty:function(e){throw new Ice.FixedProxyException},clone:function(){var e=new S(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getEncoding(),this._fixedConnection);return this.copyMembers(e),e},getRequestHandler:function(e){switch(this.getMode()){case a.ModeTwoway:case a.ModeOneway:case a.ModeBatchOneway:if(this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("");break;case a.ModeDatagram:case a.ModeBatchDatagram:if(!this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("")}var t,i=this.getInstance().defaultsAndOverrides();if((i.overrideSecure?i.overrideSecureValue:this.getSecure())&&!this._fixedConnection.endpoint().secure())throw new Ice.NoEndpointException("");return this._fixedConnection.throwException(),t=i.overrideCompress?i.overrideCompressValue:this._overrideCompress?this._compress:this._fixedConnection.endpoint().compress(),e.__setRequestHandler(new _(this,this._fixedConnection,t))},getBatchRequestQueue:function(){return this._fixedConnection.getBatchRequestQueue()},equals:function(e){return this===e||e instanceof S&&(!!R.prototype.equals.call(this,e)&&this._fixedConnection.equals(e._fixedConnection))}});Ice.FixedReference=S;var I=C(R,{__init__:function(e,i,n,r,o,s,a,c,l,d,u,h,f,p,_,C,g){R.call(this,e,i,n,r,o,s,a,c,g),this._endpoints=l,this._adapterId=d,this._locatorInfo=u,this._routerInfo=h,this._cacheConnection=f,this._preferSecure=p,this._endpointSelection=_,this._locatorCacheTimeout=C,this._overrideTimeout=!1,this._timeout=-1,null===this._endpoints&&(this._endpoints=R._emptyEndpoints),null===this._adapterId&&(this._adapterId=""),this._connectionId="",t.assert(0===this._adapterId.length||0===this._endpoints.length)},getEndpoints:function(){return this._endpoints},getAdapterId:function(){return this._adapterId},getRouterInfo:function(){return this._routerInfo},getLocatorInfo:function(){return this._locatorInfo},getCacheConnection:function(){return this._cacheConnection},getPreferSecure:function(){return this._preferSecure},getEndpointSelection:function(){return this._endpointSelection},getLocatorCacheTimeout:function(){return this._locatorCacheTimeout},getConnectionId:function(){return this._connectionId},changeEncoding:function(e){var t=R.prototype.changeEncoding.call(this,e);if(t!==this){var i=t._locatorInfo;null===i||i.getLocator().ice_getEncodingVersion().equals(e)||(t._locatorInfo=this.getInstance().locatorManager().find(i.getLocator().ice_encodingVersion(e)))}return t},changeCompress:function(e){var t=R.prototype.changeCompress.call(this,e);if(t!==this&&this._endpoints.length>0){for(var i=[],n=0;n<this._endpoints.length;n++)i[n]=this._endpoints[n].changeCompress(e);t._endpoints=i}return t},changeAdapterId:function(e){if(this._adapterId===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._adapterId=e,t._endpoints=R._emptyEndpoints,t},changeEndpoints:function(t){if(e.equals(t,this._endpoints,(function(e,t){return e.equals(t)})))return this;var i=this.getInstance().referenceFactory().copy(this);return i._endpoints=t,i._adapterId="",i.applyOverrides(i._endpoints),i},changeLocator:function(e){var t=this.getInstance().locatorManager().find(e);if(null!==t&&null!==this._locatorInfo&&t.equals(this._locatorInfo))return this;var i=this.getInstance().referenceFactory().copy(this);return i._locatorInfo=t,i},changeRouter:function(e){var t=this.getInstance().routerManager().find(e);if(null!==t&&null!==this._routerInfo&&t.equals(this._routerInfo))return this;var i=this.getInstance().referenceFactory().copy(this);return i._routerInfo=t,i},changeCacheConnection:function(e){if(e===this._cacheConnection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._cacheConnection=e,t},changePreferSecure:function(e){if(e===this._preferSecure)return this;var t=this.getInstance().referenceFactory().copy(this);return t._preferSecure=e,t},changeEndpointSelection:function(e){if(e===this._endpointSelection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._endpointSelection=e,t},changeLocatorCacheTimeout:function(e){if(this._locatorCacheTimeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._locatorCacheTimeout=e,t},changeTimeout:function(e){if(this._overrideTimeout&&this._timeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._timeout=e,t._overrideTimeout=!0,this._endpoints.length>0){for(var i=[],n=0;n<this._endpoints.length;n++)i[n]=this._endpoints[n].changeTimeout(e);t._endpoints=i}return t},changeConnectionId:function(e){if(this._connectionId===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._connectionId=e,this._endpoints.length>0){for(var i=[],n=0;n<this._endpoints.length;n++)i[n]=this._endpoints[n].changeConnectionId(e);t._endpoints=i}return t},isIndirect:function(){return 0===this._endpoints.length},isWellKnown:function(){return 0===this._endpoints.length&&0===this._adapterId.length},streamWrite:function(e){if(R.prototype.streamWrite.call(this,e),e.writeSize(this._endpoints.length),this._endpoints.length>0){t.assert(0===this._adapterId.length);for(var i=0;i<this._endpoints.length;++i)e.writeShort(this._endpoints[i].type()),this._endpoints[i].streamWrite(e)}else e.writeString(this._adapterId)},toString:function(){var e=[];if(e.push(R.prototype.toString.call(this)),this._endpoints.length>0)for(var t=0;t<this._endpoints.length;++t){var i=this._endpoints[t].toString();null!==i&&i.length>0&&(e.push(":"),e.push(i))}else if(this._adapterId.length>0){e.push(" @ ");var n=c.escapeString(this._adapterId,null);-1!=n.search(/[ :@]/)?(e.push('"'),e.push(n),e.push('"')):e.push(n)}return e.join("")},toProperty:function(e){var t,i=new n;if(i.set(e,this.toString()),i.set(e+".CollocationOptimized","0"),i.set(e+".ConnectionCached",this._cacheConnection?"1":"0"),i.set(e+".PreferSecure",this._preferSecure?"1":"0"),i.set(e+".EndpointSelection",this._endpointSelection===d.Random?"Random":"Ordered"),i.set(e+".LocatorCacheTimeout",""+this._locatorCacheTimeout),i.set(e+".InvocationTimeout",""+this.getInvocationTimeout()),null!==this._routerInfo)for(t=this._routerInfo.getRouter().__reference().toProperty(e+".Router").entries;null!==t;t=t.next)i.set(t.key,t.value);if(null!==this._locatorInfo)for(t=this._locatorInfo.getLocator().__reference().toProperty(e+".Locator").entries;null!==t;t=t.next)i.set(t.key,t.value);return i},hashCode:function(){return this._hashInitialized||(R.prototype.hashCode.call(this),this._hashValue=r.addString(this._hashValue,this._adapterId)),this._hashValue},equals:function(t){return this===t||t instanceof I&&(!!R.prototype.equals.call(this,t)&&(!!(null===this._locatorInfo?null===t._locatorInfo:this._locatorInfo.equals(t._locatorInfo))&&(!!(null===this._routerInfo?null===t._routerInfo:this._routerInfo.equals(t._routerInfo))&&(this._cacheConnection===t._cacheConnection&&(this._preferSecure===t._preferSecure&&(this._endpointSelection===t._endpointSelection&&(this._locatorCacheTimeout===t._locatorCacheTimeout&&(this._connectionId===t._connectionId&&(this._overrideTimeout===t._overrideTimeout&&((!this._overrideTimeout||this._timeout===t._timeout)&&(!!e.equals(this._endpoints,t._endpoints,(function(e,t){return e.equals(t)}))&&this._adapterId===t._adapterId)))))))))))},getRequestHandler:function(e){return this._instance.requestHandlerFactory().getRequestHandler(this,e)},getBatchRequestQueue:function(){return new i(this._instance,this._mode===a.ModeBatchDatagram)},getConnection:function(){var e=new s;if(null!==this._routerInfo){var t=this;this._routerInfo.getClientEndpoints().then((function(i){i.length>0?(t.applyOverrides(i),t.createConnection(i).then((function(t,i){e.succeed(t,i)}),(function(t){e.fail(t)}))):t.getConnectionNoRouterInfo(e)})).exception((function(t){e.fail(t)}))}else this.getConnectionNoRouterInfo(e);return e},getConnectionNoRouterInfo:function(e){if(this._endpoints.length>0)this.createConnection(this._endpoints).then((function(t,i){e.succeed(t,i)})).exception((function(t){e.fail(t)}));else{var i=this;null!==this._locatorInfo?this._locatorInfo.getEndpoints(this,null,this._locatorCacheTimeout).then((function(n,r){0!==n.length?(i.applyOverrides(n),i.createConnection(n).then((function(t,i){e.succeed(t,i)}),(function(n){if(n instanceof Ice.NoEndpointException)e.fail(n);else{if(t.assert(null!==i._locatorInfo),i.getLocatorInfo().clearCache(i),r){var o=i.getInstance().traceLevels();if(o.retry>=2){var s="connection to cached endpoints failed\nremoving endpoints from cache and trying one more time\n"+n.toString();i.getInstance().initializationData().logger.trace(o.retryCat,s)}return void i.getConnectionNoRouterInfo(e)}e.fail(n)}}))):e.fail(new Ice.NoEndpointException(i.toString()))})).exception((function(t){e.fail(t)})):e.fail(new Ice.NoEndpointException(this.toString()))}},clone:function(){var e=new I(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._endpoints,this._adapterId,this._locatorInfo,this._routerInfo,this._cacheConnection,this._preferSecure,this._endpointSelection,this._locatorCacheTimeout,this._invocationTimeout);return this.copyMembers(e),e},copyMembers:function(e){R.prototype.copyMembers.call(this,e),e._overrideTimeout=this._overrideTimeout,e._timeout=this._timeout,e._connectionId=this._connectionId},applyOverrides:function(e){for(var t=0;t<e.length;++t)e[t]=e[t].changeConnectionId(this._connectionId),this._overrideCompress&&(e[t]=e[t].changeCompress(this._compress)),this._overrideTimeout&&(e[t]=e[t].changeTimeout(this._timeout))},filterEndpoints:function(i){for(var n=[],r=0;r<i.length;++r)i[r]instanceof o||!i[r].connectable()||n.push(i[r]);switch(this.getMode()){case a.ModeTwoway:case a.ModeOneway:case a.ModeBatchOneway:n=e.filter(n,(function(e,t,i){return!e.datagram()}));break;case a.ModeDatagram:case a.ModeBatchDatagram:n=e.filter(n,(function(e,t,i){return e.datagram()}))}switch(this.getEndpointSelection()){case d.Random:e.shuffle(n);break;case d.Ordered:break;default:t.assert(!1)}var s=this.getInstance().defaultsAndOverrides();if(s.overrideSecure?s.overrideSecureValue:this.getSecure())n=e.filter(n,(function(e,t,i){return e.secure()}));else{var c=this.getPreferSecure();n.sort((function(e,t){var i=e.secure(),n=t.secure();return i&&n||!i&&!n?0:!i&&n?c?1:-1:c?-1:1}))}return n},createConnection:function(e){var t=this.filterEndpoints(e);if(0===t.length)return(new s).fail(new Ice.NoEndpointException(this.toString()));var i,n=new s,r=this.getInstance().outgoingConnectionFactory();if(this.getCacheConnection()||1==t.length)i=new y(this,null,n),r.create(t,!1,this.getEndpointSelection()).then((function(e,t){i.setConnection(e,t)})).exception((function(e){i.setException(e)}));else{var o=[t[0]];i=new y(this,t,n),r.create(o,!0,this.getEndpointSelection()).then((function(e,t){i.setConnection(e,t)})).exception((function(e){i.setException(e)}))}return n}});Ice.RoutableReference=I;var y=C({__init__:function(e,t,i){this.ref=e,this.endpoints=t,this.promise=i,this.i=0,this.exception=null},setConnection:function(e,t){null!==this.ref.getRouterInfo()&&null!==this.ref.getRouterInfo().getAdapter()&&e.setAdapter(this.ref.getRouterInfo().getAdapter()),this.promise.succeed(e,t)},setException:function(e){if(null===this.exception&&(this.exception=e),null!==this.endpoints&&++this.i!==this.endpoints.length){var t=this.i!=this.endpoints.length-1,i=[this.endpoints[this.i]],n=this;this.ref.getInstance().outgoingConnectionFactory().create(i,t,this.ref.getEndpointSelection()).then((function(e,t){n.setConnection(e,t)})).exception((function(e){n.setException(e)}))}else this.promise.fail(this.exception)}})}(),function(){var e=Ice.Debug,t=Ice.BasicStream,i=Ice.EndpointParseException,n=Ice.OpaqueEndpointI,r=Ice.Protocol,o=Ice.StringUtil,s=Ice.Class({__init__:function(e){this._instance=e,this._factories=[]},add:function(t){for(var i=0;i<this._factories.length;++i)e.assert(this._factories[i].type()!=t.type());this._factories.push(t)},get:function(e){for(var t=0;t<this._factories.length;++t)if(this._factories[t].type()===e)return this._factories[t];return null},create:function(e,s){var a=e.trim();if(0===a.length)throw new i("value has no non-whitespace characters");var c=o.splitString(a," \t\n\r");if(0===c.length)throw new i("value has no non-whitespace characters");var l=c[0];c.splice(0,1),"default"===l&&(l=this._instance.defaultsAndOverrides().defaultProtocol);for(var d=0,u=this._factories.length;d<u;++d)if(this._factories[d].protocol()===l){var h=this._factories[d].create(c,s);if(c.length>0)throw new i("unrecognized argument `"+c[0]+"' in endpoint `"+e+"'");return h}if("opaque"===l){var f=new n;if(f.initWithOptions(c),c.length>0)throw new i("unrecognized argument `"+c[0]+"' in endpoint `"+e+"'");for(d=0,u=this._factories.length;d<u;++d)if(this._factories[d].type()==f.type()){var p=new t(this._instance,r.currentProtocolEncoding);p.writeShort(f.type()),f.streamWrite(p),p.pos=0,p.readShort(),p.startReadEncaps();var _=this._factories[d].read(p);return p.endReadEncaps(),_}return f}return null},read:function(e){for(var t,i=e.readShort(),r=0;r<this._factories.length;++r)if(this._factories[r].type()==i)return e.startReadEncaps(),t=this._factories[r].read(e),e.endReadEncaps(),t;return e.startReadEncaps(),(t=new n(i)).initWithStream(e),e.endReadEncaps(),t},destroy:function(){for(var e=0;e<this._factories.length;++e)this._factories[e].destroy();this._factories=[]}});Ice.EndpointFactoryManager=s}(),function(){var e=Ice.Debug,t=Ice.HashMap,i=Ice.ObjectPrx,n=Ice.StringUtil,r=Ice.Identity,o=Ice.Class({__init__:function(e){this._instance=e;var t=this._instance.initializationData().properties.getPropertyAsList("Ice.RetryIntervals");if(t.length>0){this._retryIntervals=[];for(var i=0;i<t.length;i++){var r;try{r=n.toInt(t[i])}catch(e){r=0}if(0===i&&-1===r)break;this._retryIntervals[i]=r>0?r:0}}else this._retryIntervals=[0]},stringToProxy:function(e){var t=this._instance.referenceFactory().createFromString(e,null);return this.referenceToProxy(t)},proxyToString:function(e){return null!==e?e.__reference().toString():""},propertyToProxy:function(e){var t=this._instance.initializationData().properties.getProperty(e),i=this._instance.referenceFactory().createFromString(t,e);return this.referenceToProxy(i)},proxyToProperty:function(e,i){return null!==e?e.__reference().toProperty(i):new t},streamToProxy:function(e,t){var i=new r;i.__read(e);var n=this._instance.referenceFactory().createFromStream(i,e);return this.referenceToProxy(n,t)},referenceToProxy:function(e,t){if(null!==e){var n=t?new t:new i;return n.__setup(e),n}return null},proxyToStream:function(e,t){if(null!==e){var i=e.__reference();i.getIdentity().__write(t),i.streamWrite(t)}else{new r("","").__write(t)}},checkRetryAfterException:function(t,i,n,r){var o,s=this._instance.traceLevels(),a=this._instance.initializationData().logger;if(i.getMode()===Ice.Reference.ModeBatchOneway||i.getMode()===Ice.Reference.ModeBatchDatagram)throw t;if(t instanceof Ice.ObjectNotExistException){var c=t;if(null!==i.getRouterInfo()&&"ice_add_proxy"===c.operation)return i.getRouterInfo().clearCache(i),s.retry>=1&&a.trace(s.retryCat,"retrying operation call to add proxy to router\n"+t.toString()),null!==n&&(n.value=0),r;if(!i.isIndirect())throw t;if(i.isWellKnown()){var l=i.getLocatorInfo();null!==l&&l.clearCache(i)}}else if(t instanceof Ice.RequestFailedException)throw t;if(t instanceof Ice.MarshalException)throw t;if(t instanceof Ice.CommunicatorDestroyedException||t instanceof Ice.ObjectAdapterDeactivatedException)throw t;if(t instanceof Ice.InvocationTimeoutException||t instanceof Ice.InvocationCanceledException)throw t;if(++r,e.assert(r>0),r===this._retryIntervals.length+1&&t instanceof Ice.CloseConnectionException)o=0;else{if(r>this._retryIntervals.length)throw s.retry>=1&&a.trace(s.retryCat,"cannot retry operation call because retry limit has been exceeded\n"+t.toString()),t;o=this._retryIntervals[r-1]}if(s.retry>=1){var d="retrying operation call";o>0&&(d+=" in "+o+"ms"),d+=" because of exception\n"+t.toString(),a.trace(s.retryCat,d)}return e.assert(null!==n),n.value=o,r}});Ice.ProxyFactory=o}(),function(){var e=Ice.FormatType,t=Ice.EndpointSelectionType,i=Ice.Protocol;Ice.DefaultsAndOverrides=function(n,r){this.defaultProtocol=n.getPropertyWithDefault("Ice.Default.Protocol",void 0!==Ice.TcpEndpointFactory?"tcp":"ws");var o=n.getProperty("Ice.Default.Host");if(this.defaultHost=o.length>0?o:null,o=n.getProperty("Ice.Default.SourceAddress"),this.defaultSourceAddress=o.length>0?o:null,(o=n.getProperty("Ice.Override.Timeout")).length>0?(this.overrideTimeout=!0,this.overrideTimeoutValue=n.getPropertyAsInt("Ice.Override.Timeout"),this.overrideTimeoutValue<1&&-1!==this.overrideTimeoutValue&&(this.overrideTimeoutValue=-1,r.warning("invalid value for Ice.Override.Timeout `"+n.getProperty("Ice.Override.Timeout")+"': defaulting to -1"))):(this.overrideTimeout=!1,this.overrideTimeoutValue=-1),(o=n.getProperty("Ice.Override.ConnectTimeout")).length>0?(this.overrideConnectTimeout=!0,this.overrideConnectTimeoutValue=n.getPropertyAsInt("Ice.Override.ConnectTimeout"),this.overrideConnectTimeoutValue<1&&-1!==this.overrideConnectTimeoutValue&&(this.overrideConnectTimeoutValue=-1,r.warning("invalid value for Ice.Override.ConnectTimeout `"+n.getProperty("Ice.Override.ConnectTimeout")+"': defaulting to -1"))):(this.overrideConnectTimeout=!1,this.overrideConnectTimeoutValue=-1),(o=n.getProperty("Ice.Override.CloseTimeout")).length>0?(this.overrideCloseTimeout=!0,this.overrideCloseTimeoutValue=n.getPropertyAsInt("Ice.Override.CloseTimeout"),this.overrideCloseTimeoutValue<1&&-1!==this.overrideCloseTimeoutValue&&(this.overrideCloseTimeoutValue=-1,r.warning("invalid value for Ice.Override.CloseTimeout `"+n.getProperty("Ice.Override.CloseTimeout")+"': defaulting to -1"))):(this.overrideCloseTimeout=!1,this.overrideCloseTimeoutValue=-1),this.overrideCompress=!1,this.overrideSecure=!1,"Random"===(o=n.getPropertyWithDefault("Ice.Default.EndpointSelection","Random")))this.defaultEndpointSelection=t.Random;else{if("Ordered"!==o){var s=new Ice.EndpointSelectionTypeParseException;throw s.str="illegal value `"+o+"'; expected `Random' or `Ordered'",s}this.defaultEndpointSelection=t.Ordered}this.defaultTimeout=n.getPropertyAsIntWithDefault("Ice.Default.Timeout",6e4),this.defaultTimeout<1&&-1!==this.defaultTimeout&&(this.defaultTimeout=6e4,r.warning("invalid value for Ice.Default.Timeout `"+n.getProperty("Ice.Default.Timeout")+"': defaulting to 60000")),this.defaultLocatorCacheTimeout=n.getPropertyAsIntWithDefault("Ice.Default.LocatorCacheTimeout",-1),this.defaultLocatorCacheTimeout<-1&&(this.defaultLocatorCacheTimeout=-1,r.warning("invalid value for Ice.Default.LocatorCacheTimeout `"+n.getProperty("Ice.Default.LocatorCacheTimeout")+"': defaulting to -1")),this.defaultInvocationTimeout=n.getPropertyAsIntWithDefault("Ice.Default.InvocationTimeout",-1),this.defaultInvocationTimeout<1&&-1!==this.defaultInvocationTimeout&&(this.defaultInvocationTimeout=-1,r.warning("invalid value for Ice.Default.InvocationTimeout `"+n.getProperty("Ice.Default.InvocationTimeout")+"': defaulting to -1")),this.defaultPreferSecure=n.getPropertyAsIntWithDefault("Ice.Default.PreferSecure",0)>0,o=n.getPropertyWithDefault("Ice.Default.EncodingVersion",Ice.encodingVersionToString(i.currentEncoding)),this.defaultEncoding=Ice.stringToEncodingVersion(o),i.checkSupportedEncoding(this.defaultEncoding);var a=n.getPropertyAsIntWithDefault("Ice.Default.SlicedFormat",0)>0;this.defaultFormat=a?e.SlicedFormat:e.CompactFormat}}(),function(){var e=Ice.StringUtil,t=Ice.Identity,i=Ice.IdentityParseException;Ice.stringToIdentity=function(n){for(var r=new t,o=-1,s=0;-1!==(s=n.indexOf("/",s));){for(var a=0;s-a>0&&"\\"==n.charAt(s-a-1);)a++;if(a%2==0){if(-1!=o)throw(c=new i).str="unescaped backslash in identity `"+n+"'",c;o=s}s++}if(-1==o){r.category="";try{r.name=e.unescapeString(n)}catch(e){throw(c=new i).str="invalid identity name `"+n+"': "+c.toString(),c}}else{try{r.category=e.unescapeString(n,0,o)}catch(e){throw(c=new i).str="invalid category in identity `"+n+"': "+c.toString(),c}if(o+1<n.length)try{r.name=e.unescapeString(n,o+1,n.length)}catch(e){var c;throw(c=new i).str="invalid name in identity `"+n+"': "+c.toString(),c}else r.name=""}return r},Ice.identityToString=function(t){return null===t.category||0===t.category.length?e.escapeString(t.name,"/"):e.escapeString(t.category,"/")+"/"+e.escapeString(t.name,"/")},Ice.proxyIdentityCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var i,n=e.ice_getIdentity(),r=t.ice_getIdentity();return 0!==(i=n.name.localeCompare(r.name))?i:n.category.localeCompare(r.category)},Ice.proxyIdentityAndFacetCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var i,n=e.ice_getIdentity(),r=t.ice_getIdentity();if(0!==(i=n.name.localeCompare(r.name)))return i;if(0!==(i=n.category.localeCompare(r.category)))return i;var o=e.ice_getFacet(),s=t.ice_getFacet();return null===o&&null===s?0:null===o?-1:null===s?1:o.localeCompare(s)}}(),function(){Ice.ArrayUtil;var e=Ice.AsyncResultBase,t=Ice.ConnectionI,i=(Ice.ConnectionReaper,Ice.Debug),n=Ice.HashMap,r=Ice.Promise,o=(Ice.EndpointSelectionType,Ice.FactoryACMMonitor),s=Ice.Class,a=s({__init__:function(e,t){this._communicator=e,this._instance=t,this._destroyed=!1,this._monitor=new o(this._instance,this._instance.clientACM()),this._connectionsByEndpoint=new c,this._pending=new n(n.compareEquals),this._pendingConnectCount=0,this._waitPromise=null},destroy:function(){this._destroyed||(this._connectionsByEndpoint.forEach((function(e){e.destroy(t.CommunicatorDestroyed)})),this._destroyed=!0,this._communicator=null,this.checkFinished())},waitUntilFinished:function(){return this._waitPromise=new r,this.checkFinished(),this._waitPromise},create:function(e,t,n){i.assert(e.length>0);var o=this.applyOverrides(e);try{var s={value:!1},a=this.findConnectionByEndpoint(o,s);if(null!==a)return(new r).succeed(a,s.value)}catch(e){return(new r).fail(e)}return new l(this,o,t,n).start()},setRouterInfo:function(e){var t=this;return Ice.Promise.try2((function(){if(t._destroyed)throw new Ice.CommunicatorDestroyedException;return e.getClientEndpoints()})).then((function(i){for(var n=e.getAdapter(),r=t._instance.defaultsAndOverrides(),o=0;o<i.length;++o){var s=i[o];r.overrideTimeout&&(s=s.changeTimeout(r.overrideTimeoutValue)),s=s.changeCompress(!1);for(var a=0;a<t._connectionsByEndpoint.length;++a){var c=t._connectionsByEndpoint[a];c.endpoint().equals(s)&&c.setAdapter(n)}}}))},removeAdapter:function(e){this._destroyed||this._connectionsByEndpoint.forEach((function(t){t.getAdapter()===e&&t.setAdapter(null)}))},flushAsyncBatchRequests:function(){var t=new e(this._communicator,"flushBatchRequests",null,null,null);if(!this._destroyed)return r.all(this._connectionsByEndpoint.map((function(e){if(e.isActiveOrHolding())return e.flushBatchRequests().exception((function(e){if(!(e instanceof Ice.LocalException))throw e}))}))).then((function(){t.succeed(t)}),(function(e){t.fail(e,t)})),t;t.succeed()},applyOverrides:function(e){for(var t=this._instance.defaultsAndOverrides(),i=[],n=0;n<e.length;++n){var r=e[n];t.overrideTimeout?i.push(r.changeTimeout(t.overrideTimeoutValue)):i.push(r)}return i},findConnectionByEndpoint:function(e,t){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var n=this._instance.defaultsAndOverrides();i.assert(e.length>0);for(var r=0;r<e.length;++r){var o=e[r];if(!this._pending.has(o)){var s=this._connectionsByEndpoint.get(o);if(void 0!==s)for(var a=0;a<s.length;++a)if(s[a].isActiveOrHolding())return n.overrideCompress?t.value=n.overrideCompressValue:t.value=o.compress(),s[a]}}return null},incPendingConnectCount:function(){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;++this._pendingConnectCount},decPendingConnectCount:function(){--this._pendingConnectCount,i.assert(this._pendingConnectCount>=0),this._destroyed&&0===this._pendingConnectCount&&this.checkFinished()},getConnection:function(e,t,i){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var n=this._monitor.swapReapedConnections();if(null!==n)for(var r=0;r<n.length;++r){var o=n[r];this._connectionsByEndpoint.removeConnection(o.endpoint(),o),this._connectionsByEndpoint.removeConnection(o.endpoint().changeCompress(!0),o)}for(;;){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var s=this.findConnectionByEndpoint(e,i);if(null!==s)return s;if(this.addToPending(t,e))return null;break}return t.nextEndpoint(),null},createConnection:function(e,n){i.assert(this._pending.has(n)&&null!==e);var r=null;try{if(this._destroyed)throw new Ice.CommunicatorDestroyedException;r=new t(this._communicator,this._instance,this._monitor,e,n.changeCompress(!1),!1,null)}catch(t){if(t instanceof Ice.LocalException)try{e.close()}catch(e){}throw t}return this._connectionsByEndpoint.set(r.endpoint(),r),this._connectionsByEndpoint.set(r.endpoint().changeCompress(!0),r),r},finishGetConnection:function(e,t,i,n){var r,o,s=[];null!==n&&s.push(n);var a,c=[];for(r=0;r<e.length;++r){var l=e[r],d=this._pending.get(l);if(void 0!==d){this._pending.del(l);for(var u=0;u<d.length;++u)(o=d[u]).hasEndpoint(t)?-1===s.indexOf(o)&&s.push(o):-1===c.indexOf(o)&&c.push(o)}}for(r=0;r<s.length;++r){(o=s[r]).removeFromPending();var h=c.indexOf(o);-1!==h&&c.splice(h,1)}for(r=0;r<c.length;++r)(o=c[r]).removeFromPending();var f=this._instance.defaultsAndOverrides();for(a=f.overrideCompress?f.overrideCompressValue:t.compress(),r=0;r<c.length;++r)(o=c[r]).getConnection();for(r=0;r<s.length;++r)(o=s[r]).setConnection(i,a);this.checkFinished()},finishGetConnectionEx:function(e,t,n){var r,o,s=[];null!==n&&s.push(n);var a=[];for(r=0;r<e.length;++r){var c=e[r],l=this._pending.get(c);if(void 0!==l){this._pending.del(c);for(var d=0;d<l.length;++d)(o=l[d]).removeEndpoints(e)?-1===s.indexOf(o)&&s.push(o):-1===a.indexOf(o)&&a.push(o)}}for(r=0;r<a.length;++r)o=a[r],i.assert(-1===s.indexOf(o)),o.removeFromPending();for(this.checkFinished(),r=0;r<a.length;++r)(o=a[r]).getConnection();for(r=0;r<s.length;++r)(o=s[r]).setException(t)},addToPending:function(e,t){var i,n,r=!1;if(null!==e)for(n=0;n<t.length;++n){i=t[n];var o=this._pending.get(i);void 0!==o&&(r=!0,-1===o.indexOf(e)&&o.push(e))}if(r)return!0;for(n=0;n<t.length;++n)i=t[n],this._pending.has(i)||this._pending.set(i,[]);return!1},removeFromPending:function(e,t){for(var i=0;i<t.length;++i){var n=t[i],r=this._pending.get(n);if(void 0!==r){var o=r.indexOf(e);-1!==o&&r.splice(o,1)}}},handleConnectionException:function(e,t){var i=this._instance.traceLevels();if(i.retry>=2){var n=[];n.push("connection to endpoint failed"),e instanceof Ice.CommunicatorDestroyedException?n.push("\n"):t?n.push(", trying next endpoint\n"):n.push(" and no more endpoints to try\n"),n.push(e.toString()),this._instance.initializationData().logger.trace(i.retryCat,n.join(""))}},handleException:function(e,t){var i=this._instance.traceLevels();if(i.retry>=2){var n=[];n.push("couldn't resolve endpoint host"),e instanceof Ice.CommunicatorDestroyedException?n.push("\n"):t?n.push(", trying next endpoint\n"):n.push(" and no more endpoints to try\n"),n.push(e.toString()),this._instance.initializationData().logger.trace(i.retryCat,n.join(""))}},checkFinished:function(){if(!(!this._waitPromise||!this._destroyed||this._pending.size>0||this._pendingConnectCount>0)){var e=this;r.all(e._connectionsByEndpoint.map((function(e){return e.waitUntilFinished().exception((function(e){i.assert(!1)}))}))).then((function(){var t=e._monitor.swapReapedConnections();if(null!==t){for(var n=[],r=e._connectionsByEndpoint.entries;null!==r;r=r.next)for(var o=r.value,s=0;s<o.length;++s)-1===n.indexOf(o[s])&&n.push(o[s]);i.assert(t.length===n.length),e._connectionsByEndpoint.clear()}else i.assert(0===e._connectionsByEndpoint.size);i.assert(null!==e._waitPromise),e._waitPromise.succeed(),e._monitor.destroy()}))}}});Ice.OutgoingConnectionFactory=a;var c=s(n,{__init__:function(e){n.call(this,e||n.compareEquals)},set:function(e,r){var o=this.get(e);void 0===o&&(o=[],n.prototype.set.call(this,e,o)),i.assert(r instanceof t),o.push(r)},removeConnection:function(e,t){var n=this.get(e);i.assert(null!==n);var r=n.indexOf(t);i.assert(-1!==r),n.splice(r,1),0===n.length&&this.del(e)},map:function(e){var t=[];return this.forEach((function(i){t.push(e(i))})),t},forEach:function(e){for(var t=this._head;null!==t;t=t._next)for(var i=0;i<t.value.length;++i)e(t.value[i])}}),l=s({__init__:function(e,t,i,n){this._factory=e,this._endpoints=t,this._hasMore=i,this._selType=n,this._promise=new r,this._index=0,this._current=null},connectionStartCompleted:function(e){e.activate(),this._factory.finishGetConnection(this._endpoints,this._current,e,this)},connectionStartFailed:function(e,t){i.assert(null!==this._current),t instanceof Ice.LocalException?(this._factory.handleConnectionException(t,this._hasMore||this._index<this._endpoints.length),t instanceof Ice.CommunicatorDestroyedException?this._factory.finishGetConnectionEx(this._endpoints,t,this):this._index<this._endpoints.length?this.nextEndpoint():this._factory.finishGetConnectionEx(this._endpoints,t,this)):this._factory.finishGetConnectionEx(this._endpoints,t,this)},setConnection:function(e,t){this._promise.succeed(e,t),this._factory.decPendingConnectCount()},setException:function(e){this._promise.fail(e),this._factory.decPendingConnectCount()},hasEndpoint:function(e){return-1!==this.findEndpoint(e)},findEndpoint:function(e){for(var t=0;t<this._endpoints.length;++t)if(e.equals(this._endpoints[t]))return t;return-1},removeEndpoints:function(e){for(var t=0;t<e.length;++t){var i=this.findEndpoint(e[t]);-1!==i&&this._endpoints.splice(i,1)}return this._index=0,0===this._endpoints.length},removeFromPending:function(){this._factory.removeFromPending(this,this._endpoints)},start:function(){try{this._factory.incPendingConnectCount()}catch(e){return void this._promise.fail(e)}return this.getConnection(),this._promise},getConnection:function(){try{var e={value:!1},t=this._factory.getConnection(this._endpoints,this,e);if(null===t)return;this._promise.succeed(t,e.value),this._factory.decPendingConnectCount()}catch(e){this._promise.fail(e),this._factory.decPendingConnectCount()}},nextEndpoint:function(){var e=null,t=this._factory._instance.traceLevels();try{if(i.assert(this._index<this._endpoints.length),this._current=this._endpoints[this._index++],t.network>=2)(r=[]).push("trying to establish "),r.push(this._current.protocol()),r.push(" connection to "),r.push(this._current.toConnectorString()),this._factory._instance.initializationData().logger.trace(t.networkCat,r.join(""));e=this._factory.createConnection(this._current.connect(),this._current);var n=this;e.start().then((function(){n.connectionStartCompleted(e)}),(function(t){n.connectionStartFailed(e,t)}))}catch(i){var r;if(t.network>=2)(r=[]).push("failed to establish "),r.push(this._current.protocol()),r.push(" connection to "),r.push(this._current.toString()),r.push("\n"),r.push(i.toString()),this._factory._instance.initializationData().logger.trace(t.networkCat,r.join(""));this.connectionStartFailed(e,i)}}})}(),function(){var e=Ice.Debug,t=Ice.HashMap,i=Ice.Promise,n=Ice.Protocol,r=Ice.LocatorRegisterPrx,o=Ice.Class,s=o({__init__:function(e,i,n){this._locator=e,this._locatorRegistry=null,this._table=i,this._background=n,this._adapterRequests=new t,this._objectRequests=new t(t.compareEquals)},destroy:function(){this._locatorRegistry=null,this._table.clear()},equals:function(e){return this===e||e instanceof s&&this._locator.equals(e._locator)},hashCode:function(){return this._locator.hashCode()},getLocator:function(){return this._locator},getLocatorRegistry:function(){if(null!==this._locatorRegistry)return(new i).succeed(this._locatorRegistry);var e=this;return this._locator.getRegistry().then((function(t){return e._locatorRegistry=r.uncheckedCast(t.ice_locator(null).ice_endpointSelection(Ice.EndpointSelectionType.Ordered)),e._locatorRegistry}))},getEndpoints:function(t,n,r,o){var s=o||new i;e.assert(t.isIndirect());var a=null,c={value:!1};if(t.isWellKnown()){var l=this._table.getObjectReference(t.getIdentity(),r,c);if(!c.value){if(!this._background||null===l)return this.getObjectRequest(t).addCallback(t,null,r,s),s;this.getObjectRequest(t).addCallback(t,null,r,null)}if(l.isIndirect()){if(!l.isWellKnown())return this.getEndpoints(l,t,r,s),s}else a=l.getEndpoints()}else if(a=this._table.getAdapterEndpoints(t.getAdapterId(),r,c),!c.value){if(!this._background||null===a)return this.getAdapterRequest(t).addCallback(t,n,r,s),s;this.getAdapterRequest(t).addCallback(t,n,r,null)}return e.assert(null!==a),t.getInstance().traceLevels().location>=1&&this.getEndpointsTrace(t,a,!0),s.succeed(a,!0),s},clearCache:function(t){if(e.assert(t.isIndirect()),t.isWellKnown()){var i=this._table.removeObjectReference(t.getIdentity());null!==i&&(i.isIndirect()?i.isWellKnown()||this.clearCache(i):t.getInstance().traceLevels().location>=2&&this.trace("removed endpoints from locator table",t,i.getEndpoints()))}else{var n=this._table.removeAdapterEndpoints(t.getAdapterId());null!==n&&t.getInstance().traceLevels().location>=2&&this.trace("removed endpoints from locator table\n",t,n)}},trace:function(t,i,n){e.assert(i.isIndirect());var r=[];r.push(t),r.push("\n"),i.isWellKnown()?(r.push("object = "),r.push(i.getInstance().identityToString(i.getIdentity())),r.push("\n")):(r.push("adapter = "),r.push(i.getAdapterId()),r.push("\n")),r.push("endpoints = ");for(var o=0;o<n.length;o++)r.push(n[o].toString()),o+1<n.length&&r.push(":");i.getInstance().initializationData().logger.trace(i.getInstance().traceLevels().locationCat,r.join(""))},getEndpointsException:function(t,i){e.assert(t.isIndirect());var n,r,o=t.getInstance();try{throw i}catch(i){if(i instanceof Ice.AdapterNotFoundException)throw o.traceLevels().location>=1&&((n=[]).push("adapter not found\n"),n.push("adapter = "),n.push(t.getAdapterId()),o.initializationData().logger.trace(o.traceLevels().locationCat,n.join(""))),(r=new Ice.NotRegisteredException).kindOfObject="object adapter",r.id=t.getAdapterId(),r;if(i instanceof Ice.ObjectNotFoundException)throw o.traceLevels().location>=1&&((n=[]).push("object not found\n"),n.push("object = "),n.push(o.identityToString(t.getIdentity())),o.initializationData().logger.trace(o.traceLevels().locationCat,n.join(""))),(r=new Ice.NotRegisteredException).kindOfObject="object",r.id=o.identityToString(t.getIdentity()),r;if(i instanceof Ice.NotRegisteredException)throw i;if(i instanceof Ice.LocalException)throw o.traceLevels().location>=1&&((n=[]).push("couldn't contact the locator to retrieve adapter endpoints\n"),t.getAdapterId().length>0?(n.push("adapter = "),n.push(t.getAdapterId()),n.push("\n")):(n.push("object = "),n.push(o.identityToString(t.getIdentity())),n.push("\n")),n.push("reason = "+i.toString()),o.initializationData().logger.trace(o.traceLevels().locationCat,n.join(""))),i;e.assert(!1)}},getEndpointsTrace:function(e,t,i){if(null!==t&&t.length>0)i?this.trace("found endpoints in locator table",e,t):this.trace("retrieved endpoints from locator, adding to locator table",e,t);else{var n=e.getInstance(),r=[];r.push("no endpoints configured for "),e.getAdapterId().length>0?(r.push("adapter\n"),r.push("adapter = "),r.push(e.getAdapterId()),r.push("\n")):(r.push("object\n"),r.push("object = "),r.push(n.identityToString(e.getIdentity())),r.push("\n")),n.initializationData().logger.trace(n.traceLevels().locationCat,r.join(""))}},getAdapterRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance(),i=[];i.push("searching for adapter by id\n"),i.push("adapter = "),i.push(e.getAdapterId()),t.initializationData().logger.trace(t.traceLevels().locationCat,i.join(""))}var n=this._adapterRequests.get(e.getAdapterId());return void 0!==n||(n=new d(this,e),this._adapterRequests.set(e.getAdapterId(),n)),n},getObjectRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance(),i=[];i.push("searching for object by id\n"),i.push("object = "),i.push(t.identityToString(e.getIdentity())),t.initializationData().logger.trace(t.traceLevels().locationCat,i.join(""))}var n=this._objectRequests.get(e.getIdentity());return void 0!==n||(n=new l(this,e),this._objectRequests.set(e.getIdentity(),n)),n},finishRequest:function(t,i,n,r){if(null===n||n.__reference().isIndirect())for(var o=0;o<i.length;++o)this._table.removeObjectReference(i[o].getIdentity());t.isWellKnown()?(null===n||n.__reference().isWellKnown()?r&&this._table.removeObjectReference(t.getIdentity()):this._table.addObjectReference(t.getIdentity(),n.__reference()),e.assert(this._objectRequests.has(t.getIdentity())),this._objectRequests.del(t.getIdentity())):(null===n||n.__reference().isIndirect()?r&&this._table.removeAdapterEndpoints(t.getAdapterId()):this._table.addAdapterEndpoints(t.getAdapterId(),n.__reference().getEndpoints()),e.assert(this._adapterRequests.has(t.getAdapterId())),this._adapterRequests.del(t.getAdapterId()))}});Ice.LocatorInfo=s;var a=o({__init__:function(e,t,i){this._ref=e,this._ttl=t,this._promise=i},response:function(e,t){var i=null;if(null!==t){var r=t.__reference();if(this._ref.isWellKnown()&&!n.isSupported(this._ref.getEncoding(),r.getEncoding()));else if(r.isIndirect()){if(this._ref.isWellKnown()&&!r.isWellKnown()){var o=this;return void e.getEndpoints(r,this._ref,this._ttl).then((function(e,t){null!==o._promise&&o._promise.succeed(e,t)}),(function(e){null!==o._promise&&o._promise.fail(e)}))}}else i=r.getEndpoints()}this._ref.getInstance().traceLevels().location>=1&&e.getEndpointsTrace(this._ref,i,!1),null!==this._promise&&this._promise.succeed(null===i?[]:i,!1)},exception:function(e,t){try{e.getEndpointsException(this._ref,t)}catch(e){null!==this._promise&&this._promise.fail(e)}}}),c=o({__init__:function(e,t){this._locatorInfo=e,this._ref=t,this._callbacks=[],this._wellKnownRefs=[],this._sent=!1,this._response=!1,this._proxy=null,this._exception=null},addCallback:function(e,t,i,n){var r=new a(e,i,n);this._response?r.response(this._locatorInfo,this._proxy):null!==this._exception?r.exception(this._locatorInfo,this._exception):(this._callbacks.push(r),null!==t&&this._wellKnownRefs.push(t),this._sent||(this._sent=!0,this.send()))},response:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,e,!1),this._response=!0,this._proxy=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].response(this._locatorInfo,e)},exception:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,null,e instanceof Ice.UserException),this._exception=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].exception(this._locatorInfo,e)}}),l=o(c,{__init__:function(t,i){c.call(this,t,i),e.assert(i.isWellKnown())},send:function(){try{var e=this;this._locatorInfo.getLocator().findObjectById(this._ref.getIdentity()).then((function(t){e.response(t)}),(function(t){e.exception(t)}))}catch(e){this.exception(e)}}}),d=o(c,{__init__:function(t,i){c.call(this,t,i),e.assert(i.isIndirect())},send:function(){try{var e=this;this._locatorInfo.getLocator().findAdapterById(this._ref.getAdapterId()).then((function(t){e.response(t)}),(function(t){e.exception(t)}))}catch(e){this.exception(e)}}})}(),function(){var e=Ice.AsyncResultBase,t=Ice.Debug,i=Ice.Identity,n=(Ice.Promise,Ice.PropertyNames),r=Ice.ServantManager,o=(Ice.StringUtil,["ACM","AdapterId","Endpoints","Locator","Locator.EncodingVersion","Locator.EndpointSelection","Locator.ConnectionCached","Locator.PreferSecure","Locator.CollocationOptimized","Locator.Router","MessageSizeMax","PublishedEndpoints","ReplicaGroupId","Router","Router.EncodingVersion","Router.EndpointSelection","Router.ConnectionCached","Router.PreferSecure","Router.CollocationOptimized","Router.Locator","Router.Locator.EndpointSelection","Router.Locator.ConnectionCached","Router.Locator.PreferSecure","Router.Locator.CollocationOptimized","Router.Locator.LocatorCacheTimeout","Router.Locator.InvocationTimeout","Router.LocatorCacheTimeout","Router.InvocationTimeout","ProxyOptions","ThreadPool.Size","ThreadPool.SizeMax","ThreadPool.SizeWarn","ThreadPool.StackSize","ThreadPool.Serialize"]),s=Ice.Class({__init__:function(e,i,n,o,s,a,c){if(this._instance=e,this._communicator=i,this._objectAdapterFactory=n,this._servantManager=new r(e,o),this._name=o,this._routerEndpoints=[],this._routerInfo=null,this._state=0,this._noConfig=a,this._noConfig)return this._reference=this._instance.referenceFactory().createFromString("dummy -t",""),this._messageSizeMax=this._instance.messageSizeMax(),void c.succeed(this,c);var l=this._instance.initializationData().properties,d=[],u=this.filterProperties(d);if(0!==d.length&&l.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0){for(var h=["found unknown properties for object adapter `"+o+"':"],f=0;f<d.length;++f)h.push("\n    "+d[f]);this._instance.initializationData().logger.warning(h.join(""))}if(null===s&&u)throw(_=new Ice.InitializationException).reason="object adapter `"+this._name+"' requires configuration",_;var p=l.getPropertyWithDefault(this._name+".ProxyOptions","-t");try{this._reference=this._instance.referenceFactory().createFromString("dummy "+p,"")}catch(e){var _;if(e instanceof Ice.ProxyParseException)throw(_=new Ice.InitializationException).reason="invalid proxy options `"+p+"' for object adapter `"+o+"'",_;throw e}var C=this._instance.messageSizeMax()/1024,g=l.getPropertyAsIntWithDefault(this._name+".MessageSizeMax",C);this._messageSizeMax=g<1||g>2147483647/1024?2147483647:1024*g;try{if(null===s&&(s=Ice.RouterPrx.uncheckedCast(this._instance.proxyFactory().propertyToProxy(this._name+".Router"))),null!==s){if(this._routerInfo=this._instance.routerManager().find(s),t.assert(null!==this._routerInfo),null!==this._routerInfo.getAdapter())throw new Ice.AlreadyRegisteredException("object adapter with router",this._instance.identityToString(s.ice_getIdentity()));var m=this;this._routerInfo.getServerEndpoints().then((function(e){var t;for(t=0;t<e.length;++t)m._routerEndpoints.push(e[t]);for(m._routerEndpoints.sort((function(e,t){return e.compareTo(t)})),t=0;t<m._routerEndpoints.length-1;){var i=m._routerEndpoints[t],n=m._routerEndpoints[t+1];i.equals(n)?m._routerEndpoints.splice(t,1):++t}return m._routerInfo.setAdapter(m),m._instance.outgoingConnectionFactory().setRouterInfo(m._routerInfo)})).then((function(){c.succeed(m,c)}),(function(e){c.fail(e,c)}))}else{if(l.getProperty(this._name+".Endpoints").length>0)throw new Ice.FeatureNotSupportedException("object adapter endpoints not supported");c.succeed(this,c)}}catch(_){throw this.destroy(),_}},getName:function(){return this._noConfig?"":this._name},getCommunicator:function(){return this._communicator},activate:function(){},hold:function(){this.checkForDeactivation()},waitForHold:function(){var t=new e(this._communicator,"waitForHold",null,null,this);return this.checkForDeactivation(t)?t:t.succeed(t)},deactivate:function(){var t=new e(this._communicator,"deactivate",null,null,this);return this._state<5&&(this._state=5,this._instance.outgoingConnectionFactory().removeAdapter(this)),t.succeed(t)},waitForDeactivate:function(){var t=new e(this._communicator,"deactivate",null,null,this);return t.succeed(t)},isDeactivated:function(){return this._state>=5},destroy:function(){var t=new e(this._communicator,"destroy",null,null,this),i=this,n=function(){return i._state<6&&(i._state=6,i._servantManager.destroy(),i._objectAdapterFactory.removeObjectAdapter(i)),t.succeed(t)};return this._state<5?this.deactivate().then(n):n()},add:function(e,t){return this.addFacet(e,t,"")},addFacet:function(e,t,i){this.checkForDeactivation(),this.checkIdentity(t),this.checkServant(e);var n=t.clone();return this._servantManager.addServant(e,n,i),this.newProxy(n,i)},addWithUUID:function(e){return this.addFacetWithUUID(e,"")},addFacetWithUUID:function(e,t){return this.addFacet(e,new i(Ice.generateUUID(),""),t)},addDefaultServant:function(e,t){this.checkServant(e),this.checkForDeactivation(),this._servantManager.addDefaultServant(e,t)},remove:function(e){return this.removeFacet(e,"")},removeFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeServant(e,t)},removeAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeAllFacets(e)},removeDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.removeDefaultServant(e)},find:function(e){return this.findFacet(e,"")},findFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findServant(e,t)},findAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findAllFacets(e)},findByProxy:function(e){this.checkForDeactivation();var t=e.__reference();return this.findFacet(t.getIdentity(),t.getFacet())},findDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.findDefaultServant(e)},addServantLocator:function(e,t){this.checkForDeactivation(),this._servantManager.addServantLocator(e,t)},removeServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.removeServantLocator(e)},findServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.findServantLocator(e)},createProxy:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this.newProxy(e,"")},createDirectProxy:function(e){return this.createProxy(e)},createIndirectProxy:function(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")},setLocator:function(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")},refreshPublishedEndpoints:function(){throw new Ice.FeatureNotSupportedException("refreshPublishedEndpoints not supported")},getEndpoints:function(){return[]},getPublishedEndpoints:function(){return[]},getServantManager:function(){return this._servantManager},messageSizeMax:function(){return this._messageSizeMax},newProxy:function(e,t){for(var i=[],n=0;n<this._routerEndpoints.length;++n)i.push(this._routerEndpoints[n]);var r=this._instance.referenceFactory().create(e,t,this._reference,i);return this._instance.proxyFactory().referenceToProxy(r)},checkForDeactivation:function(e){if(this._state>=5){var t=new Ice.ObjectAdapterDeactivatedException;if(t.name=this.getName(),void 0!==e)return e.fail(t,e),!0;throw t}return!1},checkIdentity:function(e){if(void 0===e.name||null===e.name||0===e.name.length)throw new Ice.IllegalIdentityException(e);void 0!==e.category&&null!==e.category||(e.category="")},checkServant:function(e){if(null==e)throw new Ice.IllegalServantException("cannot add null servant to Object Adapter")},filterProperties:function(e){var t,i=!0,r=this._name+".";for(t=0;t<n.clPropNames.length;++t)if(0===r.indexOf(n.clPropNames[t]+".")){i=!1;break}for(var s=!0,a=this._instance.initializationData().properties.getPropertiesForPrefix(r).entries;null!==a;a=a.next){var c=!1;for(t=0;t<o.length;++t)if(a.key===r+o[t]){s=!1,c=!0;break}!c&&i&&e.push(a.key)}return s}});Ice.ObjectAdapterI=s}(),function(){var e=Ice.HashMap,t=Ice.LocatorInfo,i=Ice.LocatorTable,n=Ice.LocatorPrx,r=Ice.Class({__init__:function(t){this._background=t.getPropertyAsInt("Ice.BackgroundLocatorCacheUpdates")>0,this._table=new e(e.compareEquals),this._locatorTables=new e(e.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear(),this._locatorTables.clear()},find:function(e){if(null===e)return null;var r=n.uncheckedCast(e.ice_locator(null)),o=this._table.get(r);if(void 0===o){var s=this._locatorTables.get(r.ice_getIdentity());void 0===s&&(s=new i,this._locatorTables.set(r.ice_getIdentity(),s)),o=new t(r,s,this._background),this._table.set(r,o)}return o}});Ice.LocatorManager=r}(),function(){Ice.AsyncResultBase;var e=Ice.ObjectAdapterI,t=Ice.Promise,i=Ice.Class({__init__:function(e,i){this._instance=e,this._communicator=i,this._adapters=[],this._adapterNamesInUse=[],this._shutdownPromise=new t},shutdown:function(){return null===this._instance||(this._instance=null,this._communicator=null,this._shutdownPromise=t.all(this._adapters.map((function(e){return e.deactivate()})))),this._shutdownPromise},waitForShutdown:function(){var e=this;return this._shutdownPromise.then((function(){return t.all(e._adapters.map((function(e){return e.waitForDeactivate()})))}))},isShutdown:function(){return null===this._instance},destroy:function(){var e=this;return this.waitForShutdown().then((function(){return t.all(e._adapters.map((function(e){return e.destroy()})))}))},createObjectAdapter:function(t,i,n){if(null===this._instance)throw new Ice.ObjectAdapterDeactivatedException;var r=null;try{if(0===t.length){var o=Ice.generateUUID();r=new e(this._instance,this._communicator,this,o,null,!0,n)}else{if(-1!==this._adapterNamesInUse.indexOf(t))throw new Ice.AlreadyRegisteredException("object adapter",t);r=new e(this._instance,this._communicator,this,t,i,!1,n),this._adapterNamesInUse.push(t)}this._adapters.push(r)}catch(e){n.fail(e,n)}},removeObjectAdapter:function(e){if(null!==this._instance){var t=this._adapters.indexOf(e);-1!==t&&this._adapters.splice(t,1),-1!==(t=this._adapterNamesInUse.indexOf(e.getName()))&&this._adapterNamesInUse.splice(t,1)}}});Ice.ObjectAdapterFactory=i}(),N.defineDictionary(IceMX,"StringIntDict","StringIntDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),IceMX.Metrics=N.defineObject((function(e,t,i,n,r){Ice.Object.call(this),this.id=void 0!==e?e:"",this.total=void 0!==t?t:new Ice.Long(0,0),this.current=void 0!==i?i:0,this.totalLifetime=void 0!==n?n:new Ice.Long(0,0),this.failures=void 0!==r?r:0}),Ice.Object,void 0,1,["::Ice::Object","::IceMX::Metrics"],-1,(function(e){e.writeString(this.id),e.writeLong(this.total),e.writeInt(this.current),e.writeLong(this.totalLifetime),e.writeInt(this.failures)}),(function(e){this.id=e.readString(),this.total=e.readLong(),this.current=e.readInt(),this.totalLifetime=e.readLong(),this.failures=e.readInt()}),!1),IceMX.MetricsPrx=N.defineProxy(Ice.ObjectPrx,IceMX.Metrics.ice_staticId,void 0),N.defineOperations(IceMX.Metrics,IceMX.MetricsPrx),IceMX.MetricsFailures=N.defineStruct((function(e,t){this.id=void 0!==e?e:"",this.failures=void 0!==t?t:null}),!1,(function(e){e.writeString(this.id),IceMX.StringIntDictHelper.write(e,this.failures)}),(function(e){this.id=e.readString(),this.failures=IceMX.StringIntDictHelper.read(e)}),2,!1),N.defineSequence(IceMX,"MetricsFailuresSeqHelper","IceMX.MetricsFailures",!1),N.defineSequence(IceMX,"MetricsMapHelper","Ice.ObjectHelper",!1,"IceMX.Metrics"),N.defineDictionary(IceMX,"MetricsView","MetricsViewHelper","Ice.StringHelper","IceMX.MetricsMapHelper",!1,void 0,void 0,Ice.ArrayUtil.equals),IceMX.UnknownMetricsView=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"IceMX::UnknownMetricsView",void 0,void 0,!1,!1),IceMX.MetricsAdmin=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::IceMX::MetricsAdmin"],-1,void 0,void 0,!1),IceMX.MetricsAdminPrx=N.defineProxy(Ice.ObjectPrx,IceMX.MetricsAdmin.ice_staticId,void 0),N.defineOperations(IceMX.MetricsAdmin,IceMX.MetricsAdminPrx,{getMetricsViewNames:[,,,,2,["Ice.StringSeqHelper"],,[["Ice.StringSeqHelper"]],,,],enableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],disableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],getMetricsView:[,,,,2,["IceMX.MetricsViewHelper"],[[7]],[[4]],[IceMX.UnknownMetricsView],,!0],getMapMetricsFailures:[,,,,2,["IceMX.MetricsFailuresSeqHelper"],[[7],[7]],,[IceMX.UnknownMetricsView],,],getMetricsFailures:[,,,,2,[IceMX.MetricsFailures],[[7],[7],[7]],,[IceMX.UnknownMetricsView],,]}),IceMX.ThreadMetrics=N.defineObject((function(e,t,i,n,r,o,s,a){IceMX.Metrics.call(this,e,t,i,n,r),this.inUseForIO=void 0!==o?o:0,this.inUseForUser=void 0!==s?s:0,this.inUseForOther=void 0!==a?a:0}),IceMX.Metrics,void 0,2,["::Ice::Object","::IceMX::Metrics","::IceMX::ThreadMetrics"],-1,(function(e){e.writeInt(this.inUseForIO),e.writeInt(this.inUseForUser),e.writeInt(this.inUseForOther)}),(function(e){this.inUseForIO=e.readInt(),this.inUseForUser=e.readInt(),this.inUseForOther=e.readInt()}),!1),IceMX.ThreadMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.ThreadMetrics.ice_staticId,void 0),N.defineOperations(IceMX.ThreadMetrics,IceMX.ThreadMetricsPrx),IceMX.DispatchMetrics=N.defineObject((function(e,t,i,n,r,o,s,a){IceMX.Metrics.call(this,e,t,i,n,r),this.userException=void 0!==o?o:0,this.size=void 0!==s?s:new Ice.Long(0,0),this.replySize=void 0!==a?a:new Ice.Long(0,0)}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::DispatchMetrics","::IceMX::Metrics"],-1,(function(e){e.writeInt(this.userException),e.writeLong(this.size),e.writeLong(this.replySize)}),(function(e){this.userException=e.readInt(),this.size=e.readLong(),this.replySize=e.readLong()}),!1),IceMX.DispatchMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.DispatchMetrics.ice_staticId,void 0),N.defineOperations(IceMX.DispatchMetrics,IceMX.DispatchMetricsPrx),IceMX.ChildInvocationMetrics=N.defineObject((function(e,t,i,n,r,o,s){IceMX.Metrics.call(this,e,t,i,n,r),this.size=void 0!==o?o:new Ice.Long(0,0),this.replySize=void 0!==s?s:new Ice.Long(0,0)}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics"],-1,(function(e){e.writeLong(this.size),e.writeLong(this.replySize)}),(function(e){this.size=e.readLong(),this.replySize=e.readLong()}),!1),IceMX.ChildInvocationMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.ChildInvocationMetrics.ice_staticId,void 0),N.defineOperations(IceMX.ChildInvocationMetrics,IceMX.ChildInvocationMetricsPrx),IceMX.CollocatedMetrics=N.defineObject((function(e,t,i,n,r,o,s){IceMX.ChildInvocationMetrics.call(this,e,t,i,n,r,o,s)}),IceMX.ChildInvocationMetrics,void 0,2,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::CollocatedMetrics","::IceMX::Metrics"],-1,void 0,void 0,!1),IceMX.CollocatedMetricsPrx=N.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.CollocatedMetrics.ice_staticId,void 0),N.defineOperations(IceMX.CollocatedMetrics,IceMX.CollocatedMetricsPrx),IceMX.RemoteMetrics=N.defineObject((function(e,t,i,n,r,o,s){IceMX.ChildInvocationMetrics.call(this,e,t,i,n,r,o,s)}),IceMX.ChildInvocationMetrics,void 0,3,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics","::IceMX::RemoteMetrics"],-1,void 0,void 0,!1),IceMX.RemoteMetricsPrx=N.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.RemoteMetrics.ice_staticId,void 0),N.defineOperations(IceMX.RemoteMetrics,IceMX.RemoteMetricsPrx),IceMX.InvocationMetrics=N.defineObject((function(e,t,i,n,r,o,s,a,c){IceMX.Metrics.call(this,e,t,i,n,r),this.retry=void 0!==o?o:0,this.userException=void 0!==s?s:0,this.remotes=void 0!==a?a:null,this.collocated=void 0!==c?c:null}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::InvocationMetrics","::IceMX::Metrics"],-1,(function(e){e.writeInt(this.retry),e.writeInt(this.userException),IceMX.MetricsMapHelper.write(e,this.remotes),IceMX.MetricsMapHelper.write(e,this.collocated)}),(function(e){this.retry=e.readInt(),this.userException=e.readInt(),this.remotes=IceMX.MetricsMapHelper.read(e),this.collocated=IceMX.MetricsMapHelper.read(e)}),!1),IceMX.InvocationMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.InvocationMetrics.ice_staticId,void 0),N.defineOperations(IceMX.InvocationMetrics,IceMX.InvocationMetricsPrx),IceMX.ConnectionMetrics=N.defineObject((function(e,t,i,n,r,o,s){IceMX.Metrics.call(this,e,t,i,n,r),this.receivedBytes=void 0!==o?o:new Ice.Long(0,0),this.sentBytes=void 0!==s?s:new Ice.Long(0,0)}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ConnectionMetrics","::IceMX::Metrics"],-1,(function(e){e.writeLong(this.receivedBytes),e.writeLong(this.sentBytes)}),(function(e){this.receivedBytes=e.readLong(),this.sentBytes=e.readLong()}),!1),IceMX.ConnectionMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.ConnectionMetrics.ice_staticId,void 0),N.defineOperations(IceMX.ConnectionMetrics,IceMX.ConnectionMetricsPrx),function(){Ice.Debug;var e=Ice.HashMap,t=Ice.ConnectRequestHandler,i=Ice.Class({__init__:function(t){this._instance=t,this._handlers=new e(e.compareEquals)},getRequestHandler:function(e,i){var n,r=!1;return e.getCacheConnection()?(n=this._handlers.get(e))||(n=new t(e,i),this._handlers.set(e,n),r=!0):(r=!0,n=new t(e,i)),r&&e.getConnection().then((function(e,t){n.setConnection(e,t)}),(function(e){n.setException(e)})),i.__setRequestHandler(n.connect(i))},removeRequestHandler:function(e,t){e.getCacheConnection()&&this._handlers.get(e)===t&&this._handlers.del(e)}});Ice.RequestHandlerFactory=i}(),Ice.Process=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Process"],-1,void 0,void 0,!1),Ice.ProcessPrx=N.defineProxy(Ice.ObjectPrx,Ice.Process.ice_staticId,void 0),N.defineOperations(Ice.Process,Ice.ProcessPrx,{shutdown:[,,,,,,,,,,],writeMessage:[,,,,,,[[7],[3]],,,,]}),x=Ice.TcpEndpointI,T=Ice.Class({__init__:function(e){this._instance=e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(e,t){var i=new x(this._instance);return i.initWithOptions(e,t),i},read:function(e){var t=new x(this._instance);return t.initWithStream(e),t},destroy:function(){this._instance=null},clone:function(e){return new T(e)}}),Ice.TcpEndpointFactory=T,N.defineDictionary(Ice,"PropertyDict","PropertyDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.PropertiesAdmin=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::PropertiesAdmin"],-1,void 0,void 0,!1),Ice.PropertiesAdminPrx=N.defineProxy(Ice.ObjectPrx,Ice.PropertiesAdmin.ice_staticId,void 0),N.defineOperations(Ice.PropertiesAdmin,Ice.PropertiesAdminPrx,{getProperty:[,,,,,[7],[[7]],,,,],getPropertiesForPrefix:[,,,,,["Ice.PropertyDictHelper"],[[7]],,,,],setProperties:[,,,1,,,[["Ice.PropertyDictHelper"]],,,,]}),Ice.LogMessageType=N.defineEnum([["PrintMessage",0],["TraceMessage",1],["WarningMessage",2],["ErrorMessage",3]]),N.defineSequence(Ice,"LogMessageTypeSeqHelper","Ice.LogMessageType.__helper",!1),Ice.LogMessage=N.defineStruct((function(e,t,i,n){this.type=void 0!==e?e:Ice.LogMessageType.PrintMessage,this.timestamp=void 0!==t?t:0,this.traceCategory=void 0!==i?i:"",this.message=void 0!==n?n:""}),!0,(function(e){Ice.LogMessageType.__write(e,this.type),e.writeLong(this.timestamp),e.writeString(this.traceCategory),e.writeString(this.message)}),(function(e){this.type=Ice.LogMessageType.__read(e),this.timestamp=e.readLong(),this.traceCategory=e.readString(),this.message=e.readString()}),11,!1),N.defineSequence(Ice,"LogMessageSeqHelper","Ice.LogMessage",!1),Ice.RemoteLogger=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::RemoteLogger"],-1,void 0,void 0,!1),Ice.RemoteLoggerPrx=N.defineProxy(Ice.ObjectPrx,Ice.RemoteLogger.ice_staticId,void 0),N.defineOperations(Ice.RemoteLogger,Ice.RemoteLoggerPrx,{init:[,,,,,,[[7],["Ice.LogMessageSeqHelper"]],,,,],log:[,,,,,,[[Ice.LogMessage]],,,,]}),Ice.RemoteLoggerAlreadyAttachedException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::RemoteLoggerAlreadyAttachedException",void 0,void 0,!1,!1),Ice.LoggerAdmin=N.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LoggerAdmin","::Ice::Object"],-1,void 0,void 0,!1),Ice.LoggerAdminPrx=N.defineProxy(Ice.ObjectPrx,Ice.LoggerAdmin.ice_staticId,void 0),N.defineOperations(Ice.LoggerAdmin,Ice.LoggerAdminPrx,{attachRemoteLogger:[,,,,,,[["Ice.RemoteLoggerPrx"],["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],,[Ice.RemoteLoggerAlreadyAttachedException],,],detachRemoteLogger:[,,,,,[1],[["Ice.RemoteLoggerPrx"]],,,,],getLog:[,,,,,["Ice.LogMessageSeqHelper"],[["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],[[7]],,,]}),A=Ice.WSEndpoint,O=Ice.Class({__init__:function(e,t){this._instance=e,this._delegate=t},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(e,t){var i=new A(this._instance,this._delegate.create(e,t));return i.initWithOptions(e),i},read:function(e){var t=new A(this._instance,this._delegate.read(e));return t.initWithStream(e),t},destroy:function(){this._delegate.destroy(),this._instance=null}}),Ice.WSEndpointFactory=O,N.defineDictionary(Ice,"SliceChecksumDict","SliceChecksumDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),function(){var e=Ice.AsyncResultBase,t=Ice.Debug,i=Ice.DefaultsAndOverrides,n=Ice.EndpointFactoryManager,r=(Ice.HashMap,Ice.ImplicitContextI),o=Ice.LocatorManager,s=(Ice.Logger,Ice.ObjectAdapterFactory),a=Ice.ObjectFactoryManager,c=Ice.OutgoingConnectionFactory,l=(Ice.Promise,Ice.Properties),d=Ice.ProxyFactory,u=Ice.RetryQueue,h=Ice.RouterManager,f=Ice.Timer,p=Ice.TraceLevels,_=Ice.ReferenceFactory,C=Ice.RequestHandlerFactory,g=Ice.ACMConfig,m=Ice.Class({__init__:function(e){this._state=0,this._initData=e,this._traceLevels=null,this._defaultsAndOverrides=null,this._messageSizeMax=0,this._batchAutoFlushSize=0,this._clientACM=null,this._implicitContext=null,this._routerManager=null,this._locatorManager=null,this._referenceFactory=null,this._requestHandlerFactory=null,this._proxyFactory=null,this._outgoingConnectionFactory=null,this._servantFactoryManager=null,this._objectAdapterFactory=null,this._retryQueue=null,this._endpointHostResolver=null,this._endpointFactoryManager=null},initializationData:function(){return this._initData},traceLevels:function(){return t.assert(null!==this._traceLevels),this._traceLevels},defaultsAndOverrides:function(){return t.assert(null!==this._defaultsAndOverrides),this._defaultsAndOverrides},routerManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._routerManager),this._routerManager},locatorManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._locatorManager),this._locatorManager},referenceFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._referenceFactory),this._referenceFactory},requestHandlerFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._requestHandlerFactory),this._requestHandlerFactory},proxyFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._proxyFactory),this._proxyFactory},outgoingConnectionFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._outgoingConnectionFactory),this._outgoingConnectionFactory},servantFactoryManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._servantFactoryManager),this._servantFactoryManager},objectAdapterFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._objectAdapterFactory),this._objectAdapterFactory},retryQueue:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._retryQueue),this._retryQueue},timer:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._timer),this._timer},endpointFactoryManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._endpointFactoryManager),this._endpointFactoryManager},messageSizeMax:function(){return this._messageSizeMax},batchAutoFlushSize:function(){return this._batchAutoFlushSize},clientACM:function(){return this._clientACM},getImplicitContext:function(){return this._implicitContext},stringToIdentity:function(e){return Ice.stringToIdentity(e)},identityToString:function(e){return Ice.identityToString(e)},setDefaultLocator:function(e){if(2==this._state)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultLocator(e)},setDefaultRouter:function(e){if(2==this._state)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultRouter(e)},setLogger:function(e){this._initData.logger=e},finishSetup:function(e,t){try{null===this._initData.properties&&(this._initData.properties=l.createProperties()),void 0===Ice.__oneOfDone&&(Ice.__printStackTraces=this._initData.properties.getPropertyAsIntWithDefault("Ice.PrintStackTraces",0)>0,Ice.__oneOfDone=!0),null===this._initData.logger&&(this._initData.logger=Ice.getProcessLogger()),this._traceLevels=new p(this._initData.properties),this._defaultsAndOverrides=new i(this._initData.properties,this._initData.logger);var m=this._initData.properties.getPropertyAsIntWithDefault("Ice.MessageSizeMax",1024);this._messageSizeMax=m<1||m>2147483647/1024?2147483647:1024*m,0===this._initData.properties.getProperty("Ice.BatchAutoFlushSize").length&&this._initData.properties.getProperty("Ice.BatchAutoFlush").length>0?this._initData.properties.getPropertyAsInt("Ice.BatchAutoFlush")>0&&(this._batchAutoFlushSize=this._messageSizeMax):(m=this._initData.properties.getPropertyAsIntWithDefault("Ice.BatchAutoFlushSize",1024),this._batchAutoFlushSize=m<1?m:m>2147483647/1024?2147483647:1024*m),this._clientACM=new g(this._initData.properties,this._initData.logger,"Ice.ACM.Client",new g(this._initData.properties,this._initData.logger,"Ice.ACM",new g)),this._implicitContext=r.create(this._initData.properties.getProperty("Ice.ImplicitContext")),this._routerManager=new h,this._locatorManager=new o(this._initData.properties),this._referenceFactory=new _(this,e),this._requestHandlerFactory=new C(this,e),this._proxyFactory=new d(this),this._endpointFactoryManager=new n(this);var R=new Ice.ProtocolInstance(this,Ice.TCPEndpointType,"tcp",!1),S=new Ice.TcpEndpointFactory(R);this._endpointFactoryManager.add(S);var I=new Ice.ProtocolInstance(this,Ice.WSEndpointType,"ws",!1),y=new Ice.WSEndpointFactory(I,S.clone(I));this._endpointFactoryManager.add(y);var v=new Ice.ProtocolInstance(this,IceSSL.EndpointType,"ssl",!0),w=new Ice.TcpEndpointFactory(v);this._endpointFactoryManager.add(w);var E=new Ice.ProtocolInstance(this,Ice.WSSEndpointType,"wss",!0),b=new Ice.WSEndpointFactory(E,w.clone(E));this._endpointFactoryManager.add(b),this._outgoingConnectionFactory=new c(e,this),this._servantFactoryManager=new a,this._objectAdapterFactory=new s(this,e),this._retryQueue=new u(this),this._timer=new f(this._initData.logger);var D=Ice.RouterPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Router"));null!==D&&(this._referenceFactory=this._referenceFactory.setDefaultRouter(D));var M=Ice.LocatorPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Locator"));null!==M&&(this._referenceFactory=this._referenceFactory.setDefaultLocator(M)),null!==t&&t.succeed(e)}catch(e){if(null===t)throw e instanceof Ice.LocalException&&this.destroy(),e;e instanceof Ice.LocalException?this.destroy().finally2((function(){t.fail(e)})):t.fail(e)}},destroy:function(){var t=new e(null,"destroy",null,this,null);if(1==this._state)return this._destroyPromises||(this._destroyPromises=[]),this._destroyPromises.push(t),t;this._state=1;var i=this;return Ice.Promise.try2((function(){if(i._objectAdapterFactory)return i._objectAdapterFactory.shutdown()})).then((function(){if(null!==i._outgoingConnectionFactory&&i._outgoingConnectionFactory.destroy(),null!==i._objectAdapterFactory)return i._objectAdapterFactory.destroy()})).then((function(){if(null!==i._outgoingConnectionFactory)return i._outgoingConnectionFactory.waitUntilFinished()})).then((function(){var e;if(i._retryQueue&&i._retryQueue.destroy(),i._timer&&i._timer.destroy(),i._servantFactoryManager&&i._servantFactoryManager.destroy(),i._routerManager&&i._routerManager.destroy(),i._locatorManager&&i._locatorManager.destroy(),i._endpointFactoryManager&&i._endpointFactoryManager.destroy(),i._initData.properties.getPropertyAsInt("Ice.Warn.UnusedProperties")>0){var n=i._initData.properties.getUnusedProperties();if(n.length>0){var r=[];for(r.push("The following properties were set but never read:"),e=0;e<n.length;++e)r.push("\n    "),r.push(n[e]);i._initData.logger.warning(r.join(""))}}if(i._objectAdapterFactory=null,i._outgoingConnectionFactory=null,i._retryQueue=null,i._timer=null,i._servantFactoryManager=null,i._referenceFactory=null,i._requestHandlerFactory=null,i._proxyFactory=null,i._routerManager=null,i._locatorManager=null,i._endpointFactoryManager=null,i._state=2,this._destroyPromises)for(e=0;e<this._destroyPromises.length;++e)this._destroyPromises[e].succeed(this._destroyPromises[e]);t.succeed(t)})).exception((function(e){if(this._destroyPromises)for(var i=0;i<this._destroyPromises.length;++i)this._destroyPromises[i].fail(e,this._destroyPromises[i]);t.fail(e,t)})),t}});Ice.Instance=m}(),V=Ice.Instance,Ice.Promise,k=Ice.Class({__init__:function(e){this._instance=new V(e)},finishSetup:function(e){this._instance.finishSetup(this,e)},destroy:function(){return this._instance.destroy()},shutdown:function(){this._instance.objectAdapterFactory().shutdown()},waitForShutdown:function(){return this._instance.objectAdapterFactory().waitForShutdown()},isShutdown:function(){return this._instance.objectAdapterFactory().isShutdown()},stringToProxy:function(e){return this._instance.proxyFactory().stringToProxy(e)},proxyToString:function(e){return this._instance.proxyFactory().proxyToString(e)},propertyToProxy:function(e){return this._instance.proxyFactory().propertyToProxy(e)},proxyToProperty:function(e,t){return this._instance.proxyFactory().proxyToProperty(e,t)},stringToIdentity:function(e){return this._instance.stringToIdentity(e)},identityToString:function(e){return this._instance.identityToString(e)},createObjectAdapter:function(e){var t=new Ice.AsyncResultBase(this,"createObjectAdapter",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,t),t},createObjectAdapterWithEndpoints:function(e,t){0===e.length&&(e=Ice.generateUUID()),this.getProperties().setProperty(e+".Endpoints",t);var i=new Ice.AsyncResultBase(this,"createObjectAdapterWithEndpoints",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,i),i},createObjectAdapterWithRouter:function(e,t){0===e.length&&(e=Ice.generateUUID());for(var i=new Ice.AsyncResultBase(this,"createObjectAdapterWithRouter",this,null,null),n=this.proxyToProperty(t,e+".Router").entries;null!==n;n=n.next)this.getProperties().setProperty(n.key,n.value);return this._instance.objectAdapterFactory().createObjectAdapter(e,t,i),i},addObjectFactory:function(e,t){this._instance.servantFactoryManager().add(e,t)},findObjectFactory:function(e){return this._instance.servantFactoryManager().find(e)},getImplicitContext:function(){return this._instance.getImplicitContext()},getProperties:function(){return this._instance.initializationData().properties},getLogger:function(){return this._instance.initializationData().logger},getDefaultRouter:function(){return this._instance.referenceFactory().getDefaultRouter()},setDefaultRouter:function(e){this._instance.setDefaultRouter(e)},getDefaultLocator:function(){return this._instance.referenceFactory().getDefaultLocator()},setDefaultLocator:function(e){this._instance.setDefaultLocator(e)},flushBatchRequests:function(){return this._instance.outgoingConnectionFactory().flushAsyncBatchRequests()}}),Object.defineProperty(k.prototype,"instance",{get:function(){return this._instance}}),Ice.Communicator=k,function(){var e=Ice.Protocol;Ice.InitializationData=function(){this.properties=null,this.logger=null},Ice.InitializationData.prototype.clone=function(){var e=new Ice.InitializationData;return e.properties=this.properties,e.logger=this.logger,e},Ice.initialize=function(e,t){var i=null,n=null;if(e instanceof Array)i=e;else if(e instanceof Ice.InitializationData)n=e;else if(null!=e)throw new Ice.InitializationException("invalid argument to initialize");if(null!=t){if(!(t instanceof Ice.InitializationData&&null===n))throw new Ice.InitializationException("invalid argument to initialize");n=t}(n=null===n?new Ice.InitializationData:n.clone()).properties=Ice.createProperties(i,n.properties);var r=new Ice.Communicator(n);return r.finishSetup(null),r},Ice.createProperties=function(e,t){return new Ice.Properties(e,t)},Ice.currentProtocol=function(){return e.currentProtocol.clone()},Ice.currentEncoding=function(){return e.currentEncoding.clone()}}(),e.Ice=Ice,e.IceMX=IceMX,e.IceSSL=IceSSL}()},7686:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=n.Slice,s=r.module("Common");s.ConferenceError=o.defineUserException((function(e,t,i){n.UserException.call(this,i),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),n.UserException,"Common::ConferenceError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),i.Common=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(3760):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},3760:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3760,e.exports=t},816:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=n.Slice;s.defineSequence(o,"MusicListHelper","Ice.StringHelper",!1),s.defineDictionary(o,"TerminalEnergy","TerminalEnergyHelper","Ice.ShortHelper","Ice.IntHelper",!0,void 0,void 0),s.defineSequence(o,"deviceLstHelper","Ice.StringHelper",!1),o.remoteAudio=s.defineStruct((function(e,t,i,n,r,o,s,a){this.inputDevice=void 0!==e?e:"",this.outputDevice=void 0!==t?t:"",this.bMicBoost=void 0!==i&&i,this.hiLevelEC=void 0!==n?n:0,this.outputDType=void 0!==r?r:0,this.echoDelay=void 0!==o?o:0,this.outputVolume=void 0!==s?s:0,this.inputVolume=void 0!==a?a:0}),!0,(function(e){e.writeString(this.inputDevice),e.writeString(this.outputDevice),e.writeBool(this.bMicBoost),e.writeInt(this.hiLevelEC),e.writeInt(this.outputDType),e.writeInt(this.echoDelay),e.writeInt(this.outputVolume),e.writeInt(this.inputVolume)}),(function(e){this.inputDevice=e.readString(),this.outputDevice=e.readString(),this.bMicBoost=e.readBool(),this.hiLevelEC=e.readInt(),this.outputDType=e.readInt(),this.echoDelay=e.readInt(),this.outputVolume=e.readInt(),this.inputVolume=e.readInt()}),23,!1),o.remoteAudioInf=s.defineStruct((function(e,t,i){this.inputDLst=void 0!==e?e:null,this.outputDLst=void 0!==t?t:null,this.remoteInf=void 0!==i?i:new o.remoteAudio}),!0,(function(e){o.deviceLstHelper.write(e,this.inputDLst),o.deviceLstHelper.write(e,this.outputDLst),o.remoteAudio.write(e,this.remoteInf)}),(function(e){this.inputDLst=o.deviceLstHelper.read(e),this.outputDLst=o.deviceLstHelper.read(e),this.remoteInf=o.remoteAudio.read(e,this.remoteInf)}),25,!1),o.AudioCallback=s.defineObject(void 0,n.Object,void 0,0,["::Conference::AudioCallback","::Ice::Object"],-1,void 0,void 0,!1),o.AudioCallbackPrx=s.defineProxy(n.ObjectPrx,o.AudioCallback.ice_staticId,void 0),s.defineOperations(o.AudioCallback,o.AudioCallbackPrx,{updateStatus:[,,,,,,[[2],[2],[o.ASTATUS.__helper]],,,,],updateVoiceEnergy:[,,,,,,[["Conference.TerminalEnergyHelper"]],,,,],updateSpeaker:[,,,,,,[[2]],,,,],closeAll:[,,,,,,[[2]],,,,],playBackgroundMusic:[,,,,,,[[2],[1]],,,,],notifyVoiceHowling:[,,,,,,[[2],[1]],,,,],notifyVoiceNoise:[,,,,,,[[2],[1]],,,,],getRemoteAudioInfNotify:[,,,1,,[o.remoteAudioInf],[[2]],,[r.ConferenceError],,],remoteAudioSetNotify:[,,,,,,[[2],[o.remoteAudio]],,[r.ConferenceError],,],notifyLanLessMicOpen:[,,,,,,,,,,],notifySetVoiceChange:[,,,,,,[[2],[2],[3]],,,,]}),o.AudioCtrl=s.defineObject(void 0,n.Object,void 0,0,["::Conference::AudioCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.AudioCtrlPrx=s.defineProxy(n.ObjectPrx,o.AudioCtrl.ice_staticId,void 0),s.defineOperations(o.AudioCtrl,o.AudioCtrlPrx,{setDeviceStatus:[,,,1,,,[[1]],,[r.ConferenceError],,],askForMic:[,,,1,,,,,[r.ConferenceError],,],openMicEx:[,,,1,,,[[2]],,[r.ConferenceError],,],closeMicEx:[,,,1,,,[[2]],,[r.ConferenceError],,],closeAll:[,,,1,,,,,[r.ConferenceError],,],setVoiceEnergy:[,,,1,,,[[3]],,[r.ConferenceError],,],pstnSwitchMicStatus:[,,,1,,,,,[r.ConferenceError],,],startRecord:[,,,1,,,,,[r.ConferenceError],,],isRecording:[,,,1,,[1],,,[r.ConferenceError],,],stopRecord:[,,,1,,,,,[r.ConferenceError],,],playApplause:[,,,1,,,,,[r.ConferenceError],,],getMusicList:[,,,1,,["Conference.MusicListHelper"],,,[r.ConferenceError],,],getPlayBGMusic:[,,,1,,[7],,,[r.ConferenceError],,],startBGMusic:[,,,1,,,[[7],[3]],,[r.ConferenceError],,],stopPlayBGMusic:[,,,1,,,,,[r.ConferenceError],,],setPlayBGMusicVolumn:[,,,1,,,[[3]],,[r.ConferenceError],,],getPlayBGMusicVolumn:[,,,1,,[3],,,[r.ConferenceError],,],voiceHowling:[,,,1,,,[[1]],,,,],voiceNoise:[,,,1,,,[[1]],,,,],remoteAudioSet:[,,,1,,,[[2],[o.remoteAudio]],,[r.ConferenceError],,],getRemoteAudioInf:[,,,1,,[o.remoteAudioInf],[[2]],,[r.ConferenceError],,],setMediaAudioState:[,,,1,,,[[7]],,,,],batchSubscribeAudio:[,,,1,,,[[7]],,[r.ConferenceError],,],setVoiceChange:[,,,1,,,[[2],[3]],,[r.ConferenceError],,]}),i.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},1798:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=t("Common/Exception").Common,s=r.require(e,["Control/Member","Control/Contact","Control/PublicTypes","Control/Notice","Control/ConferenceV4"]).Conference,a=n.Slice;s.LoginResponse=a.defineStruct((function(e,t,i,n,r,o,a,c,l,d,u,h,f,p,_,C,g,m,R,S,I,y,v){this.termId=void 0!==e?e:0,this.option=void 0!==t?t:0,this.myDetail=void 0!==i?i:new s.Contact,this.modules=void 0!==n?n:null,this.activeMembers=void 0!==r?r:null,this.ServerUTCTime=void 0!==o?o:0,this.bRoomLocked=void 0!==a&&a,this.confInfo=void 0!==c?c:null,this.isBegan=void 0!==l&&l,this.countdown=void 0!==d?d:0,this.fileServers=void 0!==u?u:null,this.vqs=void 0!==h?h:null,this.windowMode=void 0!==f?f:s.WINDOW_MODE.VMANAGER_LOCK,this.mainVideoTermID=void 0!==p?p:0,this.vlo=void 0!==_?_:s.VIDEOLAYOUTMODE.VLO_1v1_M,this.bAllowWall=void 0!==C&&C,this.curMainTab=void 0!==g?g:new s.TabID,this.curSubTab=void 0!==m?m:new s.TabID,this.bFull=void 0!==R&&R,this.sm=void 0!==S?S:s.SYNCMODE.SYNC_FORCE,this.lastTabValue=void 0!==I?I:0,this.lastElemValue=void 0!==y?y:0,this.wbDescibes=void 0!==v?v:null}),!1,(function(e){e.writeShort(this.termId),e.writeInt(this.option),s.Contact.write(e,this.myDetail),s.ModuleDictHelper.write(e,this.modules),s.MemberSeqHelper.write(e,this.activeMembers),e.writeInt(this.ServerUTCTime),e.writeBool(this.bRoomLocked),s.StringStringMapHelper.write(e,this.confInfo),e.writeBool(this.isBegan),e.writeInt(this.countdown),s.FileServerSeqHelper.write(e,this.fileServers),s.VideoQualitySeqHelper.write(e,this.vqs),s.WINDOW_MODE.__write(e,this.windowMode),e.writeShort(this.mainVideoTermID),s.VIDEOLAYOUTMODE.__write(e,this.vlo),e.writeBool(this.bAllowWall),s.TabID.write(e,this.curMainTab),s.TabID.write(e,this.curSubTab),e.writeBool(this.bFull),s.SYNCMODE.__write(e,this.sm),e.writeShort(this.lastTabValue),e.writeShort(this.lastElemValue),s.WhiteBoardDescribeSeqHelper.write(e,this.wbDescibes)}),(function(e){this.termId=e.readShort(),this.option=e.readInt(),this.myDetail=s.Contact.read(e,this.myDetail),this.modules=s.ModuleDictHelper.read(e),this.activeMembers=s.MemberSeqHelper.read(e),this.ServerUTCTime=e.readInt(),this.bRoomLocked=e.readBool(),this.confInfo=s.StringStringMapHelper.read(e),this.isBegan=e.readBool(),this.countdown=e.readInt(),this.fileServers=s.FileServerSeqHelper.read(e),this.vqs=s.VideoQualitySeqHelper.read(e),this.windowMode=s.WINDOW_MODE.__read(e),this.mainVideoTermID=e.readShort(),this.vlo=s.VIDEOLAYOUTMODE.__read(e),this.bAllowWall=e.readBool(),this.curMainTab=s.TabID.read(e,this.curMainTab),this.curSubTab=s.TabID.read(e,this.curSubTab),this.bFull=e.readBool(),this.sm=s.SYNCMODE.__read(e),this.lastTabValue=e.readShort(),this.lastElemValue=e.readShort(),this.wbDescibes=s.WhiteBoardDescribeSeqHelper.read(e)}),50,!1),s.ConferenceRoom=a.defineObject(void 0,n.Object,[s.ConferenceSessionV4],0,["::Conference::ConferenceRoom","::Conference::ConferenceSessionV4","::Ice::Object"],-1,void 0,void 0,!1),s.ConferenceRoomPrx=a.defineProxy(n.ObjectPrx,s.ConferenceRoom.ice_staticId,[s.ConferenceSessionV4Prx]),a.defineOperations(s.ConferenceRoom,s.ConferenceRoomPrx,{login:[,,,1,,[s.LoginResponse],[[s.LoginRequest]],,[o.ConferenceError],,]}),s.SSLoginRequest=a.defineStruct((function(e,t,i,n,r,o,s,a){this.confKey=void 0!==e?e:"",this.memberId=void 0!==t?t:0,this.memberType=void 0!==i?i:0,this.phoneNum=void 0!==n?n:"",this.callbacks=void 0!==r?r:null,this.accessNo=void 0!==o?o:0,this.PIN=void 0!==s?s:"",this.sessionId=void 0!==a?a:""}),!1,(function(e){e.writeString(this.confKey),e.writeInt(this.memberId),e.writeByte(this.memberType),e.writeString(this.phoneNum),s.ModuleDictHelper.write(e,this.callbacks),e.writeInt(this.accessNo),e.writeString(this.PIN),e.writeString(this.sessionId)}),(function(e){this.confKey=e.readString(),this.memberId=e.readInt(),this.memberType=e.readByte(),this.phoneNum=e.readString(),this.callbacks=s.ModuleDictHelper.read(e),this.accessNo=e.readInt(),this.PIN=e.readString(),this.sessionId=e.readString()}),14,!1),s.SSLoginResponse=a.defineStruct((function(e,t,i,n,r,o,a,c){this.termId=void 0!==e?e:0,this.modules=void 0!==t?t:null,this.actor=void 0!==i?i:0,this.needPIN=void 0!==n&&n,this.PINLen=void 0!==r?r:0,this.currentTermNum=void 0!==o?o:0,this.isBegan=void 0!==a&&a,this.audioStatus=void 0!==c?c:s.ASTATUS.AUNKNOWN}),!1,(function(e){e.writeShort(this.termId),s.ModuleDictHelper.write(e,this.modules),e.writeByte(this.actor),e.writeBool(this.needPIN),e.writeByte(this.PINLen),e.writeInt(this.currentTermNum),e.writeBool(this.isBegan),s.ASTATUS.__write(e,this.audioStatus)}),(function(e){this.termId=e.readShort(),this.modules=s.ModuleDictHelper.read(e),this.actor=e.readByte(),this.needPIN=e.readBool(),this.PINLen=e.readByte(),this.currentTermNum=e.readInt(),this.isBegan=e.readBool(),this.audioStatus=s.ASTATUS.__read(e)}),12,!1),Object.defineProperty(s,"PHASE_ALERTING",{value:0}),Object.defineProperty(s,"PHASE_CONNECT",{value:1}),Object.defineProperty(s,"PHASE_END",{value:2}),Object.defineProperty(s,"END_REASON_NORMAL",{value:0}),Object.defineProperty(s,"END_REASON_NO_ANSWER",{value:1}),Object.defineProperty(s,"END_REASON_REJECT",{value:2}),Object.defineProperty(s,"END_REASON_CONNECT_ERR",{value:3}),Object.defineProperty(s,"END_REASON_USER_BUSY",{value:4}),Object.defineProperty(s,"END_REASON_BALANCE_LESS",{value:5}),s.SoftSwitchUser=a.defineObject(void 0,n.Object,void 0,0,["::Conference::SoftSwitchUser","::Ice::Object"],-1,void 0,void 0,!1),s.SoftSwitchUserPrx=a.defineProxy(n.ObjectPrx,s.SoftSwitchUser.ice_staticId,void 0),a.defineOperations(s.SoftSwitchUser,s.SoftSwitchUserPrx,{login:[,,,1,,[s.SSLoginResponse],[[s.SSLoginRequest]],,[o.ConferenceError],,],callProgress:[,,,1,,,[[3],[3],[7]],,,,]}),s.AAAReport=a.defineObject(void 0,n.Object,void 0,0,["::Conference::AAAReport","::Ice::Object"],-1,void 0,void 0,!1),s.AAAReportPrx=a.defineProxy(n.ObjectPrx,s.AAAReport.ice_staticId,void 0),a.defineOperations(s.AAAReport,s.AAAReportPrx,{callBalanceLess:[,,,1,,,[[7],[7]],,[o.ConferenceError],,]}),a.defineDictionary(s,"IntMemberMap","IntMemberMapHelper","Ice.IntHelper","Conference.Member",!1,void 0,void 0,n.HashMap.compareEquals),s.AllMembersInfo=a.defineStruct((function(e,t){this.sn=void 0!==e?e:0,this.memberMap=void 0!==t?t:null}),!1,(function(e){e.writeLong(this.sn),s.IntMemberMapHelper.write(e,this.memberMap)}),(function(e){this.sn=e.readLong(),this.memberMap=s.IntMemberMapHelper.read(e)}),9,!1),s.ConfDataCenter=a.defineObject(void 0,n.Object,void 0,0,["::Conference::ConfDataCenter","::Ice::Object"],-1,void 0,void 0,!1),s.ConfDataCenterPrx=a.defineProxy(n.ObjectPrx,s.ConfDataCenter.ice_staticId,void 0),a.defineOperations(s.ConfDataCenter,s.ConfDataCenterPrx,{getActiveMembers:[,,,1,,[s.AllMembersInfo],[[7]],,[o.ConferenceError],,]}),s.WebAdmin=a.defineObject(void 0,n.Object,void 0,0,["::Conference::WebAdmin","::Ice::Object"],-1,void 0,void 0,!1),s.WebAdminPrx=a.defineProxy(n.ObjectPrx,s.WebAdmin.ice_staticId,void 0),a.defineOperations(s.WebAdmin,s.WebAdminPrx,{refresInvitees:[,,,1,,,,,[o.ConferenceError],,],refreshOptions:[,,,1,,,,,[o.ConferenceError],,],getConfStatus:[,,,1,,[7],,,,,],callInvite:[,,,1,,,[[7],[7],[1]],,[o.ConferenceError],,],getLiveStream:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],requestThirdPartyLiveStreamUrl:[,,,1,,[7],[[3]],,,,],notifyLiveStreamStatus:[,,,1,,,[[3],[3]],,,,],refreshThirdPublishStatus:[,,,1,,,,,,,],startListLive:[,,,1,,[3],[[7]],,[o.ConferenceError],,],stopListLive:[,,,1,,[3],,,,,],notifyRedStatus:[,,,1,,,[[3],[7],[3],[3],[7],[7],[7],[7]],,,,],notifyThumbUp:[,,,1,,,[[3],[3],[3],[7]],,,,],notifypayback:[,,,1,,,[[3],[7]],,,,],swtichLiveAppElements:[,,,1,,,[[3],[2]],,,,],getActiveMembers:[,,,1,,["Conference.MemberSeqHelper"],,,[o.ConferenceError],,],startRtsp:[,,,1,,[7],[[3],[3],[3],[3]],,[o.ConferenceError],,],stopRtsp:[,,,1,,,,,[o.ConferenceError],,],getRtspInfo:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],updateRtspContent:[,,,1,,,[[3],[3]],,[o.ConferenceError],,],startNoticeMsg:[,,,1,,,[[s.NoticeInfo]],,,,],kickout:[,,,1,,,[[7]],,[o.ConferenceError],,],sendMsg:[,,,1,,,[[7],[7]],,[o.ConferenceError],,],sendVoteMsg:[,,,1,,,[[7]],,[o.ConferenceError],,],sendVoteMsg2Host:[,,,1,,,[[7]],,[o.ConferenceError],,]}),a.defineDictionary(s,"MemberRights","MemberRightsHelper","Ice.ShortHelper","Conference.ByteListHelper",!1,void 0,void 0,n.ArrayUtil.equals),s.ChangedRights=a.defineStruct((function(e,t,i){this.termId=void 0!==e?e:0,this.addedRights=void 0!==t?t:null,this.reducedRights=void 0!==i?i:null}),!0,(function(e){e.writeShort(this.termId),s.ByteListHelper.write(e,this.addedRights),s.ByteListHelper.write(e,this.reducedRights)}),(function(e){this.termId=e.readShort(),this.addedRights=s.ByteListHelper.read(e),this.reducedRights=s.ByteListHelper.read(e)}),4,!1),a.defineSequence(s,"ChangedRightsSeqHelper","Conference.ChangedRights",!1),Object.defineProperty(s,"INVITE_PREPARE",{value:0}),Object.defineProperty(s,"PSTN_CALLING",{value:1}),Object.defineProperty(s,"PSTN_RING",{value:2}),Object.defineProperty(s,"PSTN_CONNECTED",{value:3}),Object.defineProperty(s,"PSTN_HUNG",{value:4}),Object.defineProperty(s,"PSTN_NO_ANSWER",{value:5}),Object.defineProperty(s,"PSTN_REJECT",{value:6}),Object.defineProperty(s,"PSTN_CONNECT_ERR",{value:7}),Object.defineProperty(s,"PSTN_BUSY",{value:8}),Object.defineProperty(s,"AAA_ACCOUNT_NOT_EXIST",{value:100}),Object.defineProperty(s,"AAA_NO_PERMIT",{value:101}),Object.defineProperty(s,"AAA_BALANCE_NOT_ENOUGH",{value:102}),Object.defineProperty(s,"INV_SMS_FAILED",{value:2}),Object.defineProperty(s,"INV_SMS_SUCCESS",{value:1}),Object.defineProperty(s,"INV_EMAIL_FAILED",{value:2}),Object.defineProperty(s,"INV_EMAIL_SUCCESS",{value:1}),Object.defineProperty(s,"INV_EMAIL_READED",{value:3}),Object.defineProperty(s,"WDT_1V1SUBMT_MONITOR",{value:0}),Object.defineProperty(s,"WDT_1v1SUBMT_CHAT",{value:1}),s.InvitedMember=a.defineStruct((function(e,t,i){this.member=void 0!==e?e:new s.Contact,this.pstnNotice=void 0!==t&&t,this.state=void 0!==i?i:0}),!0,(function(e){s.Contact.write(e,this.member),e.writeBool(this.pstnNotice),e.writeInt(this.state)}),(function(e){this.member=s.Contact.read(e,this.member),this.pstnNotice=e.readBool(),this.state=e.readInt()}),14,!1),a.defineSequence(s,"InvitedMembersHelper","Conference.InvitedMember",!1),s.INVITE_TYPE=a.defineEnum([["TP_CALL",0],["TP_SMS",1],["TP_EMAIL",2]]),a.defineDictionary(s,"InvitedMembersDict","InvitedMembersDictHelper","Conference.INVITE_TYPE.__helper","Conference.InvitedMembersHelper",!1,void 0,void 0,n.ArrayUtil.equals),a.defineDictionary(s,"HistoryMembers","HistoryMembersHelper","Ice.ShortHelper","Conference.Member",!1,void 0,void 0,n.HashMap.compareEquals),a.defineDictionary(s,"HistoryMemberNames","HistoryMemberNamesHelper","Ice.ShortHelper","Ice.StringHelper",!1,void 0,void 0),a.defineDictionary(s,"StatusDict","StatusDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),a.defineDictionary(s,"BroadCastDict","BroadCastDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Object.defineProperty(s,"LD_MEMBER_LOCAL",{value:1}),Object.defineProperty(s,"LD_MEMBER_VIEWER",{value:2}),Object.defineProperty(s,"LD_MEMBER_ALL",{value:3}),s.LDPrize=a.defineStruct((function(e,t){this.prizeName=void 0!==e?e:"",this.prizeCnt=void 0!==t?t:0}),!0,(function(e){e.writeString(this.prizeName),e.writeInt(this.prizeCnt)}),(function(e){this.prizeName=e.readString(),this.prizeCnt=e.readInt()}),5,!1),s.LuckyDrawCfg=a.defineStruct((function(e,t,i,n){this.memberType=void 0!==e?e:0,this.cdTime=void 0!==t?t:0,this.isAutoDraw=void 0!==i&&i,this.prizes=void 0!==n?n:new s.LDPrize}),!0,(function(e){e.writeInt(this.memberType),e.writeInt(this.cdTime),e.writeBool(this.isAutoDraw),s.LDPrize.write(e,this.prizes)}),(function(e){this.memberType=e.readInt(),this.cdTime=e.readInt(),this.isAutoDraw=e.readBool(),this.prizes=s.LDPrize.read(e,this.prizes)}),14,!1),s.LuckyDrawMember=a.defineStruct((function(e,t,i){this.name=void 0!==e?e:"",this.contact=void 0!==t?t:"",this.memberType=void 0!==i?i:0}),!0,(function(e){e.writeString(this.name),e.writeString(this.contact),e.writeInt(this.memberType)}),(function(e){this.name=e.readString(),this.contact=e.readString(),this.memberType=e.readInt()}),6,!1),a.defineSequence(s,"LuckyDrawMembersHelper","Conference.LuckyDrawMember",!1),s.LDMembersCNT=a.defineStruct((function(e,t){this.memberLocalCnt=void 0!==e?e:0,this.memberViewerCnt=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.memberLocalCnt),e.writeInt(this.memberViewerCnt)}),(function(e){this.memberLocalCnt=e.readInt(),this.memberViewerCnt=e.readInt()}),8,!0),s.LuckyResult=a.defineStruct((function(e,t,i){this.prize=void 0!==e?e:new s.LDPrize,this.annouceTime=void 0!==t?t:0,this.res=void 0!==i?i:null}),!0,(function(e){s.LDPrize.write(e,this.prize),e.writeInt(this.annouceTime),s.LuckyDrawMembersHelper.write(e,this.res)}),(function(e){this.prize=s.LDPrize.read(e,this.prize),this.annouceTime=e.readInt(),this.res=s.LuckyDrawMembersHelper.read(e)}),10,!1),s.VoteState=a.defineStruct((function(e,t,i,n,r){this.id=void 0!==e?e:"",this.voteOwner=void 0!==t?t:0,this.state=void 0!==i?i:0,this.voteInfo=void 0!==n?n:"",this.memberVotes=void 0!==r?r:null}),!1,(function(e){e.writeString(this.id),e.writeShort(this.voteOwner),e.writeInt(this.state),e.writeString(this.voteInfo),s.StringStringMapHelper.write(e,this.memberVotes)}),(function(e){this.id=e.readString(),this.voteOwner=e.readShort(),this.state=e.readInt(),this.voteInfo=e.readString(),this.memberVotes=s.StringStringMapHelper.read(e)}),9,!1),s.meetingAttr=a.defineStruct((function(e,t,i){this.value=void 0!==e?e:"",this.lastModifyUserID=void 0!==t?t:"",this.lastModifyTs=void 0!==i?i:0}),!0,(function(e){e.writeString(this.value),e.writeString(this.lastModifyUserID),e.writeInt(this.lastModifyTs)}),(function(e){this.value=e.readString(),this.lastModifyUserID=e.readString(),this.lastModifyTs=e.readInt()}),6,!1),a.defineDictionary(s,"MeetingAttrsMap","MeetingAttrsMapHelper","Ice.StringHelper","Conference.meetingAttr",!1,void 0,void 0,n.HashMap.compareEquals),a.defineDictionary(s,"UserAttrsMap","UserAttrsMapHelper","Ice.StringHelper","Conference.MeetingAttrsMapHelper",!1,void 0,void 0,n.HashMap.compareEquals),a.defineSequence(s,"stringSeqHelper","Ice.StringHelper",!1),s.ConferenceSession=a.defineObject(void 0,n.Object,void 0,0,["::Conference::ConferenceSession","::Ice::Object"],-1,void 0,void 0,!1),s.ConferenceSessionPrx=a.defineProxy(n.ObjectPrx,s.ConferenceSession.ice_staticId,void 0),a.defineOperations(s.ConferenceSession,s.ConferenceSessionPrx,{keepAlive:[,,,1,,,[["Conference.StatusDictHelper"]],,[o.ConferenceError],,],exit:[,,,1,,,[[7]],,,,],setAppStatus:[,,,1,,,[[1]],,[o.ConferenceError],,],changeNickname:[,,,1,,[7],[[2],[7]],,[o.ConferenceError],,],getActiveMembers:[,,,1,,["Conference.MemberSeqHelper"],,,[o.ConferenceError],,],getContacts:[,,,1,,["Conference.ContactTreeHelper"],,,[o.ConferenceError],,],applyDemoActor:[,,,1,,,,,[o.ConferenceError],,],applyAssistantActor:[,,,1,,,,,[o.ConferenceError],,],getOption:[,,,1,,[3],,,[o.ConferenceError],,],getMyDetail:[,,,1,,[s.Contact],,,[o.ConferenceError],,],getInfo:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],setAgenda:[,,,1,,,[[7]],,[o.ConferenceError],,],setSubject:[,,,1,,,[[7]],,[o.ConferenceError],,],getPSTNNumber:[,,,1,,[7],,,[o.ConferenceError],,],setPSTNNumber:[,,,1,,,[[7],[1]],,[o.ConferenceError],,],generatePIN:[,,,1,,[7],,,,,],cancelPIN:[,,,1,,,,,,,],changeMemberRights:[,,,1,,,[["Conference.ChangedRightsSeqHelper"]],,[o.ConferenceError],,],getAllMemberRights:[,,,1,,["Conference.MemberRightsHelper"],,,[o.ConferenceError],,],changeOption:[,,,1,,,[[3]],,[o.ConferenceError],,],setDemoActor:[,,,1,,,[[2]],,[o.ConferenceError],,],setHostActor:[,,,1,,,[[2],[7]],,[o.ConferenceError],,],setPSTNHostActor:[,,,1,,,[[s.ContactIdType]],,[o.ConferenceError],,],getPSTNHostActor:[,,,1,,[s.ContactIdType],,,[o.ConferenceError],,],allowDemoActor:[,,,1,,,[[2],[1]],,[o.ConferenceError],,],setAssistantActor:[,,,1,,,[[2],[1]],,[o.ConferenceError],,],getInviteMembers:[,,,1,,["Conference.InvitedMembersDictHelper"],,,[o.ConferenceError],,],getSelfInviteInfo:[,,,1,,[s.InvitedMember],,,[o.ConferenceError],,],addPSTNInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"],[1]],,[o.ConferenceError],,],modifyPSTNInvitee:[,,,1,,,[[s.INVITE_TYPE.__helper],[s.Contact]],,,,],smsInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"]],,[o.ConferenceError],,],callInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"],[1]],,[o.ConferenceError],,],emailInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"]],,[o.ConferenceError],,],removeInvitee:[,,,1,,,[[s.INVITE_TYPE.__helper],[s.Contact]],,[o.ConferenceError],,],cancelCall:[,,,1,,,[[s.ContactIdType]],,,,],callCustomerService:[,,,1,,,,,[o.ConferenceError],,],sendFeedback:[,,,1,,,[[7],[7]],,[o.ConferenceError],,],kickout:[,,,1,,,[[2]],,[o.ConferenceError],,],lockRoom:[,,,1,,,[[1]],,[o.ConferenceError],,],beginConference:[,,,1,,[s.ContactIdType],[[s.Contact]],,[o.ConferenceError],,],endConference:[,,,1,,,,,[o.ConferenceError],,],toggleRoomLock:[,,,1,,,,,[o.ConferenceError],,],broadcastMemberCount:[,,,1,,,,,[o.ConferenceError],,],getMemberCount:[,,,1,,[3],,,[o.ConferenceError],,],getBalance:[,,,1,,,,,[o.ConferenceError],,],cancelCountdown:[,,,1,,,,,[o.ConferenceError],,],getHistoryMembers:[,,,1,,["Conference.HistoryMembersHelper"],[["Ice.ShortSeqHelper"]],,[o.ConferenceError],,],getHistoryMemberNames:[,,,1,,["Conference.HistoryMemberNamesHelper"],,,[o.ConferenceError],,],cancelAutoEnd:[,,,1,,,,,[o.ConferenceError],,],netDetectResults:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],getUserStatus:[,,,1,,["Conference.StringStringMapHelper"],[[2],[3]],,[o.ConferenceError],,],start1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],stop1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],setWDT1v1SubMeetingMode:[,,,1,,,[[3]],,,,],reportIVRStatus:[,,,1,,,[[1]],,,,],startSvrBroadcast:[,,,1,,,[[7]],,[o.ConferenceError],,],startBroadCast:[,,,1,,,,,[o.ConferenceError],,],stopBroadCast:[,,,1,,,,,[o.ConferenceError],,],getBroadCastCfg:[,,,1,,[7],,,[o.ConferenceError],,],getBroadCastUrl:[,,,1,,["Conference.BroadCastDictHelper"],,,,,],enableBroadCastPlayback:[,,,1,,,,,[o.ConferenceError],,],disableBroadCastPlayback:[,,,1,,,[[3]],,[o.ConferenceError],,],setLuckyDrawCfg:[,,,1,,,[[s.LuckyDrawCfg]],,[o.ConferenceError],,],joinLuckyDrawMembers:[,,,1,,,[["Conference.LuckyDrawMembersHelper"],[3]],,[o.ConferenceError],,],clearLuckyDrawMembers:[,,,1,,,[[3]],,[o.ConferenceError],,],queryLuckyDrawMembers:[,,,1,,["Conference.LuckyDrawMembersHelper"],[[3],[2],[3]],,,,],announceLuckyDrawResult:[,,,1,,,,,[o.ConferenceError],,],getLuckyDrawCfg:[,,,1,,[s.LuckyDrawCfg],,,[o.ConferenceError],,],getLuckyDrawMembersStatus:[,,,1,,[s.LDMembersCNT],,,[o.ConferenceError],,],startSvrRecord:[,,,1,,,[[7]],,[o.ConferenceError],,],updateSvrRecCfg:[,,,1,,,[[7]],,[o.ConferenceError],,],stopSvrRecord:[,,,1,,,,,[o.ConferenceError],,],setSvrRecordState:[,,,1,,,[[s.REC_STATE.__helper],[3]],,[o.ConferenceError],,],setSvrRecordFileState:[,,,1,,,[[7]],,,,],setAppUILocked:[,,,1,,,[[3]],,[o.ConferenceError],,],setMcuPrivTaskState:[,,,1,,,[[3]],,[o.ConferenceError],,],beginVote:[,,,1,,,[[7]],,[o.ConferenceError],,],endVote:[,,,1,,,,,[o.ConferenceError],,],publishVoteResult:[,,,1,,,[[7]],,[o.ConferenceError],,],commitVote:[,,,1,,,[[7]],,[o.ConferenceError],,],getVoteState:[,,,1,,[s.VoteState],,,[o.ConferenceError],,],terminalMsg:[,,,1,,,[[7],[7],[3],[1]],,,,],updateSCEP:[,,,1,,,[[7]],,,,],updateSDKToken:[,,,1,,[3],[[7]],,,,],getMeetingAllAttrs:[,,,1,,["Conference.MeetingAttrsMapHelper"],,,[o.ConferenceError],,],getMeetingAttrs:[,,,1,,["Conference.MeetingAttrsMapHelper"],[["Conference.stringSeqHelper"]],,[o.ConferenceError],,],setMeetingAttrs:[,,,1,,,[["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],addOrUpdateMeetingAttrs:[,,,1,,,[["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],delMeetingAttrs:[,,,1,,,[["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],clearMeetingAttrs:[,,,1,,,[[7]],,[o.ConferenceError],,],getUserAttrs:[,,,1,,["Conference.UserAttrsMapHelper"],[["Conference.stringSeqHelper"]],,[o.ConferenceError],,],getUserAttrsWithKey:[,,,1,,["Conference.UserAttrsMapHelper"],[["Conference.stringSeqHelper"],["Conference.stringSeqHelper"]],,[o.ConferenceError],,],setUserAttrs:[,,,1,,,[[7],["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],addOrUpdateUserAttrs:[,,,1,,,[[7],["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],delUserAttrs:[,,,1,,,[[7],["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],clearAllUserAttrs:[,,,1,,,[[7]],,[o.ConferenceError],,],clearUserAttrs:[,,,1,,,[["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],startShare:[,,,1,,,[[7]],,[o.ConferenceError],,],stopShare:[,,,1,,,[[7]],,[o.ConferenceError],,],getWaitingMembers:[,,,1,,["Conference.WaitingMemberSeqHelper"],[[7]],,[o.ConferenceError],,],kickoutFromWaitRoom:[,,,1,,,[[7]],,[o.ConferenceError],,],acceptFromWaitRoom:[,,,1,,,[[7]],,[o.ConferenceError],,],gobackToWaitRoom:[,,,1,,,[[2]],,[o.ConferenceError],,],startCloudRecord:[,,,1,,,[[7],[7]],,,,],stopCloudRecord:[,,,1,,,[[7]],,,,],updateCloudRecord:[,,,1,,,[[7],[7]],,,,],setClodudRecordState:[,,,1,,,[[s.REC_STATE.__helper],[7]],,,,],setClodudRecordFileState:[,,,1,,,[[7]],,,,]}),Object.defineProperty(s,"SVR_NOTIFY_BALANCE_LESS",{value:1}),s.ConferenceCallback=a.defineObject(void 0,n.Object,void 0,0,["::Conference::ConferenceCallback","::Ice::Object"],-1,void 0,void 0,!1),s.ConferenceCallbackPrx=a.defineProxy(n.ObjectPrx,s.ConferenceCallback.ice_staticId,void 0),a.defineOperations(s.ConferenceCallback,s.ConferenceCallbackPrx,{entered:[,,,,,,[[s.Member]],,,,],left:[,,,,,,[[2],[2],[7],[7]],,,,],actorChanged:[,,,,,,[[2],[2],[0]],,,,],nicknameChanged:[,,,,,,[[2],[2],[7]],,,,],optionChanged:[,,,,,,[[3]],,,,],rightChanged:[,,,,,,[[s.ChangedRights]],,,,],roomStateChanged:[,,,,,,[[1]],,,,],inviteStateChanged:[,,,,,,[[s.INVITE_TYPE.__helper],[s.InvitedMember]],,,,],conferenceBegan:[,,,,,,,,,,],conferenceEnded:[,,,,,,[[s.Contact],[7]],,,,],memberCount:[,,,,,,[[3]],,,,],confirmAutoEnd:[,,,,,,[[3]],,,,],autoEndCancelled:[,,,,,,,,,,],roomKnocked:[,,,,,,[[s.Contact],[7]],,,,],agendaUpdated:[,,,,,,[[7]],,,,],subjectUpdated:[,,,,,,[[7]],,,,],notifyApplyDemo:[,,,,,,[[2]],,,,],notifyApplyRejected:[,,,,,,[[2],[2]],,,,],serverNotify:[,,,,,,[[3]],,,,],serverNotifyMsg:[,,,,,,[[7]],,,,],updateAppStatus:[,,,,,,[["Ice.ShortSeqHelper"],["Ice.ShortSeqHelper"]],,,,],notifyAssistantChanged:[,,,,,,[[2],[2],[1]],,,,],notifyNetDetectResults:[,,,,,,[[2],[3],[1]],,,,],notifyReportStatus:[,,,1,,["Conference.StringStringMapHelper"],[[2],[3]],,,,],exeCmd:[,,,1,,[7],[[7]],,,,],notifyStart1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],notifyStop1v1SubMeeting:[,,,,,,[[2]],,,,],notifyStart1v1SubMeetingRslt:[,,,,,,[[2],[1]],,,,],setWDT1v1SubMeetingMode:[,,,,,,[[2],[3]],,,,],notifyIVRStatus:[,,,,,,[[2],[1]],,,,],notifyStartSvrBroadcast:[,,,,,,[[2],[7]],,,,],notifyStartBroadCast:[,,,,,,[[2]],,,,],notifyStopBroadCast:[,,,,,,[[2]],,,,],notifyWebViewerNum:[,,,,,,[[3]],,,,],notifyBroadCastStartPush:[,,,,,,[["Conference.BroadCastDictHelper"]],,,,],notifyBroadCastStopPush:[,,,,,,,,,,],notifyBroadCastPlayback:[,,,,,,[[7]],,,,],notifyBroadCastPlaybackStop:[,,,,,,[[7]],,,,],notifypayback:[,,,,,,,,,,],notifySwtichLiveAppElements:[,,,,,,[[3],[2]],,,,],notifyThumbUp:[,,,,,,[[3],[3],[7]],,,,],notifyLuckyDrawCfg:[,,,,,,[[s.LuckyDrawCfg]],,,,],notifyLDMembersStatus:[,,,,,,[[s.LDMembersCNT]],,,,],notifyLuckyDrawResult:[,,,,,,[[s.LuckyResult]],,,,],notifySvrRecordStateChanged:[,,,,,,[[2],[s.REC_STATE.__helper],[3]],,,,],notifySvrRecordCfgChanged:[,,,,,,[[2],[7]],,,,],notifySvrRecordFileState:[,,,,,,[[7]],,,,],notifySvrBroadcastCfgChanged:[,,,,,,[[2],[7]],,,,],notifyAppUILocked:[,,,,,,[[3]],,,,],notifyBeginVote:[,,,,,,[[2],[7],[7]],,,,],notifyEndVote:[,,,,,,[[2]],,,,],notifyPublishVoteResult:[,,,,,,[[2],[7]],,,,],notifyCommitVote:[,,,,,,[[2],[7]],,,,],notifyTerminalMsg:[,,,,,,[[7],[7],[3],[3]],,,,],notifySCEPChanged:[,,,,,,[[2],[7]],,,,],notifyMeetingAttrsChanged:[,,,,,,[["Conference.MeetingAttrsMapHelper"],["Conference.MeetingAttrsMapHelper"],["Conference.stringSeqHelper"]],,,,],notifyUserAttrsChanged:[,,,,,,[[7],["Conference.MeetingAttrsMapHelper"],["Conference.MeetingAttrsMapHelper"],["Conference.stringSeqHelper"]],,,,],notifyShareStateChanged:[,,,,,,[[7]],,,,],notifyEnterWaitingRoom:[,,,,,,[[s.WaitingMember]],,,,],notifyLeftWaitingRoom:[,,,,,,[[7],[7]],,,,],notifyJoinSubMeeting:[,,,,,,[[2],[7]],,,,],notifyClodudRecordStateChanged:[,,,,,,[[2],[7],[s.REC_STATE.__helper],[7]],,,,],notifyClodudRecordCfgChanged:[,,,,,,[[2],[7],[7]],,,,],notifyClodudRecordFileState:[,,,,,,[[7],[7]],,,,]}),i.Conference=s}("undefined"!=typeof global&&void 0!==global.process?e:void 0,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},8009:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=n.Slice;o.ConferenceSessionV4=s.defineObject(void 0,n.Object,void 0,0,["::Conference::ConferenceSessionV4","::Ice::Object"],-1,void 0,void 0,!1),o.ConferenceSessionV4Prx=s.defineProxy(n.ObjectPrx,o.ConferenceSessionV4.ice_staticId,void 0),s.defineOperations(o.ConferenceSessionV4,o.ConferenceSessionV4Prx,{sendCmd:[,,,1,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[r.ConferenceError],,]}),i.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},8112:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=n.Slice,s=r.module("Conference");Object.defineProperty(s,"CT_USER",{value:1}),Object.defineProperty(s,"CT_CONTACT",{value:2}),Object.defineProperty(s,"CT_TMP",{value:3}),Object.defineProperty(s,"CT_CLIENT",{value:6}),Object.defineProperty(s,"CT_VIRTUAL",{value:7}),s.Contact=o.defineStruct((function(e,t,i,n,r,o){this.id=void 0!==e?e:0,this.type=void 0!==t?t:0,this.nickname=void 0!==i?i:"",this.email=void 0!==n?n:"",this.mobile=void 0!==r?r:"",this.confPhone=void 0!==o?o:""}),!0,(function(e){e.writeInt(this.id),e.writeByte(this.type),e.writeString(this.nickname),e.writeString(this.email),e.writeString(this.mobile),e.writeString(this.confPhone)}),(function(e){this.id=e.readInt(),this.type=e.readByte(),this.nickname=e.readString(),this.email=e.readString(),this.mobile=e.readString(),this.confPhone=e.readString()}),9,!1),s.ContactIdType=o.defineStruct((function(e,t){this.id=void 0!==e?e:0,this.type=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.id),e.writeByte(this.type)}),(function(e){this.id=e.readInt(),this.type=e.readByte()}),5,!0),o.defineSequence(s,"ContactSeqHelper","Conference.Contact",!1),o.defineSequence(s,"ContactIdSeqHelper","Conference.ContactIdType",!0),o.defineDictionary(s,"ContactTree","ContactTreeHelper","Ice.StringHelper","Conference.ContactSeqHelper",!1,void 0,void 0,n.ArrayUtil.equals),i.Conference=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},2190:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("Common/Exception").Common),o=t("Control/Conference").Conference,s=n.Slice;o.IMFont=s.defineStruct((function(e,t){this.color=void 0!==e?e:0,this.size=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.color),e.writeByte(this.size)}),(function(e){this.color=e.readInt(),this.size=e.readByte()}),5,!0),o.InIMMsgInfo=s.defineStruct((function(e,t,i,n,r){this.targetTermId=void 0!==e?e:0,this.targetNickname=void 0!==t?t:"",this.font=void 0!==i?i:new o.IMFont,this.msg=void 0!==n?n:"",this.sendTime=void 0!==r?r:0}),!0,(function(e){e.writeShort(this.targetTermId),e.writeString(this.targetNickname),o.IMFont.write(e,this.font),e.writeString(this.msg),e.writeInt(this.sendTime)}),(function(e){this.targetTermId=e.readShort(),this.targetNickname=e.readString(),this.font=o.IMFont.read(e,this.font),this.msg=e.readString(),this.sendTime=e.readInt()}),13,!1),o.OutIMMsgInfo=s.defineStruct((function(e,t,i,n){this.index=void 0!==e?e:0,this.srcTermId=void 0!==t?t:0,this.srcNickname=void 0!==i?i:"",this.inMsg=void 0!==n?n:new o.InIMMsgInfo}),!0,(function(e){e.writeInt(this.index),e.writeShort(this.srcTermId),e.writeString(this.srcNickname),o.InIMMsgInfo.write(e,this.inMsg)}),(function(e){this.index=e.readInt(),this.srcTermId=e.readShort(),this.srcNickname=e.readString(),this.inMsg=o.InIMMsgInfo.read(e,this.inMsg)}),20,!1),s.defineSequence(o,"outMsgListHelper","Conference.OutIMMsgInfo",!1),s.defineSequence(o,"termIDListHelper","Ice.ShortHelper",!0),o.IMCallback=s.defineObject(void 0,n.Object,void 0,0,["::Conference::IMCallback","::Ice::Object"],-1,void 0,void 0,!1),o.IMCallbackPrx=s.defineProxy(n.ObjectPrx,o.IMCallback.ice_staticId,void 0),s.defineOperations(o.IMCallback,o.IMCallbackPrx,{receiveIMMsg:[,,,,,,[[o.OutIMMsgInfo]],,,,],receiveMultiIMMsg:[,,,,,,[["Conference.outMsgListHelper"]],,,,],notifyIMForbidStatus:[,,,,,,[[2],[2],[1]],,,,],notifyClearIMMsg:[,,,,,,[[2]],,,,],notifyDeleteIMMsg:[,,,,,,[[3]],,,,]}),o.IMSession=s.defineObject(void 0,n.Object,void 0,0,["::Conference::IMSession","::Ice::Object"],-1,void 0,void 0,!1),o.IMSessionPrx=s.defineProxy(n.ObjectPrx,o.IMSession.ice_staticId,void 0),s.defineOperations(o.IMSession,o.IMSessionPrx,{getIMMsgCount:[,,,1,,[3],,,,,],getLastMsg:[,,,1,,["Conference.outMsgListHelper"],[[3]],,[r.ConferenceError],,],getLastNMsg:[,,,1,,["Conference.outMsgListHelper"],[[3],[3]],,[r.ConferenceError],,],sendIMMsg:[,,,1,,,[[o.InIMMsgInfo]],,[r.ConferenceError],,],deleteIMMsg:[,,,1,,,[[3]],,[r.ConferenceError],,],getIMForbidList:[,,,1,,["Conference.termIDListHelper"],,,[r.ConferenceError],,],setIMForbidStatus:[,,,1,,,[[2],[1]],,[r.ConferenceError],,],clearIMMsg:[,,,1,,,,,[r.ConferenceError],,],passIMMsg:[,,,1,,[1],[[3]],,[r.ConferenceError],,]}),i.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},2522:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=t("Common/Exception").Common,s=n.Slice,a=r.module("Conference");a.MEDIA_STATE=s.defineEnum([["MEDIA_START",0],["MEDIA_PAUSE",1],["MEDIA_STOP",2]]),a.MediaInfo=s.defineStruct((function(e,t,i){this.termid=void 0!==e?e:0,this.state=void 0!==t?t:a.MEDIA_STATE.MEDIA_START,this.mediaName=void 0!==i?i:""}),!0,(function(e){e.writeShort(this.termid),a.MEDIA_STATE.__write(e,this.state),e.writeString(this.mediaName)}),(function(e){this.termid=e.readShort(),this.state=a.MEDIA_STATE.__read(e),this.mediaName=e.readString()}),4,!1),a.MediaCallback=s.defineObject(void 0,n.Object,void 0,0,["::Conference::MediaCallback","::Ice::Object"],-1,void 0,void 0,!1),a.MediaCallbackPrx=s.defineProxy(n.ObjectPrx,a.MediaCallback.ice_staticId,void 0),s.defineOperations(a.MediaCallback,a.MediaCallbackPrx,{notifyStartPlayMedia:[,,,,,,[[a.MediaInfo]],,,,],notifyStopPlayMedia:[,,,,,,[[2]],,,,],notifyPausePlayMedia:[,,,,,,[[2],[1]],,,,],notifyMakeIFrame:[,,,,,,,,,,],notifySubscribeMedia:[,,,,,,[[1]],,,,]}),a.MediaCtrl=s.defineObject(void 0,n.Object,void 0,0,["::Conference::MediaCtrl","::Ice::Object"],-1,void 0,void 0,!1),a.MediaCtrlPrx=s.defineProxy(n.ObjectPrx,a.MediaCtrl.ice_staticId,void 0),s.defineOperations(a.MediaCtrl,a.MediaCtrlPrx,{getMediaInfo:[,,,1,,[a.MediaInfo],,,[o.ConferenceError],,],startPlayMedia:[,,,1,,,[[7]],,[o.ConferenceError],,],stopPlayMedia:[,,,1,,,,,[o.ConferenceError],,],pausePlayMedia:[,,,1,,,[[1]],,[o.ConferenceError],,],subscribeMedia:[,,,1,,,[[1]],,[o.ConferenceError],,]}),i.Conference=a}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},493:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=(t("Common/Exception").Common,r.require(e,["Control/PublicTypes","Control/Contact"]).Conference),s=n.Slice;Object.defineProperty(o,"ACNT_ADMIN",{value:0}),Object.defineProperty(o,"ACNT_MEETCREATOR",{value:1}),Object.defineProperty(o,"ACNT_PARTICIPANTS",{value:2}),Object.defineProperty(o,"MINFO_ALLCAMS",{value:"allCams"}),Object.defineProperty(o,"MINFO_OPENEDCAMIDS",{value:"openedCamIDs"}),Object.defineProperty(o,"MINFO_ACNTTYPE",{value:"anctType"}),Object.defineProperty(o,"MINFO_WDTXDTYPE",{value:"WDTXDType"}),Object.defineProperty(o,"WDTXDTYPE_ADMIN",{value:"1"}),Object.defineProperty(o,"WDTXDTYPE_USER",{value:"2"}),Object.defineProperty(o,"MINFO_PSTNIVR",{value:"ivr"}),Object.defineProperty(o,"PSTNIVR_YES",{value:"1"}),Object.defineProperty(o,"MINFO_YDYUSERID",{value:"ydyuserid"}),Object.defineProperty(o,"MINFO_SCEP",{value:"scep"}),Object.defineProperty(o,"MINFO_VOICECHANGETYPE",{value:"voiceChangeType"}),o.Member=s.defineStruct((function(e,t,i,n,r,s,a,c,l,d,u,h){this.termId=void 0!==e?e:0,this.bindId=void 0!==t?t:0,this.termType=void 0!==i?i:0,this.nickname=void 0!==n?n:"",this.actor=void 0!==r?r:0,this.audioStatus=void 0!==s?s:o.ASTATUS.AUNKNOWN,this.videoStatus=void 0!==a?a:o.VSTATUS.VUNKNOWN,this.bEnableVideo=void 0!==c&&c,this.rights=void 0!==l?l:null,this.contactId=void 0!==d?d:new o.ContactIdType,this.phone=void 0!==u?u:"",this.extProperty=void 0!==h?h:null}),!1,(function(e){e.writeShort(this.termId),e.writeShort(this.bindId),e.writeByte(this.termType),e.writeString(this.nickname),e.writeByte(this.actor),o.ASTATUS.__write(e,this.audioStatus),o.VSTATUS.__write(e,this.videoStatus),e.writeBool(this.bEnableVideo),o.ByteListHelper.write(e,this.rights),o.ContactIdType.write(e,this.contactId),e.writeString(this.phone),o.StringStringMapHelper.write(e,this.extProperty)}),(function(e){this.termId=e.readShort(),this.bindId=e.readShort(),this.termType=e.readByte(),this.nickname=e.readString(),this.actor=e.readByte(),this.audioStatus=o.ASTATUS.__read(e),this.videoStatus=o.VSTATUS.__read(e),this.bEnableVideo=e.readBool(),this.rights=o.ByteListHelper.read(e),this.contactId=o.ContactIdType.read(e,this.contactId),this.phone=e.readString(),this.extProperty=o.StringStringMapHelper.read(e)}),18,!1),s.defineSequence(o,"MemberSeqHelper","Conference.Member",!1),o.WaitingMember=s.defineStruct((function(e,t,i){this.pcid=void 0!==e?e:"",this.name=void 0!==t?t:"",this.extProperty=void 0!==i?i:null}),!1,(function(e){e.writeString(this.pcid),e.writeString(this.name),o.StringStringMapHelper.write(e,this.extProperty)}),(function(e){this.pcid=e.readString(),this.name=e.readString(),this.extProperty=o.StringStringMapHelper.read(e)}),3,!1),s.defineSequence(o,"WaitingMemberSeqHelper","Conference.WaitingMember",!1),i.Conference=o}("undefined"!=typeof global&&void 0!==global.process?e:void 0,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},2377:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=t("Common/Exception").Common,s=n.Slice,a=r.module("Conference");Object.defineProperty(a,"SLICE_VER",{value:"1.9"}),Object.defineProperty(a,"ANON_TERMID",{value:0}),Object.defineProperty(a,"ALL_TERMID",{value:32767}),Object.defineProperty(a,"ANON_MEMBER_ID",{value:0}),Object.defineProperty(a,"TERM_PC",{value:1}),Object.defineProperty(a,"TERM_PHONE",{value:2}),Object.defineProperty(a,"NORMAL_AT",{value:0}),Object.defineProperty(a,"DEMO_AT",{value:1}),Object.defineProperty(a,"HOST_AT",{value:2}),Object.defineProperty(a,"PSTN_HOST_AT",{value:4}),Object.defineProperty(a,"ASSISTANT_AT",{value:8}),Object.defineProperty(a,"OPT_VIDEO",{value:1}),Object.defineProperty(a,"OPT_AUTO_MUTE",{value:2}),Object.defineProperty(a,"OPT_AUTO_AUDIO",{value:4}),Object.defineProperty(a,"OPT_PSTN_CALL",{value:8}),Object.defineProperty(a,"OPT_END_WHEN_HOST_EXIT",{value:16}),Object.defineProperty(a,"OPT_ONLY_INVITE_CAN_LOGIN",{value:32}),Object.defineProperty(a,"OPT_ALLOW_PLAY_APPLAUSE",{value:64}),Object.defineProperty(a,"OPT_PLAY_ENTRANCEANDEXITTONE",{value:128}),Object.defineProperty(a,"OPT_ALLOW_MODIFY_NICKNAME",{value:256}),Object.defineProperty(a,"OPT_NOT_SEE_EACH_OTHER",{value:512}),Object.defineProperty(a,"OPT_IM_FORBID_PIC",{value:1024}),Object.defineProperty(a,"OPT_IM_FORBID_URL",{value:2048}),Object.defineProperty(a,"OPT_FORBID_OPEN_CAMERA",{value:4096}),Object.defineProperty(a,"OPT_AUTO_MUTE_HOST",{value:8192}),Object.defineProperty(a,"OPT_REVIEW_CHAT",{value:16384}),Object.defineProperty(a,"OPT_AUTO_OPEN_CAMERA",{value:32768}),Object.defineProperty(a,"OPT_MIC_USE_LOCAL",{value:65536}),Object.defineProperty(a,"OPT_CAMERA_USE_LOCAL",{value:131072}),Object.defineProperty(a,"OPT_FORBID_MARK",{value:262144}),Object.defineProperty(a,"OPT_ALLOW_SHARE",{value:524288}),Object.defineProperty(a,"OPT_SCREENSHARE_WATERMARK",{value:1048576}),Object.defineProperty(a,"OPT_START_WAITINGROOM",{value:2097152}),s.defineSequence(a,"ByteListHelper","Ice.ByteHelper",!0),s.defineDictionary(a,"StringStringMap","StringStringMapHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),a.ASTATUS=s.defineEnum([["AUNKNOWN",0],["ANULL",1],["ACLOSE",2],["AOPEN",3],["AOPENING",4]]),a.WINDOW_MODE=s.defineEnum([["VMANAGER_LOCK",0],["VSPEAKER_TRACK",1],["VPRESENTER_LOCK",2]]),a.VSTATUS=s.defineEnum([["VUNKNOWN",0],["VNULL",1],["VCLOSE",2],["VOPEN",3],["VOPENING",4]]),a.VIDEOLEVEL=s.defineEnum([["VL_HIGH_HD",0],["VL_HIGH_HDL",1],["VL_HIGH_H",2],["VL_HIGH_M",3],["VL_HIGH_L",4],["VL_MID",5],["VL_LOW",6]]),a.VideoSize=s.defineStruct((function(e,t){this.w=void 0!==e?e:0,this.h=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.w),e.writeShort(this.h)}),(function(e){this.w=e.readShort(),this.h=e.readShort()}),4,!0),a.VideoQuality=s.defineStruct((function(e,t,i,n,r,o){this.vl=void 0!==e?e:a.VIDEOLEVEL.VL_HIGH_HD,this.vs=void 0!==t?t:new a.VideoSize,this.isec=void 0!==i?i:0,this.fps=void 0!==n?n:null,this.crf=void 0!==r?r:null,this.cost=void 0!==o?o:""}),!0,(function(e){a.VIDEOLEVEL.__write(e,this.vl),a.VideoSize.write(e,this.vs),e.writeByte(this.isec),a.ByteListHelper.write(e,this.fps),a.ByteListHelper.write(e,this.crf),e.writeString(this.cost)}),(function(e){this.vl=a.VIDEOLEVEL.__read(e),this.vs=a.VideoSize.read(e,this.vs),this.isec=e.readByte(),this.fps=a.ByteListHelper.read(e),this.crf=a.ByteListHelper.read(e),this.cost=e.readString()}),9,!1),a.VIDEOLAYOUTMODE=s.defineEnum([["VLO_1v1_M",0],["VLO_WALL1_M",1],["VLO_WALL2",2],["VLO_WALL4",3],["VLO_WALL5_M",4],["VLO_WALL6_M",5],["VLO_WALL9",6],["VLO_WALL13_M",7],["VLO_WALL16",8],["VLO_WALL25",9]]),Object.defineProperty(a,"MVM_1MAIN",{value:0}),Object.defineProperty(a,"MVM_1v1",{value:1}),Object.defineProperty(a,"MVM_2VIDEO",{value:2}),Object.defineProperty(a,"MVM_4VIDEO",{value:3}),Object.defineProperty(a,"MVM_6VIDEO",{value:4}),Object.defineProperty(a,"VIDEO_SS_1M",{value:0}),Object.defineProperty(a,"VIDEO_SS_5M",{value:1}),Object.defineProperty(a,"VIDEO_SS_13M",{value:2}),Object.defineProperty(a,"VIDEO_SS_2",{value:3}),Object.defineProperty(a,"VIDEO_SS_4",{value:4}),Object.defineProperty(a,"VIDEO_SS_9",{value:5}),Object.defineProperty(a,"VIDEO_SS_16",{value:6}),Object.defineProperty(a,"VIDEO_SS_25",{value:7}),Object.defineProperty(a,"VIDEO_SS_36",{value:8}),Object.defineProperty(a,"VIDEO_SS_NULL",{value:255}),s.defineSequence(a,"VideoQualitySeqHelper","Conference.VideoQuality",!1),a.SYNCMODE=s.defineEnum([["SYNC_FORCE",0],["SYNC_FREE",1]]),a.TabID=s.defineStruct((function(e,t){this.termID=void 0!==e?e:0,this.localID=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.termID),e.writeShort(this.localID)}),(function(e){this.termID=e.readShort(),this.localID=e.readShort()}),4,!0),s.defineSequence(a,"TabIDSeqHelper","Conference.TabID",!0),a.WBBOARD_TYPE=s.defineEnum([["WB_WHITE",0],["WB_DOC",1]]),a.WBBOARD_DOCTYPE=s.defineEnum([["WD_IMG",0],["WD_PPTANIM",1],["WD_PPT",2]]),a.WB_SCALE_TYPE=s.defineEnum([["WB_SCALE_50",0],["WB_SCALE_100",1],["WB_SCALE_150",2],["WB_SCALE_200",3],["WB_SCALE_SADP",4],["WB_SCALE_WIDTH",5]]),a.WB_ROTATE_TYPE=s.defineEnum([["WB_ROTATE_0",0],["WB_ROTATE_90",1],["WB_ROTATE_180",2],["WB_ROTATE_270",3]]),a.WhiteBoardDescribe=s.defineStruct((function(e,t,i,n,r,o,s,c,l,d,u,h,f,p,_,C){this.wID=void 0!==e?e:new a.TabID,this.wType=void 0!==t?t:a.WBBOARD_TYPE.WB_WHITE,this.docType=void 0!==i?i:a.WBBOARD_DOCTYPE.WD_IMG,this.name=void 0!==n?n:"",this.docName=void 0!==r?r:"",this.width=void 0!==o?o:0,this.height=void 0!==s?s:0,this.scaleType=void 0!==c?c:a.WB_SCALE_TYPE.WB_SCALE_50,this.rotation=void 0!==l?l:a.WB_ROTATE_TYPE.WB_ROTATE_0,this.pageCount=void 0!==d?d:0,this.curPage=void 0!==u?u:0,this.animID=void 0!==h?h:0,this.animFrames=void 0!==f?f:0,this.showThum=void 0!==p&&p,this.bAll=void 0!==_&&_,this.allowTerms=void 0!==C?C:null}),!0,(function(e){a.TabID.write(e,this.wID),a.WBBOARD_TYPE.__write(e,this.wType),a.WBBOARD_DOCTYPE.__write(e,this.docType),e.writeString(this.name),e.writeString(this.docName),e.writeInt(this.width),e.writeInt(this.height),a.WB_SCALE_TYPE.__write(e,this.scaleType),a.WB_ROTATE_TYPE.__write(e,this.rotation),e.writeInt(this.pageCount),e.writeInt(this.curPage),e.writeInt(this.animID),e.writeInt(this.animFrames),e.writeBool(this.showThum),e.writeBool(this.bAll),n.ShortSeqHelper.write(e,this.allowTerms)}),(function(e){this.wID=a.TabID.read(e,this.wID),this.wType=a.WBBOARD_TYPE.__read(e),this.docType=a.WBBOARD_DOCTYPE.__read(e),this.name=e.readString(),this.docName=e.readString(),this.width=e.readInt(),this.height=e.readInt(),this.scaleType=a.WB_SCALE_TYPE.__read(e),this.rotation=a.WB_ROTATE_TYPE.__read(e),this.pageCount=e.readInt(),this.curPage=e.readInt(),this.animID=e.readInt(),this.animFrames=e.readInt(),this.showThum=e.readBool(),this.bAll=e.readBool(),this.allowTerms=n.ShortSeqHelper.read(e)}),37,!1),Object.defineProperty(a,"SubMeetType_MainRoom",{value:"main"}),Object.defineProperty(a,"SubMeetType_WaitRoom",{value:"wait"}),a.SubMeetInfo=s.defineStruct((function(e,t,i){this.type=void 0!==e?e:"",this.id=void 0!==t?t:0,this.key=void 0!==i?i:""}),!0,(function(e){e.writeString(this.type),e.writeInt(this.id),e.writeString(this.key)}),(function(e){this.type=e.readString(),this.id=e.readInt(),this.key=e.readString()}),6,!1),s.defineSequence(a,"WhiteBoardDescribeSeqHelper","Conference.WhiteBoardDescribe",!1),a.ConfIdError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::ConfIdError",void 0,void 0,!1,!1),a.AuthError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::AuthError",void 0,void 0,!1,!1),a.ReenterError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::ReenterError",void 0,void 0,!1,!1),a.RoomLockedError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::RoomLockedError",void 0,void 0,!1,!1),a.NicknameError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::NicknameError",void 0,void 0,!1,!1),a.NicknameDuplicatedError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::NicknameDuplicatedError",void 0,void 0,!1,!1),a.NotPermitError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::NotPermitError",void 0,void 0,!1,!1),a.MemberDeactivedError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::MemberDeactivedError",void 0,void 0,!1,!1),a.MemberOverflowError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::MemberOverflowError",void 0,void 0,!1,!1),a.ConfMemberOverflowError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::ConfMemberOverflowError",void 0,void 0,!1,!1),a.BalanceLessError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::BalanceLessError",void 0,void 0,!1,!1),a.KickoutSelfError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::KickoutSelfError",void 0,void 0,!1,!1),a.ConferenceEndError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::ConferenceEndError",void 0,void 0,!1,!1),a.ConferenceBeginError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::ConferenceBeginError",void 0,void 0,!1,!1),a.PINError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::PINError",void 0,void 0,!1,!1),a.FieldDuplicatedError=s.defineUserException((function(e,t,i,n,r){o.ConferenceError.call(this,e,t,r),this.name=void 0!==i?i:"",this.value=void 0!==n?n:""}),o.ConferenceError,"Conference::FieldDuplicatedError",(function(e){e.writeString(this.name),e.writeString(this.value)}),(function(e){this.name=e.readString(),this.value=e.readString()}),!1,!1),a.InviteeNotFoundError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::InviteeNotFoundError",void 0,void 0,!1,!1),a.InviteeDuplicatedError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::InviteeDuplicatedError",void 0,void 0,!1,!1),a.InvalidTermTypeError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::InvalidTermTypeError",void 0,void 0,!1,!1),a.NoPSTNHostError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::NoPSTNHostError",void 0,void 0,!1,!1),a.ConferencePrepareError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::ConferencePrepareError",void 0,void 0,!1,!1),a.ConferenceLoginRetry=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::ConferenceLoginRetry",void 0,void 0,!1,!1),a.ResourceAllocateError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::ResourceAllocateError",void 0,void 0,!1,!1),a.OnlyInviteeCanLogin=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::OnlyInviteeCanLogin",void 0,void 0,!1,!1),a.MemberAlreadyInMeet=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::MemberAlreadyInMeet",void 0,void 0,!1,!1),a.MemberAlreadyInCanTryVisitor=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::MemberAlreadyInCanTryVisitor",void 0,void 0,!1,!1),a.MismatchClientVersion=s.defineUserException((function(e,t,i,n){o.ConferenceError.call(this,e,t,n),this.newVer=void 0!==i?i:""}),o.ConferenceError,"Conference::MismatchClientVersion",(function(e){e.writeString(this.newVer)}),(function(e){this.newVer=e.readString()}),!1,!1),a.PeerHasBeen1v1SubMeeting=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::PeerHasBeen1v1SubMeeting",void 0,void 0,!1,!1),a.LiveStreamNotStart=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::LiveStreamNotStart",void 0,void 0,!1,!1),a.PstnHostCantLoginInWeb=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::PstnHostCantLoginInWeb",void 0,void 0,!1,!1),a.CannotBoradcast=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::CannotBoradcast",void 0,void 0,!1,!1),a.CannotInteractBoradcast=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::CannotInteractBoradcast",void 0,void 0,!1,!1),a.ConfCannotInteractBoradcast=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::ConfCannotInteractBoradcast",void 0,void 0,!1,!1),a.ContainsSensitiveWords=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::ContainsSensitiveWords",void 0,void 0,!1,!1),a.ThirdPartyLiveIsOn=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::ThirdPartyLiveIsOn",void 0,void 0,!1,!1),a.ListLiveIsOn=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::ListLiveIsOn",void 0,void 0,!1,!1),a.ClientLiveIsOn=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::ClientLiveIsOn",void 0,void 0,!1,!1),a.LuckyDrawNotExists=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::LuckyDrawNotExists",void 0,void 0,!1,!1),a.LuckyDrawCfgFails=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::LuckyDrawCfgFails",void 0,void 0,!1,!1),a.JoinLuckyDrawFails=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::JoinLuckyDrawFails",void 0,void 0,!1,!1),a.AnnouceLuckyDrawFails=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::AnnouceLuckyDrawFails",void 0,void 0,!1,!1),a.AnnouceLuckyDrawNoMember=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::AnnouceLuckyDrawNoMember",void 0,void 0,!1,!1),a.SeviceNotEnabled=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::SeviceNotEnabled",void 0,void 0,!1,!1),a.SrvRecordStarted=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::SrvRecordStarted",void 0,void 0,!1,!1),a.NoResourceForMIC=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::NoResourceForMIC",void 0,void 0,!1,!1),a.StartRecordError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::StartRecordError",void 0,void 0,!1,!1),a.PlayBackGroundMusicFail=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::PlayBackGroundMusicFail",void 0,void 0,!1,!1),a.SameTimeStartMediaError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::SameTimeStartMediaError",void 0,void 0,!1,!1),a.lockQuesError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::lockQuesError",void 0,void 0,!1,!1),a.delQuesError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::delQuesError",void 0,void 0,!1,!1),a.quesNotExistError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::quesNotExistError",void 0,void 0,!1,!1),a.modifyQuesTypeError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::modifyQuesTypeError",void 0,void 0,!1,!1),a.AlreadyRollCallError=s.defineUserException((function(e,t,i,n){o.ConferenceError.call(this,e,t,n),this.rollCaller=void 0!==i?i:0}),o.ConferenceError,"Conference::AlreadyRollCallError",(function(e){e.writeShort(this.rollCaller)}),(function(e){this.rollCaller=e.readShort()}),!1,!1),a.AlreadySharedException=s.defineUserException((function(e,t,i,n){o.ConferenceError.call(this,e,t,n),this.sharer=void 0!==i?i:0}),o.ConferenceError,"Conference::AlreadySharedException",(function(e){e.writeShort(this.sharer)}),(function(e){this.sharer=e.readShort()}),!1,!1),a.WBMaxError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::WBMaxError",void 0,void 0,!1,!1),a.WBNotExistError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::WBNotExistError",void 0,void 0,!1,!1),a.WBElementNoExistError=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::WBElementNoExistError",void 0,void 0,!1,!1),a.ExceedTheCapacityLimit=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::ExceedTheCapacityLimit",void 0,void 0,!1,!1),a.ConferenceBusy=s.defineUserException((function(e,t,i,n){o.ConferenceError.call(this,e,t,n),this.retry_delay=void 0!==i?i:0}),o.ConferenceError,"Conference::ConferenceBusy",(function(e){e.writeInt(this.retry_delay)}),(function(e){this.retry_delay=e.readInt()}),!1,!1),a.EnterWaitingRoom=s.defineUserException((function(e,t,i,n){o.ConferenceError.call(this,e,t,n),this.subMeetInfo=void 0!==i?i:""}),o.ConferenceError,"Conference::EnterWaitingRoom",(function(e){e.writeString(this.subMeetInfo)}),(function(e){this.subMeetInfo=e.readString()}),!1,!1),a.NosuchPersonInWaitingRoom=s.defineUserException((function(e,t,i){o.ConferenceError.call(this,e,t,i)}),o.ConferenceError,"Conference::NosuchPersonInWaitingRoom",void 0,void 0,!1,!1),Object.defineProperty(a,"SET_PSTN_NUM",{value:1}),Object.defineProperty(a,"CALLED_PSTN_NUM",{value:2}),Object.defineProperty(a,"BIND_PSTN_NUM",{value:4}),s.defineDictionary(a,"ModuleDict","ModuleDictHelper","Ice.StringHelper","Ice.ObjectPrx",!1,void 0,void 0),Object.defineProperty(a,"CLIENT_SLICE_VER",{value:"slice_ver"}),Object.defineProperty(a,"CLINET_PCID",{value:"client_pcid"}),Object.defineProperty(a,"CLINET_MACADDR",{value:"client_macaddr"}),Object.defineProperty(a,"CLINET_LANGUAGE",{value:"client_lang"}),Object.defineProperty(a,"CLINET_VER",{value:"client_ver"}),Object.defineProperty(a,"CLINET_SDK_VER",{value:"sdk_ver"}),Object.defineProperty(a,"CLINET_H5SDK_VER",{value:"h5sdk_ver"}),Object.defineProperty(a,"CLINET_ISWIFI",{value:"client_iswifi"}),Object.defineProperty(a,"CLINET_PLATFORM",{value:"client_platform"}),Object.defineProperty(a,"CLINET_PRODUCTTYPE",{value:"client_pdType"}),Object.defineProperty(a,"CLINET_DEVICETYPE",{value:"client_device"}),Object.defineProperty(a,"CLIENT_BRIDGETYPE",{value:"bridgeType"}),Object.defineProperty(a,"CLIENT_INVITECODE",{value:"invite_code"}),Object.defineProperty(a,"CLIENT_PHONENUM",{value:"phone_num"}),Object.defineProperty(a,"CLIENT_ISCUSTOMERSERVICE",{value:"is_cs"}),Object.defineProperty(a,"CLIENT_PRIV_ID",{value:"priv_id"}),Object.defineProperty(a,"CLIETN_PRIV_DAT",{value:"priv_dat"}),Object.defineProperty(a,"CLIETN_PRIV_ROLE",{value:"priv_role"}),Object.defineProperty(a,"CLINET_LOGIN_TIMESTAMP",{value:"client_time"}),Object.defineProperty(a,"CLINET_IS_WEB_VIEWER",{value:"webview"}),Object.defineProperty(a,"CLINET_LIVEAUDIO",{value:"liveAudio"}),Object.defineProperty(a,"CLINET_OPENID",{value:"openId"}),Object.defineProperty(a,"CLIENT_ACODEC",{value:"acodec"}),Object.defineProperty(a,"CLIENT_LIVE_TYPE",{value:"livetype"}),Object.defineProperty(a,"CLIENT_LIVE_MOBILE",{value:"livemobile"}),Object.defineProperty(a,"CLINET_BROWSER_INFO",{value:"browser"}),Object.defineProperty(a,"CLINET_VP8_SUPPORT",{value:"vp8"}),Object.defineProperty(a,"CLINET_WEBRTC_CODECS",{value:"rtc_codecs"}),Object.defineProperty(a,"CLIENT_TIME_OUT",{value:"time_out"}),Object.defineProperty(a,"CLINET_SUPPORT_NEWCONFID",{value:"spt_newconf"}),Object.defineProperty(a,"CLIENT_SDK_USRTOKEN",{value:"token"}),Object.defineProperty(a,"CLIENT_MCUID",{value:"mcuID"}),Object.defineProperty(a,"CLIENT_VER",{value:"client_ver"}),Object.defineProperty(a,"CLIENT_SIP_VIDEO_REENCODE",{value:"video_reencode"}),Object.defineProperty(a,"CLIENT_PROJECT_CODE",{value:"pjcode"}),Object.defineProperty(a,"CLIENT_PROJECT_FOR",{value:"pjfor"}),Object.defineProperty(a,"CLIENT_SUPPORT_DATA_CENTER",{value:"dcenter_enable"}),Object.defineProperty(a,"CLIENT_MCU_SESSION_ID",{value:"mcu_session_id"}),Object.defineProperty(a,"CLIENT_SDK_TYPE",{value:"sdktype"}),Object.defineProperty(a,"CLIENT_SDK_TYPE_VIDEO",{value:"video"}),Object.defineProperty(a,"CLIENT_SDK_TYPE_LIVE",{value:"live"}),Object.defineProperty(a,"PLATFORMTYPE_WIN32",{value:"win32"}),Object.defineProperty(a,"PLATFORMTYPE_IOS",{value:"ios"}),Object.defineProperty(a,"PLATFORMTYPE_ANDROID",{value:"android"}),Object.defineProperty(a,"PLATFORMTYPE_LINUX",{value:"linux"}),Object.defineProperty(a,"PLATFORMTYPE_MAC",{value:"mac"}),Object.defineProperty(a,"PDTYPE_TVNETMEETING",{value:"net_tv"}),Object.defineProperty(a,"PDTYPE_NETMEETING",{value:"net"}),Object.defineProperty(a,"PDTYPE_PSTNMEETING",{value:"pstn"}),Object.defineProperty(a,"PDTYPE_LIVE",{value:"live"}),Object.defineProperty(a,"PDTYPE_MCU",{value:"mcu"}),Object.defineProperty(a,"DEVICETYPE_PC",{value:"pc"}),Object.defineProperty(a,"DEVICETYPE_PAD",{value:"pad"}),Object.defineProperty(a,"DEVICETYPE_PHONE",{value:"phone"}),Object.defineProperty(a,"DEVICETYPE_FLASH",{value:"flash"}),Object.defineProperty(a,"DEVICETYPE_MCU",{value:"mcu"}),Object.defineProperty(a,"DEVICETYPE_BOX",{value:"box"}),Object.defineProperty(a,"DEVICETYPE_SIPGATEWAY",{value:"sipgateway"}),Object.defineProperty(a,"DEVICETYPE_WEBRTC",{value:"webrtc"}),Object.defineProperty(a,"DEVICETYPE_WXMINI",{value:"wxmini"}),Object.defineProperty(a,"BRIDGETYPE_MONITOR",{value:"monitor"}),Object.defineProperty(a,"BRIDGETYPE_MEETING",{value:"meeting"}),Object.defineProperty(a,"MEETINGMODE_NORMAL",{value:"normal"}),Object.defineProperty(a,"MEETINGMODE_CONSULTATION",{value:"consultation"}),Object.defineProperty(a,"ACODEC_ISAC",{value:"isac"}),Object.defineProperty(a,"LIVETYPE_WEIXIN",{value:"0"}),Object.defineProperty(a,"LIVETYPE_USER",{value:"1"}),Object.defineProperty(a,"LIVETYPE_OTHER",{value:"2"}),a.LoginRequest=s.defineStruct((function(e,t,i,n,r,o,s,a,c,l,d,u){this.confId=void 0!==e?e:0,this.confKey=void 0!==t?t:"",this.termId=void 0!==i?i:0,this.memberId=void 0!==n?n:0,this.memberType=void 0!==r?r:0,this.nickname=void 0!==o?o:"",this.callbacks=void 0!==s?s:null,this.accessNo=void 0!==a?a:0,this.publicIP=void 0!==c?c:"",this.localIP=void 0!==l?l:"",this.localMask=void 0!==d?d:"",this.extProperty=void 0!==u?u:null}),!1,(function(e){e.writeInt(this.confId),e.writeString(this.confKey),e.writeShort(this.termId),e.writeInt(this.memberId),e.writeByte(this.memberType),e.writeString(this.nickname),a.ModuleDictHelper.write(e,this.callbacks),e.writeInt(this.accessNo),e.writeString(this.publicIP),e.writeString(this.localIP),e.writeString(this.localMask),a.StringStringMapHelper.write(e,this.extProperty)}),(function(e){this.confId=e.readInt(),this.confKey=e.readString(),this.termId=e.readShort(),this.memberId=e.readInt(),this.memberType=e.readByte(),this.nickname=e.readString(),this.callbacks=a.ModuleDictHelper.read(e),this.accessNo=e.readInt(),this.publicIP=e.readString(),this.localIP=e.readString(),this.localMask=e.readString(),this.extProperty=a.StringStringMapHelper.read(e)}),22,!1),a.FileServerInfo=s.defineStruct((function(e,t){this.fsProxy=void 0!==e?e:"",this.key=void 0!==t?t:""}),!0,(function(e){e.writeString(this.fsProxy),e.writeString(this.key)}),(function(e){this.fsProxy=e.readString(),this.key=e.readString()}),2,!1),a.REC_STATE=s.defineEnum([["NO_RECORD",0],["STARTING",1],["RECORDING",2],["PAUSED",3],["STOPPING",4]]),s.defineSequence(a,"FileServerSeqHelper","Conference.FileServerInfo",!1),Object.defineProperty(a,"INVALID_COUNTDOWN",{value:-1}),Object.defineProperty(a,"CONFINFO_HOSTPWD",{value:"hostpwd"}),Object.defineProperty(a,"CONFINFO_CONFPWD",{value:"confpwd"}),Object.defineProperty(a,"CONFINFO_SCHEDULETIME",{value:"scheduletime"}),Object.defineProperty(a,"CONFINFO_SUBJECT",{value:"subject"}),Object.defineProperty(a,"CONFINFO_URL",{value:"url"}),Object.defineProperty(a,"CONFINFO_URLPIC",{value:"urlpic"}),Object.defineProperty(a,"CONFINFO_PSTNNUM",{value:"pstnnum"}),Object.defineProperty(a,"CONFINFO_PSTNPWD",{value:"pstnpwd"}),Object.defineProperty(a,"CONFINFO_AGENDA",{value:"agenda"}),Object.defineProperty(a,"CONFINFO_SUPPORT_VLIST",{value:"vlist"}),Object.defineProperty(a,"CONFINFO_ROOM_SIZETYPE",{value:"roomsizetype"}),Object.defineProperty(a,"CONFINFO_ISTEST",{value:"istest"}),Object.defineProperty(a,"CONFINFO_ISDEMO",{value:"isdemo"}),Object.defineProperty(a,"CONFINFO_HOTLINE",{value:"hotline"}),Object.defineProperty(a,"CONFINFO_ISFIX",{value:"isfixed"}),Object.defineProperty(a,"CONFINFO_HD",{value:"hd"}),Object.defineProperty(a,"CONFINFO_PSTNNOTICE",{value:"pstnnotice"}),Object.defineProperty(a,"CONFINFO_FUNC_VIDEOWALL",{value:"videowall"}),Object.defineProperty(a,"CONFINFO_VIDEO_ENABLE",{value:"video"}),Object.defineProperty(a,"CONFINFO_SHOW_MAIN_AD",{value:"main_ad"}),Object.defineProperty(a,"CONFINFO_VIDEO_MONITOR",{value:"vmonitor"}),Object.defineProperty(a,"CONFINFO_USE_PHONE",{value:"use_phone"}),Object.defineProperty(a,"CONFINFO_INVITE",{value:"invite"}),Object.defineProperty(a,"CONFINFO_VIDEO_LUBO",{value:"lubo"}),Object.defineProperty(a,"CONFINFO_MEDIA_PLAY",{value:"media_play"}),Object.defineProperty(a,"CONFINFO_MULTI_CAMERAS",{value:"multiple_cameras"}),Object.defineProperty(a,"CONFINFO_SUPPORT_BRIDGE",{value:"bridge"}),Object.defineProperty(a,"CONFINFO_SCREEN_SHARE",{value:"screen_share"}),Object.defineProperty(a,"CONFINFO_DOCUMENT_SHOW",{value:"document_show"}),Object.defineProperty(a,"CONFINFO_WHITE_BOARD",{value:"whiteboard"}),Object.defineProperty(a,"CONFINFO_ANSWER_QUESTION",{value:"answer_question"}),Object.defineProperty(a,"CONFINFO_FILE_SHARE",{value:"file_share"}),Object.defineProperty(a,"CONFINFO_MEETING_INFO",{value:"meeting_info"}),Object.defineProperty(a,"CONFINFO_OMNIDIRECTIONAL_MIC",{value:"omnidirectional_mic"}),Object.defineProperty(a,"CONFINFO_MEET_MODE",{value:"meeting_mode"}),Object.defineProperty(a,"CONFINFO_USER_ROLE",{value:"user_role"}),Object.defineProperty(a,"CONFINFO_COMPANY_ID",{value:"compid"}),Object.defineProperty(a,"CONFINFO_USER_NETDISK_ENABLE",{value:"user_net_disk"}),Object.defineProperty(a,"CONFINFO_COMP_NETDISK_ENABLE",{value:"comp_net_disk"}),Object.defineProperty(a,"CONFINFO_FREECONF",{value:"freeconf"}),Object.defineProperty(a,"CONFINFO_MAINVIDEO_SHOWMODE",{value:"main_svm"}),Object.defineProperty(a,"CONFINFO_IS_BROADCATING",{value:"rtmpliveon"}),Object.defineProperty(a,"CONFINFO_WEBVIEWER_NUM",{value:"webviewer_num"}),Object.defineProperty(a,"CONFINFO_WEBVIEWER_RIGHTS",{value:"webviewer_rights"}),Object.defineProperty(a,"CONFINFO_WEBVIEWER_QUES",{value:"webviewer_ques"}),Object.defineProperty(a,"CONFINFO_BROADCAST_DURATION",{value:"rtmplivetm"}),Object.defineProperty(a,"CONFINFO_WB_CONTAINERSIZE",{value:"wb_container"}),Object.defineProperty(a,"CONFINFO_H264_PROFILE",{value:"h264profile"}),Object.defineProperty(a,"CONFINFO_H264_NOCABAC",{value:"h264nocabac"}),Object.defineProperty(a,"CONFINFO_H264_SLICEMAXSZ",{value:"h264slicemaxsz"}),Object.defineProperty(a,"CONFINFO_H264_IFRAME",{value:"h264iframe"}),Object.defineProperty(a,"CONFINFO_H264_NOHARDCODING",{value:"h264nohardcoding"}),Object.defineProperty(a,"CONFINFO_SCREEN_ENCTYPE",{value:"screenenctype"}),Object.defineProperty(a,"CONFINFO_HIFPS_VALUE",{value:"hi_fps"}),Object.defineProperty(a,"CONFINFO_H264_PICMAXSIZE",{value:"h264picmaxsize"}),Object.defineProperty(a,"CONFINFO_SUPPORT_SIP",{value:"is_sip"}),Object.defineProperty(a,"CONFINFO_MS_MODE",{value:"ms_mode"}),Object.defineProperty(a,"CONFINFO_H264_ENCFIXEDSZ",{value:"h264encfixedsz"}),Object.defineProperty(a,"CONFINFO_HD_FOR_MOBILE",{value:"hd_for_mobile"}),Object.defineProperty(a,"CONFINFO_LOG_LEVEL",{value:"log_level"}),Object.defineProperty(a,"CONFINFO_LIVE_CONFIG",{value:"livecfg"}),Object.defineProperty(a,"CONFINFO_SRV_RECORDSTATE",{value:"srv_record_state"}),Object.defineProperty(a,"CONFINFO_SRV_RECORDCFG",{value:"srv_record_cfg"}),Object.defineProperty(a,"CONFINFO_SVR_RECORDOWNER",{value:"svr_record_owner"}),Object.defineProperty(a,"CONFINFO_VIDEO_VPU_SUPPORT_ENC",{value:"vpu_support_enc"}),Object.defineProperty(a,"CONFINFO_VIDEO_VPU_SUPPORT_DEC",{value:"vpu_supportd_dec"}),Object.defineProperty(a,"CONFINFO_VIDEO_VPU_UNSUPPORT_ENC_DEV",{value:"vpu_unsupport_enc_dev"}),Object.defineProperty(a,"CONFINFO_VIDEO_VPU_UNSUPPORT_DEC_DEV",{value:"vpu_unsupport_dec_dev"}),Object.defineProperty(a,"CONFINFO_VIDEOLIST_MODE",{value:"vlistmode"}),Object.defineProperty(a,"CONFINFO_VIDEOLIST_CAMS",{value:"vlistcams"}),Object.defineProperty(a,"CONFINFO_MAX_VIDEOUIS",{value:"maxvuis"}),Object.defineProperty(a,"CONFINFO_VIDEOWALL_LAYOUT",{value:"vwalllo"}),Object.defineProperty(a,"CONFINFO_UI_LOCKSTATUS",{value:"uilock"}),Object.defineProperty(a,"CONFINFO_SRV_RECORD",{value:"srv_record"}),Object.defineProperty(a,"CONFINFO_SHOW_LIVE",{value:"show_live"}),Object.defineProperty(a,"CONFINFO_SIGNIN",{value:"signinurl"}),Object.defineProperty(a,"CONFINFO_EXTTAB_URL",{value:"exttaburl"}),Object.defineProperty(a,"CONFINFO_PRIVTAB_INFO",{value:"privtabinfo"}),Object.defineProperty(a,"CONFINFO_PRIVATE_FILE_SERVER",{value:"privfs"}),Object.defineProperty(a,"CONFINFO_DOC_BACKUP_COMP_NDD",{value:"doc_backup_comp_ndd"}),Object.defineProperty(a,"CONFINFO_OEMKEY",{value:"oem_key"}),Object.defineProperty(a,"CONFINFO_VIDEOCUSTOMBPS",{value:"video_custom_bps"}),Object.defineProperty(a,"CONFINFO_CONFIRM_AUTOEND_TYPE",{value:"autoend"}),Object.defineProperty(a,"CONFINFO_RECORD_ALL_MEMBER",{value:"record_all"}),Object.defineProperty(a,"CONFINFO_ACCESS_KEEPALIVE_TIME",{value:"kp_time_a"}),Object.defineProperty(a,"CONFINFO_CONTROL_KEEPALIVE_TIME",{value:"kp_time_c"}),Object.defineProperty(a,"CONFINFO_NEW_CONFID",{value:"new_confid"}),Object.defineProperty(a,"CONFINFO_FS_HTTP",{value:"fs_http"}),Object.defineProperty(a,"CONFINFO_SHARE_CFG",{value:"share_cfg"}),Object.defineProperty(a,"CONFINFO_MCU_MAX_VIDEOUIS",{value:"mcu_maxvuis"}),Object.defineProperty(a,"CONFINFO_MEETING_CHECK",{value:"meeting_check"}),Object.defineProperty(a,"CONFINFO_DATA_CENTER_PROXY",{value:"dcenter_prxy"}),Object.defineProperty(a,"CONFINFO_DATA_CENTER_KEY",{value:"dcenter_key"}),Object.defineProperty(a,"CONFINFO_MCU_RECORD_ID",{value:"mcu_recid"}),Object.defineProperty(a,"CONFINFO_IS_SDKMEETING",{value:"is_sdkmeeting"}),Object.defineProperty(a,"CONF_END_REASON_UNKOWN",{value:"unkown"}),Object.defineProperty(a,"CONF_END_REASON_TERM",{value:"term"}),Object.defineProperty(a,"CONF_END_REASON_AUTO",{value:"auto"}),Object.defineProperty(a,"CONF_END_REASON_WEB",{value:"web"}),Object.defineProperty(a,"CONF_END_REASON_AAA",{value:"aaa"}),Object.defineProperty(a,"CONF_END_REASON_HOST_OFFLINE",{value:"host_offline"}),Object.defineProperty(a,"LEFT_REASON_KICK",{value:"kick"}),Object.defineProperty(a,"LEFT_REASON_REFRESH",{value:"refresh"}),Object.defineProperty(a,"LEFT_REASON_EXTRUDE",{value:"extrude"}),Object.defineProperty(a,"LEFT_REASON_TIMEOUT",{value:"timeout"}),Object.defineProperty(a,"LEFT_REASON_SEAT",{value:"seat"}),Object.defineProperty(a,"LEFT_REASON_EXIT",{value:"exit"}),Object.defineProperty(a,"LEFT_REASON_BUSY",{value:"busy"}),Object.defineProperty(a,"LEFT_REASON_BALANCE_LESS",{value:"balance_less"}),Object.defineProperty(a,"LEFT_REASON_TOKENTIMEOUT",{value:"token_timeout"}),Object.defineProperty(a,"LEFT_REASON_SUBMEETING",{value:"sub_meeting"}),Object.defineProperty(a,"KNOCKED_REASON_ROOMLOCKED",{value:"room_locked"}),Object.defineProperty(a,"KNOCKED_REASON_SEATLESS",{value:"seat_less"}),Object.defineProperty(a,"KNOCKED_REASON_BALANCELESS",{value:"balance_less"}),Object.defineProperty(a,"BOARDCAST_RTMP",{value:"rtmp"}),Object.defineProperty(a,"BOARDCAST_RTMP2",{value:"rtmp2"}),Object.defineProperty(a,"BOARDCAST_SCREEN_RTMP",{value:"rtmp_screen"}),Object.defineProperty(a,"BOARDCAST_HLS",{value:"hls"}),Object.defineProperty(a,"BOARDCAST_HLS2",{value:"hls2"}),Object.defineProperty(a,"BOARDCAST_SCREEN_HLS",{value:"hls_screen"}),Object.defineProperty(a,"BROADCAST_FLV",{value:"flv"}),i.Conference=a}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},6983:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=t("Common/Exception").Common,s=r.require(e,["Control/Conference","Control/PublicTypes"]).Conference,a=n.Slice;s.QuesType=a.defineStruct((function(e,t,i){this.typeID=void 0!==e?e:"",this.name=void 0!==t?t:"",this.deleted=void 0!==i&&i}),!0,(function(e){e.writeString(this.typeID),e.writeString(this.name),e.writeBool(this.deleted)}),(function(e){this.typeID=e.readString(),this.name=e.readString(),this.deleted=e.readBool()}),3,!1),s.QuesState=a.defineEnum([["Question_NotReply",0],["Question_Replying",1],["Question_NotPublic",2],["Question_Publiced",3],["Question_Deleted",4]]),s.QuesAsk=a.defineStruct((function(e,t,i,n,r){this.typeID=void 0!==e?e:"",this.asktime=void 0!==t?t:0,this.termID=void 0!==i?i:0,this.content=void 0!==n?n:"",this.nickname=void 0!==r?r:""}),!0,(function(e){e.writeString(this.typeID),e.writeInt(this.asktime),e.writeShort(this.termID),e.writeString(this.content),e.writeString(this.nickname)}),(function(e){this.typeID=e.readString(),this.asktime=e.readInt(),this.termID=e.readShort(),this.content=e.readString(),this.nickname=e.readString()}),9,!1),s.QuesDeal=a.defineStruct((function(e,t,i,n,r,o,a,c){this.state=void 0!==e?e:s.QuesState.Question_NotReply,this.replyCon=void 0!==t?t:"",this.replyTermId=void 0!==i?i:0,this.replyTime=void 0!==n?n:0,this.publishTermID=void 0!==r?r:0,this.publishTime=void 0!==o?o:0,this.delTermID=void 0!==a?a:0,this.delTime=void 0!==c?c:0}),!0,(function(e){s.QuesState.__write(e,this.state),e.writeString(this.replyCon),e.writeShort(this.replyTermId),e.writeInt(this.replyTime),e.writeShort(this.publishTermID),e.writeInt(this.publishTime),e.writeShort(this.delTermID),e.writeInt(this.delTime)}),(function(e){this.state=s.QuesState.__read(e),this.replyCon=e.readString(),this.replyTermId=e.readShort(),this.replyTime=e.readInt(),this.publishTermID=e.readShort(),this.publishTime=e.readInt(),this.delTermID=e.readShort(),this.delTime=e.readInt()}),20,!1),s.QuesInf=a.defineStruct((function(e,t,i){this.quesID=void 0!==e?e:0,this.ask=void 0!==t?t:new s.QuesAsk,this.deal=void 0!==i?i:new s.QuesDeal}),!0,(function(e){e.writeInt(this.quesID),s.QuesAsk.write(e,this.ask),s.QuesDeal.write(e,this.deal)}),(function(e){this.quesID=e.readInt(),this.ask=s.QuesAsk.read(e,this.ask),this.deal=s.QuesDeal.read(e,this.deal)}),33,!1),a.defineSequence(s,"QuesListHelper","Conference.QuesInf",!1),a.defineSequence(s,"QuesTypeListHelper","Conference.QuesType",!1),s.AnsQueCallback=a.defineObject(void 0,n.Object,void 0,0,["::Conference::AnsQueCallback","::Ice::Object"],-1,void 0,void 0,!1),s.AnsQueCallbackPrx=a.defineProxy(n.ObjectPrx,s.AnsQueCallback.ice_staticId,void 0),a.defineOperations(s.AnsQueCallback,s.AnsQueCallbackPrx,{askQuesNotify:[,,,,,,[[3],[s.QuesAsk]],,[o.ConferenceError],,],lockQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],replyQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],modifyQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],delQuesNotify:[,,,,,,[[3],[2]],,[o.ConferenceError],,],delAllQuesNotify:[,,,,,,[[2]],,[o.ConferenceError],,],publicQuesNotify:[,,,,,,[[3],[1],[2]],,[o.ConferenceError],,],quesTypeChangeNotify:[,,,,,,[[3],[7]],,[o.ConferenceError],,],modifyQuesTypeNotify:[,,,,,,[[2],["Conference.QuesTypeListHelper"]],,[o.ConferenceError],,],setBroadCastQuesNotify:[,,,,,,[[1]],,[o.ConferenceError],,]}),s.AnsQuesCtrl=a.defineObject(void 0,n.Object,void 0,0,["::Conference::AnsQuesCtrl","::Ice::Object"],-1,void 0,void 0,!1),s.AnsQuesCtrlPrx=a.defineProxy(n.ObjectPrx,s.AnsQuesCtrl.ice_staticId,void 0),a.defineOperations(s.AnsQuesCtrl,s.AnsQuesCtrlPrx,{askQues:[,,,1,,[3],[[s.QuesAsk]],,[o.ConferenceError],,],lockQues:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],replyQues:[,,,1,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],publicQues:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],modifyQues:[,,,1,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],delQues:[,,,1,,,[[3]],,[o.ConferenceError],,],delAllQues:[,,,1,,,,,[o.ConferenceError],,],quesTypeChange:[,,,1,,,[[3],[7]],,[o.ConferenceError],,],getQuesList:[,,,1,,["Conference.QuesListHelper"],,,[o.ConferenceError],,],getQuesType:[,,,1,,["Conference.QuesTypeListHelper"],,,[o.ConferenceError],,],modifyQuesType:[,,,1,,,[["Conference.QuesTypeListHelper"]],,[o.ConferenceError],,],setBoradCastQues:[,,,1,,,[[1]],,[o.ConferenceError],,]}),i.Conference=s}("undefined"!=typeof global&&void 0!==global.process?e:void 0,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},8629:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=(n.Slice,r.module("Conference"));Object.defineProperty(o,"PUBLIC_CHAT",{value:1}),Object.defineProperty(o,"PRIVATE_HOST_CHAT",{value:2}),Object.defineProperty(o,"PRIVATE_DEMO_CHAT",{value:3}),Object.defineProperty(o,"PRIVATE_OTHER_CHAT",{value:4}),Object.defineProperty(o,"SCREEN_RECORD",{value:11}),Object.defineProperty(o,"FILE_SHARE",{value:5}),Object.defineProperty(o,"WB_VIEW_PAGE",{value:9}),Object.defineProperty(o,"WB_VIEW_ANY",{value:10}),Object.defineProperty(o,"DEMO_RIGHT_MANAGE",{value:50}),Object.defineProperty(o,"DEMO_ACTOR_MANAGE",{value:51}),Object.defineProperty(o,"OPTION_MANAGE",{value:60}),Object.defineProperty(o,"HOST_ACTOR_MANAGE",{value:70}),Object.defineProperty(o,"LOCK_RIGHT",{value:71}),Object.defineProperty(o,"KICKOUT_RIGHT",{value:72}),Object.defineProperty(o,"END_CONFERENCE_RIGHT",{value:73}),Object.defineProperty(o,"MEMBER_INFO_MANAGE",{value:74}),Object.defineProperty(o,"INVITE_RIGHT",{value:75}),Object.defineProperty(o,"BEGIN_CONFERENCE_RIGHT",{value:76}),Object.defineProperty(o,"UPLOAD_FILE",{value:80}),Object.defineProperty(o,"DEL_OTHERS_FILE",{value:81}),Object.defineProperty(o,"START_NOTICE",{value:85}),Object.defineProperty(o,"STOP_NOTICE",{value:86}),Object.defineProperty(o,"START_ROLL_CALL",{value:90}),Object.defineProperty(o,"STOP_ROLL_CALL",{value:91}),Object.defineProperty(o,"OPEN_OTHERS_MIC",{value:95}),Object.defineProperty(o,"CLOSE_OTHERS_MIC",{value:96}),Object.defineProperty(o,"ALL_SILENCE",{value:97}),Object.defineProperty(o,"CHANGE_VIDEO_FOCUS_WINDOW_MODE",{value:100}),Object.defineProperty(o,"CHANGE_VIDEO_LAYOUT_MODE",{value:101}),Object.defineProperty(o,"SET_CURRENT_TAB",{value:105}),Object.defineProperty(o,"SET_FULLSCREEN",{value:106}),Object.defineProperty(o,"SET_FRAME_LAYOUT",{value:107}),Object.defineProperty(o,"FORCE_SYNC",{value:108}),Object.defineProperty(o,"WB_CREATE",{value:110}),Object.defineProperty(o,"WB_CLOSE",{value:111}),Object.defineProperty(o,"WB_CHANGE_NAME",{value:112}),Object.defineProperty(o,"WB_MARK",{value:113}),Object.defineProperty(o,"WB_SAVE",{value:114}),Object.defineProperty(o,"WB_PAGE_IMPORT",{value:115}),Object.defineProperty(o,"WB_CHANGE_SCALE",{value:116}),Object.defineProperty(o,"WB_ROTATE",{value:117}),Object.defineProperty(o,"WB_SET_CURRENT_PAGE",{value:118}),Object.defineProperty(o,"WB_SET_HOTSPOT",{value:119}),Object.defineProperty(o,"WB_SET_MARK_TERMS",{value:120}),Object.defineProperty(o,"SCREEN_SHARE_OPERATE",{value:130}),i.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},899:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("Common/Exception").Common),o=t("Control/Conference").Conference,s=n.Slice;o.RollCallInfo=s.defineStruct((function(e,t,i){this.bRollCall=void 0!==e&&e,this.rollCaller=void 0!==t?t:0,this.duration=void 0!==i?i:0}),!0,(function(e){e.writeBool(this.bRollCall),e.writeShort(this.rollCaller),e.writeShort(this.duration)}),(function(e){this.bRollCall=e.readBool(),this.rollCaller=e.readShort(),this.duration=e.readShort()}),5,!0),o.RollCallCallback=s.defineObject(void 0,n.Object,void 0,0,["::Conference::RollCallCallback","::Ice::Object"],-1,void 0,void 0,!1),o.RollCallCallbackPrx=s.defineProxy(n.ObjectPrx,o.RollCallCallback.ice_staticId,void 0),s.defineOperations(o.RollCallCallback,o.RollCallCallbackPrx,{rollCallStarted:[,,,,,,[[2]],,,,],rollCallStoped:[,,,,,,[[2]],,,,],rollCallConfirmed:[,,,,,,[[2]],,,,],rollCallConfirmed2:[,,,,,,[[2],[7]],,,,]}),o.RollCallSession=s.defineObject(void 0,n.Object,void 0,0,["::Conference::RollCallSession","::Ice::Object"],-1,void 0,void 0,!1),o.RollCallSessionPrx=s.defineProxy(n.ObjectPrx,o.RollCallSession.ice_staticId,void 0),s.defineOperations(o.RollCallSession,o.RollCallSessionPrx,{getRollCallInfo:[,,,1,,[o.RollCallInfo],,,,,],startRollCall:[,,,1,,,,,[r.ConferenceError],,],stopRollCall:[,,,1,,,,,[r.ConferenceError],,],confirmRollCall:[,,,1,,,,,[o.MemberDeactivedError],,]}),i.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},8463:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=n.Slice;Object.defineProperty(o,"SSST_SHARING",{value:1}),Object.defineProperty(o,"SSST_MARKING",{value:2}),Object.defineProperty(o,"SSST_PAUSECTRL",{value:4}),Object.defineProperty(o,"SSRE_SOMEONE_REQ",{value:1}),Object.defineProperty(o,"SSRE_REJECT",{value:2}),o.ScreenShareInfo=s.defineStruct((function(e,t,i,n,r,o,s){this.scrSviceProxy=void 0!==e?e:"",this.authKey=void 0!==t?t:"",this.allowCtrlReq=void 0!==i&&i,this.state=void 0!==n?n:0,this.sharer=void 0!==r?r:0,this.controller=void 0!==o?o:0,this.allowOtherMark=void 0!==s&&s}),!0,(function(e){e.writeString(this.scrSviceProxy),e.writeString(this.authKey),e.writeBool(this.allowCtrlReq),e.writeByte(this.state),e.writeShort(this.sharer),e.writeShort(this.controller),e.writeBool(this.allowOtherMark)}),(function(e){this.scrSviceProxy=e.readString(),this.authKey=e.readString(),this.allowCtrlReq=e.readBool(),this.state=e.readByte(),this.sharer=e.readShort(),this.controller=e.readShort(),this.allowOtherMark=e.readBool()}),9,!1),o.MarkData=s.defineStruct((function(e,t,i){this.termid=void 0!==e?e:0,this.color=void 0!==t?t:0,this.mousePosSeq=void 0!==i?i:null}),!0,(function(e){e.writeShort(this.termid),e.writeInt(this.color),o.ByteListHelper.write(e,this.mousePosSeq)}),(function(e){this.termid=e.readShort(),this.color=e.readInt(),this.mousePosSeq=o.ByteListHelper.read(e)}),7,!1),o.MarkDataV4=s.defineStruct((function(e,t,i,n){this.termid=void 0!==e?e:0,this.markid=void 0!==t?t:"",this.type=void 0!==i?i:0,this.mousePosSeq=void 0!==n?n:null}),!0,(function(e){e.writeShort(this.termid),e.writeString(this.markid),e.writeByte(this.type),o.ByteListHelper.write(e,this.mousePosSeq)}),(function(e){this.termid=e.readShort(),this.markid=e.readString(),this.type=e.readByte(),this.mousePosSeq=o.ByteListHelper.read(e)}),5,!1),s.defineSequence(o,"MarkDataSeqHelper","Conference.MarkData",!1),s.defineSequence(o,"MarkDataSeqV4Helper","Conference.MarkDataV4",!1),s.defineSequence(o,"MarkIdSeqHelper","Ice.StringHelper",!1),o.ScreenShareCtrl=s.defineObject(void 0,n.Object,void 0,0,["::Conference::ScreenShareCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.ScreenShareCtrlPrx=s.defineProxy(n.ObjectPrx,o.ScreenShareCtrl.ice_staticId,void 0),s.defineOperations(o.ScreenShareCtrl,o.ScreenShareCtrlPrx,{getScreenShareInfo:[,,,1,,[o.ScreenShareInfo],,,[r.ConferenceError],,],startScreenShare:[,,,1,,,,,[r.ConferenceError],,],stopScreenShare:[,,,1,,,,,[r.ConferenceError],,],setCtrlReqState:[,,,1,,,[[1]],,[r.ConferenceError],,],requestCtrlRight:[,,,1,,,,,[r.ConferenceError],,],cancelCtrlReq:[,,,1,,,,,[r.ConferenceError],,],rejectCtrlReq:[,,,1,,,[[2],[0]],,[r.ConferenceError],,],giveCtrlRight:[,,,1,,,[[2]],,[r.ConferenceError],,],releaseCtrlRight:[,,,1,,,,,[r.ConferenceError],,],ctrlMsg:[,,,1,,,[["Conference.ByteListHelper"]],,[r.ConferenceError],,],tmpSetRemoteCtrlState:[,,,1,,,[[1]],,[r.ConferenceError],,],requestMarked:[,,,1,,,,,[r.ConferenceError],,],cancelMarkedReq:[,,,1,,,,,[r.ConferenceError],,],startMarked:[,,,1,,,,,[r.ConferenceError],,],stopMarked:[,,,1,,,,,[r.ConferenceError],,],enableOtherMarked:[,,,1,,,[[1]],,[r.ConferenceError],,],askForNewIFrame:[,,,1,,,[[3]],,[r.ConferenceError],,],getAllMarkData:[,,,1,,["Conference.MarkDataSeqHelper"],,,[r.ConferenceError],,],sendMarkData:[,,,1,,,[[o.MarkData]],,[r.ConferenceError],,],clearAllMarks:[,,,1,,,,,[r.ConferenceError],,],setIndicator:[,,,1,,,[["Conference.StringStringMapHelper"]],,,,],getAllMarkDataV4:[,,,1,,["Conference.MarkDataSeqV4Helper"],,,[r.ConferenceError],,],sendMarkDataV4:[,,,1,,,[[o.MarkDataV4]],,[r.ConferenceError],,],clearAllMarksV4:[,,,1,,,,,[r.ConferenceError],,],delMarkDataV4:[,,,1,,,[["Conference.MarkIdSeqHelper"]],,[r.ConferenceError],,]}),o.ScreenShareClient=s.defineObject(void 0,n.Object,void 0,0,["::Conference::ScreenShareClient","::Ice::Object"],-1,void 0,void 0,!1),o.ScreenShareClientPrx=s.defineProxy(n.ObjectPrx,o.ScreenShareClient.ice_staticId,void 0),s.defineOperations(o.ScreenShareClient,o.ScreenShareClientPrx,{notifyStartScreenShare:[,,,,,,[[o.ScreenShareInfo]],,,,],notifyStopScreenShare:[,,,,,,[[2]],,,,],notifyCtrlReqState:[,,,,,,[[2],[1]],,[r.ConferenceError],,],notifyRequestCtrlRight:[,,,,,,[[2]],,,,],notifyCancelCtrlReq:[,,,,,,[[2]],,,,],notifyRejectCtrlReq:[,,,,,,[[2],[2],[0]],,,,],notifyGiveCtrlRight:[,,,,,,[[2],[2]],,,,],notifyReleaseCtrlRight:[,,,,,,[[2]],,,,],notifyCtrlMsg:[,,,,,,[[2],["Conference.ByteListHelper"]],,,,],notifyTmpSetRemoteCtrlState:[,,,,,,[[2],[1]],,,,],notifyRequestMarked:[,,,,,,[[2]],,,,],notifyCancelMarkedReq:[,,,,,,[[2]],,,,],notifyStartMarked:[,,,,,,[[2]],,,,],notifyStopMarked:[,,,,,,[[2]],,,,],notifyEnableOtherMarked:[,,,,,,[[2],[1]],,,,],notifyMakeIFrame:[,,,,,,[[3]],,,,],notifyMarkData:[,,,,,,[[o.MarkData]],,,,],notifyClearAllMarks:[,,,,,,,,,,],notifyIndicator:[,,,,,,[[2],["Conference.StringStringMapHelper"]],,,,],notifyClearAllMarksV4:[,,,,,,,,,,],notifyMarkDataV4:[,,,,,,[[o.MarkDataV4]],,,,],notifyDelMarkDataV4:[,,,,,,[["Conference.MarkIdSeqHelper"],[2]],,,,]}),i.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},5856:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=n.Slice;o.SyncCtrlCallback=s.defineObject(void 0,n.Object,void 0,0,["::Conference::SyncCtrlCallback","::Ice::Object"],-1,void 0,void 0,!1),o.SyncCtrlCallbackPrx=s.defineProxy(n.ObjectPrx,o.SyncCtrlCallback.ice_staticId,void 0),s.defineOperations(o.SyncCtrlCallback,o.SyncCtrlCallbackPrx,{notifySetCurrentTab:[,,,,,,[[o.TabID],[o.TabID],[2]],,,,],notifySetFullScreen:[,,,,,,[[1],[2]],,,,],notifySetPrivTabInfo:[,,,,,,[[7],[2]],,,,],notifySetSyncMode:[,,,,,,[[o.SYNCMODE.__helper],[2]],,,,]}),o.SyncCtrl=s.defineObject(void 0,n.Object,void 0,0,["::Conference::SyncCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.SyncCtrlPrx=s.defineProxy(n.ObjectPrx,o.SyncCtrl.ice_staticId,void 0),s.defineOperations(o.SyncCtrl,o.SyncCtrlPrx,{setCurrentTab:[,,,1,,,[[o.TabID],[o.TabID]],,[r.ConferenceError],,],setFullScreen:[,,,1,,,[[1]],,[r.ConferenceError],,],setPrivTabInfo:[,,,1,,,[[7]],,[r.ConferenceError],,],setSyncMode:[,,,1,,,[[o.SYNCMODE.__helper]],,[r.ConferenceError],,],saveLastTabValue:[,,,1,,,[[2]],,[r.ConferenceError],,]}),i.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},1847:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=n.Slice;Object.defineProperty(o,"FPS_LOW",{value:-1}),Object.defineProperty(o,"FPS_NOR",{value:0}),Object.defineProperty(o,"FPS_HI",{value:1}),Object.defineProperty(o,"VEDIO_LD",{value:-1}),Object.defineProperty(o,"VEDIO_SD",{value:0}),Object.defineProperty(o,"VEDIO_HD",{value:1}),Object.defineProperty(o,"VEDIO_UD",{value:2}),o.VideoSetting=s.defineStruct((function(e,t,i,n,r,o){this.mutiCam=void 0!==e&&e,this.openCamIDs=void 0!==t?t:null,this.denoise=void 0!==i&&i,this.deinterlace=void 0!==n&&n,this.fpsType=void 0!==r?r:0,this.videType=void 0!==o?o:0}),!0,(function(e){e.writeBool(this.mutiCam),n.ShortSeqHelper.write(e,this.openCamIDs),e.writeBool(this.denoise),e.writeBool(this.deinterlace),e.writeInt(this.fpsType),e.writeInt(this.videType)}),(function(e){this.mutiCam=e.readBool(),this.openCamIDs=n.ShortSeqHelper.read(e),this.denoise=e.readBool(),this.deinterlace=e.readBool(),this.fpsType=e.readInt(),this.videType=e.readInt()}),12,!1),o.UsrCamID=s.defineStruct((function(e,t){this.termID=void 0!==e?e:0,this.camID=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.termID),e.writeShort(this.camID)}),(function(e){this.termID=e.readShort(),this.camID=e.readShort()}),4,!0),s.defineSequence(o,"UsrCamIDListHelper","Conference.UsrCamID",!0),o.UsrCamSize=s.defineStruct((function(e,t,i){this.termID=void 0!==e?e:0,this.camID=void 0!==t?t:0,this.VIDEO_SS_value=void 0!==i?i:0}),!0,(function(e){e.writeShort(this.termID),e.writeShort(this.camID),e.writeInt(this.VIDEO_SS_value)}),(function(e){this.termID=e.readShort(),this.camID=e.readShort(),this.VIDEO_SS_value=e.readInt()}),8,!0),s.defineSequence(o,"UsrCamSizeListHelper","Conference.UsrCamSize",!0),Object.defineProperty(o,"ZOOM_TELE",{value:2}),Object.defineProperty(o,"ZOOM_WIDE",{value:3}),Object.defineProperty(o,"ZOOM_STOP",{value:0}),Object.defineProperty(o,"PAN_TILT_DIR_UP",{value:1}),Object.defineProperty(o,"PAN_TILT_DIR_DOWN",{value:2}),Object.defineProperty(o,"PAN_TILT_DIR_LEFT",{value:3}),Object.defineProperty(o,"PAN_TILT_DIR_RIGHT",{value:4}),Object.defineProperty(o,"PAN_TILT_DIR_STOP",{value:5}),o.VideoCallback=s.defineObject(void 0,n.Object,void 0,0,["::Conference::VideoCallback","::Ice::Object"],-1,void 0,void 0,!1),o.VideoCallbackPrx=s.defineProxy(n.ObjectPrx,o.VideoCallback.ice_staticId,void 0),s.defineOperations(o.VideoCallback,o.VideoCallbackPrx,{notifyAllowVideoWall:[,,,,,,[[1],[2]],,,,],updateStatus:[,,,,,,[[2],[o.VSTATUS.__helper],[2]],,,,],notifyOpenVideo:[,,,,,,[[2]],,,,],startVideoByManager:[,,,,,,,,[r.ConferenceError],,],notifyEnableVideo:[,,,,,,[[2],[1],[2]],,,,],updateFocusWindow:[,,,,,,[[o.WINDOW_MODE.__helper],[2]],,,,],updateVLayout:[,,,,,,[[o.VIDEOLAYOUTMODE.__helper],[2]],,,,],updateVLayout2:[,,,,,,[[3],[2]],,,,],updateMainVideoShowMode:[,,,,,,[[3],[2]],,,,],updateVideoListMode:[,,,,,,[[7],[2]],,,,],enableUpload:[,,,,,,[[2],[1]],,,,],enableUpload2:[,,,,,,[[2],[3]],,,,],generateIFrame:[,,,,,,[[2]],,,,],notifyRefuseOpenVideo:[,,,,,,[[2]],,,,],getVideoSetting:[,,,1,,[o.VideoSetting],,,[r.ConferenceError],,],setCamera:[,,,,,,[[o.VideoSetting],[2]],,[r.ConferenceError],,],setCameraById:[,,,,,,[[o.UsrCamID],[2]],,[r.ConferenceError],,],notifyVideoPolling:[,,,,,,[[2],[1],[3]],,[r.ConferenceError],,],notifyPollingVideo:[,,,,,,[[2],["Conference.UsrCamIDListHelper"]],,[r.ConferenceError],,],notifyPollingVideo2:[,,,,,,[[2],["Conference.UsrCamIDListHelper"],[7]],,[r.ConferenceError],,],notifyVideoList:[,,,,,,[[2],[7]],,[r.ConferenceError],,],notifyUpdateAllCameraInfos:[,,,,,,[[2],[7]],,[r.ConferenceError],,],notifySetOpenedCameraNumber:[,,,,,,[[2],["Ice.ShortSeqHelper"]],,[r.ConferenceError],,],notifyStartAdjustDirection:[,,,,,,[[o.UsrCamID],[3]],,,,],notifyStartAdjustZoom:[,,,,,,[[o.UsrCamID],[3]],,,,],notifyStopAdjustDirection:[,,,,,,[[o.UsrCamID]],,,,],notifyStopAdjustZoom:[,,,,,,[[o.UsrCamID]],,,,]}),o.VideoCtrl=s.defineObject(void 0,n.Object,void 0,0,["::Conference::VideoCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.VideoCtrlPrx=s.defineProxy(n.ObjectPrx,o.VideoCtrl.ice_staticId,void 0),s.defineOperations(o.VideoCtrl,o.VideoCtrlPrx,{setDeviceStatus:[,,,1,,,[[1]],,[r.ConferenceError],,],allowVideoWall:[,,,1,,,[[1]],,[r.ConferenceError],,],startVideo:[,,,1,,,,,[r.ConferenceError],,],stopVideo:[,,,1,,,,,[r.ConferenceError],,],reqOpenVideo:[,,,1,,,[[2]],,[r.ConferenceError],,],startVideoEx:[,,,1,,,[[2]],,[r.ConferenceError],,],stopVideoEx:[,,,1,,,[[2]],,[r.ConferenceError],,],enableVideo:[,,,1,,,[[1]],,[r.ConferenceError],,],setFocusWindow:[,,,1,,,[[o.WINDOW_MODE.__helper],[2]],,[r.ConferenceError],,],batchSubscribeVideo:[,,,1,,,[["Conference.UsrCamIDListHelper"],[1]],,[r.ConferenceError],,],batchSubscribeVideo2:[,,,1,,,[["Conference.UsrCamSizeListHelper"]],,[r.ConferenceError],,],subscribeFocusWindow:[,,,1,,,[[1]],,[r.ConferenceError],,],subscribeFocusWindow2:[,,,1,,,[[3]],,[r.ConferenceError],,],setVLayout:[,,,1,,,[[o.VIDEOLAYOUTMODE.__helper]],,[r.ConferenceError],,],setVLayout2:[,,,1,,,[[3]],,[r.ConferenceError],,],setMainVideoShowMode:[,,,1,,,[[3]],,[r.ConferenceError],,],setVideoListMode:[,,,1,,,[[7]],,,,],refuseOpenVideo:[,,,1,,,[[2]],,,,],getVideoSetting:[,,,1,,[o.VideoSetting],[[2]],,[r.ConferenceError],,],setCamera:[,,,1,,,[[2],[o.VideoSetting]],,[r.ConferenceError],,],setCameraById:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,],setVideoPolling:[,,,1,,,[[1],[3]],,[r.ConferenceError],,],updatePollingVideo:[,,,1,,,[["Conference.UsrCamIDListHelper"]],,[r.ConferenceError],,],updatePollingVideo2:[,,,1,,,[["Conference.UsrCamIDListHelper"],[7]],,[r.ConferenceError],,],updateVideoList:[,,,1,,,[[7]],,[r.ConferenceError],,],getVideoPollingState:[,,,1,,[1],,[["Conference.UsrCamIDListHelper"],[3]],[r.ConferenceError],,],updateAllCameraInfos:[,,,1,,,[[7]],,[r.ConferenceError],,],setOpenedCameraNumber:[,,,1,,,[["Ice.ShortSeqHelper"]],,[r.ConferenceError],,],startAdjustDirection:[,,,1,,,[[o.UsrCamID],[3]],,[r.ConferenceError],,],startAdjustZoom:[,,,1,,,[[o.UsrCamID],[3]],,[r.ConferenceError],,],stopAdjustDirection:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,],stopAdjustZoom:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,]}),i.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},6806:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=n.Slice;o.WB_BAKIMG_TYPE=s.defineEnum([["WB_BAKIMG_NULL",0],["WB_BAKIMG_EMF",1],["WB_BAKIMG_JPG",2],["WB_BAKIMG_HTML",3]]),o.WB_ELEMENT_ZPOS=s.defineEnum([["WB_ELEMENT_ZTOP",0],["WB_ELEMENT_ZBOTTOM",1]]),o.ElementID=s.defineStruct((function(e,t){this.ownerID=void 0!==e?e:0,this.ID=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.ownerID),e.writeShort(this.ID)}),(function(e){this.ownerID=e.readShort(),this.ID=e.readShort()}),4,!0),s.defineSequence(o,"ElementIDSeqHelper","Conference.ElementID",!0),o.ElementPos=s.defineStruct((function(e,t,i){this.eID=void 0!==e?e:new o.ElementID,this.left=void 0!==t?t:0,this.top=void 0!==i?i:0}),!0,(function(e){o.ElementID.write(e,this.eID),e.writeInt(this.left),e.writeInt(this.top)}),(function(e){this.eID=o.ElementID.read(e,this.eID),this.left=e.readInt(),this.top=e.readInt()}),12,!0),s.defineSequence(o,"ElementPosSeqHelper","Conference.ElementPos",!0),o.ElementData=s.defineStruct((function(e,t,i,n,r,s,a){this.eID=void 0!==e?e:new o.ElementID,this.orderId=void 0!==t?t:0,this.left=void 0!==i?i:0,this.top=void 0!==n?n:0,this.type=void 0!==r?r:0,this.noused=void 0!==s?s:0,this.data=void 0!==a?a:null}),!0,(function(e){o.ElementID.write(e,this.eID),e.writeInt(this.orderId),e.writeInt(this.left),e.writeInt(this.top),e.writeInt(this.type),e.writeInt(this.noused),o.ByteListHelper.write(e,this.data)}),(function(e){this.eID=o.ElementID.read(e,this.eID),this.orderId=e.readInt(),this.left=e.readInt(),this.top=e.readInt(),this.type=e.readInt(),this.noused=e.readInt(),this.data=o.ByteListHelper.read(e)}),25,!1),s.defineSequence(o,"ElementSeqHelper","Conference.ElementData",!1),o.IndicatorData=s.defineStruct((function(e,t,i,n,r,o){this.termId=void 0!==e?e:0,this.pageNo=void 0!==t?t:0,this.x=void 0!==i?i:0,this.y=void 0!==n?n:0,this.msg=void 0!==r?r:"",this.lifeSec=void 0!==o?o:0}),!0,(function(e){e.writeInt(this.termId),e.writeInt(this.pageNo),e.writeInt(this.x),e.writeInt(this.y),e.writeString(this.msg),e.writeByte(this.lifeSec)}),(function(e){this.termId=e.readInt(),this.pageNo=e.readInt(),this.x=e.readInt(),this.y=e.readInt(),this.msg=e.readString(),this.lifeSec=e.readByte()}),18,!1),s.defineSequence(o,"IndicatorDataSeqHelper","Conference.IndicatorData",!1),o.PageData=s.defineStruct((function(e,t,i,n){this.pageNo=void 0!==e?e:0,this.imgType=void 0!==t?t:o.WB_BAKIMG_TYPE.WB_BAKIMG_NULL,this.imgResourceID=void 0!==i?i:"",this.elementList=void 0!==n?n:null}),!0,(function(e){e.writeInt(this.pageNo),o.WB_BAKIMG_TYPE.__write(e,this.imgType),e.writeString(this.imgResourceID),o.ElementSeqHelper.write(e,this.elementList)}),(function(e){this.pageNo=e.readInt(),this.imgType=o.WB_BAKIMG_TYPE.__read(e),this.imgResourceID=e.readString(),this.elementList=o.ElementSeqHelper.read(e)}),7,!1),s.defineSequence(o,"PageDataSeqHelper","Conference.PageData",!1),o.WhiteBoardData=s.defineStruct((function(e,t){this.descData=void 0!==e?e:new o.WhiteBoardDescribe,this.pageDataList=void 0!==t?t:null}),!0,(function(e){o.WhiteBoardDescribe.write(e,this.descData),o.PageDataSeqHelper.write(e,this.pageDataList)}),(function(e){this.descData=o.WhiteBoardDescribe.read(e,this.descData),this.pageDataList=o.PageDataSeqHelper.read(e)}),38,!1),s.defineSequence(o,"WhiteBoardDataSeqHelper","Conference.WhiteBoardData",!1),s.defineDictionary(o,"PageToDatas","PageToDatasHelper","Ice.IntHelper","Conference.PageData",!1,void 0,void 0,n.HashMap.compareEquals),o.WhiteBoardCtrl=s.defineObject(void 0,n.Object,void 0,0,["::Conference::WhiteBoardCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.WhiteBoardCtrlPrx=s.defineProxy(n.ObjectPrx,o.WhiteBoardCtrl.ice_staticId,void 0),s.defineOperations(o.WhiteBoardCtrl,o.WhiteBoardCtrlPrx,{setContainerSize:[,,,1,,,[[3],[3]],,[r.ConferenceError],,],create:[,,,1,,,[[o.WhiteBoardDescribe]],,[r.ConferenceError],,],importPage:[,,,1,,,[[o.TabID],["Conference.PageDataSeqHelper"]],,[r.ConferenceError],,],close:[,,,1,,,[[o.TabID]],,[r.ConferenceError],,],changeName:[,,,1,,,[[o.TabID],[7]],,[r.ConferenceError],,],changeScale:[,,,1,,,[[o.TabID],[o.WB_SCALE_TYPE.__helper]],,[r.ConferenceError],,],changeRatote:[,,,1,,,[[o.TabID],[o.WB_ROTATE_TYPE.__helper]],,[r.ConferenceError],,],setCurrentPage:[,,,1,,,[[o.TabID],[3],[3],[3]],,[r.ConferenceError],,],showThumPage:[,,,1,,,[[o.TabID],[1]],,[r.ConferenceError],,],addElement:[,,,1,,,[[o.TabID],[3],[o.ElementData]],,[r.ConferenceError],,],addElementEx:[,,,1,,,[[o.TabID],[3],["Conference.ElementSeqHelper"]],,[r.ConferenceError],,],moveElement:[,,,1,,,[[o.TabID],[3],["Conference.ElementPosSeqHelper"]],,[r.ConferenceError],,],modifyElement:[,,,1,,,[[o.TabID],[3],[o.ElementData]],,[r.ConferenceError],,],delElement:[,,,1,,,[[o.TabID],[3],["Conference.ElementIDSeqHelper"]],,[r.ConferenceError],,],setElementZPos:[,,,1,,,[[o.TabID],[3],[o.WB_ELEMENT_ZPOS.__helper]],,[r.ConferenceError],,],setIndicator:[,,,1,,,[[o.TabID],[o.IndicatorData]],,[r.ConferenceError],,],setHotspot:[,,,1,,,[[o.TabID],[3],[3],[3]],,[r.ConferenceError],,],queryIndicator:[,,,1,,["Conference.IndicatorDataSeqHelper"],[[o.TabID]],,[r.ConferenceError],,],queryAllBoardList:[,,,1,,["Conference.WhiteBoardDescribeSeqHelper"],,,[r.ConferenceError],,],queryElementByIDs:[,,,1,,["Conference.PageToDatasHelper"],[[o.TabID],["Ice.IntSeqHelper"]],,[r.ConferenceError],,],queryPageElementByIDs:[,,,1,,["Conference.ElementSeqHelper"],[[o.TabID],[3],["Conference.ElementIDSeqHelper"]],,[r.ConferenceError],,],setMarkTerms:[,,,1,,,[[o.TabID],[1],["Ice.ShortSeqHelper"]],,[r.ConferenceError],,]}),o.WhiteBoardCallback=s.defineObject(void 0,n.Object,void 0,0,["::Conference::WhiteBoardCallback","::Ice::Object"],-1,void 0,void 0,!1),o.WhiteBoardCallbackPrx=s.defineProxy(n.ObjectPrx,o.WhiteBoardCallback.ice_staticId,void 0),s.defineOperations(o.WhiteBoardCallback,o.WhiteBoardCallbackPrx,{notifySetContainerSize:[,,,,,,[[3],[3],[2]],,,,],notifyCreate:[,,,,,,[[o.WhiteBoardDescribe],[2]],,,,],notifyImportPage:[,,,,,,[[o.TabID],["Conference.PageDataSeqHelper"],[2]],,,,],notifyClose:[,,,,,,[[o.TabID],[2]],,,,],notifyChangeName:[,,,,,,[[o.TabID],[7],[2]],,,,],notifyChangeScale:[,,,,,,[[o.TabID],[o.WB_SCALE_TYPE.__helper],[2]],,,,],notifyChangeRotate:[,,,,,,[[o.TabID],[o.WB_ROTATE_TYPE.__helper],[2]],,,,],notifySetCurrentPage:[,,,,,,[[o.TabID],[3],[3],[3],[2]],,,,],notifyShowThumPage:[,,,,,,[[o.TabID],[1],[2]],,,,],notifyAddElement:[,,,,,,[[o.TabID],[3],[o.ElementData],[2]],,,,],notifyAddElementEx:[,,,,,,[[o.TabID],[3],["Conference.ElementSeqHelper"],[2]],,,,],notifyMoveElement:[,,,,,,[[o.TabID],[3],["Conference.ElementPosSeqHelper"],[2]],,,,],notifyModifyElement:[,,,,,,[[o.TabID],[3],[o.ElementData],[2]],,,,],notifyDelElement:[,,,,,,[[o.TabID],[3],["Conference.ElementIDSeqHelper"],[2]],,,,],notifySetElementZPos:[,,,,,,[[o.TabID],[3],[o.WB_ELEMENT_ZPOS.__helper],[2]],,,,],notifySetIndicator:[,,,,,,[[o.TabID],[o.IndicatorData],[2]],,,,],notifySetHotspot:[,,,,,,[[o.TabID],[3],[3],[3],[2]],,,,],notifySetMarkTerms:[,,,,,,[[o.TabID],[1],["Ice.ShortSeqHelper"]],,,,]}),i.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},1457:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=1457,e.exports=t},9228:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=t("FileServer/FSCommon").FileServer,s=t("NetDisk/NDFilesystem").NetDiskService,a=n.Slice,c=r.module("DocConverter");a.defineSequence(c,"StringListHelper","Ice.StringHelper",!1),c.DocConverterException=a.defineUserException((function(e,t,i){n.UserException.call(this,i),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),n.UserException,"DocConverter::DocConverterException",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),c.TaskNotExistException=a.defineUserException((function(e,t,i){c.DocConverterException.call(this,e,t,i)}),c.DocConverterException,"DocConverter::TaskNotExistException",void 0,void 0,!1,!1),c.ConversionException=a.defineUserException((function(e,t,i){c.DocConverterException.call(this,e,t,i)}),c.DocConverterException,"DocConverter::ConversionException",void 0,void 0,!1,!1),c.ConversionModuleException=a.defineUserException((function(e,t,i){c.DocConverterException.call(this,e,t,i)}),c.DocConverterException,"DocConverter::ConversionModuleException",void 0,void 0,!1,!1),c.TaskState=a.defineEnum([["PENDING",0],["DOWNLOADING",1],["CONVERTING",2],["UPLOADING",3],["DONE",4]]),a.defineDictionary(c,"ParamDict","ParamDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),c.DocConvertRequest=a.defineStruct((function(e,t,i,n,r,s,a,c){this.confId=void 0!==e?e:0,this.ownerId=void 0!==t?t:0,this.fileName=void 0!==i?i:"",this.md5=void 0!==n?n:"",this.fType=void 0!==r?r:o.FileType.FT_NORMAL,this.size=void 0!==s?s:0,this.originSize=void 0!==a?a:0,this.param=void 0!==c?c:null}),!1,(function(e){e.writeInt(this.confId),e.writeShort(this.ownerId),e.writeString(this.fileName),e.writeString(this.md5),o.FileType.__write(e,this.fType),e.writeLong(this.size),e.writeLong(this.originSize),c.ParamDictHelper.write(e,this.param)}),(function(e){this.confId=e.readInt(),this.ownerId=e.readShort(),this.fileName=e.readString(),this.md5=e.readString(),this.fType=o.FileType.__read(e),this.size=e.readLong(),this.originSize=e.readLong(),this.param=c.ParamDictHelper.read(e)}),26,!1),c.DocConvertResponse=a.defineStruct((function(e,t,i,n){this.rsltType=void 0!==e?e:0,this.width=void 0!==t?t:0,this.height=void 0!==i?i:0,this.fileList=void 0!==n?n:null}),!0,(function(e){e.writeInt(this.rsltType),e.writeInt(this.width),e.writeInt(this.height),c.StringListHelper.write(e,this.fileList)}),(function(e){this.rsltType=e.readInt(),this.width=e.readInt(),this.height=e.readInt(),this.fileList=c.StringListHelper.read(e)}),13,!1),c.FSConverter=a.defineObject(void 0,n.Object,void 0,0,["::DocConverter::FSConverter","::Ice::Object"],-1,void 0,void 0,!1),c.FSConverterPrx=a.defineProxy(n.ObjectPrx,c.FSConverter.ice_staticId,void 0),a.defineOperations(c.FSConverter,c.FSConverterPrx,{convert:[,,,1,,[7],[[c.DocConvertRequest]],,[c.DocConverterException],,],getTaskState:[,,,1,,[c.TaskState.__helper],[[7]],[[c.DocConvertResponse]],[c.DocConverterException],,],cancelTask:[,,,1,,,[[7]],,[c.DocConverterException],,]}),c.NDConverter=a.defineObject(void 0,n.Object,void 0,0,["::DocConverter::NDConverter","::Ice::Object"],-1,void 0,void 0,!1),c.NDConverterPrx=a.defineProxy(n.ObjectPrx,c.NDConverter.ice_staticId,void 0),a.defineOperations(c.NDConverter,c.NDConverterPrx,{convert:[,,,1,,[7],[[s.StatInfo]],,[c.DocConverterException],,],cancelTask:[,,,1,,,[[7]],,[c.DocConverterException],,]}),i.DocConverter=c}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(6995):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},6995:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=6995,e.exports=t},8588:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=n.Slice,s=r.module("FileServer");o.defineSequence(s,"DataSeqHelper","Ice.ByteHelper",!0),o.defineSequence(s,"LongIntArrayHelper","Ice.LongHelper",!0),o.defineSequence(s,"StringListHelper","Ice.StringHelper",!1),o.defineDictionary(s,"OptField","OptFieldHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),s.FileType=o.defineEnum([["FT_NORMAL",0],["FT_PROGRAM",1]]),s.FileStatus=o.defineEnum([["FS_UPLOADING",0],["FS_COMPLETE",1]]),s.ConferenceType=o.defineEnum([["CONF_PROVISIONAL",0],["CONF_PERIODIC",1],["CONF_FIXED",2]]),s.PrivilegeAuth=o.defineStruct((function(e,t){this.challengeStr=void 0!==e?e:"",this.accessSecret=void 0!==t?t:""}),!0,(function(e){e.writeString(this.challengeStr),e.writeString(this.accessSecret)}),(function(e){this.challengeStr=e.readString(),this.accessSecret=e.readString()}),2,!1),s.LoginRequest=o.defineStruct((function(e,t,i){this.confId=void 0!==e?e:0,this.termId=void 0!==t?t:0,this.auth=void 0!==i?i:new s.PrivilegeAuth}),!0,(function(e){e.writeLong(this.confId),e.writeShort(this.termId),s.PrivilegeAuth.write(e,this.auth)}),(function(e){this.confId=e.readLong(),this.termId=e.readShort(),this.auth=s.PrivilegeAuth.read(e,this.auth)}),12,!1),s.SessionBase=o.defineObject(void 0,n.Object,void 0,0,["::FileServer::SessionBase","::Ice::Object"],-1,void 0,void 0,!1),s.SessionBasePrx=o.defineProxy(n.ObjectPrx,s.SessionBase.ice_staticId,void 0),o.defineOperations(s.SessionBase,s.SessionBasePrx,{refresh:[,,,,,,,,,,],destroy:[,,,,,,,,,,]}),s.FSExcept=o.defineUserException((function(e,t,i){n.UserException.call(this,i),this.errNo=void 0!==e?e:0,this.errMsg=void 0!==t?t:""}),n.UserException,"FileServer::FSExcept",(function(e){e.writeInt(this.errNo),e.writeString(this.errMsg)}),(function(e){this.errNo=e.readInt(),this.errMsg=e.readString()}),!1,!1),Object.defineProperty(s,"FS_ERROR_UNKNOWN",{value:-1}),s.FSError=o.defineEnum([["FS_OK",0],["FS_REQUEST_TOO_FREQUENT",1],["FS_INVALID_CHALLENGE_STRING",2],["FS_AUTH_FAILED",3],["FS_INVALID_CONFID",4],["FS_INSUFFICIENT_PRIVILEGE",5],["FS_PERMISSION_DENIED",6],["FS_ACCESS_DENIED",7],["FS_DEPLOYMENT_ERROR",8],["FS_APPLICATION_NOT_REGISTRY",9],["FS_FILE_ALREADY_EXISTS",10],["FS_CONFERENCE_NOT_EXISTS",11],["FS_NO_ENOUGH_DISK_SPACE",12],["FS_INVALID_TERMID",13],["FS_PUSHTASK_ALREADY_EXISTS",14],["FS_INVALID_PUSHID",15],["FS_PUSHTASK_ALREADY_CANCEL",16],["FS_CONF_DISK_SPACE_LIMIT_EXCEEDED",17],["FS_INCONSISTENT_DATA_VALIDATION",18],["FS_FILE_NOT_EXISTS",19],["FS_FILE_ALREADY_DELETE",20],["FS_FILE_ALREADY_UPDATE",21],["FS_REJECT_BY_FLOW_CONTROL",22],["FS_CONVERT_TASK_NOT_EXISTS",23],["FS_CONVERT_TASK_ERROR",24]]),s.DocConversionException=o.defineUserException((function(e,t,i){s.FSExcept.call(this,e,t,i)}),s.FSExcept,"FileServer::DocConversionException",void 0,void 0,!1,!1),Object.defineProperty(s,"FS_FC_LEVEL_0",{value:0}),Object.defineProperty(s,"FS_FC_LEVEL_MAX",{value:50}),s.FSFlowCtrlData=o.defineStruct((function(e,t,i,n,r){this.lv=void 0!==e?e:0,this.confTotal=void 0!==t?t:0,this.clientTotal=void 0!==i?i:0,this.bandwith=void 0!==n?n:0,this.requestPerSec=void 0!==r?r:0}),!0,(function(e){e.writeInt(this.lv),e.writeInt(this.confTotal),e.writeInt(this.clientTotal),e.writeInt(this.bandwith),e.writeInt(this.requestPerSec)}),(function(e){this.lv=e.readInt(),this.confTotal=e.readInt(),this.clientTotal=e.readInt(),this.bandwith=e.readInt(),this.requestPerSec=e.readInt()}),20,!0),i.FileServer=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(1482):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},1482:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=1482,e.exports=t},7613:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=n.Slice,s=r.module("LogSpace");s.LogLevel=o.defineEnum([["debug",0],["info",1],["warning",2],["error",3]]),s.FatalLogInfo=o.defineStruct((function(e,t,i,n,r,o,s,a){this.version=void 0!==e?e:"",this.conferenceID=void 0!==t?t:0,this.userID=void 0!==i?i:0,this.client=void 0!==n?n:"",this.clientIP=void 0!==r?r:"",this.logDate=void 0!==o?o:"",this.content=void 0!==s?s:"",this.dumpData=void 0!==a?a:null}),!0,(function(e){e.writeString(this.version),e.writeInt(this.conferenceID),e.writeInt(this.userID),e.writeString(this.client),e.writeString(this.clientIP),e.writeString(this.logDate),e.writeString(this.content),n.ByteSeqHelper.write(e,this.dumpData)}),(function(e){this.version=e.readString(),this.conferenceID=e.readInt(),this.userID=e.readInt(),this.client=e.readString(),this.clientIP=e.readString(),this.logDate=e.readString(),this.content=e.readString(),this.dumpData=n.ByteSeqHelper.read(e)}),14,!1),s.AppendData=o.defineStruct((function(e,t,i){this.uuid=void 0!==e?e:"",this.type=void 0!==t?t:"",this.data=void 0!==i?i:null}),!0,(function(e){e.writeString(this.uuid),e.writeString(this.type),n.ByteSeqHelper.write(e,this.data)}),(function(e){this.uuid=e.readString(),this.type=e.readString(),this.data=n.ByteSeqHelper.read(e)}),3,!1),o.defineSequence(s,"AppendDataSeqHelper","LogSpace.AppendData",!1),s.UsrReportInfo=o.defineStruct((function(e,t,i,n,r,o,s,a,c){this.version=void 0!==e?e:"",this.conferenceID=void 0!==t?t:0,this.userID=void 0!==i?i:0,this.client=void 0!==n?n:"",this.clientIP=void 0!==r?r:"",this.reportDate=void 0!==o?o:"",this.contact=void 0!==s?s:"",this.content=void 0!==a?a:"",this.appendDatas=void 0!==c?c:null}),!0,(function(e){e.writeString(this.version),e.writeInt(this.conferenceID),e.writeInt(this.userID),e.writeString(this.client),e.writeString(this.clientIP),e.writeString(this.reportDate),e.writeString(this.contact),e.writeString(this.content),s.AppendDataSeqHelper.write(e,this.appendDatas)}),(function(e){this.version=e.readString(),this.conferenceID=e.readInt(),this.userID=e.readInt(),this.client=e.readString(),this.clientIP=e.readString(),this.reportDate=e.readString(),this.contact=e.readString(),this.content=e.readString(),this.appendDatas=s.AppendDataSeqHelper.read(e)}),15,!1),s.ClientLogServer=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::LogSpace::ClientLogServer"],-1,void 0,void 0,!1),s.ClientLogServerPrx=o.defineProxy(n.ObjectPrx,s.ClientLogServer.ice_staticId,void 0),o.defineOperations(s.ClientLogServer,s.ClientLogServerPrx,{log:[,,,,,,[["Ice.ByteSeqHelper"]],,,,],logFatal:[,,,,,,[[s.FatalLogInfo]],,,,],usrReport:[,,,,,,[[s.UsrReportInfo]],,,,],logDetail:[,,,,,,[[3],[7],["Ice.ByteSeqHelper"]],,,,],sendCmd:[,,,,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],,,]}),i.LogSpace=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(535):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},535:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=535,e.exports=t},650:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=n.Slice,s=r.module("SendCmd");s.CmdError=o.defineUserException((function(e,t,i){n.UserException.call(this,i),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),n.UserException,"SendCmd::CmdError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),s.UnknowErr=o.defineUserException((function(e,t,i){s.CmdError.call(this,e,t,i)}),s.CmdError,"SendCmd::UnknowErr",void 0,void 0,!1,!1),s.CmdNotFound=o.defineUserException((function(e,t,i){s.CmdError.call(this,e,t,i)}),s.CmdError,"SendCmd::CmdNotFound",void 0,void 0,!1,!1),s.CmdNotImplement=o.defineUserException((function(e,t,i){s.CmdError.call(this,e,t,i)}),s.CmdError,"SendCmd::CmdNotImplement",void 0,void 0,!1,!1),s.AppException=o.defineUserException((function(e,t,i){s.CmdError.call(this,e,t,i)}),s.CmdError,"SendCmd::AppException",void 0,void 0,!1,!1),s.AppReturnInvalid=o.defineUserException((function(e,t,i){s.CmdError.call(this,e,t,i)}),s.CmdError,"SendCmd::AppReturnInvalid",void 0,void 0,!1,!1),s.SessionInvalid=o.defineUserException((function(e,t,i){s.CmdError.call(this,e,t,i)}),s.CmdError,"SendCmd::SessionInvalid",void 0,void 0,!1,!1),s.TargetInvalid=o.defineUserException((function(e,t,i){s.CmdError.call(this,e,t,i)}),s.CmdError,"SendCmd::TargetInvalid",void 0,void 0,!1,!1),Object.defineProperty(s,"DATATYPE_ALPHA",{value:1}),s.Cmd=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::SendCmd::Cmd"],-1,void 0,void 0,!1),s.CmdPrx=o.defineProxy(n.ObjectPrx,s.Cmd.ice_staticId,void 0),o.defineOperations(s.Cmd,s.CmdPrx,{sendCmd:[,,,1,,[7],[[7]],,[s.CmdError],,],sendBuffer:[,,,1,,[7],[[7],["Ice.ByteSeqHelper"]],,[s.CmdError],,]}),i.SendCmd=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(8649):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},8649:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=8649,e.exports=t},5672:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("NetDisk/NDCommon").NetDiskService),o=n.Slice;r.FSIOSession=o.defineObject(void 0,n.Object,[r.NDSessionBase],1,["::Ice::Object","::NetDiskService::FSIOSession","::NetDiskService::JsonNetDisk","::NetDiskService::NDSessionBase"],-1,void 0,void 0,!1),r.FSIOSessionPrx=o.defineProxy(n.ObjectPrx,r.FSIOSession.ice_staticId,[r.NDSessionBasePrx]),o.defineOperations(r.FSIOSession,r.FSIOSessionPrx,{write:[,,,1,,,[[4],["NetDiskService.DataSeqHelper"]],,[r.NetDiskException],,],read:[,,,1,,,[[4],[4]],[["NetDiskService.DataSeqHelper"]],[r.NetDiskException],,],getFileSize:[,,,1,,[4],,,[r.NetDiskException],,],getServerNo:[,,,1,,[3],,,[r.NetDiskException],,]}),o.defineSequence(r,"FSIOSessionProxySeqHelper","NetDiskService.FSIOSessionPrx",!1),r.FileStorageGateway=o.defineObject(void 0,n.Object,[r.JsonNetDisk],1,["::Ice::Object","::NetDiskService::FileStorageGateway","::NetDiskService::JsonNetDisk"],-1,void 0,void 0,!1),r.FileStorageGatewayPrx=o.defineProxy(n.ObjectPrx,r.FileStorageGateway.ice_staticId,[r.JsonNetDiskPrx]),o.defineOperations(r.FileStorageGateway,r.FileStorageGatewayPrx,{createFSIOSession:[,,,1,,["NetDiskService.FSIOSessionPrx"],[[7],[7],[7]],,[r.NetDiskException],,],fileUploadCompleted:[,,,1,,[7],[[7],[1]],,[r.NetDiskException],,],cacheFile:[,,,1,,,[[7],[7]],,[r.NetDiskException],,],deleteFileList:[,,,1,,,[["NetDiskService.StringSeqHelper"]],,[r.NetDiskException],,]}),o.defineSequence(r,"FSGatewayProxySeqHelper","NetDiskService.FileStorageGatewayPrx",!1),r.FileStorageGatewayStat=o.defineStruct((function(e,t,i){this.servNo=void 0!==e?e:0,this.id=void 0!==t?t:"",this.proxy=void 0!==i?i:null}),!1,(function(e){e.writeInt(this.servNo),e.writeString(this.id),r.FileStorageGatewayPrx.write(e,this.proxy)}),(function(e){this.servNo=e.readInt(),this.id=e.readString(),this.proxy=r.FileStorageGatewayPrx.read(e,this.proxy)}),7,!1),r.FileStorageGatewayKeepAliveSession=o.defineObject(void 0,n.Object,[r.NDSessionBase],1,["::Ice::Object","::NetDiskService::FileStorageGatewayKeepAliveSession","::NetDiskService::JsonNetDisk","::NetDiskService::NDSessionBase"],-1,void 0,void 0,!1),r.FileStorageGatewayKeepAliveSessionPrx=o.defineProxy(n.ObjectPrx,r.FileStorageGatewayKeepAliveSession.ice_staticId,[r.NDSessionBasePrx]),o.defineOperations(r.FileStorageGatewayKeepAliveSession,r.FileStorageGatewayKeepAliveSessionPrx,{updateStat:[,,,1,,,[[r.FileStorageGatewayStat]],,[r.NetDiskException],,]}),r.NDFileStorageGateway=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::NetDiskService::NDFileStorageGateway"],-1,void 0,void 0,!1),r.NDFileStorageGatewayPrx=o.defineProxy(n.ObjectPrx,r.NDFileStorageGateway.ice_staticId,void 0),o.defineOperations(r.NDFileStorageGateway,r.NDFileStorageGatewayPrx,{registerFSGW:[,,,1,,["NetDiskService.FileStorageGatewayKeepAliveSessionPrx"],[[r.FileStorageGatewayStat]],,[r.NetDiskException],,]}),i.NetDiskService=r}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(7119):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},6957:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=n.Slice,s=r.module("NetDiskService");o.defineSequence(s,"DataSeqHelper","Ice.ByteHelper",!0),o.defineSequence(s,"StringSeqHelper","Ice.StringHelper",!1),o.defineDictionary(s,"DataDict","DataDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),o.defineSequence(s,"DataDictSeqHelper","NetDiskService.DataDictHelper",!1),s.NetDiskException=o.defineUserException((function(e,t,i){n.UserException.call(this,i),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),n.UserException,"NetDiskService::NetDiskException",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),s.JsonNetDisk=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::NetDiskService::JsonNetDisk"],-1,void 0,void 0,!1),s.JsonNetDiskPrx=o.defineProxy(n.ObjectPrx,s.JsonNetDisk.ice_staticId,void 0),o.defineOperations(s.JsonNetDisk,s.JsonNetDiskPrx,{sendCmd:[,,,1,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[s.NetDiskException],,]}),s.NDSessionBase=o.defineObject(void 0,n.Object,[s.JsonNetDisk],2,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NDSessionBase"],-1,void 0,void 0,!1),s.NDSessionBasePrx=o.defineProxy(n.ObjectPrx,s.NDSessionBase.ice_staticId,[s.JsonNetDiskPrx]),o.defineOperations(s.NDSessionBase,s.NDSessionBasePrx,{getSessionTimeout:[,2,2,1,,[3],,,,,],keepAlive:[,2,2,1,,,,,[s.NetDiskException],,],destroy:[,,,1,,,,,,,]}),s.InvalidFileDescriptor=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::InvalidFileDescriptor",void 0,void 0,!1,!1),s.InvalidUserId=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::InvalidUserId",void 0,void 0,!1,!1),s.InvalidCompanyId=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::InvalidCompanyId",void 0,void 0,!1,!1),s.InvalidConfId=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::InvalidConfId",void 0,void 0,!1,!1),s.InvalidTaskId=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::InvalidTaskId",void 0,void 0,!1,!1),s.PermissionDenied=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::PermissionDenied",void 0,void 0,!1,!1),s.InvalidAccessMode=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::InvalidAccessMode",void 0,void 0,!1,!1),s.TaskIdAlreadyExists=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::TaskIdAlreadyExists",void 0,void 0,!1,!1),s.InvalidFileName=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::InvalidFileName",void 0,void 0,!1,!1),s.FileAlreadyExists=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::FileAlreadyExists",void 0,void 0,!1,!1),s.FdfsFileAlreadyExists=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::FdfsFileAlreadyExists",void 0,void 0,!1,!1),s.FileBuffering=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::FileBuffering",void 0,void 0,!1,!1),s.FileOrDirectoryNotExists=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::FileOrDirectoryNotExists",void 0,void 0,!1,!1),s.InconsistentDataValidation=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::InconsistentDataValidation",void 0,void 0,!1,!1),s.TransformNotRecord=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::TransformNotRecord",void 0,void 0,!1,!1),s.TransformNotComplete=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::TransformNotComplete",void 0,void 0,!1,!1),s.AlreadyTransformExcept=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::AlreadyTransformExcept",void 0,void 0,!1,!1),s.ProgressTransformExcept=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::ProgressTransformExcept",void 0,void 0,!1,!1),s.TimeoutTransformExcept=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::TimeoutTransformExcept",void 0,void 0,!1,!1),s.FSNodeAlreadyExists=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::FSNodeAlreadyExists",void 0,void 0,!1,!1),s.AlreadyImportExcept=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::AlreadyImportExcept",void 0,void 0,!1,!1),s.notTransformServer=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::notTransformServer",void 0,void 0,!1,!1),s.notAvailableTransformServer=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::notAvailableTransformServer",void 0,void 0,!1,!1),s.ImportSameMd5=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::ImportSameMd5",void 0,void 0,!1,!1),s.ExceedTheCapacityLimit=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::ExceedTheCapacityLimit",void 0,void 0,!1,!1),s.NotSupportExcept=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::NotSupportExcept",void 0,void 0,!1,!1),s.ServerInternalError=o.defineUserException((function(e,t,i){s.NetDiskException.call(this,e,t,i)}),s.NetDiskException,"NetDiskService::ServerInternalError",void 0,void 0,!1,!1),i.NetDiskService=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(7119):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},7957:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("NetDisk/NDCommon").NetDiskService),o=n.Slice;r.StatInfo=o.defineStruct((function(e,t,i,n,r,o){this.name=void 0!==e?e:"",this.path=void 0!==t?t:"",this.md5=void 0!==i?i:"",this.size=void 0!==n?n:0,this.ctime=void 0!==r?r:"",this.attributes=void 0!==o?o:null}),!1,(function(e){e.writeString(this.name),e.writeString(this.path),e.writeString(this.md5),e.writeLong(this.size),e.writeString(this.ctime),r.DataDictHelper.write(e,this.attributes)}),(function(e){this.name=e.readString(),this.path=e.readString(),this.md5=e.readString(),this.size=e.readLong(),this.ctime=e.readString(),this.attributes=r.DataDictHelper.read(e)}),13,!1),o.defineSequence(r,"FileNodeSeqHelper","NetDiskService.StatInfo",!1),o.defineSequence(r,"DirNodeSeqHelper","Ice.ObjectHelper",!1,"NetDiskService.DirNode"),r.DirNode=o.defineObject((function(e,t,i,r,o){n.Object.call(this),this.name=void 0!==e?e:"",this.path=void 0!==t?t:"/",this.attributes=void 0!==i?i:null,this.subDirs=void 0!==r?r:null,this.files=void 0!==o?o:null}),n.Object,void 0,1,["::Ice::Object","::NetDiskService::DirNode"],-1,(function(e){e.writeString(this.name),e.writeString(this.path),r.DataDictHelper.write(e,this.attributes),r.DirNodeSeqHelper.write(e,this.subDirs),r.FileNodeSeqHelper.write(e,this.files)}),(function(e){this.name=e.readString(),this.path=e.readString(),this.attributes=r.DataDictHelper.read(e),this.subDirs=r.DirNodeSeqHelper.read(e),this.files=r.FileNodeSeqHelper.read(e)}),!1),r.DirNodePrx=o.defineProxy(n.ObjectPrx,r.DirNode.ice_staticId,void 0),o.defineOperations(r.DirNode,r.DirNodePrx),r.ConvertStauts=o.defineStruct((function(e,t,i){this.status=void 0!==e?e:0,this.fileList=void 0!==t?t:null,this.attributes=void 0!==i?i:null}),!1,(function(e){e.writeInt(this.status),r.StringSeqHelper.write(e,this.fileList),r.DataDictHelper.write(e,this.attributes)}),(function(e){this.status=e.readInt(),this.fileList=r.StringSeqHelper.read(e),this.attributes=r.DataDictHelper.read(e)}),6,!1),r.DocData=o.defineStruct((function(e,t,i,n,r){this.owern_id=void 0!==e?e:0,this.owner_type=void 0!==t?t:"",this.name=void 0!==i?i:"",this.attributes=void 0!==n?n:null,this.pageDataList=void 0!==r?r:null}),!1,(function(e){e.writeInt(this.owern_id),e.writeString(this.owner_type),e.writeString(this.name),r.DataDictHelper.write(e,this.attributes),r.FileNodeSeqHelper.write(e,this.pageDataList)}),(function(e){this.owern_id=e.readInt(),this.owner_type=e.readString(),this.name=e.readString(),this.attributes=r.DataDictHelper.read(e),this.pageDataList=r.FileNodeSeqHelper.read(e)}),8,!1),o.defineSequence(r,"DocDataSeqHelper","NetDiskService.DocData",!1),i.NetDiskService=r}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(7119):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},3403:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=t("DocConverter/DocConverter").DocConverter,s=(t("FileServer/FSCommon").FileServer,r.require(e,["NetDisk/FileStorageGateway","NetDisk/NDFilesystem","NetDisk/NDCommon"]).NetDiskService),a=n.Slice;s.NDSession=a.defineObject(void 0,n.Object,[s.NDSessionBase],2,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NDSession","::NetDiskService::NDSessionBase"],-1,void 0,void 0,!1),s.NDSessionPrx=a.defineProxy(n.ObjectPrx,s.NDSession.ice_staticId,[s.NDSessionBasePrx]),a.defineOperations(s.NDSession,s.NDSessionPrx,{listDirTree:[,2,2,1,,["NetDiskService.DirNode",!0],[[7]],,[s.NetDiskException],,!0],listDir:[,2,2,1,,["NetDiskService.DirNode",!0],[[7]],,[s.NetDiskException],,!0],mkdir:[,,,1,,,[[7]],,[s.NetDiskException],,],renameFile:[,,,1,,,[[7],[7]],,[s.NetDiskException],,],renameDir:[,,,1,,,[[7],[7]],,[s.NetDiskException],,],deleteFile:[,,,1,,,[[7]],,[s.NetDiskException],,],deleteDir:[,,,1,,,[[7]],,[s.NetDiskException],,],stat:[,,,1,,[s.StatInfo],[[7]],,[s.NetDiskException],,],getSummary:[,,,1,,,,[["NetDiskService.DataDictHelper"]],[s.NetDiskException],,],beginUpload:[,,,1,,,[[s.StatInfo]],[[7],["NetDiskService.FSGatewayProxySeqHelper"]],[s.NetDiskException],,],endUpload:[,,,1,,,[[7],[7]],,[s.NetDiskException],,],beginDownload:[,,,1,,,[[7]],[["NetDiskService.FSGatewayProxySeqHelper"]],[s.NetDiskException],,],convert:[,,,1,,[7],[[7],["NetDiskService.DataDictHelper"],["NetDiskService.FSIOSessionPrx"]],,[o.DocConverterException,s.NetDiskException],,],getConvertStatus:[,,,1,,[s.ConvertStauts],[[7]],,[o.DocConverterException,s.NetDiskException],,],updateFileAttr:[,,,1,,,[[7],["NetDiskService.DataDictHelper"]],,[s.NetDiskException],,],getHttpUrl:[,2,2,1,,["NetDiskService.StringSeqHelper"],[[7]],,[s.NetDiskException],,]}),s.NDUserSession=a.defineObject(void 0,n.Object,[s.NDSession],4,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NDSession","::NetDiskService::NDSessionBase","::NetDiskService::NDUserSession"],-1,void 0,void 0,!1),s.NDUserSessionPrx=a.defineProxy(n.ObjectPrx,s.NDUserSession.ice_staticId,[s.NDSessionPrx]),a.defineOperations(s.NDUserSession,s.NDUserSessionPrx,{import2Conf:[,,,1,,,[[7],[3],["NetDiskService.DataDictHelper"]],,[s.NetDiskException],,],import2ConfDD:[,,,1,,["NetDiskService.DataDictHelper"],[[7],[3],["NetDiskService.DataDictHelper"]],,[s.NetDiskException],,],save2CompanyNetDisk:[,,,1,,,[[7],[7],["NetDiskService.DataDictHelper"]],,[s.NetDiskException],,]}),s.NDCompanySession=a.defineObject(void 0,n.Object,[s.NDSession],2,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NDCompanySession","::NetDiskService::NDSession","::NetDiskService::NDSessionBase"],-1,void 0,void 0,!1),s.NDCompanySessionPrx=a.defineProxy(n.ObjectPrx,s.NDCompanySession.ice_staticId,[s.NDSessionPrx]),a.defineOperations(s.NDCompanySession,s.NDCompanySessionPrx,{import2Conf:[,,,1,,,[[7],[3],["NetDiskService.DataDictHelper"]],,[s.NetDiskException],,],import2ConfDD:[,,,1,,["NetDiskService.DataDictHelper"],[[7],[3],["NetDiskService.DataDictHelper"]],,[s.NetDiskException],,],save2UserNetDisk:[,,,1,,,[[3],[7],[7],["NetDiskService.DataDictHelper"]],,[s.NetDiskException],,]}),s.NDConfSession=a.defineObject(void 0,n.Object,[s.NDSession],2,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NDConfSession","::NetDiskService::NDSession","::NetDiskService::NDSessionBase"],-1,void 0,void 0,!1),s.NDConfSessionPrx=a.defineProxy(n.ObjectPrx,s.NDConfSession.ice_staticId,[s.NDSessionPrx]),a.defineOperations(s.NDConfSession,s.NDConfSessionPrx,{getConvertList:[,,,1,,["NetDiskService.DocDataSeqHelper"],,,[s.NetDiskException],,]}),s.NDConvertSession=a.defineObject(void 0,n.Object,[s.NDSession],2,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NDConvertSession","::NetDiskService::NDSession","::NetDiskService::NDSessionBase"],-1,void 0,void 0,!1),s.NDConvertSessionPrx=a.defineProxy(n.ObjectPrx,s.NDConvertSession.ice_staticId,[s.NDSessionPrx]),a.defineOperations(s.NDConvertSession,s.NDConvertSessionPrx,{docConvertStateNotice:[,2,2,1,,,[[7],[3],["NetDiskService.DataDictHelper"]],,[s.NetDiskException],,]}),s.NDClient=a.defineObject(void 0,n.Object,[s.JsonNetDisk],2,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NDClient"],-1,void 0,void 0,!1),s.NDClientPrx=a.defineProxy(n.ObjectPrx,s.NDClient.ice_staticId,[s.JsonNetDiskPrx]),a.defineOperations(s.NDClient,s.NDClientPrx,{createUserSession:[,,,1,,["NetDiskService.NDUserSessionPrx"],[[3],[7]],,[s.NetDiskException],,],createCompanySession:[,,,1,,["NetDiskService.NDCompanySessionPrx"],[[3],[7]],,[s.NetDiskException],,],createConfSession:[,,,1,,["NetDiskService.NDConfSessionPrx"],[[3],[7]],,[s.NetDiskException],,],createConvertSession:[,,,1,,["NetDiskService.NDConvertSessionPrx"],[[3],[7]],,[s.NetDiskException],,]}),s.NetDisk=a.defineObject(void 0,n.Object,[s.JsonNetDisk],2,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NetDisk"],-1,void 0,void 0,!1),s.NetDiskPrx=a.defineProxy(n.ObjectPrx,s.NetDisk.ice_staticId,[s.JsonNetDiskPrx]),a.defineOperations(s.NetDisk,s.NetDiskPrx,{createUserNetDisk:[,,,1,,,[[3]],,[s.NetDiskException],,],deleteUserNetDisk:[,2,2,1,,,[[3]],,[s.NetDiskException],,],createCompanyNetDisk:[,,,1,,,[[3],[7]],,[s.NetDiskException],,],deleteCompanyNetDisk:[,2,2,1,,,[[3]],,[s.NetDiskException],,],setCompanyNDAuthToken:[,2,2,1,,,[[3],[7]],,[s.NetDiskException],,],createConfNetDisk:[,,,1,,,[[3],[7]],,[s.NetDiskException],,],deleteConfNetDisk:[,2,2,1,,,[[3]],,[s.NetDiskException],,],setConfNDAuthToken:[,2,2,1,,,[[3],[7]],,[s.NetDiskException],,],clean:[,2,2,1,,,,,[s.NetDiskException],,]}),i.NetDiskService=s}("undefined"!=typeof global&&void 0!==global.process?e:void 0,"undefined"!=typeof global&&void 0!==global.process?i(7119):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},7119:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=7119,e.exports=t},4973:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M.require(e,["Trans/MSPub","Trans/MSRtp"]).MS,o=n.Slice;r.RtcError=o.defineUserException((function(e,t,i){n.UserException.call(this,i),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),n.UserException,"MS::RtcError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),r.UnknowErr=o.defineUserException((function(e,t,i){r.RtcError.call(this,e,t,i)}),r.RtcError,"MS::UnknowErr",void 0,void 0,!1,!1),r.RtcSrv=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::MS::RtcSrv"],-1,void 0,void 0,!1),r.RtcSrvPrx=o.defineProxy(n.ObjectPrx,r.RtcSrv.ice_staticId,void 0),o.defineOperations(r.RtcSrv,r.RtcSrvPrx,{GwAudioAlloc:[,,,1,,[3],[[r.ConferenceInfo],[r.RtpAudioParam],["MS.DictStrParamsHelper"]],[[r.RtpAddress],[2],[7]],,,],GwAudioAlloc2:[,,,1,,[3],[[r.ConferenceInfo],[r.AudioStreamParam],["MS.DictStrParamsHelper"]],[[7],[7]],,,],GwVideoAlloc:[,,,1,,[3],[[r.ConferenceInfo],[r.RtpVideoParam],["MS.DictStrParamsHelper"]],[[r.RtpAddress],[2],[7]],,,],GwVideoAlloc2:[,,,1,,[3],[[r.ConferenceInfo],[r.VideoStreamParam],["MS.DictStrParamsHelper"]],[[7]],,,],GwFree:[,,,1,,,[[3]],,[r.RtcError],,]}),i.MS=r}("undefined"!=typeof global&&void 0!==global.process?e:void 0,"undefined"!=typeof global&&void 0!==global.process?i(6519):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},6519:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=6519,e.exports=t},3330:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=n.Slice,s=r.module("Resm");s.ResmError=o.defineUserException((function(e,t,i){n.UserException.call(this,i),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),n.UserException,"Resm::ResmError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),s.ServerIdNotConfiger=o.defineUserException((function(e,t,i){s.ResmError.call(this,e,t,i)}),s.ResmError,"Resm::ServerIdNotConfiger",void 0,void 0,!1,!1),s.ServerNotEnable=o.defineUserException((function(e,t,i){s.ResmError.call(this,e,t,i)}),s.ResmError,"Resm::ServerNotEnable",void 0,void 0,!1,!1),s.NotAddedToService=o.defineUserException((function(e,t,i){s.ResmError.call(this,e,t,i)}),s.ResmError,"Resm::NotAddedToService",void 0,void 0,!1,!1),s.NoServerAvailable=o.defineUserException((function(e,t,i){s.ResmError.call(this,e,t,i)}),s.ResmError,"Resm::NoServerAvailable",void 0,void 0,!1,!1),s.NotConnected2Db=o.defineUserException((function(e,t,i){s.ResmError.call(this,e,t,i)}),s.ResmError,"Resm::NotConnected2Db",void 0,void 0,!1,!1),s.ResSessionBase=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.ResSessionBasePrx=o.defineProxy(n.ObjectPrx,s.ResSessionBase.ice_staticId,void 0),o.defineOperations(s.ResSessionBase,s.ResSessionBasePrx,{nouse:[,,,,,,,,,,]}),s.InfoResponse=o.defineStruct((function(e,t,i,n){this.serverNo=void 0!==e?e:0,this.domain=void 0!==t?t:0,this.registerInverval=void 0!==i?i:0,this.reportInverval=void 0!==n?n:0}),!0,(function(e){e.writeInt(this.serverNo),e.writeInt(this.domain),e.writeInt(this.registerInverval),e.writeInt(this.reportInverval)}),(function(e){this.serverNo=e.readInt(),this.domain=e.readInt(),this.registerInverval=e.readInt(),this.reportInverval=e.readInt()}),16,!0),Object.defineProperty(s,"SERVER_ACCESS",{value:0}),Object.defineProperty(s,"SERVER_SS",{value:1}),Object.defineProperty(s,"SERVER_CONTROL",{value:2}),Object.defineProperty(s,"SERVER_FILE",{value:3}),Object.defineProperty(s,"SERVER_MIX",{value:4}),Object.defineProperty(s,"SERVER_FN",{value:5}),Object.defineProperty(s,"SERVER_MCU",{value:6}),s.ResmCommon=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::Resm::ResmCommon"],-1,void 0,void 0,!1),s.ResmCommonPrx=o.defineProxy(n.ObjectPrx,s.ResmCommon.ice_staticId,void 0),o.defineOperations(s.ResmCommon,s.ResmCommonPrx,{getSelfInfo:[,,,,,[s.InfoResponse],[[7],[3]],,[s.ResmError],,],getActiveConference:[,,,,,["Ice.IntSeqHelper"],,,[s.ResmError],,]}),o.defineDictionary(s,"ReportDict","ReportDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),o.defineDictionary(s,"DataDict","DataDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),o.defineSequence(s,"IpAddressSeqHelper","Ice.StringHelper",!1),s.NetworkStatus=o.defineStruct((function(e,t){this.latency=void 0!==e?e:0,this.lostRate=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.latency),e.writeInt(this.lostRate)}),(function(e){this.latency=e.readInt(),this.lostRate=e.readInt()}),8,!0),s.NetworkReport=o.defineStruct((function(e,t,i,n,r,o,s,a){this.avgLatency=void 0!==e?e:0,this.maxLatency=void 0!==t?t:0,this.minLatency=void 0!==i?i:0,this.lostRate=void 0!==n?n:0,this.singleLost=void 0!==r?r:0,this.contLostCnt=void 0!==o?o:0,this.contLostPkt=void 0!==s?s:0,this.statisTime=void 0!==a?a:""}),!0,(function(e){e.writeInt(this.avgLatency),e.writeInt(this.maxLatency),e.writeInt(this.minLatency),e.writeInt(this.lostRate),e.writeInt(this.singleLost),e.writeInt(this.contLostCnt),e.writeInt(this.contLostPkt),e.writeString(this.statisTime)}),(function(e){this.avgLatency=e.readInt(),this.maxLatency=e.readInt(),this.minLatency=e.readInt(),this.lostRate=e.readInt(),this.singleLost=e.readInt(),this.contLostCnt=e.readInt(),this.contLostPkt=e.readInt(),this.statisTime=e.readString()}),29,!1),s.PathStatus=o.defineStruct((function(e,t,i,n){this.remoteServerNo=void 0!==e?e:0,this.remoteIP=void 0!==t?t:"",this.netReport=void 0!==i?i:new s.NetworkReport,this.weight=void 0!==n?n:0}),!0,(function(e){e.writeInt(this.remoteServerNo),e.writeString(this.remoteIP),s.NetworkReport.write(e,this.netReport),e.writeInt(this.weight)}),(function(e){this.remoteServerNo=e.readInt(),this.remoteIP=e.readString(),this.netReport=s.NetworkReport.read(e,this.netReport),this.weight=e.readInt()}),38,!1),o.defineSequence(s,"PathStatusSeqHelper","Resm.PathStatus",!1),o.defineDictionary(s,"PathStatusDict","PathStatusDictHelper","Ice.StringHelper","Resm.PathStatusSeqHelper",!1,void 0,void 0,n.ArrayUtil.equals),s.MixSession=o.defineObject(void 0,n.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::MixSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.MixSessionPrx=o.defineProxy(n.ObjectPrx,s.MixSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.MixSession,s.MixSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,[s.ResmError],,]}),s.NetworkProperty=o.defineEnum([["TELECOM",0],["UNICOM",1],["TELEUNI",2],["UNKNOW",3]]),s.MixM=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::Resm::MixM"],-1,void 0,void 0,!1),s.MixMPrx=o.defineProxy(n.ObjectPrx,s.MixM.ice_staticId,void 0),o.defineOperations(s.MixM,s.MixMPrx,{register:[,,,,,["Resm.MixSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,[3],[[3],[3],[s.NetworkProperty.__helper]],,[s.ResmError],,],locateMixAndSs:[,,,,,["Resm.DataDictHelper"],[[3],[3],[3]],,[s.ResmError],,]}),s.SsSession=o.defineObject(void 0,n.Object,[s.ResSessionBase],2,["::Ice::Object","::Resm::ResSessionBase","::Resm::SsSession"],-1,void 0,void 0,!1),s.SsSessionPrx=o.defineProxy(n.ObjectPrx,s.SsSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.SsSession,s.SsSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),s.SsM=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::Resm::SsM"],-1,void 0,void 0,!1),s.SsMPrx=o.defineProxy(n.ObjectPrx,s.SsM.ice_staticId,void 0),o.defineOperations(s.SsM,s.SsMPrx,{register:[,,,,,["Resm.SsSessionPrx"],[[3],[7],[7]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,[3],[[3],[3]],,[s.ResmError],,]}),s.ControlSession=o.defineObject(void 0,n.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::ControlSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.ControlSessionPrx=o.defineProxy(n.ObjectPrx,s.ControlSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.ControlSession,s.ControlSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),s.ControlM=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::Resm::ControlM"],-1,void 0,void 0,!1),s.ControlMPrx=o.defineProxy(n.ObjectPrx,s.ControlM.ice_staticId,void 0),o.defineOperations(s.ControlM,s.ControlMPrx,{register:[,,,,,["Resm.ControlSessionPrx"],[[3],[7],[7]],,[s.ResmError],,],locate:[,,,,,["Resm.DataDictHelper"],[[3],[3],[3],[3]],,[s.ResmError],,]}),s.FileCallback=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::Resm::FileCallback"],-1,void 0,void 0,!1),s.FileCallbackPrx=o.defineProxy(n.ObjectPrx,s.FileCallback.ice_staticId,void 0),o.defineOperations(s.FileCallback,s.FileCallbackPrx,{setFileData:[,,,,,,[["Resm.DataDictHelper"]],,,,]}),s.FileSession=o.defineObject(void 0,n.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::FileSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.FileSessionPrx=o.defineProxy(n.ObjectPrx,s.FileSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.FileSession,s.FileSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),s.FileM=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::Resm::FileM"],-1,void 0,void 0,!1),s.FileMPrx=o.defineProxy(n.ObjectPrx,s.FileM.ice_staticId,void 0),o.defineOperations(s.FileM,s.FileMPrx,{register:[,,,,,["Resm.FileSessionPrx"],[[3],[7],[7],["Resm.FileCallbackPrx"]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,["Resm.DataDictHelper"],[[3],[3]],,[s.ResmError],,]}),o.defineDictionary(s,"ConfMemberDict","ConfMemberDictHelper","Ice.IntHelper","Ice.IntHelper",!0,void 0,void 0),s.AccessSession=o.defineObject(void 0,n.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::AccessSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.AccessSessionPrx=o.defineProxy(n.ObjectPrx,s.AccessSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.AccessSession,s.AccessSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"],["Resm.ConfMemberDictHelper"]],,,,]}),o.defineDictionary(s,"NetworkResult","NetworkResultHelper","Ice.IntHelper","Resm.NetworkStatus",!0,void 0,void 0,n.HashMap.compareEquals),s.NetworkAddress=o.defineStruct((function(e,t,i){this.ip=void 0!==e?e:"",this.port=void 0!==t?t:0,this.glacier2Port=void 0!==i?i:0}),!0,(function(e){e.writeString(this.ip),e.writeShort(this.port),e.writeShort(this.glacier2Port)}),(function(e){this.ip=e.readString(),this.port=e.readShort(),this.glacier2Port=e.readShort()}),5,!1),o.defineDictionary(s,"AccessAddrDict","AccessAddrDictHelper","Ice.IntHelper","Resm.NetworkAddress",!1,void 0,void 0,n.HashMap.compareEquals),s.AccessM=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::Resm::AccessM"],-1,void 0,void 0,!1),s.AccessMPrx=o.defineProxy(n.ObjectPrx,s.AccessM.ice_staticId,void 0),o.defineOperations(s.AccessM,s.AccessMPrx,{register:[,,,,,["Resm.AccessSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,[3],[[3],[3],["Resm.NetworkResultHelper"],[7],[7]],,[s.ResmError],,],getAccessList:[,,,,,["Resm.AccessAddrDictHelper"],[[3]],,,,],sendCmd:[,,,,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[s.ResmError],,]}),s.NetworkBandwidth=o.defineStruct((function(e,t){this.sendBandWidth=void 0!==e?e:0,this.recvBandWidth=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.sendBandWidth),e.writeInt(this.recvBandWidth)}),(function(e){this.sendBandWidth=e.readInt(),this.recvBandWidth=e.readInt()}),8,!0),o.defineDictionary(s,"FNBandwidthDict","FNBandwidthDictHelper","Ice.StringHelper","Resm.NetworkBandwidth",!1,void 0,void 0,n.HashMap.compareEquals),s.FnSession=o.defineObject(void 0,n.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::FnSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.FnSessionPrx=o.defineProxy(n.ObjectPrx,s.FnSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.FnSession,s.FnSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"],["Resm.FNBandwidthDictHelper"]],,,,]}),s.FnM=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::Resm::FnM"],-1,void 0,void 0,!1),s.FnMPrx=o.defineProxy(n.ObjectPrx,s.FnM.ice_staticId,void 0),o.defineOperations(s.FnM,s.FnMPrx,{register:[,,,,,["Resm.FnSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[s.ResmError],,]}),s.RouteType=o.defineEnum([["UNREACHABLE",0],["DIRECT",1],["FORWARD",2]]),s.RouteScore=o.defineEnum([["BROKEN",0],["BAD",1],["AVAILABLE",2],["PERFECT",3]]),o.defineSequence(s,"IntSeqHelper","Ice.IntHelper",!0),s.Route=o.defineStruct((function(e,t,i,n,r,o,a){this.type=void 0!==e?e:s.RouteType.UNREACHABLE,this.score=void 0!==t?t:s.RouteScore.BROKEN,this.srcIP=void 0!==i?i:"",this.dstIP=void 0!==n?n:"",this.fnNo=void 0!==r?r:0,this.srcFnIP=void 0!==o?o:"",this.dstFnIP=void 0!==a?a:""}),!0,(function(e){s.RouteType.__write(e,this.type),s.RouteScore.__write(e,this.score),e.writeString(this.srcIP),e.writeString(this.dstIP),e.writeInt(this.fnNo),e.writeString(this.srcFnIP),e.writeString(this.dstFnIP)}),(function(e){this.type=s.RouteType.__read(e),this.score=s.RouteScore.__read(e),this.srcIP=e.readString(),this.dstIP=e.readString(),this.fnNo=e.readInt(),this.srcFnIP=e.readString(),this.dstFnIP=e.readString()}),10,!1),o.defineDictionary(s,"RouteMap","RouteMapHelper","Ice.IntHelper","Resm.Route",!1,void 0,void 0,n.HashMap.compareEquals),s.RouteM=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::Resm::RouteM"],-1,void 0,void 0,!1),s.RouteMPrx=o.defineProxy(n.ObjectPrx,s.RouteM.ice_staticId,void 0),o.defineOperations(s.RouteM,s.RouteMPrx,{RouteAllocBatch:[,,,,,["Resm.RouteMapHelper"],[[3],[3],["Resm.IntSeqHelper"]],,,,],RouteAlloc:[,,,,,[s.Route],[[3],[3],[3],["Resm.IntSeqHelper"]],,,,],PathReport:[,,,,,,[[3],["Resm.PathStatusDictHelper"]],,,,],RouteMapGet:[,,,,,["Resm.RouteMapHelper"],[[3],[3]],,,,]}),s.McuSession=o.defineObject(void 0,n.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::McuSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.McuSessionPrx=o.defineProxy(n.ObjectPrx,s.McuSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.McuSession,s.McuSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),s.McuM=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::Resm::McuM"],-1,void 0,void 0,!1),s.McuMPrx=o.defineProxy(n.ObjectPrx,s.McuM.ice_staticId,void 0),o.defineOperations(s.McuM,s.McuMPrx,{register:[,,,,,["Resm.McuSessionPrx"],[[3],[7],[7]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,[3],[[3]],,[s.ResmError],,]}),i.Resm=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(4860):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},4860:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=4860,e.exports=t},9292:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=(n.__M,t("Trans/MSPub").MS),o=n.Slice;r.LanTerm=o.defineStruct((function(e,t){this.hostIP=void 0!==e?e:"",this.termID=void 0!==t?t:0}),!0,(function(e){e.writeString(this.hostIP),e.writeShort(this.termID)}),(function(e){this.hostIP=e.readString(),this.termID=e.readShort()}),3,!1),o.defineSequence(r,"TermSeqHelper","MS.LanTerm",!1),r.MSClient=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::MS::MSClient"],-1,void 0,void 0,!1),r.MSClientPrx=o.defineProxy(n.ObjectPrx,r.MSClient.ice_staticId,void 0),o.defineOperations(r.MSClient,r.MSClientPrx,{AudioAllocRaw:[,,,1,,[3],[[r.AudioStreamParam]],,,,],AudioAlloc:[,,,1,,[3],[[r.AudioStreamParam],[r.MediaStreamAddr]],,,,],VideoAllocRaw:[,,,1,,[3],[[r.VideoStreamParam],[1]],,,,],VideoAlloc:[,,,1,,[3],[[r.VideoStreamParam],[1],[r.MediaStreamAddr]],,,,],AudioAllocRawExt:[,,,1,,[3],[[r.AudioStreamParam],["MS.DictStrParamsHelper"]],,,,],AudioAllocRawExt2:[,,,1,,[3],[[r.AudioStreamParam],["MS.DictStrParamsHelper"]],[["MS.DictStrParamsHelper"]],,,],AudioAllocExt:[,,,1,,[3],[[r.AudioStreamParam],[r.MediaStreamAddr],["MS.DictStrParamsHelper"]],,,,],VideoAllocRawExt:[,,,1,,[3],[[r.VideoStreamParam],[1],["MS.DictStrParamsHelper"]],,,,],VideoAllocRawExt2:[,,,1,,[3],[[r.VideoStreamParam],[1],["MS.DictStrParamsHelper"]],[["MS.DictStrParamsHelper"]],,,],VideoAllocExt:[,,,1,,[3],[[r.VideoStreamParam],[1],[r.MediaStreamAddr],["MS.DictStrParamsHelper"]],,,,],Free:[,,,1,,,[[3]],,,,],ModifyPeerAddr:[,,,1,,,[[3],[r.MediaStreamAddr]],,,,],ModifyPeerAddrExt:[,,,1,,,[[3],["MS.DictStrParamsHelper"]],,,,],ModifyIOMode:[,,,1,,,[[3],[r.MediaStreamIOMode.__helper]],,,,],NotifyRTMPStreamPublishFinished:[,,,1,,,[[3]],,,,],StartLanThrough:[,,,1,,,[[3],[3],[7]],,,,],StopLanThrough:[,,,1,,,[[3]],,,,],LanDetect:[,,,1,,,[["MS.TermSeqHelper"]],,,,],EnableSendVideo2Internet:[,,,1,,,[[2]],,,,],DisableSendVideo2Internet:[,,,1,,,[[2]],,,,],EnableSendScreen2Internet:[,,,1,,,,,,,],DisableSendScreen2Internet:[,,,1,,,,,,,],EnableSendFilm2Internet:[,,,1,,,,,,,],DisableSendFilm2Internet:[,,,1,,,,,,,],EnableSendLive2Internet:[,,,1,,,,,,,],DisableSendLive2Internet:[,,,1,,,,,,,]}),r.ClientReport=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::MS::ClientReport"],-1,void 0,void 0,!1),r.ClientReportPrx=o.defineProxy(n.ObjectPrx,r.ClientReport.ice_staticId,void 0),o.defineOperations(r.ClientReport,r.ClientReportPrx,{UpdateClientIP:[,,,1,,,[[7],[3],[7]],,,,],ReportLanNeighbor:[,,,1,,,[["MS.TermSeqHelper"]],,,,],LanMediaStreamFail:[,,,1,,,[[3],[3],[7]],,,,],VideoResolutionReport:[,,,1,,,[[3],[3],[3]],,,,],MediaConnectionBreakReport:[,,,1,,,[[3]],,,,]}),i.MS=r}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(3375):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},4623:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=n.Slice,s=r.module("MS");s.AudioTransType=o.defineEnum([["ATT_CORP_PRIV",0],["ATT_EIS_ENCRYPT",1],["ATT_RTP_STD",2],["ATT_RTMP",3]]),s.AudioCodecType=o.defineEnum([["ACT_PCMU",0],["ACT_PCMA",1],["ACT_G723",2],["ACT_G729",3],["ACT_AMRWB",4],["ACT_SPEEX",5],["ACT_AAC",6],["ACT_ISAC",7],["ACT_AAC_48K",8],["ACT_OPUS",9],["ACT_RESERV10",10],["ACT_RESERV11",11],["ACT_RESERV12",12],["ACT_RESERV13",13],["ACT_RESERV14",14],["ACT_NULL",15]]),s.MediaStreamIOMode=o.defineEnum([["MSIO_INACTIVE",0],["MSIO_SEND",1],["MSIO_RECV",2],["MSIO_SEND_RECV",3]]),s.AudioStreamParam=o.defineStruct((function(e,t,i,n,r){this.codecType=void 0!==e?e:s.AudioCodecType.ACT_PCMU,this.transType=void 0!==t?t:s.AudioTransType.ATT_CORP_PRIV,this.ioMode=void 0!==i?i:s.MediaStreamIOMode.MSIO_INACTIVE,this.mixerID=void 0!==n?n:0,this.shareListen=void 0!==r&&r}),!0,(function(e){s.AudioCodecType.__write(e,this.codecType),s.AudioTransType.__write(e,this.transType),s.MediaStreamIOMode.__write(e,this.ioMode),e.writeInt(this.mixerID),e.writeBool(this.shareListen)}),(function(e){this.codecType=s.AudioCodecType.__read(e),this.transType=s.AudioTransType.__read(e),this.ioMode=s.MediaStreamIOMode.__read(e),this.mixerID=e.readInt(),this.shareListen=e.readBool()}),8,!1),s.VideoContentType=o.defineEnum([["VCT_CAMERA",0],["VCT_SCREEN",1],["VCT_FILM",2],["VCT_LIVE",3]]),s.VideoStreamParam=o.defineStruct((function(e,t,i,n,r,o,a,c){this.contentType=void 0!==e?e:s.VideoContentType.VCT_CAMERA,this.srcTermID=void 0!==t?t:0,this.cameraID=void 0!==i?i:0,this.ioMode=void 0!==n?n:s.MediaStreamIOMode.MSIO_INACTIVE,this.attachToMSID=void 0!==r?r:0,this.subscribeFlag=void 0!==o&&o,this.isPeerSourceTerm=void 0!==a&&a,this.screenAuthKey=void 0!==c?c:""}),!0,(function(e){s.VideoContentType.__write(e,this.contentType),e.writeShort(this.srcTermID),e.writeShort(this.cameraID),s.MediaStreamIOMode.__write(e,this.ioMode),e.writeInt(this.attachToMSID),e.writeBool(this.subscribeFlag),e.writeBool(this.isPeerSourceTerm),e.writeString(this.screenAuthKey)}),(function(e){this.contentType=s.VideoContentType.__read(e),this.srcTermID=e.readShort(),this.cameraID=e.readShort(),this.ioMode=s.MediaStreamIOMode.__read(e),this.attachToMSID=e.readInt(),this.subscribeFlag=e.readBool(),this.isPeerSourceTerm=e.readBool(),this.screenAuthKey=e.readString()}),13,!1),s.NetworkAddress=o.defineStruct((function(e,t){this.ip=void 0!==e?e:"",this.port=void 0!==t?t:0}),!0,(function(e){e.writeString(this.ip),e.writeShort(this.port)}),(function(e){this.ip=e.readString(),this.port=e.readShort()}),3,!1),s.MediaStreamAddr=o.defineStruct((function(e,t){this.netAddr=void 0!==e?e:new s.NetworkAddress,this.MSID=void 0!==t?t:0}),!0,(function(e){s.NetworkAddress.write(e,this.netAddr),e.writeInt(this.MSID)}),(function(e){this.netAddr=s.NetworkAddress.read(e,this.netAddr),this.MSID=e.readInt()}),7,!1),s.ConferenceInfo=o.defineStruct((function(e,t,i,n){this.confId=void 0!==e?e:0,this.isPeerTerminal=void 0!==t&&t,this.peerTermId=void 0!==i?i:0,this.peerTermName=void 0!==n?n:""}),!0,(function(e){e.writeInt(this.confId),e.writeBool(this.isPeerTerminal),e.writeShort(this.peerTermId),e.writeString(this.peerTermName)}),(function(e){this.confId=e.readInt(),this.isPeerTerminal=e.readBool(),this.peerTermId=e.readShort(),this.peerTermName=e.readString()}),8,!1),o.defineDictionary(s,"DictStrParams","DictStrParamsHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),i.MS=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(3375):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},3375:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3375,e.exports=t},8113:function(e,t,i){e=i.nmd(e),function(e,t,i){var n=t("ice").Ice,r=n.__M,o=n.Slice,s=r.module("WhiteBoard");s.WBConferenceError=o.defineUserException((function(e,t,i){n.UserException.call(this,i),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),n.UserException,"WhiteBoard::WBConferenceError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),s.WhiteBoardCtrl2_V4=o.defineObject(void 0,n.Object,void 0,1,["::Ice::Object","::WhiteBoard::WhiteBoardCtrl2_V4"],-1,void 0,void 0,!1),s.WhiteBoardCtrl2_V4Prx=o.defineProxy(n.ObjectPrx,s.WhiteBoardCtrl2_V4.ice_staticId,void 0),o.defineOperations(s.WhiteBoardCtrl2_V4,s.WhiteBoardCtrl2_V4Prx,{sendCmd:[,,,1,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[s.WBConferenceError],,]}),i.WhiteBoard=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?i(2598):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},2598:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=2598,e.exports=t},6817:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={server:new class{constructor(){this.serverAddr="",this.wbServer=""}setServerAddr(e){this.serverAddr=e}getServerAddr(){return this.serverAddr}},auth:new class{constructor(){this.UserName="",this.UserPswd=""}setAuth(e){e.UserName&&(this.UserName=e.UserName),e.UserPswd&&(this.UserPswd=e.UserPswd)}getAuth(){return{UserName:this.UserName,UserPswd:this.UserPswd}}},userInfoHistory:new class{constructor(){this.initData()}initData(){this.storageKey="CRRTCSDK_UserInfoHistory",this.historyList=JSON.parse(this.getStorage(this.storageKey)||"[]")}getUserHistory(e,t,i,n){const r=this.historyList.find((i=>i.meetID==e&&i.userID==t));return!!r&&r.myDetail}setUserHistory(e,t,i,n,r){if(null!=this.historyList.find((i=>i.meetID==e&&i.userID==t)))return;const o={meetID:e,userID:t,memberID:i,memberType:n,myDetail:r};this.historyList.push(o),this.setStorage(this.storageKey,JSON.stringify(this.historyList))}setStorage(e,t){window.localStorage.setItem(e,t)}getStorage(e){return window.localStorage.getItem(e)}},userInfo:new class{constructor(){}setUserInfo(e,t){const i=JSON.parse(localStorage.getItem("CRRTCSDK_UserInfo"))||[],n=i.find((t=>t.nickname==e));n?n.userID=t:i.push({nickname:e,userID:t}),localStorage.setItem("CRRTCSDK_UserInfo",JSON.stringify(i))}getUserInfo(e){const t=(JSON.parse(localStorage.getItem("CRRTCSDK_UserInfo"))||[]).find((t=>t.nickname==e));return t?t.userID:""}}}},6836:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(5174);function r(e){var t=e.dataType||"json",i=e.type||"get",r=e.data||{};if("jsonp"==t){var o=document.getElementsByTagName("body")[0],s=e.url||"",a=`CRjsonp${n.Z.generate_uuid().replace(/-/g,"")}`;e.jsonp?r[e.jsonp]=a:r.callback=a;var c="";for(var l in r)c+=encodeURIComponent(l)+"="+encodeURIComponent(r[l])+"&";s+="?"+c;var d=document.createElement("script");d.src=s,o.appendChild(d),window[a]=function(){e.success&&e.success.apply(this,arguments),o.removeChild(d),window[a]=null,delete window[a]},d.onerror=function(){e.error&&e.error.apply(this,arguments),console.error("[Callsvr] server error:"+s),o.removeChild(d),window[a]=null,delete window[a]}}else{let f;if(f=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),f.timeout=e.timeout?e.timeout:5e3,"GET"==i||"get"==i){var u=p(r);s=e.url+"?"+u;try{if(f.open(i,s,null==e.async||e.async),e.header)for(var h in e.header)f.setRequestHeader(h,e.header[h]);f.send(null)}catch(C){e.error&&e.error(f)}}else if("POST"==i||"post"==i){u=_(r);try{if(f.open(i,e.url,null==e.async||e.async),"json"===t?f.setRequestHeader("Content-Type","application/json;charset=UTF-8"):f.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),e.header)for(var h in e.header)f.setRequestHeader(h,e.header[h]);f.send(u)}catch(g){e.error&&e.error(f)}}function p(e){if("string"==typeof e)return e;var t=[];for(var i in e){var n=encodeURIComponent(e[i]);t.push(i+"="+n)}return t.join("&")}function _(e){if("string"==typeof e)return e;var t=[];for(var i in e)t.push(i+"="+e[i]);return t.join("&")}f.onreadystatechange=function(){if(4==f.readyState)if(200==f.status&&e.success)if("text"==t)e.success(f.responseText,"success");else{try{var i=JSON.parse(f.responseText)}catch(e){CRVideo_LoginFail.target(202,CRVideo.LoginParam.cookie),CRVideo_UploadingLog(),console.error(e)}e.success(i||f.responseText)}else e.error&&e.error(f)}}}},9598:()=>{window.CRVideo_ERR_DEF={NOERR:0,UNKNOWERR:1,OUTOF_MEM:2,INNER_ERR:3,MISMATCHCLIENTVER:4,MEETPARAM_ERR:5,ERR_DATA:6,ANCTPSWD_ERR:7,SERVER_EXCEPTION:8,LOGINSTATE_ERROR:9,SDK_USER_BEEN_KICKOUT:10,SDK_NOT_INIT:11,SDK_NOT_LOGIN:12,SDK_BASE64_COV_ERR:13,SDK_CUSTOMAUTH_NOINFO:14,SDK_CUSTOMAUTH_NOTSUPPORT:15,SDK_CUSTOMAUTH_EXCEPTION:16,SDK_CUSTOMAUTH_FAILED:17,SDK_TOKEN_TIMEOUT:18,SDK_TOKEN_AUTHINFOERR:19,SDK_TOKEN_APPIDNOTEXIST:20,SDK_TOKEN_AUTH_FAILED:21,SDK_TOKEN_NOTTOKENTYPE:22,NETWORK_INITFAILED:200,NO_SERVERINFO:201,NOSERVER_RSP:202,CREATE_CONN_FAILED:203,SOCKETEXCEPTION:204,SOCKETTIMEOUT:205,FORCEDCLOSECONNECTION:206,CONNECTIONLOST:207,VOICEENG_INITFAILED:208,SDK_SSL_ERR:209,QUE_ID_INVALID:400,QUE_NOUSER:401,QUE_USER_CANCELLED:402,QUE_SERVICE_NOT_START:403,ALREADY_OTHERQUE:404,INVALID_CALLID:600,ERR_CALL_EXIST:601,ERR_BUSY:602,ERR_OFFLINE:603,ERR_NOANSWER:604,ERR_USER_NOT_FOUND:605,ERR_REFUSE:606,MEETNOTEXIST:800,AUTHERROR:801,MEMBEROVERFLOWERROR:802,RESOURCEALLOCATEERROR:803,MEETROOMLOCKED:804,BALANCELESSERROR:805,SEVICE_NOTENABLED:806,ALREADYLOGIN:807,SDK_MIC_NORIGHT:808,SDK_MIC_BEING_USED:809,SDK_MIC_UNKNOWERR:810,SDK_SPK_NORIGHT:811,SDK_SPK_BEING_USED:812,SDK_SPK_UNKNOWERR:813,CATCH_SCREEN_ERR:900,RECORD_MAX:901,RECORD_NO_DISK:902,RECORD_SIZE_ERR:903,SDK_CFG_RESTRICTED:904,SDK_FILE_ERR:905,SDK_RECORDSTARTED:906,SENDFAIL:1e3,CONTAIN_SENSITIVEWORDS:1001,SENDCMD_LARGE:1100,SENDBUFFER_LARGE:1101,SENDDATA_TARGETINVALID:1102,SENDFILE_FILEINERROR:1103,TRANSID_INVALID:1104,RECORDFILE_STATE_ERR:1200,RECORDFILE_NOT_EXIST:1201,IPCAM_URLERR:1300,IPCAM_ALREADYEXIST:1301,IPCAM_TOOMUCH:1302,SDK_FILE_NOT_EXIST:1400,SDK_FILE_READ_ERR:1401,SDK_FILE_WRITE_ERR:1402,SDK_FILE_OPERATOR_ERR:1403,WEB_OCX_NOTINSTALLED:2001,WEB_BROWER_NOTUPPORTED:2002,OCX_VERSION_NOTUPPORTED:2003,DEVICE_UNKNOW_ERR:8001,DEVICE_NOTALLOWED_ERR:8002,DEVICE_UPDATELIST_ERR:8003,DEVICE_HAVENOTAPI_ERR:8004,DEVICE_LOWVER_ERR:8006,DEVICE_OPEN_DEVICE_ERR:8007},window.CRVideo_ASTATUS={AUNKNOWN:0,ANULL:1,ACLOSE:2,AOPEN:3,AOPENING:4},window.CRVideo_VSTATUS={VUNKNOWN:0,VNULL:1,VCLOSE:2,VOPEN:3,VOPENING:4},window.CRVideo_VIDEO_SHOW_SIZE={VIDEO_SZ_80:1,VSIZE_SZ_128:2,VSIZE_SZ_160:3,VSIZE_SZ_192:4,VSIZE_SZ_256:5,VSIZE_SZ_288:6,VSIZE_SZ_320:7,VSIZE_SZ_360:8,VSIZE_SZ_400:9,VSIZE_SZ_480:10,VSIZE_SZ_576:11,VSIZE_SZ_720:12,VSIZE_SZ_1080:13},window.CRVideo_VIDEO_FORMAT={VFMT_YUV420P:0,VFMT_ARGB32:1},window.CRVideo_REC_VCONTENT_TYPE={RECVTP_VIDEO:0,RECVTP_PIC:1,RECVTP_SCREEN:2,RECVTP_MEDIA:3,RECVTP_TIMESTAMP:4,RECVTP_REMOTE_SCREEN:5},window.CRVideo_RECORD_STATE={NO_RECORD:0,STARTING:1,RECORDING:2,PAUSED:3,STOPPING:4},window.CRVideo_RECORD_AUDIO_TYPE={REC_AUDIO_TYPE_NULL:0,REC_AUDIO_TYPE_LOC:1,REC_AUDIO_TYPE_OTHER:2,REC_AUDIO_TYPE_ALL:3},window.CRVideo_RECORD_VIDEO_TYPE={REC_VCONTENT_NULL:0,RECORD_VIDEO_TYPE_SCREEN:1,REC_VCONTENT_VIDEOS:3},window.CRVideo_RECORD_VLAYOUT={REC_VLAYOUT_GRID:0,REC_VLAYOUT_PIP:1},window.CRVideo_ENCODE_TYPE={ENC_H264:1},window.CRVideo_ENCODE_TYPE[`ENC_${window.__CRNameUP}`]=0,window.CRVideo_MOUSE_MSG_TYPE={MOUSE_MOVE:0,MOUSE_DOWN:1,MOUSE_UP:2,MOUSE_DBCLICK:3},window.CRVideo_MOUSE_KEY_TYPE={MOUSEKEY_NULL:0,MOUSEKEY_L:1,MOUSEKEY_M:2,MOUSEKEY_R:3,MOUSEKEY_WHEEL:4,MOUSEKEY_X:5},window.CRVideo_KEY_MSG_TYPE={KEYT_DWON:0,KEYT_UP:1},window.CRVideo_MAIN_PAGE_TYPE={MAINPAGE_VIDEOWALL:0,MAINPAGE_SHARE:1,MAINPAGE_WHITEBOARD:2},window.CRVideo_VIDEOLAYOUTMODE={VLO_1v1_M:0,VLO_WALL1_M:1,VLO_WALL2:2,VLO_WALL4:3,VLO_WALL5_M:4,VLO_WALL6_M:5,VLO_WALL9:6,VLO_WALL13_M:7,VLO_WALL16:8,VLO_WALL25:9},window.CRVideo_HTTP_TRANSFER_STAT={HTTPFS_NULL:0,HTTPFS_QUEUE:1,HTTPFS_TRANSFERING:2,HTTPFS_FINISHED:3},window.CRVideo_HTTP_TRANSFER_RESULT={HTTPR_Success:0,HTTPR_InnerErr:1,HTTPR_ParamErr:2,HTTPR_NetworkFail:3,HTTPR_NetworkTimeout:4,HTTPR_FileOperationFail:5,HTTPR_PathNotSupprot:6,HTTPR_FileTransfering:7,HTTPR_HTTPERR_BEGIN:1e3,HTTPR_HTTPERR_END:1999},window.CRVideo_ToolBarUI={BTN_Pause:0,BTN_Stop:1},window.CRVideo_REC_DATATYPE={REC_AV_DEFAULT:0,REC_AUDIO_LOC:1,REC_AUDIO_OTHER:2,REC_VIDEO:3}},5655:()=>{const e={0:"SDK_SUCCESS",1:"SDK_UNSUPPORT",2:"SDK_ANCT_NOTEXIST",3:"SDK_USR_PSWD_ERR",4:"SDK_MEET_PSWD_ERR",5:"SDK_UNKNOW_ERR",6:"SDK_MEET_NOTEXIST",7:"SDK_MEET_START_ERR",8:"SDK_CREATEMEETINGFAILED",9:"SDK_THEME_EMPTY_ERR",10:"SDK_NOUSED",11:"SDK_CMEET_NO_PERMISSION",12:"SDK_FIXMEET_NOBALANCE",13:"SDK_FIXMEETING_TOOMANY",14:"SDK_CONFERENCELINK_ERR",15:"SDK_NICKNAMEEMPTY_ERR",16:"SDK_CONTINUOUSFAILURE",17:"SDK_MEETINGNOTSTART",18:"SDK_MEETINGOVER",19:"SDK_MEETID_INVALID",21:"SDK_ACCOUNT_INVALID",22:"SDK_MEET_BUS_USED",23:"SDK_VIN_NO_PERMISSION",26:"SDK_MEET_NO_TV_MEETING",27:"SDK_OEM_ANCT_MISMATCH",30:"SDK_VERSION_NOTMATCH",31:"SDK_USER_EXISTS",32:"SDK_USER_NOT_EXISTS",33:"SDK_LOGINSTATE_ERROR",34:"SDK_USER_BEEN_KICKOUT",38:"SDK_ONLY_INVITER",40:"WEB_ACCOUNT_EXPIRED",71:"SDK_CUSTOMAUTH_NOINFO",72:"SDK_CUSTOMAUTH_NOTSUPPORT",73:"SDK_CUSTOMAUTH_EXCEPTION",74:"SDK_CUSTOMAUTH_FAILED",81:"SDK_TOKEN_AUTHINFOERR",83:"SDK_TOKEN_AUTHCHECKERR",84:"SDK_TOKEN_AUTHEXCEPTION",85:"SDK_TOKEN_AUTHINFOTIMEOUT",86:"SDK_TOKEN_APPIDNOTEXIST",87:"SDK_TOKEN_NOTTOKENTYPE",500:"SDK_NOT_LOGIN",1e4:"HTTP_ERR_BEGIN",10999:"HTTP_ERR_END",11e3:"SDK_SND_DATA_ERR",11001:"SDK_RSP_DATA_ERR",2e4:"CALL_ERR_BEGIN",20001:"CALL_ERR_UNKNOW",20002:"CALL_ERR_CALL_NOT_FOUND",20003:"CALL_ERR_CALL_EXIST",20004:"CALL_ERR_BUSY",20005:"CALL_ERR_OFFLINE",20006:"CALL_ERR_NOANSWER",20007:"CALL_ERR_PARAM_INVALID",20008:"CALL_ERR_USER_NOT_FOUND",20009:"CALL_ERR_PWD_INVALID",20010:"CALL_ERR_BUSY_MEETING",20011:"CALL_ERR_REFUSE",20012:"CALL_SEND_FAILED",20013:"CALL_RSP_DATA_ERR",20014:"CALL_ERR_SESSIONERR",20015:"CALL_ERR_ICEPRXNULL",20016:"CALL_SENDDATA_TARGETINVALID",20100:"RSP_CODE_QUE_ID_INVALID",20101:"RSP_CODE_QUE_NOUSER",20102:"RSP_CODE_QUE_USER_CANCELLED",20103:"RSP_CODE_QUE_SERVICE_NOT_START",20104:"RSP_CODE_QUE_QUEUING",3e4:"CALL_SENDCMD_LARGE",30001:"CALL_SENDBUFFER_LARGE",30002:"CALL_SENDFILE_FILEINERROR",30003:"CALL_TRANSID_INVALID"},t={CRVIDEOSDK_NOERR:0,CRVIDEOSDK_UNKNOWERR:1,CRVIDEOSDK_OUTOF_MEM:2,CRVIDEOSDK_INNER_ERR:3,CRVIDEOSDK_MISMATCHCLIENTVER:4,CRVIDEOSDK_MEETPARAM_ERR:5,CRVIDEOSDK_ERR_DATA:6,CRVIDEOSDK_ANCTPSWD_ERR:7,CRVIDEOSDK_SERVER_EXCEPTION:8,CRVIDEOSDK_LOGINSTATE_ERROR:9,CRVIDEOSDK_USER_BEEN_KICKOUT:10,CRVIDEOSDK_NOT_INIT:11,CRVIDEOSDK_NOT_LOGIN:12,CRVIDEOSDK_BASE64_COV_ERR:13,WEB_ACCOUNT_EXPIRED:23,CRVIDEOSDK_CUSTOMAUTH_NOINFO:14,CRVIDEOSDK_CUSTOMAUTH_NOTSUPPORT:15,CRVIDEOSDK_CUSTOMAUTH_EXCEPTION:16,CRVIDEOSDK_CUSTOMAUTH_FAILED:17,CRVIDEOSDK_TOKEN_TIMEOUT:18,CRVIDEOSDK_TOKEN_AUTHINFOERR:19,CRVIDEOSDK_TOKEN_APPIDNOTEXIST:20,CRVIDEOSDK_TOKEN_AUTH_FAILED:21,CRVIDEOSDK_TOKEN_NOTTOKENTYPE:22,CRVIDEOSDK_API_NO_PERMISSION:23,CRVIDEOSDK_NETWORK_INITFAILED:200,CRVIDEOSDK_NO_SERVERINFO:201,CRVIDEOSDK_NOSERVER_RSP:202,CRVIDEOSDK_CREATE_CONN_FAILED:203,CRVIDEOSDK_SOCKETEXCEPTION:204,CRVIDEOSDK_SOCKETTIMEOUT:205,CRVIDEOSDK_FORCEDCLOSECONNECTION:206,CRVIDEOSDK_CONNECTIONLOST:207,CRVIDEOSDK_VOICEENG_INITFAILED:208,CRVIDEOSDK_SSL_ERR:209,CRVIDEOSDK_QUE_ID_INVALID:400,CRVIDEOSDK_QUE_NOUSER:401,CRVIDEOSDK_QUE_USER_CANCELLED:402,CRVIDEOSDK_QUE_SERVICE_NOT_START:403,CRVIDEOSDK_ALREADY_OTHERQUE:404,CRVIDEOSDK_INVALID_CALLID:600,CRVIDEOSDK_ERR_CALL_EXIST:601,CRVIDEOSDK_ERR_BUSY:602,CRVIDEOSDK_ERR_OFFLINE:603,CRVIDEOSDK_ERR_NOANSWER:604,CRVIDEOSDK_ERR_USER_NOT_FOUND:605,CRVIDEOSDK_ERR_REFUSE:606,CRVIDEOSDK_MEETNOTEXIST:800,CRVIDEOSDK_AUTHERROR:801,CRVIDEOSDK_MEMBEROVERFLOWERROR:802,CRVIDEOSDK_RESOURCEALLOCATEERROR:803,CRVIDEOSDK_MEETROOMLOCKED:804,CRVIDEOSDK_BALANCELESSERROR:805,CRVIDEOSDK_SEVICE_NOTENABLED:806,CRVIDEOSDK_ALREADYLOGIN:807,CRVIDEOSDK_MIC_NORIGHT:808,CRVIDEOSDK_MIC_BEING_USED:809,CRVIDEOSDK_MIC_UNKNOWERR:810,CRVIDEOSDK_SPK_NORIGHT:811,CRVIDEOSDK_SPK_BEING_USED:812,CRVIDEOSDK_SPK_UNKNOWERR:813,CRVIDEOSDK_PIC_ISNULL:814,CRVIDEOSDK_CATCH_SCREEN_ERR:900,CRVIDEOSDK_RECORD_MAX:901,CRVIDEOSDK_RECORD_NO_DISK:902,CRVIDEOSDK_RECORD_SIZE_ERR:903,CRVIDEOSDK_CFG_RESTRICTED:904,CRVIDEOSDK_FILE_ERR:905,CRVIDEOSDK_RECORDSTARTED:906,CRVIDEOSDK_NOMORE_MCU:907,CRVIDEOSDK_SENDFAIL:1e3,CRVIDEOSDK_CONTAIN_SENSITIVEWORDS:1001,CRVIDEOSDK_NO_CHAT_PERMISSION:1002,CRVIDEOSDK_SENDCMD_LARGE:1100,CRVIDEOSDK_SENDBUFFER_LARGE:1101,CRVIDEOSDK_SENDDATA_TARGETINVALI:1102,CRVIDEOSDK_SENDFILE_FILEINERRO:1103,CRVIDEOSDK_TRANSID_INVALI:1104,CRVIDEOSDK_RECORDFILE_STATE_ERR:1200,CRVIDEOSDK_RECORDFILE_NOT_EXIST:1201,CRVIDEOSDK_RECORDFILE_UPLOAD_FAILED:1202,CRVIDEOSDK_RECORDFILE_DEL_FAILED:1203,CRVIDEOSDK_IPCAM_URLERR:1300,CRVIDEOSDK_IPCAM_ALREADYEXIST:1301,CRVIDEOSDK_IPCAM_TOOMANYCAM:1302,CRVIDEOSDK_FILE_NOT_EXIST:1400,CRVIDEOSDK_FILE_READ_ERR:1401,CRVIDEOSDK_FILE_WRITE_ERR:1402,CRVIDEOSDK_FILE_ALREADY_EXIST:1403,CRVIDEOSDK_FILE_OPERATOR_ERR:1404,CRVIDEOSDK_NETDISK_NOT_EXIST:1500,CRVIDEOSDK_NETDISK_PERMISSIONDENIED:1501,CRVIDEOSDK_NETDISK_INVALIDFILENAME:1502,CRVIDEOSDK_NETDISK_FILEALREADYEXISTS:1503,CRVIDEOSDK_NETDISK_FILEORDIRECTORYNOTEXISTS:1504,CRVIDEOSDK_NETDISK_FILENOTTRANSFORM:1505,CRVIDEOSDK_NETDISK_TRANSFORMFAILED:1506,CRVIDEOSDK_NETDISK_NOSPACE:1507,SDK_CMEET_NO_PERMISSION:70001,SDK_MEET_BUS_USED:70002,SDK_MEETINGNOTSTART:70003,SDK_ONLY_INVITER:70004};window.Err_Cover=function(e){switch(e){case"SDK_SUCCESS":return"CRVIDEOSDK_NOERR";case"SDK_UNKNOW_ERR":default:return"CRVIDEOSDK_UNKNOWERR";case"SDK_NOT_LOGIN":return"CRVIDEOSDK_NOT_LOGIN";case"SDK_UNSUPPORT":return"CRVIDEOSDK_MISMATCHCLIENTVER";case"SDK_ACCOUNT_INVALID":case"SDK_ANCT_NOTEXIST":case"SDK_USER_NOT_EXISTS":case"SDK_USR_PSWD_ERR":case"CALL_ERR_PWD_INVALID":return"CRVIDEOSDK_ANCTPSWD_ERR";case"SDK_LOGINSTATE_ERROR":return"CRVIDEOSDK_LOGINSTATE_ERROR";case"SDK_USER_BEEN_KICKOUT":return"CRVIDEOSDK_USER_BEEN_KICKOUT";case"SDK_CUSTOMAUTH_NOINFO":return"CRVIDEOSDK_CUSTOMAUTH_NOINFO";case"SDK_CUSTOMAUTH_NOTSUPPORT":return"CRVIDEOSDK_CUSTOMAUTH_NOTSUPPORT";case"SDK_CUSTOMAUTH_EXCEPTION":return"CRVIDEOSDK_CUSTOMAUTH_EXCEPTION";case"SDK_CUSTOMAUTH_FAILED":return"CRVIDEOSDK_CUSTOMAUTH_FAILED";case"SDK_MEET_PSWD_ERR":return"CRVIDEOSDK_AUTHERROR";case"SDK_MEETINGOVER":case"SDK_MEETID_INVALID":case"SDK_MEET_NO_TV_MEETING":case"SDK_MEET_NOTEXIST":return"CRVIDEOSDK_MEETNOTEXIST";case"SDK_CMEET_NO_PERMISSION":return"SDK_CMEET_NO_PERMISSION";case"SDK_MEETINGNOTSTART":return"SDK_MEETINGNOTSTART";case"SDK_ONLY_INVITER":return"SDK_ONLY_INVITER";case"SDK_VIN_NO_PERMISSION":return"CRVIDEOSDK_API_NO_PERMISSION";case"SDK_MEET_BUS_USED":return"SDK_MEET_BUS_USED";case"SDK_SND_DATA_ERR":return"CRVIDEOSDK_NOSERVER_RSP";case"SDK_RSP_DATA_ERR":case"CALL_RSP_DATA_ERR":return"CRVIDEOSDK_ERR_DATA";case"SDK_TOKEN_AUTHINFOERR":case"SDK_TOKEN_AUTHEXCEPTION":return"CRVIDEOSDK_TOKEN_AUTHINFOERR";case"SDK_TOKEN_AUTHCHECKERR":return"CRVIDEOSDK_TOKEN_AUTH_FAILED";case"SDK_TOKEN_AUTHINFOTIMEOUT":return"CRVIDEOSDK_TOKEN_TIMEOUT";case"SDK_TOKEN_APPIDNOTEXIST":return"CRVIDEOSDK_TOKEN_APPIDNOTEXIST";case"SDK_TOKEN_NOTTOKENTYPE":return"CRVIDEOSDK_TOKEN_NOTTOKENTYPE";case"CALL_ERR_CALL_NOT_FOUND":return"CRVIDEOSDK_INVALID_CALLID";case"CALL_ERR_CALL_EXIST":return"CRVIDEOSDK_ERR_CALL_EXIST";case"CALL_ERR_BUSY":case"CALL_ERR_BUSY_MEETING":return"CRVIDEOSDK_ERR_BUSY";case"CALL_ERR_OFFLINE":return"CRVIDEOSDK_ERR_OFFLINE";case"CALL_ERR_NOANSWER":return"CRVIDEOSDK_ERR_NOANSWER";case"CALL_ERR_PARAM_INVALID":return"CRVIDEOSDK_MEETPARAM_ERR";case"CALL_ERR_USER_NOT_FOUND":return"CRVIDEOSDK_ERR_USER_NOT_FOUND";case"CALL_ERR_REFUSE":return"CRVIDEOSDK_ERR_REFUSE";case"CALL_ERR_ICEPRXNULL":return"CRVIDEOSDK_CREATE_CONN_FAILED";case"CALL_SENDDATA_TARGETINVALID":return"CRVIDEOSDK_SENDDATA_TARGETINVALID";case"CALL_SENDCMD_LARGE":return"CRVIDEOSDK_SENDCMD_LARGE";case"CALL_SENDBUFFER_LARGE":return"CRVIDEOSDK_SENDBUFFER_LARGE";case"CALL_TRANSID_INVALID":return"CRVIDEOSDK_TRANSID_INVALID";case"CALL_SENDFILE_FILEINERROR":return"CRVIDEOSDK_SENDFILE_FILEINERROR";case"CALL_ERR_SESSIONERR":return"CRVIDEOSDK_CONNECTIONLOST";case"CALL_SEND_FAILED":return"CRVIDEOSDK_SOCKETTIMEOUT";case"RSP_CODE_QUE_ID_INVALID":return"CRVIDEOSDK_QUE_ID_INVALID";case"RSP_CODE_QUE_NOUSER":return"CRVIDEOSDK_QUE_NOUSER";case"RSP_CODE_QUE_USER_CANCELLED":return"CRVIDEOSDK_QUE_USER_CANCELLED";case"RSP_CODE_QUE_SERVICE_NOT_START":return"CRVIDEOSDK_QUE_SERVICE_NOT_START";case"RSP_CODE_QUE_QUEUING":return"CRVIDEOSDK_ALREADY_OTHERQUE";case"WEB_ACCOUNT_EXPIRED":return"WEB_ACCOUNT_EXPIRED"}},window.ICE_SDK_ERR=function(i){return 0==i?0:t[Err_Cover(e[2e4+i])]},window.WEB_SDK_ERR=function(i){return 0==i?0:t[Err_Cover(e[i])]};window.__Rtc.CRCONFERR=new class{constructor(){}Parse(e){const t={err:e.toString(),errCode:1,errDesc:""};return e instanceof Conference.RoomLockedError&&(t.errCode=804,t.errDesc=""),e instanceof Conference.SeviceNotEnabled&&(t.errCode=806,t.errDesc=""),e instanceof Conference.NoResourceForMIC&&(t.errCode=808,t.errDesc=""),e instanceof Conference.NoResourceForMIC&&(t.errCode=816,t.errDesc=""),e instanceof Conference.SrvRecordStarted&&(t.errCode=906,t.errDesc=""),t}}},5760:()=>{window.__Rtc={},function(){for(var e=0,t=["webkit","moz"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var n=(new Date).getTime(),r=Math.max(0,16.7-(n-e)),o=window.setTimeout((function(){t(n+r)}),r);return e=n+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind-whatistryingtobeboundisnotcallable");var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r}),window.Cr={},window.CRVideo={},Cr.CbProxy=function(e){this.name=e,this.callback=null},Cr.CbProxy.prototype.call=function(e){try{this.callback&&"function"==typeof this.callback&&this.callback.apply(null,e)}catch(e){console.error(e)}},Cr.MsgInfo=function(e){this.type=e.type,this.index=e.index,this.msg=e.msg,this.head=e.head,this.sendTime=e.sendTime,this.targetNickname=e.targetNickname,this.targetTermId=e.targetTermId,this.srcNickname=e.srcNickname,this.srcTermId=e.srcTermId,this.ishost=e.ishost},Cr.MeetInfo=function(e){this.termId=e.termId,this.nickname=e.nickname,this.userId=e.userId,this.bindId=e.bindId,this.openedCamIDs=e.openedCamIDs,this.activeMembers=e.activeMembers,this.myDetail=e.myDetail,this.serverTime=e.serverTime,this.isBegan=e.isBegan,this.countdown=e.countdown,this.mainVideoTermID=e.mainVideoTermID,this.wbDescibes=e.wbDescibes,this.ServerUTCTime=e.ServerUTCTime,this.bAllowWall=e.bAllowWall,this.bFull=e.bFull,this.bRoomLocked=e.bRoomLocked,this.curMainTab=e.curMainTab,this.curSubTab=e.curSubTab,this.option=e.option,this.lastElemValue=e.lastElemValue,this.lastTabValue=e.lastTabValue,this.confInfo=e.confInfo,this.windowMode=e.windowMode,this.meetID=e.meetID},Cr.Quesask=function(e){this.typeID=e.typeID,this.asktime=e.asktime,this.termID=e.termID,this.content=e.content,this.nickname=e.nickname},Cr.QuesDeal=function(e){this.state=e.state._value,this.replyCon=e.replyCon,this.replyTermId=e.replyTermId,this.replyTime=e.replyTime,this.publishTermID=e.publishTermID,this.publishTime=e.publishTime,this.delTermID=e.delTermID,this.delTime=e.delTime},Cr.QuesInf=function(e){this.quesID=e.quesID,this.ask=new Cr.Quesask(e.ask),this.deal=new Cr.QuesDeal(e.deal)},Cr.ScreenShareInfo=function(e){this.scrSviceProxy=e.scrSviceProxy,this.authKey=e.authKey,this.allowCtrlReq=e.allowCtrlReq,this.state=e.state,this.sharer=e.sharer,this.controller=e.controller,this.allowOtherMark=e.allowOtherMark},Cr.MediaInfo=function(e){this.termid=e.termid,this.MEDIA_STATE=e.MEDIA_STATE,this.mediaName=e.mediaName},Cr.ElementID=function(e){this.ownerID=e.ownerID,this.ID=e.ID},Cr.ElementData=function(e){this.eID=e.eID,this.orderId=e.orderId,this.left=e.left,this.top=e.top,this.type=e.type,this.noused=e.noused,this.data=e.data},Cr.AsyncResult=function(){},Cr.AsyncResult.prototype.then=function(e){return this.__child=new Cr.AsyncResult,this.__complete=e,this.__child},Cr.AsyncResult.prototype.complete=function(e){var t=function(){this.next(e),this.__parent&&"function"==typeof this.__parent.next&&this.__parent.next(e)}.bind(this);setTimeout(t,0)},Cr.AsyncResult.prototype.next=function(e){if(this.__complete&&"function"==typeof this.__complete){var t=this.__complete.apply(this,e);t&&this.__child&&(t.__parent=this.__child)}},Cr.AsyncResult2As=function(e,t){this.id=e,this.proxy=t},Cr.AsyncResult2As.prototype.complete=function(e){e.unshift(this.id),this.proxy.callback.apply(this.proxy,e)},Cr.Swf={__callbackId_generator:0,__generateCallbackId:function(){return Cr.Swf.__callbackId_generator++},__callbackAsyncDict:{},__registerCallbackAsync:function(e,t){if(Cr.Swf.__callbackAsyncDict[e])throw"register swf callback error:duplicate id";Cr.Swf.__callbackAsyncDict[e]=t},asyncAsCallback:function(){if(!(arguments.length>=1))throw"swf callback error:arguments deficient";for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var i=e.shift(),n=Cr.Swf.__callbackAsyncDict[i];if(!n)throw"swf callback error:async not exist";n.complete(e)},callJs:function(){if(arguments.length>=2){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];if(cmd=e.shift(),id=e.shift(),cmdObj=Cr.Swf.__asCallbackCmdDict[cmd],cmdObj){var i=cmdObj.fun;cmdObj.proxy;i.call(null,e)}}},__asCallbackCmdDict:{},addAsCallback:function(e,t,i){if(Cr.Swf.__asCallbackCmdDict[e])throw"register swf callback error:duplicate id";Cr.Swf.__asCallbackCmdDict[e]={fun:t,proxy:i}}}},7801:()=>{},3780:()=>{CRVideo.logAry=[],CRVideo.browserInfo="";var e=new function(){var t=this;t.logFilename="sdkDebug.log",t.output="",this.getLog=function(){return t.output},this.clear=function(){t.output=""},this.downloadLog=function(){var e="data:text/plain;charset=utf-8,",i=t.getLog();e+=encodeURIComponent(i);var n=document.createElement("a");n.href=e,n.target="_blank",n.download=t.logFilename,document.body.appendChild(n),n.click(),n.remove()},this.log=function(i,n,r){var o="";n=n||"INF";if(null!=i)if("object"==typeof object)var s=JSON.stringify(i);else s=i;var a=new Date;o+=t.formatTimestamp(a),o+="["+n+"] ",o+=s,t.output+=o+"\n",(t.output.length/1024).toFixed(2)>500&&CRVideo_UploadingLog(),(t.output.length/1024).toFixed(2)>1e4&&e.clear()},this.formatTimestamp=function(e){e.getFullYear();var t=e.getDate();return"["+("0"+(e.getMonth()+1)).slice(-2)+"-"+t+" "+Number(e.getHours())+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+":"+e.getMilliseconds()+"] "}};window.console.crlog=function(t,i,n){return function(t,i,n){console.log(t),e.log(t,i,n)}},window.CRVideo_EnableLog2File=function(t,i,n){CRVideo.isUploadLog=t,window.console.crlog=t&&i?function(t,i,n){window.console.log(t),e.log(t,i,n)}:t?e.log:i?console.log:function(){},n||(console.crlog("[LOG] Enable upload log: "+t),console.crlog("[LOG] Enable console log debug: "+i))},window.CRVideo_EnableLog2File(!0,!0,1),CRVideo.browserInfo=function(){var e="";if(navigator.userAgent.match(/AppleWebKit.*Mobile.*/)){e=/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"ios":/(Android)/i.test(navigator.userAgent)?"android":"mobile";var t=navigator.userAgent.toLowerCase();if("micromessenger"==t.match(/MicroMessenger/i))return e+"_WX";if("qq"==t.match(/QQ/i))return e+"_qq";if(t.indexOf("liebao")>0)return e+"_leibao";if(null!=t.match(/ubrowser/))return e+"_uc";if(t.indexOf("chrome")>0||t.indexOf("crios")>0)return e+"_chrome";if(t.indexOf("safari")>0)return e+"_safari"}else{var i=navigator.userAgent,n=i.indexOf("Opera")>-1,r=i.indexOf("compatible")>-1&&i.indexOf("MSIE")>-1&&!n,o=i.indexOf("Firefox")>-1,s=i.indexOf("Safari")>-1,a=i.indexOf("Chrome")>-1;if(o)return"PC_FF";if(n)return"PC_Opera";if(a){return function(e,t){var i=navigator.mimeTypes;for(var n in i)if(i[n][e]==t)return!0;return!1}("type","application/vnd.chromium.remoting-viewer")?"PC_360":"pc_chrome"}if(s)return"PC_Safari";if(r)return"IE"}}(),window.CRVideo_StartLogReport=function(){CRVideo.isUploadLog=1,CRVideo_UploadingReport()},window.CRVideo_StopLogReport=function(){CRVideo.isUploadLog=0},window.CRVideo_UploadingReport=function(){CRVideo_UploadingLog(),CRVideo.logReportTimer&&clearTimeout(CRVideo.logReportTimer),CRVideo.logReportTimer=setTimeout((function(){CRVideo_UploadingReport()}),3e4)},window.CRVideo_UploadingLog=function(){if(!CRVideo.logproxy)return __Rtc.postCmd.IceLogCreate();var t=e.getLog();e.clear();var i=new TextEncoder("utf-8").encode(t),n=new Zlib.Deflate(i).compress(),r=new Date,o=r.getFullYear(),s=r.getMonth()+1;s=String(s<10?"0"+s:s);var a=r.getDate();const c=`/${o}-${s}-${a=String(a<10?"0"+a:a)}/`;if(CRVideo.isUploadLog&&CRVideo.LoginParam&&CRVideo.LoginParam.user_id){var l=JSON.parse(window.sessionStorage.getItem("CRVideo.LOCAL_KEY_logName"));if(l&&l.account==CRVideo.LoginParam.account&&l.user_id==CRVideo.LoginParam.user_id&&l.logMonth==s&&l.logDay==a&&l.browserInfo==CRVideo.browserInfo)var d=`${CRVideo.LoginParam.account}${c}${CRVideo.LoginParam.user_id}_${l.logUUID}_webrtc_${CRVideo.browserInfo}_${s}${a}.log`;else d=`${CRVideo.LoginParam.account}${c}${CRVideo.LoginParam.user_id}_${CRVideo.logUUID}_webrtc_${CRVideo.browserInfo}_${s}${a}.log`;console.crlog("[LOG] Log uploading =====> "+d),CRVideo.webLogDetail(0,d,n);var u={account:CRVideo.LoginParam.account,user_id:CRVideo.LoginParam.user_id,logUUID:CRVideo.logUUID,browserInfo:CRVideo.browserInfo,logMonth:s,logDay:a};window.sessionStorage.setItem("CRVideo.LOCAL_KEY_logName",JSON.stringify(u))}if(window.rtcProxy.crmt&&window.rtcProxy.crmt.WEBLOGCFG){const e=`${rtcProxy.crmt.MEET[0]}/${rtcProxy.crmt.ACNT[3]}_${localStorage.getItem("CRRTCSDK_Client_PC_ID")||Ice.generateUUID()}_webrtc_${CRVideo.browserInfo}_${s}${a}.log`;console.crlog("[LOG] Log uploading =====> "+e),CRVideo.webLogDetail(0,e,n)}}},9277:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={getJsCallServerInfo:"/servlet/getJsCallServerInfo",HandToken:"/servlet/HandToken",ClientCreateNetMeet:"/servlet/ClientCreateNetMeet",joinMeetingAPI:"/servlet/joinMeetingAPI",closeConf:"/api/servlet/closeConf",getWebrtcAccKey:"/servlet/getWebrtcAccKey",ArrangeConfAPI:"/servlet/ArrangeConfAPI"}},5174:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});const n=new class{constructor(){this.hexIn=!1,this.hexOut=!1,this.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.base64DecodeChars=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1)}base64encode(e){var t,i,n,r,o,s;for(n=e.length,i=0,t="";i<n;){if(r=255&(this.hexIn?e[i++]:e.charCodeAt(i++)),i==n){t+=this.base64EncodeChars.charAt(r>>2),t+=this.base64EncodeChars.charAt((3&r)<<4),t+="==";break}if(o=this.hexIn?e[i++]:e.charCodeAt(i++),i==n){t+=this.base64EncodeChars.charAt(r>>2),t+=this.base64EncodeChars.charAt((3&r)<<4|(240&o)>>4),t+=this.base64EncodeChars.charAt((15&o)<<2),t+="=";break}s=this.hexIn?e[i++]:e.charCodeAt(i++),t+=this.base64EncodeChars.charAt(r>>2),t+=this.base64EncodeChars.charAt((3&r)<<4|(240&o)>>4),t+=this.base64EncodeChars.charAt((15&o)<<2|(192&s)>>6),t+=this.base64EncodeChars.charAt(63&s)}return t}base64decode(e){var t,i,n,r,o,s,a,c;s=e.length,o=0,a=this.hexOut?[]:"";try{for(;o<s;){do{t=this.base64DecodeChars[255&e.charCodeAt(o++)]}while(o<s&&-1==t);if(-1==t)break;do{i=this.base64DecodeChars[255&e.charCodeAt(o++)]}while(o<s&&-1==i);if(-1==i)break;c=t<<2|(48&i)>>4,this.hexOut?a.push(c):a+=String.fromCharCode(c);do{if(61==(n=255&e.charCodeAt(o++)))return a;n=this.base64DecodeChars[n]}while(o<s&&-1==n);if(-1==n)break;c=(15&i)<<4|(60&n)>>2,this.hexOut?a.push(c):a+=String.fromCharCode(c);do{if(61==(r=255&e.charCodeAt(o++)))return a;r=this.base64DecodeChars[r]}while(o<s&&-1==r);if(-1==r)break;c=(3&n)<<6|r,this.hexOut?a.push(c):a+=String.fromCharCode(c)}}catch(e){console.error(e)}return a}base64ToUint8Array(e){let t=this.base64decode(e),i=new Uint8Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}uint8ArrayToBase64(e){let t,i=0,n=e.length,r="";for(;i<n;)t=e.subarray(i,Math.min(i+32768,n)),r+=String.fromCharCode.apply(null,t),i+=32768;return this.base64encode(r)}};const r=new class{chat2html(e,t,i){var n="",r="",o="";if(e.indexOf("0x10x4")>=0)(n=e.split("0x10x4")[1]).indexOf("0x1")>=0&&(n=n.split("0x1")[0]),r=(n=JSON.parse(n)).opt,o=n.headerUrl;else if(e.indexOf("0x10x5")>=0){(n=e.split("0x10x5")[1]).indexOf("0x1")>=0&&(n=n.split("0x1")[0]),r=(n=JSON.parse(n)).opt,o=n.headerUrl}else if(e.indexOf("0x10x6")>=0){(n=e.split("0x10x6")[1]).indexOf("0x1")>=0&&(n=n.split("0x1")[0]),r=(n=JSON.parse(n)).opt,o=n.headerUrl}else{null==this._imgRegExp&&(this._sign=this.utf8ByteToUnicodeStr([1]),this._signB=this.utf8ByteToUnicodeStr([2]),this._signA=this.utf8ByteToUnicodeStr([3]),this._imgRegExp=new RegExp(this._sign+this._sign+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._headimgRegExp=new RegExp(this._sign+this._signA+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._captureRegExp=new RegExp(this._sign+this._signB+":*/*([^"+this._sign+"]+?)"+this._sign,"g")),n=(n=(n=(n=(n=(n=(n=(n=(n=(n=e.replace(/<br\/>/g,"\n")).replace(/&quot;/g,'"')).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/\&/g,"&amp;")).replace(/\"/g,"&quot;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(this._imgRegExp,'<img  src="$1"></img>')).replace(this._captureRegExp,"");var s=this._headimgRegExp.exec(n);if(s)o=s[1];n=n.replace(this._headimgRegExp,"");for(var a=(16777215&t).toString(16),c=6-a.length,l=0;l<c;l++)a="0"+a;n='<p style="color:#'+a+";font-size:"+i+'">'+n+"</p>",r=0}return[r,o,n]}html2chat(e){return null==this._imgRegExp&&(this._sign=this.utf8ByteToUnicodeStr([1]),this._signB=this.utf8ByteToUnicodeStr([2]),this._signA=this.utf8ByteToUnicodeStr([3]),this._imgRegExp=new RegExp(this._sign+this._sign+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._headimgRegExp=new RegExp(this._sign+this._signA+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._captureRegExp=new RegExp(this._sign+this._signB+":*/*([^"+this._sign+"]+?)"+this._sign,"g")),[e=(e=(e=(e=e.replace(/\<headimg\s+src=[\"\']([^\"\']*?)[\"\']\s*\/\>/gi,this._sign+this._signA+":$1"+this._sign)).replace(/\<headimg\s+src=[\"\']([^\"\']*?)[\"\']\s*\>.*?\<\/s*imgs*\>/gi,this._sign+this._signA+":$1"+this._sign)).replace(/\<img\s+[^>]*?src=[\"\']([\w\/\.\:]*)[\"\'][^>]*\/\>/gi,this._sign+this._sign+":/$1"+this._sign)).replace(/\<img\s+[^>]*?src=[\"\']([\w\/\.\:]*)[\"\'][^>]*\>.*?\<\/s*imgs*\>/gi,this._sign+this._sign+":/$1"+this._sign)]}ask2html(e){null==this._imgRegExp&&(this._sign=this.utf8ByteToUnicodeStr([1]),this._signA=this.utf8ByteToUnicodeStr([3]),this._imgRegExp=new RegExp(this._sign+this._sign+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._headimgRegExp=new RegExp(this._sign+this._signA+":*/*([^"+this._sign+"]+?)"+this._sign,"g"));var t=e.replace(/<br\/>/g,"\n");t=(t=(t=(t=(t=t.replace(/\&/g,"&amp;")).replace(/\"/g,"&quot;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(this._imgRegExp,'<img  src="$1"></img>');var i=this._headimgRegExp.exec(t);if(i)var n=i[1];return[n,t=t.replace(this._headimgRegExp,"")]}};const o={base64encode:n.base64encode.bind(n),base64decode:n.base64decode.bind(n),base64ToUint8Array:n.base64ToUint8Array.bind(n),uint8ArrayToBase64:n.uint8ArrayToBase64.bind(n),chat2html:r.chat2html.bind(r),html2chat:r.html2chat.bind(r),ask2html:r.ask2html.bind(r),SDK_Event:new class{constructor(){this.eventObject={}}addEventListener(e,t){return Array.isArray(this.eventObject[e])||(this.eventObject[e]=[]),this.eventObject[e].push(t),this}emitEventListener(e){const t=this.eventObject[e];if(t){const e=Array.prototype.slice.call(arguments,1);for(let i=0;i<t.length;i++)try{t[i].apply(this,e)}catch(e){console.log(e)}}return this}removeEventListener(e,t){const i=this.eventObject[e];if(i){for(let e=i.length-1;e>=0;e--)i[e]==t&&(i[e]=null,i.splice(e,1))}return this}removeAllEvent(e){const t=this.eventObject[e];if(t){for(let e=t.length-1;e>=0;e--)t[e]=null}return this.eventObject[e]=null,this}},deepClone:function(e){return JSON.parse(JSON.stringify(e))},PrefixInteger:function(e,t){return(Array(t).join(0)+e).slice(-t)},Uint8ArrToChar:function(e){var t,i,n,r,o,s;for(t="",n=e.length,i=0;i<n;)switch((r=e[i++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:o=e[i++],t+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e[i++],s=e[i++],t+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&s)<<0)}return t},charToUint8Arr:function(e){for(var t,i=[],n=0;n<e.length;n++)if((t=e.charCodeAt(n))<128)i.push(t);else if(t<2048)i.push(192|t>>6&31),i.push(128|t>>0&63);else{if(!(t<65536))throw"UCS-2";i.push(224|t>>12&15),i.push(128|t>>6&63),i.push(128|t>>0&63)}return new Uint8Array(i)},splitCutArr:function(e,t){let i=0,n=[];for(;i<e.length;)n.push(e.slice(i,i+=t));return n},getFileType:function(e){return/\.([^\.]+)$/.exec(e)[1].toLocaleLowerCase()},findUserInfoByID:function(e,t){const i=CRVideo.allMemberInfo.find((t=>t.userId==e));return i?i[t]:null},termIDtoUserID:function(e){const t=CRVideo.allMemberInfo.find((t=>t.termId==e));return!!t&&t.userId},userIDtoTermID:function(e){const t=CRVideo.allMemberInfo.find((t=>t.userId==e));return!!t&&t.termId},generate_uuid:function(){for(var e=[],t="0123456789abcdef",i=0;i<36;i++)e[i]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},setCookie:function(e,t){var i=new Date;i.setTime(i.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+i.toGMTString()},getCookie:function(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),i=document.cookie.match(t);return i?unescape(i[2]):void 0},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var i=Utils.getCookie(e);null!=i&&(document.cookie=e+"="+i+";expires="+t.toGMTString())},Uint8ToString:function(e){for(var t=[],i=0;i<e.length;i+=32768)t.push(String.fromCharCode.apply(null,e.subarray(i,i+32768)));return t.join("")},Uint8ToBase64:function(e){for(var t,i=0,n=e.length,r="";i<n;)t=e.subarray(i,Math.min(i+32768,n)),r+=String.fromCharCode.apply(null,t),i+=32768;return btoa(r)},compare:function(e){return function(t,i){var n=t[e],r=i[e];return r>n?-1:r<n?1:0}},deepCopy:function(e){var t={};for(var i in e)t[i]="object"==typeof e[i]?deepCoyp(e[i]):e[i];return t},utf8ByteToUnicodeStr:function(e){for(var t="",i=0;i<e.length;){var n=e[i],r=0;n>>>7==0?(t+=String.fromCharCode(e[i]),i+=1):252==(252&n)?(r=(3&e[i])<<30,r|=(63&e[i+1])<<24,r|=(63&e[i+2])<<18,r|=(63&e[i+3])<<12,r|=(63&e[i+4])<<6,r|=63&e[i+5],t+=String.fromCharCode(r),i+=6):248==(248&n)?(r=(7&e[i])<<24,r|=(63&e[i+1])<<18,r|=(63&e[i+2])<<12,r|=(63&e[i+3])<<6,r|=63&e[i+4],t+=String.fromCharCode(r),i+=5):240==(240&n)?(r=(15&e[i])<<18,r|=(63&e[i+1])<<12,r|=(63&e[i+2])<<6,r|=63&e[i+3],t+=String.fromCharCode(r),i+=4):224==(224&n)?(r=(31&e[i])<<12,r|=(63&e[i+1])<<6,r|=63&e[i+2],t+=String.fromCharCode(r),i+=3):192==(192&n)?(r=(63&e[i])<<6,r|=63&e[i+1],t+=String.fromCharCode(r),i+=2):(t+=String.fromCharCode(e[i]),i+=1)}return t},parse_url:function(e,t){for(var i=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],n=this.php_js&&this.php_js.ini||{},r=n["phpjs.parse_url.mode"]&&n["phpjs.parse_url.mode"].local_value||"php",o={php:/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},s=o[r].exec(e),a={},c=14;c--;)s[c]&&(a[i[c]]=s[c]);if(t)return a[t.replace("PHP_URL_","").toLowerCase()];if("php"!==r){var l=n["phpjs.parse_url.queryKey"]&&n["phpjs.parse_url.queryKey"].local_value||"queryKey";o=/(?:^|&)([^&=]*)=?([^&]*)/g,a[l]={},a[i[12]].replace(o,(function(e,t,i){t&&(a[l][t]=i)}))}return delete a.source,a},colorRGB2Hex:function(e){var t=e.split(",");return"#"+((1<<24)+(parseInt(t[0].split("(")[1])<<16)+(parseInt(t[1])<<8)+parseInt(t[2].split(")")[0])).toString(16).slice(1)},colorHexToRgba:function(e,t){var i="rgba("+parseInt("0x"+e.slice(1,3))+","+parseInt("0x"+e.slice(3,5))+","+parseInt("0x"+e.slice(5,7))+","+t+")";return{red:parseInt("0x"+e.slice(1,3)),green:parseInt("0x"+e.slice(3,5)),blue:parseInt("0x"+e.slice(5,7)),rgba:i}},getDate:function(e=new Date){let t=e.getFullYear(),i=e.getMonth()+1,n=e.getDate(),r=e.getHours(),o=e.getMinutes(),s=e.getSeconds();return i=i<10?"0"+i:i,n=n<10?"0"+n:n,r=r<10?"0"+r:r,o=o<10?"0"+o:o,s=s<10?"0"+s:s,{year:t,month:i,day:n,hour:r,minute:o,second:s}}}},9327:()=>{!function(e,t,i){e.__crAttrClass=class{constructor(){this.initIceCallback(),this.initSDKInterface()}initIceCallback(){this.ICECallback={notifyMeetingAttrsChanged:(e,t,i)=>{console.crlog("[Attr] notifyMeetingAttrsChanged");const n=this.ConferenceToData(e),r=this.ConferenceToData(t);CRVideo_NotifyMeetingAttrsChanged.target(n,r,i)},notifyUserAttrsChanged:(e,t,i,n)=>{console.crlog("[Attr] notifyUserAttrsChanged: "+e);const r=this.ConferenceToData(t),o=this.ConferenceToData(i);CRVideo_NotifyUserAttrsChanged.target(e,r,o,n)}}}initSDKInterface(){e.CRVideo_GetMeetingAttrs=(t,i)=>{if(console.crlog("[Attr] CRVideo_GetMeetingAttrs start..."),!(t instanceof Array))return console.crlog("[Attr] CRVideo_GetMeetingAttrsFail parameter error"),void e.CRVideo_GetMeetingAttrsFail.target(e.CRVideo_ERR_DEF.MEETPARAM_ERR,i);Cr.conferenceRequest("getMeetingAttrs",t).then((t=>{const n=this.ConferenceToData(t[0]);console.crlog("[Attr] CRVideo_GetMeetingAttrsSuccess"),e.CRVideo_GetMeetingAttrsSuccess.target(n,i)})).catch((t=>{console.crlog("[Attr] CRVideo_GetMeetingAttrsFail"),e.CRVideo_GetMeetingAttrsFail.target(t,i)}))},e.CRVideo_GetMeetingAllAttrs=t=>{console.crlog("[Attr] CRVideo_GetMeetingAllAttrs start..."),Cr.conferenceRequest("getMeetingAllAttrs").then((i=>{const n=this.ConferenceToData(i[0]);console.crlog("[Attr] CRVideo_GetMeetingAllAttrsSuccess"),e.CRVideo_GetMeetingAllAttrsSuccess.target(n,t)})).catch((i=>{console.crlog("[Attr] CRVideo_GetMeetingAllAttrsFail"),e.CRVideo_GetMeetingAllAttrsFail.target(i,t)}))},e.CRVideo_SetMeetingAttrs=(t,i,n)=>{console.crlog("[Attr] CRVideo_SetMeetingAttrs start");try{const r=JSON.parse(t);if("object"!=typeof r)throw"[Attr] attrs not is object";const o=this.checkLength(r);if(o)throw o;const s=this.createStringMap(r);Cr.conferenceRequest("setMeetingAttrs",s,i).then((()=>{console.crlog("[Attr] CRVideo_SetMeetingAttrsSuccess"),e.CRVideo_SetMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,n)})).catch((t=>{console.crlog("[Attr] CRVideo_SetMeetingAttrsFail"),e.CRVideo_SetMeetingAttrsRslt.target(t,n)}))}catch(t){return console.crlog(`[Attr] SetMeetingAttrs fail: ${t}`),void e.CRVideo_SetMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.UNKNOWERR,n)}},e.CRVideo_AddOrUpdateMeetingAttrs=(t,i,n)=>{console.crlog("[Attr] AddOrUpdateMeetingAttrs start");try{const r=JSON.parse(t);if("object"!=typeof r)throw"[Attr] attrs not is object";const o=this.checkLength(r);if(o)throw o;const s=this.createStringMap(r);Cr.conferenceRequest("addOrUpdateMeetingAttrs",s,i).then((()=>{console.crlog("[Attr] CRVideo_AddOrUpdateMeetingAttrs Success"),e.CRVideo_AddOrUpdateMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,n)})).catch((t=>{console.crlog("[Attr] CRVideo_AddOrUpdateMeetingAttrs Fail"),e.CRVideo_AddOrUpdateMeetingAttrsRslt.target(t,n)}))}catch(t){return console.crlog(`[Attr] CRVideo_AddOrUpdateMeetingAttrs fail: ${t}`),void e.CRVideo_AddOrUpdateMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.UNKNOWERR,n)}},e.CRVideo_DelMeetingAttrs=(t,i,n)=>{console.crlog("[Attr] CRVideo_DelMeetingAttrs start"),t instanceof Array?Cr.conferenceRequest("delMeetingAttrs",t,i).then((()=>{console.crlog("[Attr] CRVideo_DelMeetingAttrs Success"),e.CRVideo_DelMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,n)})).catch((t=>{console.crlog("[Attr] CRVideo_DelMeetingAttrs Fail"),e.CRVideo_DelMeetingAttrsRslt.target(t,n)})):e.CRVideo_DelMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.MEETPARAM_ERR,n)},e.CRVideo_ClearMeetingAttrs=(t,i)=>{console.crlog("[Attr] CRVideo_ClearMeetingAttrs start..."),Cr.conferenceRequest("clearMeetingAttrs",t).then((()=>{console.crlog("[Attr] CRVideo_ClearMeetingAttrsRslt Success"),e.CRVideo_ClearMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,i)})).catch((t=>{console.crlog("[Attr] CRVideo_ClearMeetingAttrsRslt Fail"),e.CRVideo_ClearMeetingAttrsRslt.target(t,i)}))},e.CRVideo_GetUserAttrs=(t,i,n)=>{if(console.crlog("[Attr] CRVideo_GetUserAttrs start..."),!(t instanceof Array&&t.length<=50&&(!i||i&&i instanceof Array)))return console.crlog("[Attr] CRVideo_GetUserAttrsFail parameter error"),void e.CRVideo_GetUserAttrsFail.target(e.CRVideo_ERR_DEF.MEETPARAM_ERR,n);let r,o="getUserAttrs";i&&i.length>0&&(o="getUserAttrsWithKey",r=i),Cr.conferenceRequest(o,t,r).then((t=>{const i=this.getUserData(t[0]);console.crlog("[Attr] CRVideo_GetUserAttrsSuccess"),e.CRVideo_GetUserAttrsSuccess.target(i,n)})).catch((t=>{console.crlog("[Attr] CRVideo_GetUserAttrsFail"),e.CRVideo_GetUserAttrsFail.target(t,n)}))},e.CRVideo_SetUserAttrs=(t,i,n,r)=>{console.crlog("[Attr] CRVideo_SetUserAttrs start");try{const s=JSON.parse(i);if("object"!=typeof s)throw"attrs is not object";const a=this.checkLength(s);if(a)throw a;var o=new Conference.StringStringMap;for(let e in s)o.set(e,s[e]);Cr.conferenceRequest("setUserAttrs",t,o,n).then((()=>{console.crlog("[Attr] CRVideo_SetUserAttrsRslt Success"),e.CRVideo_SetUserAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,r)})).catch((t=>{console.crlog(`[Attr] CRVideo_SetUserAttrsRslt Fail: ${error}`),e.CRVideo_SetUserAttrsRslt.target(t,r)}))}catch(t){return console.crlog(`[Attr] CRVideo_SetUserAttrsRslt fail: ${t}`),void e.CRVideo_SetUserAttrsRslt.target(e.CRVideo_ERR_DEF.UNKNOWERR,r)}},e.CRVideo_AddOrUpdateUserAttrs=(t,i,n,r)=>{console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrs start");try{const o=JSON.parse(i);if("object"!=typeof o)throw"attrs not is object";const s=this.checkLength(o);if(s)throw s;const a=new Conference.StringStringMap;for(let e in o)a.set(e,o[e]);Cr.conferenceRequest("addOrUpdateUserAttrs",t,a,n).then((()=>{console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrsRslt Success"),e.CRVideo_AddOrUpdateUserAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,r)})).catch((t=>{console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrsRslt Fail"),e.CRVideo_AddOrUpdateUserAttrsRslt.target(t,r)}))}catch(t){return console.crlog(`[Attr] CRVideo_AddOrUpdateUserAttrsRslt fail: ${t}`),void e.CRVideo_AddOrUpdateUserAttrsRslt.target(e.CRVideo_ERR_DEF.UNKNOWERR,r)}},e.CRVideo_DelUserAttrs=(t,i,n,r)=>{console.crlog("[Attr] CRVideo_DelUserAttrs start"),i instanceof Array?Cr.conferenceRequest("delUserAttrs",t,i,n).then((()=>{console.crlog("[Attr] CRVideo_DelUserAttrs Success"),e.CRVideo_DelUserAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,r)})).catch((t=>{console.crlog("[Attr] CRVideo_DelUserAttrs Fail"),e.CRVideo_DelUserAttrsRslt.target(t,r)})):e.CRVideo_DelUserAttrsRslt.target(CONSTANT.CRVideo_MEETPARAM_ERR,r)},e.CRVideo_ClearUserAttrs=(t,i,n)=>{console.crlog("[Attr] CRVideo_ClearUserAttrs start..."),"string"==typeof t&&(t=[t]),t instanceof Array?Cr.conferenceRequest("clearUserAttrs",t,i).then((()=>{console.crlog("[Attr] CRVideo_ClearUserAttrsRslt Success"),e.CRVideo_ClearUserAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,n)})).catch((t=>{console.crlog("[Attr] CRVideo_ClearUserAttrsRslt Fail"),e.CRVideo_ClearUserAttrsRslt.target(t,n)})):e.CRVideo_ClearUserAttrsRslt.target(CONSTANT.CRVideo_MEETPARAM_ERR,n)},e.CRVideo_ClearAllUserAttrs=(t,i)=>{console.crlog("[Attr] CRVideo_ClearAllUserAttrs start..."),Cr.conferenceRequest("clearAllUserAttrs",t).then((()=>{console.crlog("[Attr] CRVideo_ClearAllUserAttrsRslt Success"),e.CRVideo_ClearAllUserAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,i)})).catch((t=>{console.crlog("[Attr] CRVideo_ClearAllUserAttrsRslt Fail"),e.CRVideo_ClearAllUserAttrsRslt.target(t,i)}))}}checkLength(e){for(let t in e){if(t.length>64)return"[MeetingAttr] key Exceed maximum length";if(e[t].length>8192)return"[MeetingAttr] value Exceed maximum length"}return!1}ConferenceToData(e){const t={};return e.forEach(((e,i)=>{t[e]=i})),t}getUserData(e){const t={};return e.forEach(((e,i)=>{t[e]={},i.forEach(((i,n)=>{t[e][i]=n}))})),t}createStringMap(e){const t=new Conference.StringStringMap;for(let i in e)t.set(i,e[i]);return t}},e.__Rtc.CRRTCAttr=new e.__crAttrClass,e.CRVideo_GetMeetingAttrsSuccess=new i.CbProxy("CRVideo_GetMeetingAttrsSuccess"),e.CRVideo_GetMeetingAttrsFail=new i.CbProxy("CRVideo_GetMeetingAttrsFail"),e.CRVideo_GetMeetingAllAttrsSuccess=new i.CbProxy("CRVideo_GetMeetingAllAttrsSuccess"),e.CRVideo_GetMeetingAllAttrsFail=new i.CbProxy("CRVideo_GetMeetingAllAttrsFail"),e.CRVideo_SetMeetingAttrsRslt=new i.CbProxy("CRVideo_SetMeetingAttrsRslt"),e.CRVideo_AddOrUpdateMeetingAttrsRslt=new i.CbProxy("CRVideo_AddOrUpdateMeetingAttrsRslt"),e.CRVideo_DelMeetingAttrsRslt=new i.CbProxy("CRVideo_DelMeetingAttrsRslt"),e.CRVideo_ClearMeetingAttrsRslt=new i.CbProxy("CRVideo_ClearMeetingAttrsRslt"),e.CRVideo_GetUserAttrsSuccess=new i.CbProxy("CRVideo_GetUserAttrsSuccess"),e.CRVideo_GetUserAttrsFail=new i.CbProxy("CRVideo_GetUserAttrsFail"),e.CRVideo_SetUserAttrsRslt=new i.CbProxy("CRVideo_SetUserAttrsRslt"),e.CRVideo_AddOrUpdateUserAttrsRslt=new i.CbProxy("CRVideo_AddOrUpdateUserAttrsRslt"),e.CRVideo_DelUserAttrsRslt=new i.CbProxy("CRVideo_DelUserAttrsRslt"),e.CRVideo_ClearUserAttrsRslt=new i.CbProxy("CRVideo_ClearUserAttrsRslt"),e.CRVideo_ClearAllUserAttrsRslt=new i.CbProxy("CRVideo_ClearAllUserAttrsRslt"),e.CRVideo_NotifyMeetingAttrsChanged=new i.CbProxy("CRVideo_NotifyMeetingAttrsChanged"),e.CRVideo_NotifyUserAttrsChanged=new i.CbProxy("CRVideo_NotifyUserAttrsChanged")}(window,Ice,CRVideo)},724:()=>{const e=window.CRVideo,t=window.Ice;class i{constructor(e){this.initData(),this.initDOM(e)}initData(){this._id=t.generateUUID(),this._height="100%",this._width="100%",this._left="0px",this._top="0px",this._handler=null,this._nicknameEle=null,this._videoEle=null,this._playIcon=null,this._isPlaying=!1}initDOM(t){this._handler=document.createElement("div"),this._handler.style.width="100%",this._handler.style.height="100%",this._handler.style.position="relative",this._handler.style.overflow="hidden",this._nicknameEle=document.createElement("div"),this._nicknameEle.style.position="absolute",this._nicknameEle.style.left="20px",this._nicknameEle.style.top="20px",this._nicknameEle.style.padding="0 10px",this._nicknameEle.style.height="30px",this._nicknameEle.style.lineHeight="30px",this._nicknameEle.style.color="#fff",this._nicknameEle.style.fontSize="12px",this._nicknameEle.style.zIndex="2",this._nicknameEle.style.fontWeight="800",this._nicknameEle.style.backgroundColor="rgb(0, 0, 0)",this._nicknameEle.style.borderRadius="15px",this._nicknameEle.style.filter="alpha(opacity:50)",this._nicknameEle.style.display="none",this._handler.appendChild(this._nicknameEle),this._videoEle=document.createElement("video"),this._videoEle.style.width="100%",this._videoEle.style.height="100%",this._videoEle.autoplay=!0,this._videoEle.muted=!0,this._videoEle.playsInline=!0,this._videoEle.playsinline=!0,this._handler.appendChild(this._videoEle),"iOS"!=__Rtc.CRBrowser.curBrowserCfg.platform&&"media"!=t||(this._videoEle.controls=!0);const i=!!__Rtc.CRBrowser.weixin.isWeixin&&__Rtc.CRBrowser.weixin.weixinVer.split(".");i&&+`${i[0]}${i[1]}${i[2]}`>=8014&&(this._playIcon=document.createElement("img"),this._playIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA6TSURBVHhe7Z0JcFXVGccTIWoVk3fvOee+BAJhiYDYgkqnWrdalVLrYEEdKy5oXREwiBUruOAy2lFQAWlJ3SibA6NMBATFSUBZSyKC1Q4FAoqhFAIaAgRCEkK/793zxLwcwkvylnvO/f4zv3F59917zvn+uWd5Z0nxsdratp1t285FthA3Ag8yJp6xOZ9iczEbWAAU2YyvgH9+1gD3/xUBeA1cy6eEvgv3CN0L7wn3xme4jyIZqV69ep3KOe9u2+J6MMETwAybieVgiuKQUeJDMTzjU8b5dHjeWHw2pgHTIpNF0lBt0oXoxphzK7xJJkGQC4GSHwU9WWAaCi0mJkLabsE0YlrdJJO8qjR4I/QFIz0CwXtfBlEVXC+BaSzANEPaz4c8UNXpFWH1YnH+MFQ7iyKCph+hPPBRkKezZfZIiVRWVtYZ0EAeBMGY2Sg4hsC4Mx2qy4GYV5ltUrwkhMiEv+g8KHjskSkDYiCF0NMc4ThOUBYDKVYKBAI52JuDHtYqRcH7AsYg7zYfi2Uhi4XUUkFbI8s1lFitKmw/4pYFH4tvb1lMpGgVDAbPxNe/cnCScGFiORNiOJaVLDZSEzolwPm18Nr/SFmYRCOgrD6EXvE1WHZuEZIaCBqnXaGg8iMLjoiaqRnBYGdZnCRQmm2LO6DaW6koLKI5YNMByhLK1N8DrZbVviNj4i1lIREth4k35I/gvlMq9PiugUJY1qhQiFixzBKiP5a1W+SGKycn53TsLkPGdfgtT3dKoGock5ube5osfjOF41KM838oCoCII1Dm04wduQ84Tm9oXNIwQrLAYQkr+FMZDjPEGLuKBjs9AA6qMnalDIvesji/iXHxT2VGiYQTioUQN8rw6Ckw1T2QGWqkew9o1PO7ZJj0EmPO0FAG1Bkjkk8JxkiGSwulWozdjwmPyAjhPUowVhgzN3TeVSq+YjHBERkgvAuOdd2JsXND6EGF1tTFd0kVER+Kcaq3DKO3BN3YX1PvT18wdpzzX8lwekOWFTwXx0hUCSY0golPbTvzHBnW5CozM1NAgvRfekW4MPFBu6wsLsObLPVNo2kvBsLEGxDcNDfGSZDFxGhlwgjtwUXAMsyJFWPOVZAAGlYwlxLskMlwJ0busixfLRr1K4WJnG7Txub8b4pEECZi8ykYczf0cRTOVlAmgDAWjLkMf3xk23YH6DF8ono4YTTLsPkjbRB74YZhiocSfoCJl6UNYiuceah8IOEb4K11ubRDbOSurBHzIx9E+A1ekBLLFT84rUL9IMJ32GKItEXrlJ6eDT1OsbTRAwi/UpSRkWFJe7Rc8Pp7SHFzws/YYoS0R8vUzp25QNNhiIaAJ9Ab0ibNF72tiBPS0rcW1KMBuAFt2kGciGWWZWVIu0QvW5jVE7zwoou/HD9+QtmiRYu+W7r0k4q5c+eW540cubVjp86fq64noqAFPcS2UI9+oLyZZnTI7vj5jBkzdx05cqT+mEK7du068tCoUduEE1R+n2iSBegV1zJRSM61Ut1IK8BU69asWVMpPdSk1q1bt7/fb/r/W3Uf4sQwxq6Qtjm5oNGOR6spb6QTU/Pzd0rfRKWampr62e+8s7tHj57rVfcjGsMYnyxt07TkJD7t1wZ279Fzw4EDB+qkZ5qlvXv31jz22Jivg5nt16nuTRyHcbE2qj3n4W2FK5mVN9GJ+4c+UCp90mJt2PDFgQEDrtuouj/xI9wNdZvUKdBon6P8sma8+NJLZdIfrRJWj+++9155z3N6bVA9hwgxG73jWkgheKV1g4uMWCAx4ZVXdkhvxEQVFRW1T40b940TzKTqsTElTe4xD+2rexVf0pJYGyusjRs3Hhx0/Q3/UT3T35x4v61UuMCY8//iZSxUbW1t/fz5C/b27nPeF6pn+xHctFj6qKFwmY9Jm3rE01hhVVZW1j7//Avftu+Q7fvqEbyzJku1NN/i/HeqL+hKIowV1ubNm6tuunnwJi4cZVr8gmWFDixoKIuJp1UX60oijYU6evToscWLF3933gV9fVw98ielnX4Qtq+MmtOeaGOFVVVVVTdhwstl+HOSKl2GU4Beci0FwtF2HEFVXKgtyTJWWFu3bj08ZMgdm/1UPWIbPRgMOtJW7m58qgt1JtnGQmH1WFhY9D1O2VGl0UTgJXV8V0DGxDDVRTrjBWOFhdXj5Nde25HdsZPxc78abPENxpqkukhnvGSssL4tKzt81z33blGl1xSgE/iKtFVKiimT+n6MF40V1ooVKyouufQyU6tHnPwHprLtdBzcUlygNV42Furw4cNH8/Nf39m5S1ejqkf0khCiHfYIu6su0B2vGyusnTt3Vg8bPrzUpKnR4KmzjZmGHIkuxkLV19cfW7VqdeUVV171lSovuhGarhxg7BbVh7qjk7HCqq6urn972rRdXbp203pqtMX5zcYuStXRWGHt3l1eo/fKIZ6HQw3PqT/UG52NhcLq8bPP1u3v3/8a7VYOgaeeTmHcmaz6UHd0N1ZYuB5y1uzZu3Nzu2tTPYKxJoKxzDxV3hRjhbV9+/bDv7jwl/9S5dVrMMbfxsHRd1Qf6o5pxkKVlpYe0mRLgNn4xnpX8YH2mGgs1IsvvlSmyq+nYGIuGus95YeaY6qxNm/ZcsjrU3HQU2QszYQ/BXl9nIuMpaHq6urqc7v38PTiWTKWhtqzZ0+N11cFhY1FjXeNtHDhwr2q/HoKbLzTcIM+qq6uPqrJD9Wh4QYaINVAOH/+qafGfaPKq9ewmHgLjEU/6XhduF9XXt7Irap8ehH3Jx0mnlV9qDsmGCv0O+GsWbt79DxHqy2UOHfG0bQZj2rt2rWVV1/dT889UYUYQRP9PKYdO3ZUPzBseKnOC11DE/0YCxq3WBXRzVgHDx6smzxlyn87de6i/eKK0KJVWkyRXOFI+pIlS77TZUpMFJQIIXLhjcXOouVfydGmTZuqBg++ZZMq/boCXlodDAbPdNcW0oLVhGrfvn21zzz77HZDt/ueHzIVymLiVcUFWuNFY+EOzHPmzN1t+A7ME6StQkecDFVcoDVeMhYujCgpKdFyYURzgTb7fdJWoW2MrlBdpDNeMRaudB456uGtfjkEKsD5ZdJW5m1siyTbWIcOHTo6dWr+Tt0XnzYH7ARmRpy8iltFFkReqDPJMhZWe0VFRRUXXXyJbzZbC8O4M0/66bhwY1LVxbqSDGNtKS09dNvtQzar0uMP+OPSTsdlCfFb9cV6kkhj4fDBCy/8hfZ7t51+0k7HhXWjSQOliTBWTW1t/bx58/b8rHcf359QgQOjZ7Vvz6SdGopxPl31JR2Jp7GwHbV+/foDA677PR05J2FCvCVt1FhQRxpxViESL2OVl5cf+dMjo7+mU8AiaOrMwoxgsAtcRMfKKYTzzd98883/+Wn4oBk0fawcCA/CNGJxRawOwsRqb/ny5RWXXna574YPoofPRO+4FjqBbCHuVH9ZL4Y+MKzVR/du27bt0B/vumeL3w9fOhmMidulfU4sPDgaWvjaH3+C88QPVlW16LDx/fv3140fP6HMDxv+txb8xabBMSdNCY+8V91EN96ANpH0SlSqq6s7tmDhwr19zruADriMEnhbvSptc3KZcrYOvnGKi4srpW+a1JdffnVw4MBBNHzQTDjnl0vbRKW20IhfqLqRbuAc8jlz5pbjXCjpoQYqLy+vGTNmLA0ftAyc1NfGtUyUsm0xRHEjbYFe3VcTJ03a8fHHH3+/YuXKfQUFBXtGP/ro16adDJFIGHNulXaJXpZlZcCXl0XejCAkRXhcjrRL82Rznqe4IUFgo324tEnz1S4zU0Bba7nqxoSvWZaenm5Lm7RM9NYiImnV2yqs9PRsG262NPLmhG8pzMjICEh7tE7QQzTiZx6i9UT18020ysnJOR1uOj/yIYTf4AUpubmnSVvERqZuHkJET3NH2aOWxcRE1QMJH8DEy9IGsZdt2x3gAZ8qH0yYCxOfwNsqS9ogPoIHDFY+nDAWi/ObZPjjqrbwsKmRDydMhf8VYt68H5pbqlCVSGNbfqAQJ37KsCdGtuP0gwcbsfCCUFLCGLtShjuhSmVM/FmRIMIALCZGY4zdUCdavXqdyhifpkoYoS+ho3dT+qbJKCdHWAfbjH+oSiChIUwsjnpxRLwVcJzeYK6VyoQS+sD4CisYPFeG1RuCnuLVJiwb8yu4jAsX0chweksW53+ARBZHJprwPMWJGgRtqVIhgfcpEk54lxKb87sxdm4IvatUmzujFBkgvIgtRmDM3NB5X6mcczKXt8E3VR7Gyg2ZPkq1mHO/mwFlxojkUYJNFhknLZWKx9ZRb9E7YCzAVINlfPSWJUR/m/FVqowSCQTHGlUb0OosaHOdzxhfoswwEXcsKPuAEH1kOMySnG4zKzLTRLzhMxhj7WUYzFR2dvZPIKPj1AVAxBjs+T2Bq6xk8RuvVPgLGkDz5+OIO0/9Wixrt8h9pEBmZg5Nu4k9OO3FsrI6yWL2rdLgL+tumh0RA0K9vtB+68mdS+UlCSG6wev7dWWBESeHib87jtNVFicpQqdg24uGJaIHyuqjgNuWanqfdVJoc92zbCEexIlnqsIkACwbIUb8cGI8KXrh2At0l59kXKxWFq4PccuCPw7t0viuTPaDAoFAjmswx7c/CzHOV9k2fxzLQhYLKVbCv1Iw2Ego6KLIgjeYQmwWJHzhqB+VlZV1hm07g6DQZ0YEwRjg7TydMWcg5lVmm5RIQTush8X5w9DdXqQKkFaE8sBHwZu5u8weyQNKA5P9nDExGoL0PqDDBENM4/uQ5kfATOdDHtq6WSF5VW2gTZILVcltELRJEDxsk3nBaJiGIkwTnuqQLkQ3TKubZJJ2ys3NPQ2rTGgE34C9SwjuLDlGFk+zlUDVhnvkQzuQP4HPxjRgWmSySIYqDX+otYS4BNfUYW8T3iTP408jwBz498XwT5x9oVonWRz6DNtEcC38d37ou3APvFfonu6PwD79zS4l5f+L9kY9CrI2iQAAAABJRU5ErkJggg==",this._playIcon.style.position="absolute",this._playIcon.style.width="20%",this._playIcon.style.left="50%",this._playIcon.style.top="50%",this._playIcon.style.transform="translate(-50%, -50%)",this._playIcon.style.transition="all 0.8s ease",this._playIcon.style.zIndex="3",this._playBtnImg=this._playIcon,this._handler.appendChild(this._playIcon),this._playIcon.onclick=e=>{e.stopPropagation(),console.crlog(`[UI] ${this._id} videoPlayImg onclick`),this._isPlaying||this._videoEle.play()}),this._videoEle.onplaying=t=>{if(console.crlog(`[UI] ${this._id} onplaying... ${this._videoEle.videoWidth} x ${this._videoEle.videoHeight}`),this._playBtnImg&&(this._playBtnImg.style.opacity=0),this._isPlaying=!0,"MeetSDK"==e.SDKKey&&this._videoEle.videoWidth&&this._videoEle.videoHeight){let e=this._videoEle.videoWidth/this._videoEle.videoHeight;clearInterval(this._videoInfoTimer||-1),this._videoInfoTimer=setInterval((()=>{e>1.7&&e<1.86&&(this._videoEle.style.objectFit="cover")}),3e3)}},this._videoEle.onplay=e=>{console.crlog(`[UI] ${this._id} onplay`),this._playBtnImg&&(this._playBtnImg.style.opacity=0),this._isPlaying=!0},this._videoEle.onpause=e=>{console.crlog(`[UI] ${this._id} onpause`),this._playBtnImg&&(this._playBtnImg.style.opacity=1),this._isPlaying=!1},this._videoEle.onload=e=>{console.crlog(`[UI] ${this._id} onload`)},this._videoEle.onerror=e=>{console.crlog(`[UI] ${this._id} onerror`),this._isPlaying=!1},this._videoEle.onended=e=>{console.crlog(`[UI] ${this._id} onended`),this._isPlaying=!1},this._videoEle.onclick=e=>{e.stopPropagation(),__Rtc.CRBrowser.curBrowserCfg.isMobile&&this._videoEle.srcObject&&this._videoEle.srcObject.active&&this._videoEle.play()}}id(e){if(void 0===e)return this._id;this._id=e}height(e){if(void 0===e)return this._handler.style.height;this._handler.style.height=e}width(e){if(void 0===e)return this._handler.style.width;this._handler.style.width=e}left(e){if(void 0===e)return this._handler.style.left;this._handler.style.left=e}top(e){if(void 0===e)return this._handler.style.top;this._handler.style.top=e}handler(){return this._handler}show(){try{console.crlog(`[UI] Container:${this._id}, show()`)}catch(e){console.error(e)}this._handler.style.display="block","video"==this.type&&__Rtc.CRRTCRemoteVideo.updateSubscribeVideo()}hide(){try{console.crlog(`[UI] Container:${this._id}, hide()`)}catch(e){console.error(e)}this._handler.style.display="none","video"==this.type&&__Rtc.CRRTCRemoteVideo.updateSubscribeVideo()}isPicEmpty(){return this._videoEle.srcObject?1:0}setNickNameStyle(e){try{console.crlog(`[UI] Container:${this._id}, setNickNameStyle(${JSON.stringify(e)})`)}catch(e){console.error(e)}this.nickNameStyle=e;const t=this._nicknameEle;if(null!=t&&e&&"object"==typeof e)for(var i in e)t.style[i]=e[i]}setNickNameContent(e){console.crlog(`[UI] Container:${this._id}, setNickNameContent(${e})`);const t=this._nicknameEle;null!=t&&(t.innerHTML=e),this.nickNameContent=e}setVisibleNickName(e){try{console.crlog(`[UI] Container:${this._id}, setVisibleNickName(${e})`)}catch(e){console.error(e)}const t=this._nicknameEle;t.style.display=e?"block":"none"}setVideoProp(e){try{console.crlog(`[UI] Container:${this._id}, setVideoProp(${JSON.stringify(e)})`)}catch(e){console.error(e)}try{const t=this._videoEle;if(e)for(let i in e)if("style"==i)for(let n in e[i])t.style[n]=e[i][n];else t[i]=e[i]}catch(e){console.error(e)}}dblClickFullScreen(e){try{console.crlog(`[UI] Container:${this._id}, dblClickFullScreen(${e})`)}catch(e){console.error(e)}const t=this._videoEle;let i=!1;return void 0!==e?e&&0==t.controls?(t.ondblclick=function(){this.webkitRequestFullScreen&&0==t.controls?this.webkitRequestFullScreen():this.mozRequestFullScreen&&0==t.controls?this.mozRequestFullScreen():this.msRequestFullScreen&&0==t.controls&&this.msRequestFullScreen()},i=!0):e?t.controls&&(i=!1):(t.ondblclick=null,i=!1):i=!!t.ondblclick,i}savePic(e){try{console.crlog(`[UI] Container:${this._id}, savePic(${e})`)}catch(e){console.error(e)}let t="png";if(!e)return;switch(e){case e.indexOf(".png")>-1:t="png";break;case e.indexOf(".jpg")>-1:t="jpg";break;case e.indexOf(".jpeg")>-1:t="jpeg";break;case e.indexOf(".bmp")>-1:t="bmp";break;case e.indexOf(".gif")>-1:t="gif";break;default:t="png"}const i=this._videoEle;if(null==i.srcObject||0==i.srcObject.active)return console.crlog(`[UI] Container:${this._id}, savePic fail, this video have not videoStream!`);const n=window.canvas=document.createElement("canvas");n.width=i.videoWidth,n.height=i.videoHeight,n.getContext("2d").drawImage(i,0,0,n.width,n.height);let r=n.toDataURL("image/"+t).split(","),o=r[0].match(/:(.*?);/)[1],s=atob(r[1]),a=s.length,c=new Uint8Array(a);for(;a--;)c[a]=s.charCodeAt(a);const l=new Blob([c],{type:o}),d=window.URL.createObjectURL(l),u=document.createElement("a");u.style.display="none",u.href=d,u.download=e,document.body.appendChild(u),u.click(),setTimeout((function(){document.body.removeChild(u),window.URL.revokeObjectURL(d)}),1e3)}savePicToBase64(e,t){try{console.crlog(`[UI] Container:${this._id}, savePicToBase64(${e},${JSON.stringify(t)})`)}catch(e){console.error(e)}const i=this._videoEle;if(null==i.srcObject||0==i.srcObject.active)return console.crlog(`[UI] Container:${this._id}, savePic fail, this video have not videoStream!`);const n=window.canvas=document.createElement("canvas");n.width=t&&t.width?t.width:i.videoWidth,n.height=t&&t.height?t.height:i.videoHeight,n.getContext("2d").drawImage(i,0,0,n.width,n.height);return n.toDataURL("image/"+e)}keepAspectRatio(e){}}class n extends i{constructor(e){super(),this._videoID=-1,this.type="video"}getVideoID(){return this._videoID}clear(){console.crlog(`[UI] Container:${this._id}, clear()`),this._videoEle&&(this._videoEle.srcObject=null)}setVideo(e,t,i){t=null==t?-1:t,i=null==i?0:i,console.crlog(`[UI] Video Container:${this._id}, setVideo(${e},${t},${i})`);const n=this._videoID,r=this._userID||"";if(this._userID=e,this._videoID=t,this._ssVal=i,0==t&&e!==CRVideo.userInfo.userId&&-1!=n)return __Rtc.CRRTCRemoteVideo.unSubscibevideo(r,n),void this.clear();const o=CRVideo.allMemberInfo.find((t=>t.userId==e));this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=o?o.nickname:e;__Rtc.CRRTCUI.videoContainerList.find((e=>e._id==this._id))||__Rtc.CRRTCUI.videoContainerList.push(this),e==CRVideo.userInfo.userId?__Rtc.CRRTCLocalVideo.refreshLocalContainerSrc(this):(o&&o.defaultCam&&(-1===t?__Rtc.CRRTCRemoteVideo.updateConnectList(o.termId,o.defaultCam,this):__Rtc.CRRTCRemoteVideo.updateConnectList(o.termId,t,this),__Rtc.CRRTCRemoteVideo.updateSubscribeVideo()),__Rtc.CRRTCRemoteVideo.refreshContainerSrc(this))}destroy(){console.crlog(`[UI] Video Container:${this._id}, destroy()`),clearInterval(this._videoInfoTimer),this._videoInfoTimer=null,this._videoEle.srcObject=null,this._videoEle.poster="",this._videoEle.onplaying=null,this._videoEle.onplay=null,this._videoEle.onpause=null,this._videoEle.onload=null,this._videoEle.onerror=null,this._videoEle.onended=null,this._videoEle.onclick=null,this._videoEle.ondblclick=null,this._playIcon&&this._playIcon.onclick&&(this._playIcon.onclick=null),this._videoEle&&this._videoEle.remove(),this._nicknameEle&&this._nicknameEle.remove(),this._handler&&this._handler.remove(),this._playIcon&&this._playIcon.remove(),this._videoEle=null,this._nicknameEle=null,this._handler=null,this._playIcon=null;const e=__Rtc.CRRTCUI.videoContainerList.findIndex((e=>e._id==this._id));-1!==e&&(console.crlog(`[UI] UserID:${this._userID}, container:${this._id} be destroyed...`),__Rtc.CRRTCUI.videoContainerList.splice(e,1),__Rtc.CRRTCRemoteVideo.updateSubscribeVideo()),this.initData()}}class r{constructor(e){this._penType={1:"Pencil"},this._init(e)}_init(e){const t=document.createElement("canvas"),i=t.getContext("2d");this._screenContainer=e.screenContainer,this._parentNode=e.screenContainer._handler,this._parentNode.appendChild(t),t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.width="100%",t.style.height="100%",t.style.display="none",this._lastStyle={parentStyle:{width:0,height:0},canvasStyle:{width:0,height:0}},this._canvas=t,this._ctx=i,this._markDataList=[],this._lineWidth=e.lineWidth,this._strokeStyle=e.strokeStyle,this._type=e.type,this._allowMark=e.allowMark,this._cursor=e.cursor,this._canvas.style.cursor=this._cursor,console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer init...`);new ResizeObserver((e=>{this.resize()})).observe(this._canvas)}_loadEvent(){const{_ctx:e,_canvas:t}=this;t.onmousedown=i=>{if(!this._allowMark)return;e.lineWidth=this._lineWidth;const n=t.width/t.offsetWidth;var r=[{x:parseInt(i.offsetX*n),y:parseInt(i.offsetY*n)}];t.onmousemove=t=>{var i=parseInt(t.offsetX*n),o=parseInt(t.offsetY*n);e.beginPath();const{x:s,y:a}=r[r.length-1];e.moveTo(s,a),e.lineTo(i,o),r.push({x:i,y:o}),e.stroke()},document.onmouseup=()=>{const e=this._encode(r);this._sendData(e),t.onmousemove=null,document.onmouseup=null}}}_loadImg(e){var t=new Image;t.src=e,t.onload=()=>{this._canvas.style.position="absolute",this._canvas.style.width="100%",this._canvas.style.height="100%",this._canvas.style.top="0px",this._canvas.style.left="0px",this._canvas.width=t.width,this._canvas.height=t.height,this._ctx.strokeStyle=this._strokeStyle,this._ctx.lineWidth=this._lineWidth,this._loadEvent(),this.resize()},this._img=t,console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer loadImg...`)}_setCursor(e){this._canvas.style.cursor=e}_encode(e){const{lineWidth:i,strokeStyle:n}=this._ctx,r=t.generateUUID(),o=e.length,s=this._type||1,a=parseInt(n.substr(1,2),16),c=parseInt(n.substr(3,2),16),l=parseInt(n.substr(5,2),16),d=new ArrayBuffer(4*o+8),u=new Uint8Array(d);u.set([0,l,c,a,i>>8,255&i,o>>8,255&o]);let h=[];for(;e.length>0;){const t=e.shift();h.push(t.x>>8),h.push(255&t.x),h.push(t.y>>8),h.push(255&t.y)}return u.set(h,8),console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer encode markData...`),{mousePosSeq:u,markid:r,type:s}}_sendData(e){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer send mark data...`),e.termid=CRVideo.userInfo.termId,__Rtc.CRICEAPI.SendMarkDataV4(e)}_drawAllMarkData(e){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer drawAllMarkData...`),e.length>0&&(this._markDataList=[]),e.forEach((e=>{const t=__Rtc.CRRTCScreen.parseMarkData(e);this._markDataList.push(t),t.data.length&&this._drawData(t)}))}_drawData(e){if(!this._penType[e.type])return console.crlog("[UI][Error] ,: "+e.type);this._ctx.save(),e.data.length&&(this["_draw"+this._penType[e.type]](e),this._ctx.restore())}_drawPencil(e){const t=this._ctx,i=e.data;t.strokeStyle=e.color,t.lineWidth=e.width,t.beginPath(),t.moveTo(i[0].x,i[0].y);for(let e=3;e<i.length;e++)t.lineTo(i[e].x,i[e].y);t.stroke()}set(e,t){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer set, ${e}:${t}`);const{_ctx:i,_canvas:n}=this;"strokeStyle"===e||"lineWidth"===e?i[e]=t:"cursor"===e?n.style.cursor=t:"allowMark"===e&&(this._allowMark=!!t)}resize(){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer resize...`);const{_canvas:e,_ctx:t,_img:i,_parentNode:n}=this;let{width:r,height:o,clientWidth:s,clientHeight:a}=e;const{offsetWidth:c,offsetHeight:l}=n;if(this._lastStyle.parentStyle.width=c,this._lastStyle.parentStyle.height=l,this._lastStyle.canvasStyle.width=s,this._lastStyle.canvasStyle.height=a,e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.top="0px",e.style.left="0px",s=e.clientWidth,a=e.clientHeight,r/o>s/a){const t=o/(r/s),i=(a-t)/2;e.style.height=t+"px",e.style.top=i+"px"}else{const t=r/(o/a),i=(s-t)/2;e.style.width=t+"px",e.style.left=i+"px"}this._markDataList.forEach((e=>{this._drawData(e)}))}clearAllMark(){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer clearAllMark...`);const{_canvas:e}=this,t=e.width,i=e.height;e.width=t,e.height=i,this._markDataList=[]}savePic(e){var t="png";switch(e){case e.indexOf("png")>-1:t="png";break;case e.indexOf("jpg")>-1:t="jpg";break;case e.indexOf("jpeg")>-1:t="jpeg";break;case e.indexOf("bmp")>-1:t="bmp";break;case e.indexOf("gif")>-1:t="gif";break;default:t="png"}for(var i=this._canvas.toDataURL("image/"+t).split(","),n=i[0].match(/:(.*?);/)[1],r=atob(i[1]),o=r.length,s=new Uint8Array(o);o--;)s[o]=r.charCodeAt(o);var a=new Blob([s],{type:n}),c=window.URL.createObjectURL(a),l=document.createElement("a");l.style.display="none",l.href=c,l.download=e,document.body.appendChild(l),l.click(),setTimeout((function(){document.body.removeChild(l),window.URL.revokeObjectURL(c)}),1e3)}savePicToBase64(e="png"){return this._canvas.toDataURL("image/"+e)}}class o{constructor(e){this.nickname=e.nickname,this.div=null,this._initDom()}_initDom(){const e=document.createElement("div");e.className="screenMask",e.style.position="absolute",e.style.left="50%",e.style.top="50%",e.style.transform="translate(-50%, -50%) rotate(-45deg)",e.style.height=2*window.screen.height+"px",e.style.width=2*window.screen.width+"px",e.style.zIndex="2",e.style.display=__Rtc.CRRTCConf.curOption&Conference.OPT_SCREENSHARE_WATERMARK?"block":"none",this.div=e;const t=250,i=2*window.screen.width,n=2*window.screen.height;var r=Math.floor(i/350),o=Math.floor(n/270),s=(i-350*r+t)/2,a=s,c=(n-270*o+t)/2;for(let e=0;e<r*o;e++){a+=350,(e+1)%r==0&&(a=s+10*e,c+=270);const t=document.createElement("div");t.className="watermark",t.style.position="absolute",t.style.left=a+"px",t.style.top=c+"px",t.style.fontSize="20px",t.style.color="rgba(69,69,70,0.3)",t.innerHTML=`${this.nickname}`,this.div.appendChild(t)}}}class s extends i{constructor(){super(),this.type="screen",this.canvasContainer=new r({type:1,strokeStyle:"#000000",cursor:"default",lineWidth:2,allowMark:!1,screenContainer:this}),this.maskContainer=new o({nickname:CRVideo.userInfo.nickname}),this._handler.appendChild(this.maskContainer.div)}setVideo(e){console.crlog(`[UI] Screen Container:${this._id}, setVideo(${e})`),this._userID=e||"";const t=CRVideo.allMemberInfo.find((t=>t.userId==e));this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=t?t.nickname:e;__Rtc.CRRTCUI.screenContainerList.find((e=>e._id==this._id))||__Rtc.CRRTCUI.screenContainerList.push(this),this._videoEle.onplaying=()=>{this.canvasContainer._canvas.height=this._videoEle.videoHeight,this.canvasContainer._canvas.width=this._videoEle.videoWidth,this.canvasContainer._drawAllMarkData(__Rtc.CRRTCScreen.allMarkDataList);const e=this.savePicToBase64();e&&this.canvasContainer._loadImg(e)},__Rtc.CRRTCScreen.refreshContainerSrc()}setMark(e){try{console.crlog(`[UI] Screen Container:${this._id}, setMark(${JSON.stringify(e)})`)}catch(e){console.error(e)}this.canvasContainer._allowMark=void 0===e.allowMark?this.canvasContainer._allowMark:e.allowMark,this.canvasContainer._type=void 0===e.type?this.canvasContainer._type:e.type,this.canvasContainer._strokeStyle=void 0===e.strokeStyle?this.canvasContainer._strokeStyle:e.strokeStyle,this.canvasContainer._lineWidth=void 0===e.lineWidth?this.canvasContainer._lineWidth:e.lineWidth,this.canvasContainer._cursor=void 0===e.cursor?this.canvasContainer._cursor:e.cursor,this.canvasContainer.set("strokeStyle",this.canvasContainer._strokeStyle),this.canvasContainer.set("lineWidth",this.canvasContainer._lineWidth),this.canvasContainer.set("cursor",this.canvasContainer._cursor),"true"==this.canvasContainer._allowMark&&__Rtc.CRRTCScreen.isMarking?this.canvasContainer._canvas.style.display="block":"false"!=this.canvasContainer._allowMark||__Rtc.CRRTCScreen.isMarking||(this.canvasContainer._canvas.style.display="none")}markResize(){console.crlog(`[UI] Screen Container:${this._id}, markResize()`),this.canvasContainer.resize()}showMask(e){this.maskContainer.div.display=e?"block":"none"}destroy(){console.crlog(`[UI] Screen Container:${this._id}, destroy()`);const e=__Rtc.CRRTCUI.screenContainerList.findIndex((e=>e._id==this._id));-1!==e&&(__Rtc.CRRTCUI.screenContainerList[e]._videoEle.srcObject=null,__Rtc.CRRTCUI.screenContainerList[e]._videoEle.poster="",__Rtc.CRRTCUI.screenContainerList[e]._videoEle.onplaying=null,__Rtc.CRRTCUI.screenContainerList[e]._videoEle.remove(),__Rtc.CRRTCUI.screenContainerList[e]._videoEle=null,__Rtc.CRRTCUI.screenContainerList[e]._handler.remove(),__Rtc.CRRTCUI.screenContainerList[e]._handler=null,console.crlog(`[UI] Screen Container:${this._id} be destroyed...`),__Rtc.CRRTCUI.screenContainerList.splice(e,1))}}class a extends i{constructor(){super("media"),this.type="media"}setVideo(e){console.crlog(`[UI] Media Container:${this._id}, setVideo(${e})`),this._userID=e;const t=CRVideo.allMemberInfo.find((t=>t.userId==e));this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=t?t.nickname:e,__Rtc.CRRTCMedia.refreshContainerSrc()}}window.__crUIClass=class{constructor(){this.initData(),this.initSDKInterface()}initData(){console.crlog("[UI] UIModule initData..."),this.videoContainerList=[],this.screenContainerList=[]}initSDKInterface(){window.CRVideo_CreatVideoObj=e=>{try{console.crlog(`[UI] CRVideo_CreatVideoObj(${JSON.stringify(e)})`)}catch(e){console.error(e)}const t=new n,i=t._videoEle;try{if(e)for(let t in e)if("style"==t)for(let n in e[t])i.style[n]=e[t][n];else i[t]=e[t]}catch(e){console.error(e)}return t},window.CRVideo_CreateVideoContainer=e=>{try{console.crlog(`[UI] CRVideo_CreateVideoContainer(${JSON.stringify(e)})`)}catch(e){console.error(e)}const t=new n;try{if(e)for(let i in e)if("videoProp"==i)for(let i in e.videoProp)if("style"==i)for(let i in e.videoProp.style)t._videoEle.style[i]=e.videoProp.style[i];else t._videoEle[i]=e.videoProp[i];else if("containerProp"==i)for(let i in e.containerProp)if("style"==i)for(let i in e.containerProp.style)t._handler.style[i]=e.containerProp.style[i];else t._handler[i]=e.containerProp[i]}catch(e){console.error(e)}return t},window.CRVideo_CreatScreenShareObj=e=>{try{console.crlog(`[UI] CRVideo_CreatScreenShareObj(${JSON.stringify(e)})`)}catch(e){console.error(e)}const t=new s,i=t._videoEle;try{if(e)for(let t in e)if("style"==t)for(let n in e[t])i.style[n]=e[t][n];else i[t]=e[t]}catch(e){console.error(e)}return t.setVideo(),t},window.CRVideo_CreatMediaObj=e=>{try{console.crlog(`[UI] CRVideo_CreatMediaObj(${JSON.stringify(e)})`)}catch(e){console.error(e)}const t=new a;__Rtc.CRRTCMedia.container=t;const i=t._videoEle;i.muted=!1,i.volume=.001;try{if(e)for(let t in e)if("style"==t)for(let n in e[t])i.style[n]=e[t][n];else i[t]=e[t]}catch(e){console.error(e)}return t}}},window.__Rtc.CRRTCUI=new __crUIClass},246:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var n=i(1440);const r=window.Conference,o=window.Ice,s=window.__Rtc;s.VideoReceptor=o.Class(r.VideoCallback,{setProxy:function(e){this.proxy=e},notifyAllowVideoWall(...e){console.log("===== notifyAllowVideoWall =====",e)},updateStatus(...e){s.CRRTCVideo&&s.CRRTCVideo.updateStatus(...e)},notifyOpenVideo(...e){s.CRRTCVideo&&s.CRRTCVideo.notifyOpenVideo(...e)},startVideoByManager(...e){console.log("===== startVideoByManager =====",e)},notifyEnableVideo(...e){console.log("===== notifyEnableVideo =====",e)},updateFocusWindow(...e){s.CRRTCVideo&&s.CRRTCVideo.updateFocusWindow(...e)},updateVLayout(...e){},updateVLayout2(...e){s.CRRTCVideo&&s.CRRTCVideo.updateVLayout2(...e)},updateMainVideoShowMode(...e){s.CRRTCVideo&&s.CRRTCVideo.updateMainVideoShowMode(...e)},updateVideoListMode(...e){s.CRRTCVideo&&s.CRRTCVideo.updateVideoListMode(...e)},enableUpload(...e){console.log("===== enableUpload =====",e)},enableUpload2(...e){s.CRRTCVideo&&s.CRRTCVideo.enableUpload2(...e)},generateIFrame(...e){console.log("===== generateIFrame =====",e)},notifyRefuseOpenVideo(...e){console.log("===== notifyRefuseOpenVideo =====",e)},getVideoSetting_async(...e){console.log("===== getVideoSetting_async =====",e),s.CRRTCVideo&&s.CRRTCVideo.getVideoSetting_async(...e)},setCamera(...e){console.log("===== setCamera =====",e)},setCameraById(...e){console.log("===== setCameraById =====",e)},notifyVideoPolling(...e){s.CRRTCVideo&&s.CRRTCVideo.notifyVideoPolling(...e)},notifyPollingVideo(...e){console.log("===== notifyPollingVideo =====",e)},notifyPollingVideo2(...e){s.CRRTCVideo&&s.CRRTCVideo.notifyPollingVideo2(...e)},notifyVideoList(...e){s.CRRTCVideo&&s.CRRTCVideo.notifyVideoList(...e)},notifyUpdateAllCameraInfos(...e){s.CRRTCVideo&&s.CRRTCVideo.notifyUpdateAllCameraInfos(...e)},notifySetOpenedCameraNumber(...e){s.CRRTCVideo&&s.CRRTCVideo.notifySetOpenedCameraNumber(...e)},notifyMultiCameras(...e){console.log("===== notifyMultiCameras =====",e)},notifyStartAdjustDirection(...e){console.log("===== notifyStartAdjustDirection =====",e)},notifyStartAdjustZoom(...e){console.log("===== notifyStartAdjustZoom =====",e)},notifyStopAdjustDirection(...e){console.log("===== notifyStopAdjustDirection =====",e)},notifyStopAdjustZoom(...e){console.log("===== notifyStopAdjustZoom =====",e)}});const a={setVideoDeviceStatus(e){(0,n.V)("_videoCtrl","setDeviceStatus",e).then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.setVideoDeviceStatusRslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.setVideoDeviceStatusRslt.apply(s.CRRTCVideo,[e])}))},allowVideoWall:e=>new Promise(((t,i)=>{(0,n.V)("_videoCtrl","allowVideoWall",e).then((e=>t(e))).catch((e=>i(e)))})),startVideo(){(0,n.V)("_videoCtrl","startVideo").then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.startVideoRslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.startVideoRslt.apply(s.CRRTCVideo,[e])}))},stopVideo(){(0,n.V)("_videoCtrl","stopVideo").then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.stopVideoRslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.stopVideoRslt.apply(s.CRRTCVideo,[e])}))},reqOpenVideo(e){(0,n.V)("_videoCtrl","reqOpenVideo",e).then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.reqOpenVideoRslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.reqOpenVideoRslt.apply(s.CRRTCVideo,[e])}))},startVideoEx(e){(0,n.V)("_videoCtrl","startVideoEx",e).then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.startVideoExRslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.startVideoExRslt.apply(s.CRRTCVideo,[e])}))},stopVideoEx(e){(0,n.V)("_videoCtrl","stopVideoEx",e).then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.stopVideoExRslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.stopVideoExRslt.apply(s.CRRTCVideo,[e])}))},enableVideo:e=>new Promise(((t,i)=>{(0,n.V)("_videoCtrl","enableVideo",e).then((e=>t(e))).catch((e=>i(e)))})),setFocusWindow(e,t){console.crlog(`[Video] _videoCtrl.setFocusWindow(${e},${t})`);return new Promise(((i,o)=>{const s=r.WINDOW_MODE[e];(0,n.V)("_videoCtrl","setFocusWindow",s,t).then((e=>i(e))).catch((e=>o(e)))}))},batchSubscribeVideo2(e,t,i){const a=[new r.UsrCamSize(Number(e),Number(t),Number(i))],c=new o.Context;c._fwd="z",(0,n.V)("_videoCtrl","batchSubscribeVideo2",a,c).then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.batchSubscribeVideo2Rslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.batchSubscribeVideo2Rslt.apply(s.CRRTCVideo,[e])}))},subscribeFocusWindow2:e=>new Promise(((t,i)=>{(0,n.V)("_videoCtrl","subscribeFocusWindow2",e).then((e=>t(e))).catch((e=>i(e)))})),setVLayout2:e=>new Promise(((t,i)=>{(0,n.V)("_videoCtrl","setVLayout2",e).then((e=>t(e))).catch((e=>i(e)))})),setMainVideoShowMode:e=>new Promise(((t,i)=>{(0,n.V)("_videoCtrl","setMainVideoShowMode",e).then((e=>t(e))).catch((e=>i(e)))})),setVideoListMode:e=>new Promise(((t,i)=>{(0,n.V)("_videoCtrl","setVideoListMode",e).then((e=>t(e))).catch((e=>i(e)))})),refuseOpenVideo:e=>new Promise(((t,i)=>{(0,n.V)("_videoCtrl","refuseOpenVideo",e).then((e=>t(e))).catch((e=>i(e)))})),getVideoSetting:e=>new Promise(((t,i)=>{(0,n.V)("_videoCtrl","getVideoSetting",e).then((e=>t(e))).catch((e=>i(e)))})),setCamera(e,t){const i=new Promise(((i,o)=>{const{mutiCam:s,openCamIDs:a,denoise:c,deinterlace:l,fpsType:d,videType:u}=t,h=new r.VideoSetting({mutiCam:s,openCamIDs:a,denoise:c,deinterlace:l,fpsType:d,videType:u});(0,n.V)("_videoCtrl","setCamera",e,h).then((e=>i(e))).catch((e=>o(e)))}));return i},setCameraById(e){const t=new Promise(((t,i)=>{const{termID:o,camID:s}=e,a=new r.UsrCamID({termID:o,camID:s});(0,n.V)("_videoCtrl","setCameraById",a).then((e=>t(e))).catch((e=>i(e)))}));return t},setVideoPolling:(e,t)=>new Promise(((i,r)=>{(0,n.V)("_videoCtrl","setVideoPolling",e,t).then((e=>i(e))).catch((e=>r(e)))})),updatePollingVideo2:(e,t)=>new Promise(((i,o)=>{const s=[];e.forEach((e=>{s.push(new r.UsrCamID({termID:e.termID,camID:e.camID}))})),(0,n.V)("_videoCtrl","updatePollingVideo2",s,t).then((e=>i(e))).catch((e=>o(e)))})),updateVideoList:e=>new Promise(((t,i)=>{(0,n.V)("_videoCtrl","updateVideoList",e).then((e=>t(e))).catch((e=>i(e)))})),getVideoPollingState:()=>new Promise(((e,t)=>{(0,n.V)("_videoCtrl","getVideoPollingState").then((t=>e(t))).catch((e=>t(e)))})),updateAllCameraInfos(e){(0,n.V)("_videoCtrl","updateAllCameraInfos",e).then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.updateAllCameraInfosRlst.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.updateAllCameraInfosRlst.apply(s.CRRTCVideo,[e])}))},setOpenedCameraNumber(e){(0,n.V)("_videoCtrl","setOpenedCameraNumber",e).then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.setOpenedCameraNumberRslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.setOpenedCameraNumberRslt.apply(s.CRRTCVideo,[e])}))},setMultiCameras:(e,t)=>new Promise(((i,r)=>{(0,n.V)("_videoCtrl","getVideoPollingState",e,t).then((e=>i(e))).catch((e=>r(e)))})),startAdjustDirection(e,t){const i=new Promise(((i,o)=>{const{termID:s,camID:a}=e,c=new r.UsrCamID({termID:s,camID:a});(0,n.V)("_videoCtrl","startAdjustDirection",c,t).then((e=>i(e))).catch((e=>o(e)))}));return i},startAdjustZoom(e,t){const i=new Promise(((i,o)=>{const{termID:s,camID:a}=e,c=new r.UsrCamID({termID:s,camID:a});(0,n.V)("_videoCtrl","startAdjustZoom",c,t).then((e=>i(e))).catch((e=>o(e)))}));return i},stopAdjustDirection(e){const t=new Promise(((t,i)=>{const{termID:o,camID:s}=e,a=new r.UsrCamID({termID:o,camID:s});(0,n.V)("_videoCtrl","stopAdjustDirection",a).then((e=>t(e))).catch((e=>i(e)))}));return t},stopAdjustZoom(e){const t=new Promise(((t,i)=>{const{termID:o,camID:s}=e,a=new r.UsrCamID({termID:o,camID:s});(0,n.V)("_videoCtrl","stopAdjustZoom",a).then((e=>t(e))).catch((e=>i(e)))}));return t}},c=a},1440:(e,t,i)=>{"use strict";i.d(t,{V:()=>o});const n=window.Cr,r=window.CRVideo;function o(e,t,...i){let o=!1,s=!0;return"addElement"!=t&&"netDetectResults"!=t&&"startCloudRecord"!=t||(s=!1),"netDetectResults"!=t&&"batchSubscribeVideo2"!=t||(o=!0),new Promise(((a,c)=>{try{if(!r.isMeeting)return;try{!o&&s&&console.crlog(`[ICE] Ice Request [${e}:${t}],${JSON.stringify(i)}`),!o&&!s&&console.crlog(`[ICE] Ice Request [${e}:${t}],args...`)}catch(e){console.error(e)}n._proxy[e][t](...i).then((function(...i){return!o&&console.crlog(`[ICE] Ice Request [${e}:${t}] success!`),i.unshift(0),a(i)})).exception((function(i){return!o&&console.crlog(`[ICE][Error] Ice Request [${e}:${t}] fail,${i.toString()}`),c(i)}))}catch(e){return!o&&console.crlog(`[ICE][Error] Conference Request error: ${e}`),c(e)}}))}},2398:()=>{const e=window.__Rtc;e.CR_InitRslt=new Cr.CbProxy("CR_InitRslt"),e.CR__LoginRslt=new Cr.CbProxy("CR__LoginRslt"),e.CR__RefreshSessionRslt=new Cr.CbProxy("CR__RefreshSessionRslt"),e.CR__KeepAliveRslt=new Cr.CbProxy("CR__KeepAliveRslt"),e.CR__ExitRslt=new Cr.CbProxy("CR__ExitRslt"),e.CR__GetActiveMembersRslt=new Cr.CbProxy("CR__GetActiveMembersRslt"),e.CR__GetLastMsgRslt=new Cr.CbProxy("CR__GetLastMsgRslt"),e.CR__GetLastNMsgRslt=new Cr.CbProxy("CR__GetLastNMsgRslt"),e.CR__GetBroadCastUrlRslt=new Cr.CbProxy("CR__GetBroadCastUrlRslt"),e.CR__AskQuesRslt=new Cr.CbProxy("CR__AskQuesRslt"),e.CR__GetQuesListRslt=new Cr.CbProxy("CR__GetQuesListRslt"),e.CR__AskQuesNotify=new Cr.CbProxy("CR__AskQuesNotify"),e.CR__LockQuesNotify=new Cr.CbProxy("CR__LockQuesNotify"),e.CR__ReplyQuesNotify=new Cr.CbProxy("CR__ReplyQuesNotify"),e.CR__ModifyQuesNotify=new Cr.CbProxy("CR__ModifyQuesNotify"),e.CR__DelQuesNotify=new Cr.CbProxy("CR__DelQuesNotify"),e.CR__DelAllQuesNotify=new Cr.CbProxy("CR__DelAllQuesNotify"),e.CR__PublicQuesNotify=new Cr.CbProxy("CR__PublicQuesNotify"),e.CR__QuesTypeChangeNotify=new Cr.CbProxy("CR__QuesTypeChangeNotify"),e.CR__ModifyQuesTypeNotify=new Cr.CbProxy("CR__ModifyQuesTypeNotify"),e.CR__SetBroadCastQuesNotify=new Cr.CbProxy("CR__SetBroadCastQuesNotify"),e.CR__NotifyPlayBackStartPush=new Cr.CbProxy("CR__NotifyPlayBackStartPush"),e.CR__GetIMMsgCountRslt=new Cr.CbProxy("CR__GetIMMsgCountRslt"),e.CR__Notifypayback=new Cr.CbProxy("CR__Notifypayback"),e.CR__NotifyBroadCastPlaybackStop=new Cr.CbProxy("CR__NotifyBroadCastPlaybackStop"),e.CR__NotifySwtichLiveAppElements=new Cr.CbProxy("CR__NotifySwtichLiveAppElements"),e.CR__NotifyThumbUp=new Cr.CbProxy("CR__NotifyThumbUp"),e.CR__GetLuckyDrawCfgRslt=new Cr.CbProxy("CR__GetLuckyDrawCfgRslt"),e.CR__JoinLuckyDrawMembersRslt=new Cr.CbProxy("CR__JoinLuckyDrawMembersRslt"),e.CR__NotifyLDMembersStatus=new Cr.CbProxy("CR__NotifyLDMembersStatus"),e.CR__CloseMicExRslt=new Cr.CbProxy("CR__CloseMicExRslt"),e.CR__AudioAllocRaw=new Cr.CbProxy("CR__AudioAllocRaw"),e.CR__AudioAllocRawExt=new Cr.CbProxy("CR__AudioAllocRawExt"),e.CR__AudioAllocRawExt2=new Cr.CbProxy("CR__AudioAllocRawExt2"),e.CR__VideoAllocRaw=new Cr.CbProxy("CR__VideoAllocRaw"),e.CR__VideoAllocRawExt=new Cr.CbProxy("CR__VideoAllocRawExt"),e.CR__VideoAllocRawExt2=new Cr.CbProxy("CR__VideoAllocRawExt2"),e.CR__ModifyPeerAddr=new Cr.CbProxy("CR__ModifyPeerAddr"),e.CR__ModifyPeerAddrExt=new Cr.CbProxy("CR__ModifyPeerAddrExt"),e.CR__NotifyRTMPStreamPublishFinished=new Cr.CbProxy("CR__NotifyRTMPStreamPublishFinished"),e.CR__EnableSendScreen2Internet=new Cr.CbProxy("CR__EnableSendScreen2Internet"),e.CR__DisableSendScreen2Internet=new Cr.CbProxy("CR__DisableSendScreen2Internet"),e.CR__EnableSendFilm2Internet=new Cr.CbProxy("CR__EnableSendFilm2Internet"),e.CR__DisableSendFilm2Internet=new Cr.CbProxy("CR__DisableSendFilm2Internet"),e.CR__Free=new Cr.CbProxy("CR__Free"),e.CR__VideoResolutionReportRslt=new Cr.CbProxy("CR__VideoResolutionReportRslt"),e.CR__SetVoiceEnergyRslt=new Cr.CbProxy("CR__SetVoiceEnergyRslt"),e.CR__PstnSwitchMicStatusRslt=new Cr.CbProxy("CR__PstnSwitchMicStatusRslt"),e.CR__StartRecordRslt=new Cr.CbProxy("CR__StartRecordRslt"),e.CR__IsRecordingRslt=new Cr.CbProxy("CR__IsRecordingRslt"),e.CR__StopRecordRslt=new Cr.CbProxy("CR__StopRecordRslt"),e.CR__PlayApplauseRslt=new Cr.CbProxy("CR__PlayApplauseRslt"),e.CR__GetMusicListRslt=new Cr.CbProxy("CR__GetMusicListRslt"),e.CR__GetPlayBGMusicRslt=new Cr.CbProxy("CR__GetPlayBGMusicRslt"),e.CR__StartBGMusicRslt=new Cr.CbProxy("CR__StartBGMusicRslt"),e.CR__StopPlayBGMusicRslt=new Cr.CbProxy("CR__StopPlayBGMusicRslt"),e.CR__SetPlayBGMusicVolumnRslt=new Cr.CbProxy("CR__SetPlayBGMusicVolumnRslt"),e.CR__GetPlayBGMusicVolumnRslt=new Cr.CbProxy("CR__GetPlayBGMusicVolumnRslt"),e.CR__VoiceHowlingRslt=new Cr.CbProxy("CR__VoiceHowlingRslt"),e.CR__VoiceNoiseRslt=new Cr.CbProxy("CR__VoiceNoiseRslt"),e.CR__RemoteAudioSetRslt=new Cr.CbProxy("CR__RemoteAudioSetRslt"),e.CR__GetRemoteAudioInfRslt=new Cr.CbProxy("CR__GetRemoteAudioInfRslt"),e.CR__NotifyCtrlReqState=new Cr.CbProxy("CR__NotifyCtrlReqState")},8989:()=>{__Rtc.MSClientI=Ice.Class(MS.MSClient,{setProxy:function(e){this.proxy=e},VideoAllocRaw_async:function(e,t,i){console.crlog&&console.crlog("[RTC] VideoAllocRaw"),this.proxy.callCallback("VideoAllocRaw",[e,t,i])},VideoAllocRawExt_async:function(e,t,i,n,r){console.crlog&&console.crlog("[RTC] VideoAllocRawExt_async"),this.proxy.callCallback("VideoAllocRawExt",[e,t,i,n])},VideoAllocRawExt2_async:function(e,t,i,n,r){console.crlog&&console.crlog("[RTC] VideoAllocRawExt2_async"),this.proxy.callCallback("VideoAllocRawExt2",[e,t,i,n])},AudioAllocRaw_async:function(e,t){console.crlog&&console.crlog("[RTC] AudioAllocRaw"),this.proxy.callCallback("AudioAllocRaw",[e,t])},AudioAllocRawExt_async:function(e,t,i,n){console.crlog&&console.crlog("[RTC] AudioAllocRawExt"),this.proxy.callCallback("AudioAllocRawExt",[e,t,i])},AudioAllocRawExt2_async(...e){__Rtc.CRRTCAudio.ICECallback.AudioAllocRawExt2_async(...e)},ModifyPeerAddr_async:function(e,t,i){console.crlog&&console.crlog("[RTC] ModifyPeerAddr"),this.proxy.callCallback("ModifyPeerAddr",[e,asParam,strParams])},ModifyPeerAddrExt_async:function(e,t,i){e.ice_response(),console.crlog&&console.crlog("[RTC] ModifyPeerAddrExt"),this.proxy.callCallback("ModifyPeerAddrExt",[e,t,i])},NotifyRTMPStreamPublishFinished_async:function(e,t,i,n,r,o,s,a){console.crlog&&console.crlog("[RTC] NotifyRTMPStreamPublishFinished_async"),this.proxy.callCallback("NotifyRTMPStreamPublishFinished",[e,t,i])},EnableSendScreen2Internet_async:function(e){e.ice_response(),console.crlog&&console.crlog("[RTC] EnableSendScreen2Internet"),this.proxy.callCallback("EnableSendScreen2Internet",[e])},DisableSendScreen2Internet_async:function(e){e.ice_response(),console.crlog&&console.crlog("[RTC] DisableSendScreen2Internet"),this.proxy.callCallback("DisableSendScreen2Internet",[e])},EnableSendFilm2Internet_async:function(e){e.ice_response(),console.crlog&&console.crlog("[RTC] EnableSendFilm2Internet"),this.proxy.callCallback("EnableSendFilm2Internet",[e])},DisableSendFilm2Internet_async:function(e){e.ice_response(),console.crlog&&console.crlog("[RTC] DisableSendFilm2Internet"),this.proxy.callCallback("DisableSendFilm2Internet",[e])},EnableSendVideo2Internet_async(e,t){e.ice_response(),__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.enableSendVideo2Internet(t)},DisableSendVideo2Internet_async:(e,t)=>{e.ice_response(),__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.disableSendVideo2Internet(t)},Free_async:function(e,t){e.ice_response(),this.proxy.callCallback("Free",[t])}}),__Rtc.ChatReceptor=Ice.Class(Conference.IMCallback,{setProxy:function(e){this.proxy=e},receiveIMMsg(...e){__Rtc.CRRTCIMMsg.ICECallback.receiveIMMsg(...e)},notifyIMForbidStatus(...e){__Rtc.CRRTCIMMsg.ICECallback.notifyIMForbidStatus(...e)},notifyClearIMMsg(...e){__Rtc.CRRTCIMMsg.ICECallback.notifyClearIMMsg(...e)},notifyDeleteIMMsg(...e){__Rtc.CRRTCIMMsg.ICECallback.notifyDeleteIMMsg(...e)}}),__Rtc.ScreenShareReceptor=Ice.Class(Conference.ScreenShareClient,{setProxy:function(e){this.proxy=e},notifyStartScreenShare(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyStartScreenShare.call(__Rtc.CRRTCScreen,...e)},notifyStopScreenShare(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyStopScreenShare.call(__Rtc.CRRTCScreen,...e)},notifyStartMarked(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyStartMarked.call(__Rtc.CRRTCScreen,...e)},notifyStopMarked(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyStopMarked.call(__Rtc.CRRTCScreen,...e)},notifyMakeIFrame(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyScMakeIFrame.call(__Rtc.CRRTCScreen,...e)},notifyMarkData(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyMarkData.call(__Rtc.CRRTCScreen,...e)},notifyClearAllMarks(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyClearAllMarks.call(__Rtc.CRRTCScreen,...e)},notifyMarkDataV4(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyMarkDataV4.call(__Rtc.CRRTCScreen,...e)},notifyClearAllMarksV4(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyClearAllMarksV4.call(__Rtc.CRRTCScreen,...e)},notifyCtrlReqState(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyCtrlReqState.call(__Rtc.CRRTCScreen,...e)},notifyRequestMarked:function(e){console.crlog&&console.crlog("[RTC] notifyRequestMarked",e),this.proxy.callCallback("notifyRequestMarked",[e])},notifyCancelMarkedReq:function(e){console.crlog&&console.crlog("[RTC] notifyCancelMarkedReq",e),this.proxy.callCallback("notifyCancelMarkedReq",[e])},notifyEnableOtherMarked:function(e,t){console.crlog&&console.crlog("[RTC] notifyEnableOtherMarked",e,t),this.proxy.callCallback("notifyEnableOtherMarked",[e,t])},notifyRequestCtrlRight:function(e){console.crlog&&console.crlog("[RTC] notifyRequestCtrlRight",e),this.proxy.callCallback("notifyRequestCtrlRight",[e])},notifyCancelCtrlReq:function(e){console.crlog&&console.crlog("[RTC] notifyCancelCtrlReq",e),this.proxy.callCallback("notifyCancelCtrlReq",[e])},notifyRejectCtrlReq:function(e,t,i){console.crlog&&console.crlog("[RTC] notifyRejectCtrlReq",e,t,i),this.proxy.callCallback("notifyRejectCtrlReq",[e,t,i])},notifyGiveCtrlRight:function(e,t){console.crlog&&console.crlog("[RTC] notifyGiveCtrlRight",e,t),this.proxy.callCallback("notifyGiveCtrlRight",[e,t])},notifyReleaseCtrlRight:function(e){console.crlog&&console.crlog("[RTC] notifyReleaseCtrlRight",e),this.proxy.callCallback("notifyReleaseCtrlRight",[e])},notifyCtrlMsg:function(e,t){console.crlog&&console.crlog("[RTC] notifyCtrlMsg",e,t),this.proxy.callCallback("notifyCtrlMsg",[e,t])},notifyTmpSetRemoteCtrlState:function(e,t){console.crlog&&console.crlog("[RTC] notifyTmpSetRemoteCtrlState",e,t),this.proxy.callCallback("notifyTmpSetRemoteCtrlState",[e,t])},notifyIndicator:function(e,t){console.crlog&&console.crlog("[RTC] notifyIndicator",e,t),this.proxy.callCallback("notifyIndicator",[e,t])}}),__Rtc.MediaReceptor=Ice.Class(Conference.MediaCallback,{setProxy:function(e){this.proxy=e},notifyStartPlayMedia(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifyStartPlayMedia.call(__Rtc.CRRTCMedia,...e)},notifyStopPlayMedia(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifyStopPlayMedia.call(__Rtc.CRRTCMedia,...e)},notifyPausePlayMedia(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifyPausePlayMedia.call(__Rtc.CRRTCMedia,...e)},notifyMakeIFrame(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifyMakeIFrame.call(__Rtc.CRRTCMedia,...e)},notifySubscribeMedia(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifySubscribeMedia.call(__Rtc.CRRTCMedia,...e)}}),__Rtc.AnsQueReceptor=Ice.Class(Conference.AnsQueCallback,{setProxy:function(e){this.proxy=e},askQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] askQuesNotify(id:%s)",e),this.proxy.callCallback("askQuesNotify",[e,t])},lockQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] lockQuesNotify(id:%s)",e),this.proxy.callCallback("lockQuesNotify",[e,t])},replyQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] replyQuesNotify(id:%s)",e),this.proxy.callCallback("replyQuesNotify",[e,t])},modifyQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] modifyQuesNotify(id:%s)",e),this.proxy.callCallback("modifyQuesNotify",[e,t])},delQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] delQuesNotify(id:%s)",e),this.proxy.callCallback("delQuesNotify",[e,t])},delAllQuesNotify:function(e){console.crlog&&console.crlog("[RTC] delAllQuesNotify(termId:%s)",e),this.proxy.callCallback("delAllQuesNotify",[e])},publicQuesNotify:function(e,t,i){console.crlog&&console.crlog("[RTC] publicQuesNotify(id:%s)",e),this.proxy.callCallback("publicQuesNotify",[e,t,i])},quesTypeChangeNotify:function(e,t){console.crlog&&console.crlog("[RTC] quesTypeChangeNotify(id:%s)",e),this.proxy.callCallback("quesTypeChangeNotify",[e,t])},modifyQuesTypeNotify:function(e,t){console.crlog&&console.crlog("[RTC] modifyQuesTypeNotify(termId:%s)",e),this.proxy.callCallback("modifyQuesTypeNotify",[e,t])},setBroadCastQuesNotify:function(e){console.crlog&&console.crlog("[RTC] setBroadCastQuesNotify(bEnable:%s)",e),this.proxy.callCallback("setBroadCastQuesNotify",[e])}}),__Rtc.WhiteBoardReceptor=Ice.Class(Conference.WhiteBoardCallback,{setProxy:function(e){this.proxy=e},notifySetCurrentPage(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetCurrentPage.call(__Rtc.CRRTCBoard,...e)},notifyCreate(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyCreate.call(__Rtc.CRRTCBoard,...e)},notifyClose(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyClose.call(__Rtc.CRRTCBoard,...e)},notifyAddElement(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyAddElement.call(__Rtc.CRRTCBoard,...e)},notifyDelElement(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyDelElement.call(__Rtc.CRRTCBoard,...e)},notifySetContainerSize(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetContainerSize.call(__Rtc.CRRTCBoard,...e)},notifyImportPage(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyImportPage.call(__Rtc.CRRTCBoard,...e)},notifyChangeName(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyChangeName.call(__Rtc.CRRTCBoard,...e)},notifyChangeScale(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyChangeScale.call(__Rtc.CRRTCBoard,...e)},notifyChangeRotate(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyChangeRotate.call(__Rtc.CRRTCBoard,...e)},notifyShowThumPage(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyShowThumPage.call(__Rtc.CRRTCBoard,...e)},notifyAddElementEx(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyAddElementEx.call(__Rtc.CRRTCBoard,...e)},notifyMoveElement(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyMoveElement.call(__Rtc.CRRTCBoard,...e)},notifyModifyElement(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyModifyElement.call(__Rtc.CRRTCBoard,...e)},notifySetElementZPos(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetElementZPos.call(__Rtc.CRRTCBoard,...e)},notifySetIndicator(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetIndicator.call(__Rtc.CRRTCBoard,...e)},notifySetHotspot(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetHotspot.call(__Rtc.CRRTCBoard,...e)},notifySetMarkTerms(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetMarkTerms.call(__Rtc.CRRTCBoard,...e)}}),__Rtc.SyncCtrlReceptor=Ice.Class(Conference.SyncCtrlCallback,{setProxy:function(e){this.proxy=e},notifySetCurrentTab(...e){__Rtc.CRRTCSync&&__Rtc.CRRTCSync.ICECallback.notifySetCurrentTab.call(__Rtc.CRRTCSync,...e)},notifySetFullScreen(...e){__Rtc.CRRTCSync&&__Rtc.CRRTCSync.ICECallback.notifySetFullScreen.call(__Rtc.CRRTCSync,...e)},notifySetPrivTabInfo(...e){__Rtc.CRRTCSync&&__Rtc.CRRTCSync.ICECallback.notifySetPrivTabInfo.call(__Rtc.CRRTCSync,...e)},notifySetSyncMode(...e){__Rtc.CRRTCSync&&__Rtc.CRRTCSync.ICECallback.notifySetSyncMode.call(__Rtc.CRRTCSync,...e)}})},473:()=>{__Rtc.CR__Init=function(e,t){try{Cr._proxy=new Cr.LHProxy(t),Cr._proxy.initIce().then((function(e,t){Cr._proxy.registeredCallback("askQuesNotify",(function(e){id=e[0],askQue=e[1],__Rtc.CR__AskQuesNotify.call([id,new Cr.Quesask(askQue)])})),Cr._proxy.registeredCallback("lockQuesNotify",(function(e){id=e[0],queDeal=e[1],__Rtc.CR__LockQuesNotify.call([id,new Cr.QuesDeal(queDeal)])})),Cr._proxy.registeredCallback("replyQuesNotify",(function(e){id=e[0],queDeal=e[1],__Rtc.CR__ReplyQuesNotify.call([id,new Cr.QuesDeal(queDeal)])})),Cr._proxy.registeredCallback("modifyQuesNotify",(function(e){id=e[0],queDeal=e[1],__Rtc.CR__ModifyQuesNotify.call([id,new Cr.QuesDeal(queDeal)])})),Cr._proxy.registeredCallback("delQuesNotify",(function(e){id=e[0],termId=e[1],__Rtc.CR__DelQuesNotify.call([id,termId])})),Cr._proxy.registeredCallback("delAllQuesNotify",(function(e){termId=e[0],__Rtc.CR__DelAllQuesNotify.call([termId])})),Cr._proxy.registeredCallback("publicQuesNotify",(function(e){id=e[0],bPublic=e[1],termId=e[2],__Rtc.CR__PublicQuesNotify.call([id,bPublic,termId])})),Cr._proxy.registeredCallback("quesTypeChangeNotify",(function(e){id=e[0],typeID=e[1],__Rtc.CR__QuesTypeChangeNotify.call([termId])})),Cr._proxy.registeredCallback("modifyQuesTypeNotify",(function(e){termId=e[0],quesType=e[1],__Rtc.CR__ModifyQuesTypeNotify.call([termId])})),Cr._proxy.registeredCallback("setBroadCastQuesNotify",(function(e){bEnable=e[0],__Rtc.CR__SetBroadCastQuesNotify.call([bEnable])})),Cr._proxy.registeredCallback("notifyPlayBackStartPush",(function(e){url=e[0],__Rtc.CR__NotifyPlayBackStartPush.call([url])})),Cr._proxy.registeredCallback("notifypayback",(function(e){__Rtc.CR__Notifypayback.call()})),Cr._proxy.registeredCallback("notifyBroadCastPlaybackStop",(function(e){url=e[0],__Rtc.CR__NotifyBroadCastPlaybackStop.call([url])})),Cr._proxy.registeredCallback("notifySwtichLiveAppElements",(function(e){ele=e[0],status=e[1],__Rtc.CR__NotifySwtichLiveAppElements.call([ele,status])})),Cr._proxy.registeredCallback("notifyThumbUp",(function(e){num=e[0],total=e[1],info=e[2],__Rtc.CR__NotifyThumbUp.call([num,total,info])})),Cr._proxy.registeredCallback("notifyLDMembersStatus",(function(e){__Rtc.CR__NotifyLDMembersStatus.call(e)})),Cr._proxy.registeredCallback("ModifyPeerAddr",(function(e){__Rtc.CR__ModifyPeerAddr.call(e)})),Cr._proxy.registeredCallback("ModifyPeerAddrExt",(function(e){__Rtc.CR__ModifyPeerAddrExt.call(e)})),Cr._proxy.registeredCallback("AudioAllocRaw",(function(e){__Rtc.CR__AudioAllocRaw.call(e)})),Cr._proxy.registeredCallback("AudioAllocRawExt",(function(e){__Rtc.CR__AudioAllocRawExt.call(e)})),Cr._proxy.registeredCallback("VideoAllocRaw",(function(e){__Rtc.CR__VideoAllocRaw.call(e)})),Cr._proxy.registeredCallback("VideoAllocRawExt",(function(e){__Rtc.CR__VideoAllocRawExt.call(e)})),Cr._proxy.registeredCallback("VideoAllocRawExt2",(function(e){__Rtc.CR__VideoAllocRawExt2.call(e)})),Cr._proxy.registeredCallback("NotifyRTMPStreamPublishFinished",(function(e){__Rtc.CR__NotifyRTMPStreamPublishFinished.call(e)})),Cr._proxy.registeredCallback("EnableSendScreen2Internet",(function(e){__Rtc.CR__EnableSendScreen2Internet.call(e)})),Cr._proxy.registeredCallback("DisableSendScreen2Internet",(function(e){__Rtc.CR__DisableSendScreen2Internet.call(e)})),Cr._proxy.registeredCallback("EnableSendFilm2Internet",(function(e){__Rtc.CR__EnableSendFilm2Internet.call(e)})),Cr._proxy.registeredCallback("DisableSendFilm2Internet",(function(e){__Rtc.CR__DisableSendFilm2Internet.call(e)})),Cr._proxy.registeredCallback("Free",(function(e){__Rtc.CR__Free.call(e)})),Cr._proxy.registeredCallback("notifyCtrlReqState",(function(e){var t=e[0],i=e[1];__Rtc.CR__NotifyCtrlReqState.call(t,i)})),Cr._proxy.registeredCallback("notifyRequestCtrlRight",(function(e){})),Cr._proxy.registeredCallback("notifyCancelCtrlReq",(function(e){})),Cr._proxy.registeredCallback("notifyRejectCtrlReq",(function(e){})),Cr._proxy.registeredCallback("notifyGiveCtrlRight",(function(e){})),Cr._proxy.registeredCallback("notifyReleaseCtrlRight",(function(e){})),Cr._proxy.registeredCallback("notifyCtrlMsg",(function(e){})),Cr._proxy.registeredCallback("notifyTmpSetRemoteCtrlState",(function(e){})),Cr._proxy.registeredCallback("notifyRequestMarked",(function(e){})),Cr._proxy.registeredCallback("notifyCancelMarkedReq",(function(e){})),Cr._proxy.registeredCallback("notifyEnableOtherMarked",(function(e){})),Cr._proxy.registeredCallback("notifyIndicator",(function(e){})),window.__Rtc.CR_InitRslt.call([e,t])}))}catch(e){console.crlog&&console.crlog(e),window.__Rtc.CR_InitRslt.call([3,"sdk"])}},__Rtc.CR__UnInit=function(){try{Cr.communicator&&Cr.communicator.shutdown(),Cr.communicator=null,Cr._connection&&Cr._connection.destroy(0),Cr._connection=null,Cr._adapter&&Cr._adapter.destroy(),Cr._adapter=null,Cr._routerPrx&&Cr._routerPrx.destroySession(),Cr._routerPrx=null}catch(e){return 3}},__Rtc.CR__RefreshSession=function(e){Cr._proxy&&Cr._proxy.refreshSession().then((function(t,i){__Rtc.CR__RefreshSessionRslt.call([t,i,e])}))},__Rtc.CR__KeepAlive=function(e,t){void 0===e&&(e=0),Cr._proxy&&Cr._proxy.keepAlive(e).then((function(e,i){__Rtc.CR__KeepAliveRslt.call([e,i,t])}))},__Rtc.CR__Exit=function(e){void 0===e&&(e=""),Cr._proxy&&Cr._proxy.exit(e).then((function(e,t){__Rtc.CR__ExitRslt.call([e,t])}))},__Rtc.CR__GetActiveMembers=function(){Cr._proxy.getActiveMembers().then((function(e,t,i){0==e?__Rtc.CR__GetActiveMembersRslt.call([e,t,i]):__Rtc.CR__GetActiveMembersRslt.call([e,t])}))},__Rtc.CR__SendIMMsg=function(e,t,i,n,r,o,s){Cr._proxy.SendIMMsg(e,t,i,n,r).then(((...e)=>{__Rtc.CRRTCIMMsg.ICECallback.sendIMMsgRslt(...e,s)}))},__Rtc.CR__GetIMMsgCount=function(){Cr._proxy.getIMMsgCount().then((function(e,t,i){0==e?__Rtc.CR__GetIMMsgCountRslt.call([e,t,i]):__Rtc.CR__GetIMMsgCountRslt.call([e,t])}))},__Rtc.CR__GetLastMsg=function(e){Cr._proxy.getLastMsg(e).then((function(e,t,i){0==e?__Rtc.CR__GetLastMsgRslt.call([e,t,i]):__Rtc.CR__GetLastMsgRslt.call([e,t])}))},__Rtc.CR__GetLastNMsg=function(e,t){Cr._proxy.getLastNMsg(e,t).then((function(e,t,i){0==e?__Rtc.CR__GetLastNMsgRslt.call([e,t,i]):__Rtc.CR__GetLastNMsgRslt.call([e,t])}))},__Rtc.CR__GetBroadCastUrl=function(){Cr._proxy.getBroadCastUrl().then((function(e,t,i){0==e?__Rtc.CR__GetBroadCastUrlRslt.call([e,t,i]):__Rtc.CR__GetBroadCastUrlRslt.call([e,t])}))},__Rtc.CR__AskQues=function(e,t,i,n,r,o){Cr._proxy.askQues(e,t,i,n,r,o).then((function(e,t,i){0==e?__Rtc.CR__AskQuesRslt.call([e,t,i]):__Rtc.CR__AskQuesRslt.call([e,t])}))},__Rtc.CR__GetQuesList=function(){Cr._proxy.getQuesList().then((function(e,t,i){0==e?__Rtc.CR__GetQuesListRslt.call([e,t,i]):__Rtc.CR__GetQuesListRslt.call([e,t])}))},__Rtc.CR__GetLuckyDrawCfg=function(){Cr._proxy.getLuckyDrawCfg().then((function(e,t,i){0==e?__Rtc.CR__GetLuckyDrawCfgRslt.call([e,t,i]):__Rtc.CR__GetLuckyDrawCfgRslt.call([e,t])}))},__Rtc.CR__JoinLuckyDrawMembers=function(e,t){Cr._proxy.joinLuckyDrawMembers(e,t).then((function(e,t){__Rtc.CR__JoinLuckyDrawMembersRslt.call([e,t])}))},__Rtc.CR__TerminalMsg=function(e,t,i,n,r){Cr._proxy.terminalMsg(e,t,i,n).then(((...e)=>{__Rtc.CRRTCTermMsg.ICECallback.terminalMsgRslt(...e,r)}))},__Rtc.CR__VideoResolutionReport=function(e,t,i){Cr._proxy.VideoResolutionReport(e,t,i).then((function(e,t){__Rtc.CR__VideoResolutionReportRslt.call([e,t])}))},__Rtc.CR__SetAudioDeviceStatus=function(e){Cr._proxy.setAudioDeviceStatus(e).then(((...e)=>{__Rtc.CRRTCAudio.ICECallback.setAudioDeviceStatusRslt.call(__Rtc.CRRTCAudio,...e)}))},__Rtc.CR__CloseMicEx=function(e){Cr._proxy.closeMicEx(e).then(((...e)=>{__Rtc.CRRTCAudio.ICECallback.closeMicExRslt.call(__Rtc.CRRTCAudio,...e)}))},__Rtc.CR__CloseAll=function(){Cr._proxy.closeAll().then((function(...e){__Rtc.CRRTCAudio.ICECallback.closeAllRslt.call(__Rtc.CRRTCAudio,...e)}))},__Rtc.CR__SetVoiceEnergy=function(e){Cr._proxy.setVoiceEnergy(e).then((function(e,t){__Rtc.CR__SetVoiceEnergyRslt.call([e,t])}))},__Rtc.CR__PstnSwitchMicStatus=function(){Cr._proxy.pstnSwitchMicStatus().then((function(e,t){__Rtc.CR__PstnSwitchMicStatusRslt.call([e,t])}))},__Rtc.CR__StartRecord=function(){Cr._proxy.startRecord().then((function(e,t){__Rtc.CR__StartRecordRslt.call([e,t])}))},__Rtc.CR__IsRecording=function(){Cr._proxy.isRecording().then((function(e,t){__Rtc.CR__IsRecordingRslt.call([e,t])}))},__Rtc.CR__StopRecord=function(){Cr._proxy.isRecording().then((function(e,t){__Rtc.CR__StopRecordRslt.call([e,t])}))},__Rtc.CR__PlayApplause=function(){Cr._proxy.playApplause().then((function(e,t){__Rtc.CR__PlayApplauseRslt.call([e,t])}))},__Rtc.CR__GetMusicList=function(){Cr._proxy.getMusicList().then((function(e,t){__Rtc.CR__GetMusicListRslt.call([e,t])}))},__Rtc.CR__GetPlayBGMusic=function(){Cr._proxy.getPlayBGMusic().then((function(e,t){__Rtc.CR__GetPlayBGMusicRslt.call([e,t])}))},__Rtc.CR__StartBGMusic=function(e,t){Cr._proxy.startBGMusic(e,t).then((function(e,t){__Rtc.CR__StartBGMusicRslt.call([e,t])}))},__Rtc.CR__StopPlayBGMusic=function(){Cr._proxy.stopPlayBGMusic().then((function(e,t){__Rtc.CR__StopPlayBGMusicRslt.call([e,t])}))},__Rtc.CR__SetPlayBGMusicVolumn=function(e){Cr._proxy.setPlayBGMusicVolumn(e).then((function(e,t){__Rtc.CR__SetPlayBGMusicVolumnRslt.call([e,t])}))},__Rtc.CR__GetPlayBGMusicVolumn=function(){Cr._proxy.getPlayBGMusicVolumn().then((function(e,t){__Rtc.CR__GetPlayBGMusicVolumnRslt.call([e,t])}))},__Rtc.CR__VoiceHowling=function(e){Cr._proxy.voiceHowling(e).then((function(e,t){__Rtc.CR__VoiceHowlingRslt.call([e,t])}))},__Rtc.CR__VoiceNoise=function(e){Cr._proxy.voiceNoise(e).then((function(e,t){__Rtc.CR__VoiceNoiseRslt.call([e,t])}))},__Rtc.CR__RemoteAudioSet=function(e,t){Cr._proxy.remoteAudioSet(e,t).then((function(e,t){__Rtc.CR__RemoteAudioSetRslt.call([e,t])}))},__Rtc.CR__GetRemoteAudioInf=function(e){Cr._proxy.getRemoteAudioInf(e).then((function(e,t){__Rtc.CR__GetRemoteAudioInfRslt.call([e,t])}))},Cr.iceReq=(e,t,...i)=>{let n=!0,r=!0;return"addElement"!=t&&"netDetectResults"!=t&&"startCloudRecord"!=t||(r=!1),"netDetectResults"==t&&(n=!1),new Promise(((o,s)=>{try{if(!CRVideo.isMeeting)return;try{n&&r&&console.crlog(`[ICE] Ice Request [${e}:${t}],${JSON.stringify(i)}`),n&&!r&&console.crlog(`[ICE] Ice Request [${e}:${t}],args...`)}catch(e){console.error(e)}Cr._proxy[e][t](...i).then((function(...i){return n&&console.crlog(`[ICE] Ice Request [${e}:${t}] success!`),i.unshift(0),o(i)})).exception((function(i){return n&&console.crlog(`[ICE][Error] Ice Request [${e}:${t}] fail,${i.toString()}`),s(i)}))}catch(e){return n&&console.crlog(`[ICE][Error] Conference Request error: ${e}`),s(e)}}))},Cr.LHProxy.prototype.setContainerSize=function(e,t){var i=new Cr.AsyncResult;try{this._whiteBoardCtrl.setContainerSize(e,t).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.importPage=function(e,t){for(var i=new Cr.AsyncResult,n=[],r=new Conference.TabID(e.termID,e.localID),o=0;o<t.length;o++){var s=t[o].pageNo,a=t[o].imgType,c=t[o].imgResourceID,l=t[o].elementList;n[o]=new Conference.PageData(s,a,c,l)}try{this._whiteBoardCtrl.importPage(r,n).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.changeName=function(e,t){var i=new Cr.AsyncResult;try{this._whiteBoardCtrl.changeName(e,t).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.changeScale=function(e,t){var i=new Cr.AsyncResult,n=new Conference.WB_SCALE_TYPE(t);try{this._whiteBoardCtrl.changeScale(e,n).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.changeRatote=function(e,t){var i=new Cr.AsyncResult,n=new Conference.WB_ROTATE_TYPE(t);try{this._whiteBoardCtrl.changeRatote(e,n).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.showThumPage=function(e,t){var i=new Cr.AsyncResult;try{this._whiteBoardCtrl.showThumPage(e,t).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.moveElement=function(e,t,i){var n=new Cr.AsyncResult,r=new Conference.ElementPos(i);try{this._whiteBoardCtrl.moveElement(e,t,r).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.modifyElement=function(e,t,i){var n=new Cr.AsyncResult,r=new Conference.ElementID(i.eID.ownerID,i.eID.ID),o=new Conference.ElementData(r,i.orderId,i.left,i.top,i.type,i.noused,i.data);try{this._whiteBoardCtrl.modifyElement(e,t,o).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.setElementZPos=function(e,t,i){var n=new Cr.AsyncResult,r=new Conference.WB_ELEMENT_ZPOS(i);try{this._whiteBoardCtrl.setElementZPos(e,t,r).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.setIndicator=function(e,t){var i=new Cr.AsyncResult,n=new Conference.IndicatorData(t);try{this._whiteBoardCtrl.setIndicator(e,n).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.setHotspot=function(e,t,i,n){var r=new Cr.AsyncResult;try{this._whiteBoardCtrl.setHotspot(e,t,i,n).then(function(){r.complete([0,""])}.bind(this)).exception(function(e){r.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){r.complete([3,e.toString()])}return r},Cr.LHProxy.prototype.queryIndicator=function(e){var t=new Cr.AsyncResult;try{this._whiteBoardCtrl.queryIndicator(e).then(function(e){for(var i=[],n=0;n<e.length;n++)i.push(new Conference.IndicatorData(e[n]));t.complete([0,"",i])}.bind(this)).exception(function(e){t.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.setMarkTerms=function(e,t,i){for(var n=new Cr.AsyncResult,r=[],o=0;o<describeSeq.length;o++)r.push(new Conference.ElementID(eIds[o].ownerID,eIds[o].ID));try{this._whiteBoardCtrl.setMarkTerms(e,t,i).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n}},5273:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var n=i(9277),r=i(6836),o=i(6817),s=i(3826),a=i(5174),c=i(3227);const l=window.Ice,d=window.CRVideo,u=window.Cr,h=window.Conference,f=window.Resm;const p=window.rtcProxy=new class{constructor(){this.initData()}initData(){console.crlog("[Proxy] ProxyModule initData..."),this.crmtStr="",this.userDetail=null,this.startPingTime=0,this.acssvrs=[],this.bestNetworkAccessSvr=null,this.AccessLoginStartTime=null,this.crmt=null,this.waitAvailableTimer=-1,this.curAccessServer=null,this.loginRequest=null,this.availableSvrs=[]}loginControl(e,t){this.AccessLoginStartTime=(new Date).getTime(),this.crmtStr=e,this.userDetail=t,u._proxy._logining=!0,u._proxy.initCon(),this.getWebrtcAccKey(e).then((e=>{this.parseCrmt(e),console.crlog("[Proxy] Control login begain..."),this.probeAcssvr().then((()=>{this.connectToAccess(this.bestNetworkAccessSvr).then((e=>(console.crlog(`[Proxy] Access ${this.curAccessServer.acssvr[0]} connected.. do login control..`),u._proxy._adapter=e,this.serverLogin())))})).catch((e=>__Rtc.CR__LoginRslt.callback(e[0],e[1].toString())))})).catch((e=>__Rtc.CR__LoginRslt.callback(e[0],e[1].toString())))}serverLogin(e){console.crlog("[Proxy] Server login...");const t="c"+this.crmt.MEET[0]+"/ConferenceRoom  @ c"+this.crmt.MEET[0]+"-ReplicaConfCtrlAdapters";e=e||h.ConferenceRoomPrx.uncheckedCast(u._proxy._communicator.stringToProxy(t)),this.loginRequest||(this.loginRequest=this.getLoginRequest()),e.login(this.loginRequest).then((e=>{c.Z.init(this.curAccessServer.acssvr[0],this.crmt.MEET[0]);let t=this.parseLoginResponse(e);return console.crlog(`[Proxy] Access & control login consuming: ${(new Date).getTime()-this.AccessLoginStartTime}ms`),__Rtc.CR__LoginRslt.callback(0,"",t)})).exception((t=>{u._proxy._logining=!1,this.handlerLoginException(t,e).then((e=>__Rtc.CR__LoginRslt.callback(e[0],e[1])))}))}getWebrtcAccKey(e){return new Promise(((t,i)=>{const o=`https://${d.webServerAddr}${n.Z.getWebrtcAccKey}`;let c=a.Z.base64decode(e);c=`${c}\r\n-PRODUCT=win32_net`,c=`${c}\r\n-JSCLIENT=webrtc`;const l=`crmt:${a.Z.base64encode(c).replace(/\r\n/g,"")}`;console.crlog(`[Proxy] WebAPI request url: ${o}, data: crmt:******`),(0,r.Z)({type:"POST",url:o,data:l,dataType:"text",success:(e,n)=>"success"==n?-1!=e.indexOf("erro:")?(u._proxy._logining=!1,-1!=e.indexOf("erro:2")?i([800,e]):i([3,e])):(console.crlog(`[Proxy] WebAPI request url: ${o}, success!`),t(e)):(u._proxy._logining=!1,i([202,""])),error:e=>("MeetSDK"==d.SDKKey?(console.crlog(`[Proxy] MeetSDK.enterMeetingRslt.target(202, '', '', ${d.enterMeetingCookie})`),s.Z.enterMeetingRslt.target(202,"","",d.enterMeetingCookie)):(console.crlog(`[Proxy] CRVideo_EnterMeetingRslt.target(202, ${d.enterMeetingCookie})`),CRVideo_EnterMeetingRslt.target(202,d.enterMeetingCookie)),CRVideo_UploadingLog(),console.crlog(`[Proxy][Error] Web api getWebrtcAccKey fail! ${e}`),console.error(e),u._proxy._logining=!1,i([1,""]))})}))}parseCrmt(e){this.crmt={};const t=a.Z.base64decode(e.substr(5)).split("\n");for(let e=0;e<t.length;e++){let i=t[e].match(/-(\w+?)=(\S+)/);null!=i&&3==i.length&&(this.crmt[i[1]]=i[2],console.crlog(`[Proxy] parseCrmt>${e}: ${i[1]} ${i[2]}`))}let i=this.crmt.ACNT.split(";"),n=i[3].match(/../g),r=new ArrayBuffer(n.length),s=new DataView(r),c=[];for(let e=0;e<n.length;e++)s.setUint8(e,parseInt(n[e],16)),c[e]=s.getUint8(e);let d=a.Z.utf8ByteToUnicodeStr(c);i[3]=d,this.userDetail.nickname=""==this.userDetail.nickname?d:this.userDetail.nickname,this.userDetail.userId=""==this.userDetail.userId?o.Z.userInfo.getUserInfo(d)?o.Z.userInfo.getUserInfo(d):l.generateUUID():this.userDetail.userId,this.crmt.ACNT=i,this.crmt.ACNT[1]=4==this.crmt.ACNT[1]?6:this.crmt.ACNT[1],this.crmt.WEBID=i[0],this.crmt.MEET=this.crmt.MEET.split(";");let u=this.crmt.ACSSVR.split(";"),h=[];for(var f=0;f<u.length;f++)""!=u[f]&&h.push(u[f].split(":"));this.crmt.ACSSVR=h}probeAcssvr(){return new Promise(((e,t)=>{u._proxy._communicator=l.initialize(u._proxy._initData),d.communicatorIc=u._proxy._communicator,this.getFastestNetSvr().then((i=>(i.forEach((e=>{this.bestNetworkAccessSvr||-1==e.delay?this.bestNetworkAccessSvr.delay>e.delay&&-1!=e.delay&&(this.bestNetworkAccessSvr=e):this.bestNetworkAccessSvr=e})),this.bestNetworkAccessSvr?e():(console.crlog("[Resm][Error] Login to access fail, have not available access server!"),t([205,""]))))).catch((()=>(console.crlog("[Resm][Error] Login to access fail, have not available access server!"),t([205,""]))))}))}getFastestNetSvr(){return new Promise(((e,t)=>{const i=this.crmt.ACSSVR;this.availableSvrs=[],i.forEach(((t,n)=>{this.accessPing(t,n).then((t=>{if(this.availableSvrs.push(t),this.availableSvrs.length==i.length)return clearInterval(this.waitAvailableTimer),e(this.availableSvrs)}))}));let n=200;const r=()=>{this.waitAvailableTimer=setTimeout((()=>this.availableSvrs.length>0?e(this.availableSvrs):n<=15e3?(n+=200,clearTimeout(this.waitAvailableTimer),void r()):t()),200)};r()}))}accessPing(e,t){return console.crlog(`[Resm] Ping  ${t+1} ${JSON.stringify(e)}`),new Promise(((t,i)=>{var n=e[3];if(n.indexOf("sig")>-1){var r=parseInt(n.split("/sig/")[0]);n="/sig/"+n.split("/sig/")[1];let t="s"+e[0]+"/Access:"+u._proxy._protocol+" -r "+n+" -h "+e[1]+" -p "+r+" -t 5000";console.crlog(`[Resm] StringToProxy: ${t}`);var o=Glacier2.RouterPrx.uncheckedCast(u._proxy._communicator.stringToProxy(t))}else{r=parseInt(e[3])+4;let t="s"+e[0]+"/Access:"+u._proxy._protocol+" -h "+e[1]+" -p "+r+" -t 5000";console.crlog(`[Resm] StringToProxy: ${t}`);o=Glacier2.RouterPrx.uncheckedCast(u._proxy._communicator.stringToProxy(t))}this.startPingTime=(new Date).getTime(),o.ice_ping().then(function(){var i=(new Date).getTime()-this.startPingTime,n=u._proxy._protocol+"://"+e[1]+":"+r;return console.crlog(`[Resm] Finish ping(${e[1]}) ${i}ms, report:${Math.floor(i/4)}`),t({url:n,delay:i,routerPrx:o,acssvr:e})}.bind(this)).exception(function(t){return console.crlog(`[Resm][Error] Finish ping(${e[1]}) Bad Network!`),i({url,delay:-1,acssvr:e})}.bind(this))}))}connectToAccess(e,t){return new Promise(((i,n)=>{console.crlog(`[Access] Connect to access server: ${e.acssvr[0]}, isResmAccess: ${t||!1}`),d.accessSvr=e.acssvr[1],d.accessNo=e.acssvr[0],this.curAccessServer=e,u._proxy._routerPrx=e.routerPrx,u._proxy._routerPrx.createSession("N"+this.crmt.MEET[0],"").then((e=>{u._proxy._session=e})).then((()=>{u._proxy._routerPrx.getCategoryForClient().then((e=>{if(u._proxy._category=e,u._proxy._communicator.setDefaultRouter(u._proxy._routerPrx),t)u._proxy._communicator.createObjectAdapterWithRouter("CallbackAdapter",u._proxy._routerPrx).then((e=>i(e))).exception((e=>n(e)));else{const e=f.AccessMPrx.uncheckedCast(u._proxy._communicator.stringToProxy("d0/AccessM"));let t=this.crmt.DOMAIN.split(";")[0],r=this.crmt.MEET[0],o=this.crmt.MYPUBIP.split(";")[0],s=l.generateUUID(),a=new f.NetworkResult;o=o.split(":")[0],d.myPublicIP=o,this.availableSvrs.forEach((e=>{const t=new f.NetworkStatus;t.latency=Math.floor(e.delay/4),window.__Rtc.__acssvr&&window.__Rtc.__acssvr==e.acssvr[0]&&(t.latency=1),t.lostRate=0,a.set(e.acssvr[0],t)})),console.crlog(`[Resm] NetworkResult: ${JSON.stringify(a)}`),console.crlog(`[Resm] Resm locate${JSON.stringify({domain:t,confID:r,publicIP:o,uuid:s})}`),e.locate(t,r,a,o,s).then((e=>{if(console.crlog(`[Resm] Got resm accessNo: ${e}`),d.resmAccessNo=e,+e!=+this.bestNetworkAccessSvr.acssvr[0]){let t=!1;this.availableSvrs.forEach((r=>{r.acssvr[0]==e&&(t=!0,this.connectToAccess(r,!0).then((e=>i(e))).catch((e=>n(e))))})),t||this.connectToAccess(this.bestNetworkAccessSvr,!0).then((e=>i(e))).catch((e=>n(e)))}else u._proxy._communicator.createObjectAdapterWithRouter("CallbackAdapter",u._proxy._routerPrx).then((e=>i(e))).exception((e=>n(e)))})).exception((e=>(console.crlog(`[Resm][Error] Resm locate fail! ${e}`),console.error(e),u._proxy._communicator.createObjectAdapterWithRouter("CallbackAdapter",u._proxy._routerPrx).then((e=>i(e))).exception((e=>n(e))))))}})).exception((e=>{console.crlog(`[Resm][Error] Resm getCategoryForClient fail! ${e}`),console.error(e)}))}))}))}getLoginRequest(){const e=new h.LoginRequest,t=o.Z.userInfoHistory.getUserHistory(this.crmt.MEET[0],this.userDetail.userId,this.crmt.ACNT[0],this.crmt.ACNT[1]);let i=t?t.memberID:this.crmt.ACNT[0],n=t?t.memberType:this.crmt.ACNT[1],r=t?t.termId:"",s=this.userDetail.nickname,a=this.userDetail.userId,c=window.localStorage.getItem("CRRTCSDK_Client_PC_ID")||l.generateUUID();window.localStorage.setItem("CRRTCSDK_Client_PC_ID",c);let f="",p=/macintosh|mac os x/i.test(navigator.userAgent),_=/windows|win32/i.test(navigator.userAgent),C=/linux/i.test(navigator.userAgent),g=navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Adr")>-1;!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?f=h.PLATFORMTYPE_IOS:p?f=h.PLATFORMTYPE_MAC:_?f=h.PLATFORMTYPE_WIN32:g?f=h.PLATFORMTYPE_ANDROID:C&&(f=h.PLATFORMTYPE_LINUX),e.memberId=i,e.memberType=n,e.nickname=s,e.termId=r,e.priv_dat=a,e.confId=this.crmt.MEET[0],e.confKey=this.crmt.MEET[1],e.accessNo=this.curAccessServer.acssvr[0],e.callbacks=new l.HashMap,e.extProperty=new l.HashMap,e.publicIP=this.crmt.MYPUBIP,e.extProperty.set("sdktype","video"),e.extProperty.set("client_platform",f),e.extProperty.set("priv_dat",a),e.extProperty.set("h5sdk_ver",d.sdkver),e.extProperty.set("sdk_ver",d.sdkver),e.extProperty.set("client_pcid",c),e.extProperty.set("browser",__Rtc.CRBrowser.curBrowserCfg.platform),e.extProperty.set("rtc_codecs",window.__Rtc.rtc_codecs),e.extProperty.set("client_device",h.DEVICETYPE_WEBRTC),e.extProperty.set("slice_ver",h.SLICE_VER),"MeetSDK"==d.SDKKey&&e.extProperty.set("client_ver",CRMeetAppVer);var m=new l.Identity;m.name="ConferenceCallback",m.category=u._proxy._category,u._proxy._conferenceReceptor=new __Rtc.ConferenceReceptor,u._proxy._conferenceReceptor.setProxy(u._proxy),u._proxy._adapter.add(u._proxy._conferenceReceptor,m);var R=h.ConferenceCallbackPrx.uncheckedCast(u._proxy._adapter.createDirectProxy(m));e.callbacks.set("ConferenceCallback",R);var S=new l.Identity;S.name="IMCallback",S.category=u._proxy._category,u._proxy._chatReceptor=new __Rtc.ChatReceptor,u._proxy._chatReceptor.setProxy(u._proxy),u._proxy._adapter.add(u._proxy._chatReceptor,S);var I=h.IMCallbackPrx.uncheckedCast(u._proxy._adapter.createDirectProxy(S));e.callbacks.set("IMCallback",I);var y=new l.Identity;y.name="AnsQueCallback",y.category=u._proxy._category,u._proxy._ansQueReceptor=new __Rtc.AnsQueReceptor,u._proxy._ansQueReceptor.setProxy(u._proxy),u._proxy._adapter.add(u._proxy._ansQueReceptor,y);var v=h.AnsQueCallbackPrx.uncheckedCast(u._proxy._adapter.createDirectProxy(y));e.callbacks.set("AnsQueCallback",v);var w=new l.Identity;w.name="VideoCallback",w.category=u._proxy._category,u._proxy._videoReceptor=new __Rtc.VideoReceptor,u._proxy._videoReceptor.setProxy(u._proxy),u._proxy._adapter.add(u._proxy._videoReceptor,w);var E=h.VideoCallbackPrx.uncheckedCast(u._proxy._adapter.createDirectProxy(w));e.callbacks.set("VideoCallback",E);var b=new l.Identity;b.name="AudioCallback",b.category=u._proxy._category,u._proxy._audioReceptor=new __Rtc.AudioReceptor,u._proxy._audioReceptor.setProxy(u._proxy),u._proxy._adapter.add(u._proxy._audioReceptor,b);var D=h.AudioCallbackPrx.uncheckedCast(u._proxy._adapter.createDirectProxy(b));e.callbacks.set("AudioCallback",D);var M=new l.Identity;M.name="MS.MSClient",M.category=u._proxy._category,u._proxy._mSClientI=new __Rtc.MSClientI,u._proxy._mSClientI.setProxy(u._proxy),u._proxy._adapter.add(u._proxy._mSClientI,M);var P=MS.MSClientPrx.uncheckedCast(u._proxy._adapter.createDirectProxy(M));e.callbacks.set("MS.MSClient",P);var x=new l.Identity;x.name="ScreenShareClient",x.category=u._proxy._category,u._proxy._screenShareReceptor=new __Rtc.ScreenShareReceptor,u._proxy._screenShareReceptor.setProxy(u._proxy),u._proxy._adapter.add(u._proxy._screenShareReceptor,x);var T=h.ScreenShareClientPrx.uncheckedCast(u._proxy._adapter.createDirectProxy(x));e.callbacks.set("ScreenShareClient",T);var A=new l.Identity;A.name="MediaCallback",A.category=u._proxy._category,u._proxy._mediaReceptor=new __Rtc.MediaReceptor,u._proxy._mediaReceptor.setProxy(u._proxy),u._proxy._adapter.add(u._proxy._mediaReceptor,A);var O=h.MediaCallbackPrx.uncheckedCast(u._proxy._adapter.createDirectProxy(A));e.callbacks.set("MediaCallback",O);var V=new l.Identity;V.name="WhiteBoardCallback",V.category=u._proxy._category,u._proxy._whiteBoardReceptor=new __Rtc.WhiteBoardReceptor,u._proxy._whiteBoardReceptor.setProxy(u._proxy),u._proxy._adapter.add(u._proxy._whiteBoardReceptor,V);var k=h.WhiteBoardCallbackPrx.uncheckedCast(u._proxy._adapter.createDirectProxy(V));e.callbacks.set("WhiteBoardCallback",k);var N=new l.Identity;N.name="SyncCtrlCallback",N.category=u._proxy._category,u._proxy._syncCtrlReceptor=new __Rtc.SyncCtrlReceptor,u._proxy._syncCtrlReceptor.setProxy(u._proxy),u._proxy._adapter.add(u._proxy._syncCtrlReceptor,N);var L=h.SyncCtrlCallbackPrx.uncheckedCast(u._proxy._adapter.createDirectProxy(N));e.callbacks.set("SyncCtrlCallback",L);var U=new l.Identity;U.name="RollCallCallback",U.category=u._proxy._category,u._proxy._rollCallReceptor=new __Rtc.RollCallReceptor,u._proxy._rollCallReceptor.setProxy(u._proxy),u._proxy._adapter.add(u._proxy._rollCallReceptor,U);var B=h.RollCallCallbackPrx.uncheckedCast(u._proxy._adapter.createDirectProxy(U));return e.callbacks.set("RollCallCallback",B),e}parseLoginResponse(e){this.crmt.WEBLOGCFG&&!d.logproxy&&__Rtc.postCmd.IceLogCreate();const t={};t.termId=e.termId,t.activeMembers=e.activeMembers,t.myDetail=e.myDetail,t.serverTime=1e3*e.ServerUTCTime-(new Date).getTime(),t.isBegan=e.isBegan,t.countdown=e.countdown,t.mainVideoTermID=e.mainVideoTermID,t.wbDescibes=e.wbDescibes,t.ServerUTCTime=e.ServerUTCTime,t.bAllowWall=e.bAllowWall,t.bFull=e.bFull,t.bRoomLocked=e.bRoomLocked,t.curMainTab=e.curMainTab,t.curSubTab=e.curSubTab,t.option=e.option,t.lastElemValue=e.lastElemValue,t.lastTabValue=e.lastTabValue,t.windowMode=e.windowMode,t.meetID=+this.crmt.MEET[0];for(var i=e.confInfo.keys(),n={},r=0;r<i.length;r++)n[i[r]]=e.confInfo.get(i[r]);n.confid=+this.crmt.MEET[0],t.confInfo=n,o.Z.server.wbServer=n.ccfg_wbv2_h5||"",console.crlog(`[[Board]]WBServer:${o.Z.server.wbServer}`);for(let e=0;e<t.activeMembers.length;e++){var s=t.activeMembers[e];window.__Rtc.CRRTCConf.parseMemberInfo(s),s.termId==t.termId&&(t.nickname=s.nickname,t.userId=s.userId,t.bindId=s.bindId,t.openedCamIDs=s.openedCamIDs)}return u._proxy._screenShareCtrl=h.ScreenShareCtrlPrx.uncheckedCast(e.modules.get("ScreenShareCtrl")),u._proxy._whiteBoardCtrl=h.WhiteBoardCtrlPrx.uncheckedCast(e.modules.get("WhiteBoardCtrl")),u._proxy._chatRequest=h.IMSessionPrx.uncheckedCast(e.modules.get("IMSession")),u._proxy._mediaCtrl=h.MediaCtrlPrx.uncheckedCast(e.modules.get("MediaCtrl")),u._proxy._ansQuesCtrl=h.AnsQuesCtrlPrx.uncheckedCast(e.modules.get("AnsQuesCtrl")),u._proxy._rollCallSession=h.RollCallSessionPrx.uncheckedCast(e.modules.get("RollCallSession")),u._proxy._syncCtrl=h.SyncCtrlPrx.uncheckedCast(e.modules.get("SyncCtrl")),u._proxy._audioCtrl=h.AudioCtrlPrx.uncheckedCast(e.modules.get("AudioCtrl")),u._proxy._conferenceRequest=h.ConferenceSessionPrx.uncheckedCast(e.modules.get("ConferenceSession")),u._proxy._clientReport=MS.ClientReportPrx.uncheckedCast(e.modules.get("MS.ClientReport")),u._proxy._videoCtrl=h.VideoCtrlPrx.uncheckedCast(e.modules.get("VideoCtrl")),u._proxy._logining=!1,o.Z.userInfoHistory.setUserHistory(+this.crmt.MEET[0],t.userId,+e.myDetail.id,+e.myDetail.type,{termId:e.termId,memberType:e.myDetail.type,memberID:e.myDetail.id}),setTimeout((()=>{console.crlog(`[Resm] Finally using accessNo: ${d.accessNo}`),this.availableSvrs.forEach((e=>{+e.acssvr[0]!=+d.accessNo&&e.routerPrx.ice_getConnection().then((t=>{console.crlog(`[Resm] Close access connection: ${e.acssvr[0]}`),t.close()}))}))}),5e3),new u.MeetInfo(t)}handlerLoginException(e){return new Promise(((t,i)=>{const o=e.toString();if(console.crlog(o),e instanceof l.SocketException)return t([204,"websocket"]);if(e instanceof h.MemberOverflowError||e instanceof Glacier2.CannotCreateSessionException){const i={"-1":{code:24,desc:""},"-2":{code:25,desc:""},"-3":{code:26,desc:"sip/h323"},"-4":{code:27,desc:"IPC"},"-5":{code:28,desc:"webrtc/"},"-6":{code:819,desc:")"},"-7":{code:820,desc:"sipsip)"},"-8":{code:821,desc:"IPCIPC)"}};let n=null==i[e.error]?802:i[e.error].code,r=null==i[e.error]?"":i[e.error].desc;return t([n,r])}if(e instanceof h.RoomLockedError)return t([804,""]);if(e instanceof h.OnlyInviteeCanLogin)return t([70004,""]);if(e instanceof h.BalanceLessError)return t([805,""]);if(e instanceof h.MemberAlreadyInMeet)return t([807,""]);if(e instanceof h.MemberAlreadyInCanTryVisitor)return d.reEnterMeetTimes||(d.reEnterMeetTimes=1),d.reEnterMeetTimes<5?void setTimeout((()=>(console.crlog(`[ICE] ReEnter meeting:${d.reEnterMeetTimes}`),d.reEnterMeetTimes++,this.crmt.ACNT[0]=0,this.crmt.ACNT[1]=6,this.loginRequest&&(this.loginRequest.memberId=0,this.loginRequest.memberType=6,this.loginRequest.termId=""),this.serverLogin())),1e3):t([808,""]);if(e instanceof l.ObjectNotExistException||e instanceof h.ConferenceEndError)return d.reEnterMeetTimes||(d.reEnterMeetTimes=1),d.reEnterMeetTimes<5?void setTimeout((()=>{console.crlog(`[ICE] ReEnter meeting:${d.reEnterMeetTimes}`),d.reEnterMeetTimes++,console.crlog("[Proxy] Arrange conf with webApi: /servlet/ArrangeConfAPI");const e=`https://${d.webServerAddr}${n.Z.ArrangeConfAPI}`;(0,r.Z)({type:"POST",url:e,dataType:"jsonp",jsonp:"jsoncallback",data:{MeetID:Number(this.crmt.MEET[0]),RequestId:l.generateUUID()},success:e=>{setTimeout((()=>{console.crlog("[ICE] ReLogin control after arrange conference..."),this.serverLogin()}),500)},error:e=>(console.crlog(`[Proxy] /servlet/ArrangeConfAPI request fail! ${e}`),t([803,e.toString()]))})}),1e3):t([803,e.toString()]);if(e instanceof h.ConferencePrepareError||e instanceof h.ConferenceLoginRetry||e instanceof l.FacetNotExistException)if(d.reEnterMeetTimes||(d.reEnterMeetTimes=1),d.reEnterMeetTimes<=10)setTimeout((()=>{console.crlog(`[ICE] ReEnter meeting:${d.reEnterMeetTimes}`),d.reEnterMeetTimes++,this.serverLogin()}),200);else{if(!(d.reEnterMeetTimes<=15))return t([800,e.toString()]);setTimeout((()=>{console.crlog(`[ICE] ReEnter meeting:${d.reEnterMeetTimes}`),d.reEnterMeetTimes++,this.serverLogin()}),1e3)}else{if(!(e instanceof h.ConferenceBusy))return e instanceof h.EnterWaitingRoom?t([70005,""]):t([1,e.toString()]);setTimeout((()=>{console.crlog(`[ICE] Waited ${e.retry_delay} secend, reEnter meeting...`),this.serverLogin()}),1e3*e.retry_delay)}}))}}},3227:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n=new class{constructor(){this.initData()}initData(){this.serverNo=null,this.confID=null,this.proxy=null}init(e,t){this.serverNo=e,this.confID=+t,this.proxy=MS.RtcSrvPrx.uncheckedCast(Cr._proxy._communicator.stringToProxy(`s${e}/RTCGateway`))}GwAudioAlloc2(e,t){return new Promise(((i,n)=>{const r=new MS.ConferenceInfo;r.confId=this.confID,this.proxy.GwAudioAlloc2(r,e,t).then(((e,t,n)=>i({answerSdp:t,answerSdp2:n}))).exception((e=>n(e)))}))}GwVideoAlloc2(e,t){return new Promise(((i,n)=>{const r=new MS.ConferenceInfo;r.confId=this.confID,this.proxy.GwVideoAlloc2(r,e,t).then(((e,t)=>i({answerSdp:t}))).exception((e=>n(e)))}))}}},5004:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n=function(e){this.name=e,this.target=function(...t){try{"[object Function]"===Object.prototype.toString.call(this.callback)?(!this.noLogArr.includes(this.name)&&console.crlog(`[MeetSDK][Callback] ${this.name}.target(${t})`),this.callback.apply(null,t)):!this.noLogArr.includes(this.name)&&console.crlog("[MeetSDK][Callback] Undefined callback: "+e)}catch(e){console.crlog(`[MeetSDK] ${e}`),console.error(e)}},this.noLogArr=["notifyVideoWallVideos"]}},3826:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var n=i(6817),r=i(5004),o=i(6836),s=i(2153),a=i.n(s);let c=0;const l=new class{constructor(){}getServerTime(){return new Promise(((e,t)=>{const i="https://"+n.Z.server.getServerAddr()+"/servlet/httpping";(0,o.Z)({url:i,timeout:2e3,authentication:!1,success(t){if(0===t.RspCode){const i=t.Data.curTime;c=i-parseInt((new Date).getTime()/1e3),e()}},error(t){console.error(t),e()}})}))}createConf(e){return new Promise((async(t,i)=>{const r=`/${window.__CRNameUP}-SERVER/v2/conference`,s="https://"+n.Z.server.getServerAddr()+r;let l,d,u,h;0===c&&await this.getServerTime(),({secretId:l,timestamp:d,signature:u}=function(){const{UserName:e,UserPswd:t}=n.Z.auth.getAuth(),i=parseInt((new Date).getTime()/1e3)+c;return{secretId:e,timestamp:i,signature:a()(e+"&"+i+"&"+t)}}()),h={"X-CR-OEMKey":`${window.__CRNameUP}`,"X-CR-RequestId":Ice.generateUUID(),"X-CR-SecretId":l,"X-CR-Timestamp":d,"X-CR-Signature":u,"X-CR-Type":"terminal"},console.crlog(`[WebApi] WebApi: ${r} begain, data: ${e}`),(0,o.Z)({url:s,data:e,header:h,timeout:1e4,type:"post",success:e=>(console.crlog(`[WebApi] WebApi: ${r} success! ${JSON.stringify(e)}`),t(e)),error:e=>(console.crlog(`[WebApi] WebApi: ${r} fail! ${e}`),console.error(e),502==e.status?i(502):e.response?i(JSON.parse(e.response)):i(e))})}))}clientStartMeet(e){return new Promise((async(t,i)=>{const r="/servlet/ClientStartMeet",s="https://"+n.Z.server.getServerAddr()+r;0===c&&await this.getServerTime(),console.crlog(`[WebApi] WebApi: ${r} begain, data: ${e}`),(0,o.Z)({url:s,data:e,timeout:2e3,type:"post",success:e=>(console.crlog(`[WebApi] WebAPI ${r} success! ${JSON.stringify(e)}`),t(e)),error:e=>(console.crlog(`[WebApi] WebApi: ${r} fail! ${e}`),console.error(e),i(e))})}))}getVoteInfo(e){return new Promise((async(t,i)=>{const r=`/${window.__CRNameUP}-SERVER/v2/vote/`,s="https://"+n.Z.server.getServerAddr()+r+e;console.crlog(`[WebApi] WebApi: ${r}`),(0,o.Z)({url:s,timeout:2e3,type:"get",success:e=>(console.crlog(`[WebApi] WebAPI ${r} success! len: ${e.data.length}`),t(e)),error:e=>(console.crlog(`[WebApi] WebApi: ${r} fail! ${e}`),console.error(e),i(e))})}))}};i(5273);const d=window.CRVideo,u=(window.__Rtc,window.Ice),h={enterMeetingRslt:new r.Z("enterMeetingRslt")},f=e=>new Promise((async(t,i)=>(d.startEnterTimestamp=(new Date).getTime(),d.enterMeetingCookie=e,d.destroyMeetingConnect(),await d.leftMeetingFun(),d.isWebRTC?(window.__Rtc.CRRTCAudio.createAudioElement(),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(console.crlog("[MeetSDK] EnumerateDevices on enterConf..."),void navigator.mediaDevices.enumerateDevices().then((e=>(console.crlog(`[MeetSDK] EnumerateDevices success:${JSON.stringify(e)}`),d.updateDevicesList(e),t()))).catch((function(e){return console.crlog(`navigator.mediaDevices.enumerateDevices error: ${e}`),console.error(e),i(8003)}))):(console.crlog(`[MeetSDK] navigator.mediaDevices is undefined!!! protocal: ${window.location.protocol}`),i(8004))):t()))),p={...h,createConf:(e,t)=>(console.crlog(`[MeetSDK] MeetSDK.createConf(${JSON.stringify(e)},${t})`),new Promise(((t,i)=>{l.createConf(JSON.stringify(Object.assign(e,{RequestId:u.generateUUID()}))).then((e=>(console.crlog(`[MeetSDK] CreateMeeting success: ${JSON.stringify(e.meetInfo)}`),t(e.meetInfo)))).catch((e=>(console.crlog("[MeetSDK] CreateMeeting fail!"),e.code&&22010==e.code&&(e=70001),i(e))))}))),enterMeeting(e,t,i="",n){if(console.crlog(`[MeetSDK] MeetSDK.enterMeeting(${e},***,${i},${n})`),!i){var r=0;do{r=Math.floor(1e4*Math.random())}while(r<1e3);i=`${r}`}const o=u.generateUUID();window.CRVideo_EnterMeeting(e,t,o,i,n)},async enterConf(e,t){console.crlog(`[MeetSDK] MeetSDK.enterConf(${JSON.stringify(e)},${t})`),f(t).then((()=>{!function(){const{UserName:i,UserPswd:r}=n.Z.auth.getAuth();l.clientStartMeet(JSON.stringify(Object.assign(e,{RequestId:u.generateUUID(),IsNewClient:1,UserName:i,UserPswd:r}))).then((e=>{void 0!==e.RspCode&&0==e.RspCode?(d.crmtStr=e.CRMTStr.replace(/CRMT[\.|\w]{0,}:/,""),d.initweb()):h.enterMeetingRslt.target(window.WEB_SDK_ERR(e.RspCode),"","",t)})).catch((e=>{h.enterMeetingRslt.target(202,"","",t)}))}()})).catch((e=>{console.crlog(`[MeetSDK] MeetSDK.enterMeetingRslt.target(${e}, '', '', ${t})`),MeetSDK.enterMeetingRslt.target(e,"","",t),CRVideo_UploadingLog()}))},enterMeetByCrmt(e,t){console.crlog(`[MeetSDK] MeetSDK.enterMeetByCrmt(${e}), ${t}`),f(t).then((()=>{d.crmtStr=e,d.initweb()})).catch((e=>{console.crlog(`[MeetSDK] MeetSDK.enterMeetingRslt.target(${e}, '', '', ${t})`),MeetSDK.enterMeetingRslt.target(e,"","",t),CRVideo_UploadingLog()}))},getVoteInfo:l.getVoteInfo}},1955:()=>{!function(e,t,i){e.__crSyncClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[Sync] SyncModule initData..."),this.curMainTab={termID:-1,localID:0},this.curSubTab={termID:0,localID:0}}initIceCallback(){this.ICECallback={notifySetCurrentTab(e,t,i){console.crlog(`[Sync] ICE Callback --\x3e notifySetCurrentTab, params:${JSON.stringify({mainId:e,subId:t,operId:i})}`),this.curMainTab=e,this.curSubTab=t,this.notifyCurPageID()},notifySetFullScreen(e,t){console.crlog(`[Sync] ICE Callback --\x3e notifySetFullScreen, params:${JSON.stringify({bFull:e,operId:t})}`)},notifySetPrivTabInfo(e,t){console.crlog(`[Sync] ICE Callback --\x3e notifySetPrivTabInfo, params:${JSON.stringify({jsonCfg:e,operId:t})}`)},notifySetSyncMode(e,t){console.crlog(`[Sync] ICE Callback --\x3e notifySetSyncMode, params:${JSON.stringify({sm:e,operId:t})}`)}}}initSDKInterface(){e.CRVideo_SwitchToPage=(e,t)=>new Promise(((n,r)=>{if(console.crlog(`[Sync] CRVideo_SwitchToPage(${e},${t})`),!i.isMeeting)return r({errCode:8,errDesc:""});const o={termID:-1,localID:e};let s=-1,a=0;t||(t="0.0");try{s=+t.split(".")[0],a=+t.split(".")[1]}catch(e){return r({errCode:5,errDesc:""})}const c={termID:s,localID:a};__Rtc.CRICEAPI.SetCurrentTab(o,c).then((e=>(console.crlog("[Sync] __Rtc.CRICEAPI.SetCurrentTab success! "),n({errCode:0}))),(e=>(console.crlog(`[Sync][Error] __Rtc.CRICEAPI.SetCurrentTab fail! ${e}`),r({errCode:1,errDesc:e}))))})),e.CRVideo_GetCurrentMainPage=()=>{console.crlog("[Sync] CRVideo_GetCurrentMainPage()");const e=this.curMainTab.localID;return console.crlog(`[Sync] CRVideo_GetCurrentMainPage, return: ${e}`),e},e.CRVideo_GetCurrentSubPage=()=>{console.crlog("[Sync] CRVideo_GetCurrentSubPage()");const e=`${this.curSubTab.termID}.${this.curSubTab.localID}`;return console.crlog(`[Sync] CRVideo_GetCurrentSubPage, return: ${e}`),e}}initSync(e){this.curMainTab=e.curMainTab,this.curSubTab=e.curSubTab}notifyCurPageID(){const e=`${this.curSubTab.termID}.${this.curSubTab.localID}`;console.crlog(`[Sync] CRVideo_NotifySwitchToPage.target(${this.curMainTab.localID},${e});`),CRVideo_NotifySwitchToPage.target(this.curMainTab.localID,e)}saveLastTabValue(e){__Rtc.CRICEAPI.SaveLastTabValue(e).then((e=>{console.crlog(`[Sync] __Rtc.CRICEAPI.SaveLastTabValue success! ${e[0]}`)}),(e=>{console.crlog(`[Sync][Error] __Rtc.CRICEAPI.SaveLastTabValue fail! ${e}`),console.error(e)}))}},e.__Rtc.CRRTCSync=new e.__crSyncClass,e.CRVideo_NotifySwitchToPage=new i.CbProxy("CRVideo_NotifySwitchToPage")}(window,Ice,CRVideo)},3321:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var _src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(246),_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5174),_src_utils_VirtualBackgroundSource_selfie_segmentation__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8624),_src_utils_VirtualBackgroundSource_selfie_segmentation__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_src_utils_VirtualBackgroundSource_selfie_segmentation__WEBPACK_IMPORTED_MODULE_2__),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3826),_src_inMeeting_meetSDK_callback_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5004),_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9418),_src_inMeeting_ice_rtcGateway_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3227);const CR=window.CRVideo,Ice=window.Ice;class CRVideo_VideoInfoObj{constructor(e,t,i){this.userID=e,this.videoID=t,this.videoName=i}}class _ConnectItem{constructor(e,t){this.camID=e,this.ssValue=0,this.msid=t,this.offer=null,this.answer=null,this.offer_cb=null,this.answer_cb=null,this.connection=null,this.candidates=[],this.stream=null,this.rtpLogTimer=-1}}window._ConnectItemClass=_ConnectItem;class _UserConnectList{constructor(e){this.termID=e,this.list=[]}}class VideoClass{constructor(){this.initData(),this.initIceCallback(),this.initIceNotify(),this.initSDKInterface()}initData(){console.crlog("[Video] VideoModule initData..."),this.VSTATUS={VUNKNOWN:0,VNULL:1,VCLOSE:2,VOPEN:3,VOPENING:4},this.vwalllo=0,this.videoWallList=[],this.mainVideoTermID=0,this.windowMode=""}initIceCallback(){this.ICECallback={enableSendVideo2Internet:this.enableSendVideo2Internet,disableSendVideo2Internet:this.disableSendVideo2Internet,updateAllCameraInfosRlst:e=>{console.crlog(`[Video] ICE Callback --\x3e updateAllCameraInfosRlst, params:${JSON.stringify({errCode:e})}`)},startVideoRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e startVideoRslt, params:${JSON.stringify({errCode:e})}`)},stopVideoRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e stopVideoRslt, params:${JSON.stringify({errCode:e})}`)},reqOpenVideoRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e reqOpenVideoRslt, params:${JSON.stringify({errCode:e})}`)},startVideoExRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e startVideoExRslt, params:${JSON.stringify({errCode:e})}`)},stopVideoExRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e stopVideoExRslt, params:${JSON.stringify({errCode:e})}`)},setVideoDeviceStatusRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e setVideoDeviceStatusRslt, params:${JSON.stringify({errCode:e})}`)},setOpenedCameraNumberRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e setOpenedCameraNumberRslt, params:${JSON.stringify({errCode:e})}`)},batchSubscribeVideo2Rslt:e=>{console.crlog(`[Video] ICE Callback --\x3e batchSubscribeVideo2Rslt, params:${JSON.stringify({errCode:e})}`)}}}initIceNotify(){this.notifyAllowVideoWall=(e,t)=>{console.crlog(`[Video] ICE Notify --\x3e notifyAllowVideoWall, params:${JSON.stringify({bool:e,opID:t})}`)},this.updateStatus=(e,t,i)=>{console.crlog(`[Video] ICE Notify --\x3e updateStatus, params:${JSON.stringify({termID:e,status:t,opID:i})}`);const n=CR.allMemberInfo.find((t=>t.termId==e));if(!n)return;try{console.crlog(`[Video] Video updateStatus, termID:${e}, userID:${n.userId}, status:${t}, opID:${i}`)}catch(e){console.error(e)}const r=n.videoStatus||"VUNKNOWN";n.videoStatus=t.name,n.termId==CR.userInfo.termId&&("VOPEN"==t.name?(__Rtc.CRRTCLocalVideo.uploadCurOpenedCamNumber(),__Rtc.CRRTCLocalVideo.getLocalCamStream()):"VCLOSE"==t.name&&__Rtc.CRRTCLocalVideo.stopAllLocalVideoAndConnect()),r!==t.name&&CRVideo_VideoStatusChanged.target(n.userId,CRVideo_VSTATUS[r],CRVideo_VSTATUS[t.name])},this.notifyOpenVideo=e=>{console.crlog(`[Video] ICE Notify: notifyOpenVideo, params:${JSON.stringify({opID:e})}`),window.CRVideo_OpenVideo(CR.userInfo.userId)},this.updateFocusWindow=(e,t)=>{let i;console.crlog(`[Video] ICE Notify: updateFocusWindow, params: ${JSON.stringify({mode:e,termID:t})}`),i="VSPEAKER_TRACK"==e?1:"VPRESENTER_LOCK"==e?2:"VMANAGER_LOCK"==e?3:0,this.windowMode!=e&&(console.crlog(`[Video] Notify mainVideoModeChanged, oldMode:${this.windowMode}, newMode:${e}`),this.windowMode=e,CRVideo_NotifyMainVideoModeChanged.target(i));let n=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.termIDtoUserID(t);console.crlog(`[Video] Notify updateFocusWindow, mode:${e}, termId:${t}, userId:${n}`),this.mainVideoTermID=t,n&&CRVideo_NotifyMainVideoChanged.target(n)},this.updateVLayout2=(e,t)=>{console.crlog(`[Video] ICE Notify: updateVLayout2, params:${JSON.stringify({lo:e,opID:t})}`),this.vwalllo=e,__Rtc.CRRTCRemoteVideo.updateSubscribeVideo(),console.crlog(`[Video] notifyVideoWallMode.target(${e})`),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoWallMode.target(e)},this.updateMainVideoShowMode=(e,t)=>{console.crlog(`[Video] ICE Notify: updateMainVideoShowMode, params:${JSON.stringify({MVM_value:e,opID:t})}`)},this.updateVideoListMode=(e,t)=>{console.crlog(`[Video] ICE Notify: updateVideoListMode, params:${JSON.stringify({jsonMode:e,opID:t})}`)},this.enableUpload2=(e,t)=>{console.crlog(`[Video] ICE Notify: enableUpload2, params:${JSON.stringify({camID:e,ssVal:t})}`),e<50&&__Rtc.CRRTCLocalVideo.setUploadSize(e,t)},this.getVideoSetting_async=e=>{console.crlog("[Video] ICE Notify: getVideoSetting_async"),e.ice_response()},this.notifyVideoPolling=(e,t,i)=>{console.crlog(`[Video] ICE Notify: notifyPollingVideo2, params:${JSON.stringify({opID:e,bStart:t,interval:i})}`),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoPolling.target(t,i)},this.notifyPollingVideo2=(e,t,i)=>{console.crlog(`[Video] ICE Notify: notifyPollingVideo2, params:${JSON.stringify({opID:e,watchIDs:t,jsonDat:i})}`);const n=[];this.videoWallList=t,t.forEach((e=>{const t=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.termIDtoUserID(e.termID);n.push({userID:t,camID:+e.camID})})),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoWallVideos.target(n,i)},this.notifyVideoList=(e,t)=>{console.crlog(`[Video] ICE Notify: notifyVideoList, params:${JSON.stringify({opID:e,jsonDat:t})}`)},this.notifyUpdateAllCameraInfos=(e,t)=>{console.crlog(`[Video] ICE Notify: notifyUpdateAllCameraInfos, params:${JSON.stringify({termID:e,camInfos:t})}`),CR.allMemberInfo.forEach((i=>{if(i.termId==e){const n=new RegExp("\n","g");console.crlog(`[Video] TermID:${e}, userID:${i.userId}, updateAllCameraInfos: ${t.replace(n,"|")}`);const r=t.split("\n").slice(0,-1);i.allCams=r,window.CRVideo_VideoDevChanged.target(i.userId)}}))},this.notifySetOpenedCameraNumber=(e,t)=>{console.crlog(`[Video] ICE Notify --\x3e notifySetOpenedCameraNumber, params:${JSON.stringify({termID:e,camID:t})}`);const i=[];t.forEach((e=>i.push(parseInt(e)))),CR.allMemberInfo.forEach((t=>{if(t.termId==e){console.crlog(`[Video] NotifySetOpenedCameraNumber, termID:${t.termId}, userID:${t.userId}, camIDs:${JSON.stringify(i)}`);const n=t.defaultCam||0,r=i[0],o=t.openedCamIDs||[],s=i.slice(1);let a=!1;console.crlog(`[Video] Old OpenedCams: ${o}`),console.crlog(`[Video] Now OpenedCams: ${s}`),console.crlog(`[Video] Old DefaultCam: ${n}`),console.crlog(`[Video] Now DefaultCam: ${r}`),t.defaultCam=r,t.openedCamIDs=s;const c=[],l=[];for(let e=0;e<s.length;e++)o.includes(s[e])||l.push(s[e]),o[e]!=s[e]&&(a=!0);for(let e=0;e<o.length;e++)s.includes(o[e])||c.push(o[e]);return(c.length>0||l.length>0)&&(a=!0),t.userId!==CR.userInfo.userId&&c.forEach((t=>{__Rtc.CRRTCRemoteVideo.connectList.forEach((i=>{i.termID==e&&i.list.forEach((i=>{i.camID%1e4==t&&(console.crlog(`[Video] MSID:${i.msid}, termID:${e}, camID:${i.camID} video RTCConnection closed...`),i.connection&&i.connection.close(),i.connection&&(i.connection=null))}))}))})),a&&(console.crlog(`[Video] TermID:${t.termId}, userID:${t.userId}, opened cams changed, stoppedCams:${JSON.stringify(c)}, addedCams:${JSON.stringify(l)}`),window.CRVideo_VideoDevChanged.target(t.userId)),r!==n&&(console.crlog(`[Video] TermID:${t.termId}, userID:${t.userId}, default camId changed:${n} ----\x3e ${r}`),window.CRVideo_DefVideoChanged.target(t.userId,r)),void(e!==CR.userInfo.termId&&__Rtc.CRRTCRemoteVideo.updateSubscribeVideo())}}))}}initSDKInterface(){window.CRVideo_SetVideoCfg=e=>{console.crlog(`[Video] CRVideo_SetVideoCfg(${JSON.stringify(e)})`),__Rtc.CRRTCLocalVideo.setVideoCfg(e)},window.CRVideo_GetVideoCfg=()=>{const e={};for(var t in __Rtc.CRRTCLocalVideo.videoCfg)e[t]=__Rtc.CRRTCLocalVideo.videoCfg[t];return console.crlog(`[Video] CRVideo_GetVideoCfg(), return: ${JSON.stringify(e)}`),e},window.CRVideo_GetVideoStatus=e=>{let t=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(e,"videoStatus")||"VUNKNOWN";return this.VSTATUS[t]},window.CRVideo_GetDefaultVideo=e=>{let t;if(e==CR.userInfo.userId)t=__Rtc.CRRTCLocalVideo.defaultCamID;else{let i=null;CR.allMemberInfo.forEach((t=>{t.userId==e&&(i=null==t.defaultCam?-1:+t.defaultCam)})),t=null!=i?i:0}return+t},window.CRVideo_SetDefaultVideo=(e,t)=>{try{console.crlog(`[Video] CRVideo_SetDefaultVideo(${e},${t})`),t=+t}catch(e){console.error(e)}e==CR.userInfo.userId&&__Rtc.CRRTCLocalVideo.setDefaultVideo(t)},window.CRVideo_GetAllVideoInfo=e=>{const t=+_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(e),i=[];return t&&t===+CR.userInfo.termId?__Rtc.CRRTCLocalVideo.videoInput.forEach((t=>{i.push(new CRVideo_VideoInfoObj(e,t.id,t.name))})):CR.allMemberInfo.forEach((n=>{n.termId==t&&n.allCams&&n.allCams.forEach((t=>{const n=t.split(";");i.push(new CRVideo_VideoInfoObj(e,+n[0],n[1]))}))})),i},window.CRVideo_OpenVideo=e=>{if(console.crlog(`[Video] CRVideo_OpenVideo(${e})`),e==CR.userInfo.userId)__Rtc.CRRTCLocalVideo.openMyVideo();else{const t=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(e);t&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.reqOpenVideo(t)}},window.CRVideo_CloseVideo=e=>{if(console.crlog(`[Video] CRVideo_CloseVideo(${e})`),e==CR.userInfo.userId)__Rtc.CRRTCLocalVideo.closeMyVideo();else{const t=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(e);_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.stopVideoEx(t)}},window.CRVideo_AddStreamCam=(e,t,i)=>(console.crlog(`[Video] CRVideo_AddStreamCam(${e},${t},${JSON.stringify(i)})`),__Rtc.CRRTCLocalVideo.addStreamCam(e,t,i)),window.CRVideo_RemoveStreamVideo=e=>(console.crlog(`[Video] CRVideo_RemoveStreamVideo(${e})`),__Rtc.CRRTCLocalVideo.removeStreamCam(e)),window.CRVideo_AddCanvasVCam=(e,t,i)=>{console.crlog(`[Video] CRVideo_AddCanvasVCam(${e},${t},${JSON.stringify(i)})`);const n=i&&i.fps?i.fps:__Rtc.CRRTCLocalVideo.videoCfg.fps;void 0===t&&(t=Ice.generateUUID());const r=e.getContext("2d"),o={type:"canvasStreamCam",canvas:e,ctx:r,putImageFun(){r.putImageData(r.getImageData(0,0,e.width,e.height),0,0)}};o.putImageFun();const s=e.captureStream(n||15),a=window.CRVideo_AddStreamCam(s,t,o);return!!a&&new CRVideo_VideoInfoObj(CR.userInfo.userId,a,t)},window.CRVideo_RemoveCanvasVCam=e=>{console.crlog(`[Video] CRVideo_RemoveCanvasVCam(${e})`),window.CRVideo_RemoveStreamVideo(e)},window.CRVideo_GetOpenedVideoIDs=e=>_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(e,"openedCamIDs")||[],window.CRVideo_SetEnableMutiVideo=(e,t)=>{console.crlog(`[Video] CRVideo_SetEnableMutiVideo(${e},${t})`),__Rtc.CRRTCLocalVideo.VBGConfig.type&&t||e==CR.userInfo.userId&&__Rtc.CRRTCLocalVideo.setEnableMutiVideo(t)},window.CRVideo_GetEnableMutiVideo=e=>{let t=null;return e==CR.userInfo.userId&&(t=__Rtc.CRRTCLocalVideo.multipleCams),console.crlog(`[Video] CRVideo_GetEnableMutiVideo(${e}), return:${t}`),t},window.CRVideo_SetVirtualBackground=e=>{console.crlog(`[Video] CRVideo_SetVirtualBackground(${JSON.stringify(e)})`);const{type:t,color:i,image:n,destroy:r,debuggerStyle:o}=e;return __Rtc.CRRTCLocalVideo.setVirtualBackground(t,i,n,r,o)},window.CRVideo_SetMainVideo=e=>{console.crlog(`[Video] CRVideo_SetMainVideo(${e})`);return new Promise(((t,i)=>{const n=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(e);n&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setFocusWindow("VMANAGER_LOCK",n).then((e=>t({errCode:0,errDesc:"success"})),(e=>(console.error(e),i(__Rtc.CRCONFERR.Parse(e)))))}))},window.CRVideo_SetMainVideoMode=(e,t)=>{console.crlog(`[Video] CRVideo_SetMainVideoMode(${e},${t})`);return new Promise(((i,n)=>{let r;1==e?r="VSPEAKER_TRACK":2==e?r="VPRESENTER_LOCK":3==e&&(r="VMANAGER_LOCK");const o=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(t);o&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setFocusWindow(r,o).then((e=>i({errCode:0,errDesc:"success"})),(e=>(console.error(e),n(__Rtc.CRCONFERR.Parse(e)))))}))},window.CRVideo_GetMainVideo=()=>{const e=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.termIDtoUserID(this.mainVideoTermID);return console.crlog(`[Video] CRVideo_GetMainVideo(), return: ${e}`),e},window.CRVideo_GetMainVideoMode=()=>this.windowMode,_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.setVideoWallMode=e=>{console.crlog(`[MeetSDK][Video] MeetSDK.setVideoWallMode(${e})`);return new Promise(((t,i)=>{_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setVLayout2(e).then((e=>t({errCode:0,errDesc:"success"})),(e=>(console.error(e),i(__Rtc.CRCONFERR.Parse(e)))))}))},_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.getVideoWallMode=()=>(console.crlog(`[MeetSDK][Video] MeetSDK.getVideoWallMode(), return: ${this.vwalllo}`),this.vwalllo),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.getVideoWallVideoList=()=>(console.crlog("[MeetSDK][Video] MeetSDK.getVideoWallVideoList()"),this.getVideoWallVideoList()),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.updatePollingVideo2=e=>{console.crlog(`[MeetSDK][Video] MeetSDK.updatePollingVideo2(${JSON.stringify(e)})`);return new Promise(((t,i)=>{_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.updatePollingVideo2(e).then((e=>t({errCode:0,errDesc:"success"})),(e=>(console.error(e),i(__Rtc.CRCONFERR.Parse(e)))))}))},window.CRVideo_DisableCamera=(e,t)=>{console.crlog(`[Video] CRVideo_DisableCamera(${e},${t})`);const i=__Rtc.CRRTCLocalVideo.videoInput.find((t=>t.id==e));i&&(i.disabled=t)},window.CRVideo_SetLocVideoAttributes=(e,t)=>{console.crlog(`[Video] CRVideo_SetLocVideoAttributes(${e}, ${JSON.stringify(t)})`);const i=__Rtc.CRRTCLocalVideo.videoInput.find((t=>t.id==e));if(i)for(let e in t)i.locAttr[e]=t[e];null!=t.constraints&&3==CRVideo_GetVideoStatus(CR.userInfo.userId)&&(__Rtc.CRRTCLocalVideo.closeMyVideo(),setTimeout((()=>{__Rtc.CRRTCLocalVideo.openMyVideo()}),1e3))},window.CRVideo_GetLocVideoAttributes=e=>{const t=__Rtc.CRRTCLocalVideo.videoInput.find((t=>t.id==e));return t?t.locAttr:{}},window.CRVideo_GetVideoTrackCapabilities=e=>{const t=__Rtc.CRRTCLocalVideo.videoInput.find((t=>t.id==e));let i={};return t&&t.stream&&t.stream.active&&(i=t.stream.getVideoTracks()[0].getCapabilities(),i.pan&&0==i.pan.step&&(i.pan.step=(i.pan.max-i.pan.min)/500),i.tilt&&0==i.tilt.step&&(i.tilt.step=(i.tilt.max-i.tilt.min)/500),i.zoom&&0==i.zoom.step&&(i.zoom.step=(i.zoom.max-i.zoom.min)/500)),console.crlog(`[Video] CRVideo_GetVideoTrackCapabilities(${e}), return: ${JSON.stringify(i)}`),i},window.CRVideo_GetVideoTrackSettings=e=>{const t=__Rtc.CRRTCLocalVideo.videoInput.find((t=>t.id==e));let i={};return t&&t.stream&&t.stream.active&&(i=t.stream.getVideoTracks()[0].getSettings()),console.crlog(`[Video] CRVideo_GetVideoTrackSettings(${e}), return: ${JSON.stringify(i)}`),i},window.CRVideo_SetVideoPanTiltZoom=async(e,t)=>{__Rtc.CRRTCLocalVideo.setVideoPanTiltZoom(e,t)}}enableSendVideo2Internet(e){console.crlog(`[Video] ICE Notify: enableSendVideo2Internet, params:${JSON.stringify({camID:e})}`)}disableSendVideo2Internet(e){console.crlog(`[Video] ICE Notify: disableSendVideo2Internet, params:${JSON.stringify({camID:e})}`)}videoAllocRawExt2(e,t,i,n){const r=+t.cameraID,o=+t.srcTermID;console.crlog(`[Video] TermID:${o}, camID:${r}, isSelf:${i},  videoAllocRawExt2... (liteice:${n.get("liteice")||"0"}, rtc_streamid:${n.get("rtc_streamid")||null})`),setTimeout((()=>{e.isResponsed||(console.crlog(`[Video] TermID:${o}, camID:${r}, isSelf:${i}, waited more than 10s, do cb.ice_response()`),e.ice_response(),e.isResponsed=!0)}),1e4),i?__Rtc.CRRTCLocalVideo.videoAllocRawExt2(e,t,n):__Rtc.CRRTCRemoteVideo.videoAllocRawExt2(e,t,n)}modifyPeerAddrExt(e,t,i,n){if(setTimeout((()=>{t.isResponsed||(t.ice_response(),t.isResponsed=!0)}),2e4),"localVideo"==e){const e={type:"answer",sdp:this.modifyAnswerSDP(n.get("sdp"),"sendonly")};__Rtc.CRRTCLocalVideo.modifyPeerAddrExt(e,t,i)}else if("remoteVideo"==e){const e={type:"answer",sdp:this.modifyAnswerSDP(n.get("sdp"),"recvonly")};__Rtc.CRRTCRemoteVideo.modifyPeerAddrExt(e,t,i)}}RtcGwVideoAlloc2(e){const t=e.logStr;console.crlog(`${t} request GwVideoAlloc2(vsParam, HashMap)`),_src_inMeeting_ice_rtcGateway_js__WEBPACK_IMPORTED_MODULE_5__.Z.GwVideoAlloc2(e.vsParam,e.HashMap).then((i=>{if(i.answerSdp){console.crlog(`${t} request GwVideoAlloc2 success...`);const n={type:"answer",sdp:this.modifyAnswerSDP(i.answerSdp,e.type)};e.answer=n;let r=" ";n.sdp.includes("VP8")&&(r+="VP8"),n.sdp.includes("H264")&&(r+=" H264"),console.crlog(`${t} received answer, length:${n.sdp.length}, codecs:${r}`),console.crlog(`${n.sdp}`),console.crlog(`${t} setRemoteDescription(answer)`),e.connection.setRemoteDescription(new RTCSessionDescription(n)).then((()=>{console.crlog(`${t} setRemoteDescription success!`)})).catch((e=>{console.crlog(`${t} setRemoteDescription fail! ${e}`),console.error(e)}))}})).catch((e=>{console.error(e)}))}modifyOfferSDP(e,t){const i=t.type,n=t.camID>=1e4?"VP8":"H264",r=[];let o=e.split("\r\n");e.match(new RegExp(`(\\d+)(?=\\s+${n})`,"g")).forEach((e=>r.push(e.replace(` ${n}`,"")))),o=o.filter((e=>!((e.includes("a=rtcp-fb")||e.includes("a=rtpmap")||e.includes("a=fmtp"))&&!r.includes(e.split(" ")[0].split(":")[1]))));const s=o.findIndex((e=>e.includes("m=video"))),a=[];o[s].split(" ").forEach(((e,t)=>{t<3&&a.push(e),t>=3&&!isNaN(e)&&r.includes(e)&&a.push(e)})),o[s]=a.join(" ");for(let e=0;e<o.length;e++){o[e].includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete o[e]}let c=o.join("\r\n");return c=c.replace("\r\n\r\n","\r\n"),i&&(c=c.replace("a=sendrecv",`a=${i}`)),c}modifyAnswerSDP(e,t){let i=e.split("\r\n");for(let e=0;e<i.length;e++){i[e].includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete i[e]}const n=(e=(e=i.join("\r\n")).replace("\r\n\r\n","\r\n")).match(/c=IN IP4(.*?)\r\n/)?e.match(/c=IN IP4(.*?)\r\n/)[0]:"",r=e.match(/b=AS:(.*?)\r\n/)?e.match(/b=AS:(.*?)\r\n/)[0]:"";return n&&e.split(n).length>2&&(e=e.replace(`${n}${r}`,"")),"sendonly"==t&&(e=e.replace(";profile-level-id=42001f","")),"recvonly"==t&&(e=e.replace("a=sendrecv","a=sendonly")),e}}class LocalVideoClass{constructor(){this.selfieSegmentation=null,this.VBGConfig={type:0,videoEle:null,videoCanvas:null,color:"",img:null,style:null},this.initData()}initData(){console.crlog("[Video] LocalVideoModule initData..."),this.lastLocalVideoMSID=12e4,this.defaultCamID=0,this.opendCamsArr=[],this.videoCfg={size:1,fps:15,ratio:1},__Rtc.CRBrowser.curBrowserCfg.isMobile&&(this.videoCfg.ratio=3),this.multipleCams=!1,this.videoInput=[],this.streamCamID=50,this.selfieSegmentationPermission=!1,this.originalTrack=null,this.VBGWorker=null,this.ptzWaitingFlag=!0,this.ptzLastConstraints=null}openMyVideo(){console.crlog("[Video] Open my video..."),__Rtc.CRRTCLocalVideo.videoInput.length>0?_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.startVideo():(console.crlog("[Video] Open video failed, no video devices!"),console.crlog("[Video] CRVideo_OpenVideoFailed.target(-1, 'No cameras.')"),CRVideo_OpenVideoFailed.target(-1,"No cameras."))}closeMyVideo(){console.crlog("[Video] Close my video..."),__Rtc.CRRTCLocalVideo.stopAllLocalVideoAndConnect(),_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.stopVideo()}virtualBackgroundInit(){const e=document.createElement("video");e.autoplay=!0;const t=document.createElement("canvas"),i=t.getContext("2d");var n=new _src_utils_VirtualBackgroundSource_selfie_segmentation__WEBPACK_IMPORTED_MODULE_2__.SelfieSegmentation({locateFile:e=>`${CRVideo.virtualBackgroundAssets}/${e}`});n.setOptions({modelSelection:1}),n.onResults((e=>{const{type:n,img:r,color:o}=this.VBGConfig;if(0==n)return i.clearRect(0,0,t.width,t.height),void i.drawImage(e.image,0,0,t.width,t.height);i.save(),i.clearRect(0,0,t.width,t.height),i.drawImage(e.segmentationMask,0,0,t.width,t.height),i.globalCompositeOperation="source-in",i.drawImage(e.image,0,0,t.width,t.height),1==n&&o?(i.globalCompositeOperation="destination-atop",i.fillStyle=o,i.fillRect(0,0,t.width,t.height)):2==n&&r&&r.complete&&(i.globalCompositeOperation="destination-atop",i.drawImage(r,0,0,t.width,t.height)),i.restore()}));const r=URL.createObjectURL(new Blob([(console.crlog("[Video] Get canvas stream:new Worker..."),"("+function(){let e;self.onmessage=function(t){const{cmd:i,fps:n}=t.data;if("start"===i){clearTimeout(e);const t=()=>{self.postMessage("draw"),e=setTimeout(t,1e3/n)};t()}else"stop"===i&&(clearTimeout(e),e=null)}}.toString()+"());")],{type:"text/javascript"})),o=new Worker(r);let s=!0;o.onmessage=e=>{"draw"===e.data&&s&&(s=!1,this.selfieSegmentation.send({image:this.VBGConfig.videoEle}).then((()=>{s=!0})))},this.VBGConfig.videoCanvas=t,this.VBGConfig.videoEle=e,this.VBGWorker=o,this.selfieSegmentation=n}virtualBackgroundUninit(){this.VBGConfig.style&&document.body.removeChild(this.VBGConfig.videoEle),this.VBGWorker.postMessage({cmd:"stop"}),this.VBGWorker.terminate&&this.VBGWorker.terminate(),this.VBGConfig.videoCanvas=null,this.VBGConfig.videoEle=null,this.VBGWorker=null,this.selfieSegmentation=null}setVirtualBackground(e,t,i,n=!0,r){if(!this.selfieSegmentationPermission)return console.crlog("[Video][Error] Virtual Backgrounds No Permission!"),806;this.VBGConfig.type=e,this.VBGConfig.color=t,this.VBGConfig.img=i,this.VBGConfig.style=r,i&&i.setAttribute("crossOrigin","anonymous");const o=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(CR.userInfo.userId,"videoStatus")||"VUNKNOWN";if(3!==__Rtc.CRRTCVideo.VSTATUS[o])return 0;let s;if(this.videoInput.forEach((e=>{e.disabled||!this.multipleCams&&(this.multipleCams||e.id!=this.defaultCamID)||"streamCam"!==e.kind&&e.stream&&"canvasStreamCam"!==e.kind&&(s=e)})),!s)return 0;switch(e){case 0:if(!this.selfieSegmentation)return 0;if(n){const e=this.VBGConfig.videoEle.srcObject;if(s.connect.connection){s.connect.connection.getSenders()[0].replaceTrack(this.originalTrack)}if(s.connect2.connection){s.connect2.connection.getSenders()[0].replaceTrack(this.originalTrack)}this.originalTrack=null,s.stream=e,s.connect.stream=e,s.connect2.stream=e,this.refreshLocalContainerSrc("",s),this.virtualBackgroundUninit()}break;case 1:case 2:if(!this.selfieSegmentation){this.virtualBackgroundInit(),this.originalTrack=s.stream.getTracks()[0];const e=this.VBGConfig.videoEle;e.srcObject=s.stream,e.onplay=()=>{this.VBGConfig.videoCanvas.width=e.videoWidth,this.VBGConfig.videoCanvas.height=e.videoHeight,this.VBGWorker.postMessage({cmd:"start",fps:this.videoCfg.fps});const{videoEle:t}=this.VBGConfig;r&&(Object.keys(r).forEach((e=>{t.style[e]=r[e]})),document.body.appendChild(t))};const t=this.VBGConfig.videoCanvas.captureStream(1e3/this.videoCfg.fps);if(s.connect.connection){s.connect.connection.getSenders()[0].replaceTrack(t.getTracks()[0])}if(s.connect2.connection){s.connect2.connection.getSenders()[0].replaceTrack(t.getTracks()[0])}s.stream=t,s.connect.stream=t,s.connect2.stream=t,this.refreshLocalContainerSrc("",s)}break;default:reject({errCode:5,errDesc:"type"})}return 0}getVirtualBackgroundStream(e,t){this.selfieSegmentation||this.virtualBackgroundInit(),this.originalTrack=e.getTracks()[0];const{style:i,videoEle:n}=this.VBGConfig;n.srcObject=e,n.onplay=()=>{this.VBGConfig.videoCanvas.width=n.videoWidth,this.VBGConfig.videoCanvas.height=n.videoHeight,this.VBGWorker.postMessage({cmd:"start",fps:this.videoCfg.fps}),i&&(Object.keys(i).forEach((e=>{n.style[e]=i[e]})),document.body.appendChild(n))},this.VBGConfig.videoCanvas.width=1920,this.VBGConfig.videoCanvas.height=1080,setTimeout((()=>{var e=this.VBGConfig.videoCanvas.captureStream(30);t.stream=e,t.connect.stream=e,t.connect2.stream=e,this.refreshLocalContainerSrc("",t),CRVideo_NotifyVideoStream.target(CR.userInfo.userId,e),CRVideo_NotifyCameraStream.target(CR.userInfo.userId,t.id,e)}),500)}parseVideoRatio(e){let t=null;switch(e){case 1:t={exact:16/9};break;case 2:t={exact:4/3};break;case 3:t={exact:1};break;case 4:t={exact:3/4};break;case 5:t={exact:9/16}}return t}parseVideoConstraints(videoCfg,device){if(videoCfg&&null!=videoCfg.size&&0==videoCfg.size)return;const videoConstraints={};null==videoCfg&&(videoCfg=this.videoCfg),null==videoCfg.ratio&&(videoCfg.ratio=this.videoCfg.ratio);const sdkRatio=this.parseVideoRatio(videoCfg.ratio);null!==sdkRatio&&(videoConstraints.aspectRatio=sdkRatio),videoCfg.aspectRatio&&(videoConstraints.aspectRatio={exact:eval(videoCfg.aspectRatio)}),null==videoCfg.size&&(videoCfg.size=this.videoCfg.size);const width=_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__.Z.get(videoCfg.size).width||null,height=_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__.Z.get(videoCfg.size).height||null;return null!==height&&videoConstraints.aspectRatio&&videoConstraints.aspectRatio.exact<=1?videoConstraints.height={ideal:height}:null!==width&&(videoConstraints.width={ideal:width}),null==videoCfg.fps&&(videoCfg.fps=this.videoCfg.fps),videoConstraints.frameRate={ideal:videoCfg.fps},void 0!==device&&(__Rtc.CRBrowser.curBrowserCfg.isMobile?videoConstraints.facingMode={exact:device.includes("user")?"user":"environment"}:videoConstraints.deviceId={exact:device}),1==device&&Reflect.deleteProperty(videoConstraints,"deviceId"),videoConstraints}getCurVideoCfg(e){return new Promise(((t,i)=>{const n=e.getVideoTracks()[0];if(n&&n.getSettings){let r,o;function s(){r=n.getSettings(),r.height&&r.width?(clearTimeout(o),t(r)):o=setTimeout((()=>{s()}),100)}s()}else{let a={width:{ideal:_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__.Z.get(this.videoCfg.size).width},height:{ideal:_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__.Z.get(this.videoCfg.size).height}};t(a)}}))}getMaxbps(e=this.videoCfg.size){let t=16e5;switch(e){case 5:t=75e3;break;case 6:t=1e5;break;case 7:t=125e3;break;case 8:t=16e4;break;case 9:t=23e4;break;case 10:t=26e4;break;case 11:t=31e4;break;case 1:t=4e5;break;case 12:t=48e4;break;case 2:t=6e5;break;case 13:t=8e5;break;case 3:t=12e5;break;case 4:t=2e6;break;case 14:t=4e6;break;case 15:t=6e6;break;default:t=16e5}return t}setMaxbps(e,t){try{const i=e.getSenders()[0];if(!i)return console.crlog("[Video][Error] connection.getSenders()[0] is undefind! setMaxbps fail!");let n;n=t>0?this.getMaxbps(t):163840,n=this.videoCfg.maxbps?this.videoCfg.maxbps:n,this.setVideoSenderParams(i,null,n).then((e=>{console.crlog(`[Video] LocalVideoConnection sender setParameters:${JSON.stringify(e)}, success!`)})).catch(((e,t)=>{console.crlog(`[Video][Error] LocalVideoConnection sender setParameters:${JSON.stringify(e)}, fail! ${t}`)}))}catch(e){console.crlog(`[Video][Error] ${e}`),console.error(e)}}setVideoCfg(e){const t={};if(void 0!==e.size&&(t.size=+e.size),void 0!==e.fps&&(t.fps=+e.fps),void 0!==e.ratio&&(t.ratio=+e.ratio),void 0!==e.aspectRatio&&(t.aspectRatio=e.aspectRatio),void 0!==e.maxbps&&(t.maxbps=+e.maxbps),0===Object.keys(t).length)return;for(let e in t)this.videoCfg[e]=t[e];let i=this.parseVideoConstraints(t);this.originalTrack?this.originalTrack.applyConstraints(i).then((()=>{console.crlog(`[Video] Local applyConstraints success! Current settings:${JSON.stringify(this.originalTrack.getSettings())}`),e.size&&setTimeout((()=>{this.VBGConfig.videoCanvas.width=this.VBGConfig.videoEle.videoWidth,this.VBGConfig.videoCanvas.height=this.VBGConfig.videoEle.videoHeight}),500),t.fps>0&&this.VBGWorker.postMessage({cmd:"start",fps:t.fps})})).catch((e=>{console.crlog(`[Video] Local applyConstraints fail! ${e}`),console.error(e)})):this.videoInput.forEach((n=>{if("canvasStreamCam"!=n.kind&&(null!=t.size&&n.ssVal&&(t.size=_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__.Z.getUploadSize(+e.size,n.ssVal)),i=this.parseVideoConstraints(t),n.stream&&n.stream.active&&!n.locAttr.constraints)){const e=n.stream.getVideoTracks()[0];console.crlog(`[Video] Local camID:${n.id} applyConstraints:${JSON.stringify(i)}`),e.applyConstraints(i).then((()=>{console.crlog(`[Video] Local camID:${n.id} applyConstraints success! Current settings:${JSON.stringify(e.getSettings())}`),n.connect&&n.connect.connection&&"connected"==n.connect.connection.connectionState&&(this.setMaxbps(n.connect.connection,t.size),this.getCurVideoCfg(n.connect.stream).then((e=>{e.width&&e.height&&window.videoResolutionReport(n.connect.msid,"video",e.width,e.height)}))),n.connect2&&n.connect2.connection&&"connected"==n.connect2.connection.connectionState&&(this.setMaxbps(n.connect2.connection,t.size),this.getCurVideoCfg(n.connect2.stream).then((e=>{e.width&&e.height&&window.videoResolutionReport(n.connect2.msid,"video",e.width,e.height)})))})).catch((e=>{console.crlog(`[Video] Local camID:${n.id} applyConstraints fail! ${e}`),console.error(e)}))}}))}async setVideoPanTiltZoom(e,t){let i=this.ptzLastConstraints||{advanced:[t]};if(this.ptzWaitingFlag){this.ptzWaitingFlag=!1;const t=this.videoInput.find((t=>t.id==e));if(t&&t.stream&&t.stream.active){let n=t.stream.getVideoTracks()[0];try{if(await n.applyConstraints(i),this.ptzWaitingFlag=!0,this.ptzLastConstraints){const t=this.ptzLastConstraints.advanced[0];this.ptzLastConstraints=null,this.setVideoPanTiltZoom(e,t)}}catch(e){this.ptzWaitingFlag=!0,console.error("setVideoPanTiltZoom failed: ",e),console.crlog(`[Video] Control ptz camera error: ${e.toString()}`)}}}else this.ptzLastConstraints=i}setDefaultVideo(e){const t=this.videoInput.find((t=>t.id==e)),i=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(CR.userInfo.userId,"videoStatus");t&&(this.defaultCamID=e,this.multipleCams||"VOPEN"!=i||(this.stopAllLocalVideoAndConnect(),this.getLocalCamStream()),this.uploadCurOpenedCamNumber())}stopAllLocalVideoAndConnect(e){console.crlog("[Video] Do stop all local video track and connect..."),this.originalTrack&&(this.originalTrack.stop(),this.originalTrack=null),this.selfieSegmentation&&this.virtualBackgroundUninit(),__Rtc.CRRTCUI.videoContainerList.forEach((e=>{e._userID==CR.userInfo.userId&&e.clear()})),this.videoInput.forEach((e=>{e.connect.connection&&e.connect.connection.close(),e.connect2.connection&&e.connect2.connection.close(),e.connect.answer=null,e.connect.answer_cb=null,e.connect.candidates=[],e.connect.connection=null,e.connect.offer=null,e.connect.offer_cb=null,clearInterval(e.connect.rtpLogTimer),e.connect.rtpLogTimer=-1,e.connect2.answer=null,e.connect2.answer_cb=null,e.connect2.candidates=[],e.connect2.connection=null,e.connect2.offer=null,e.connect2.offer_cb=null,clearInterval(e.connect2.rtpLogTimer),e.connect2.rtpLogTimer=-1,window.videoResolutionReport(e.connect.msid,"video",0,0),window.videoResolutionReport(e.connect2.msid,"video",0,0),this.selfieSegmentation&&this.virtualBackgroundUninit(),"streamCam"!==e.kind&&"canvasStreamCam"!==e.kind&&(e.stream&&e.stream.getVideoTracks()[0].stop(),e.connect.stream=null,e.connect2.stream=null,e.stream=null),"canvasStreamCam"==e.kind&&e.exData&&e.exData.putImageTimer&&clearInterval(e.exData.putImageTimer)}))}uploadAllCamInfo(){let e="";this.videoInput.forEach((function(t){e=e+t.id+";"+t.name+";0;0\n"})),e&&console.crlog(`[Video] UploadAllCamInfos... ${e}`),e&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.updateAllCameraInfos(e)}uploadVideoDeviceStatus(){const e=this.videoInput.length>0;this.videoDeviceStatus=e,console.crlog(`[Video] UploadVideoDeviceStatus... ${e}`),_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setVideoDeviceStatus(e)}uploadCurOpenedCamNumber(){if(0===this.defaultCamID){const e=this.videoInput.find((e=>!e.disabled));if(!e)return!1;this.defaultCamID=e.id}const e=[this.defaultCamID];this.videoInput.forEach((t=>{t.disabled||!this.multipleCams&&(this.multipleCams||t.id!=this.defaultCamID)||e.push(t.id)}));let t=!1,i=e.length>this.opendCamsArr.length?e.length:this.opendCamsArr.length;for(let n=0;n<i;n++)null!=this.opendCamsArr[n]&&null!=e[n]&&this.opendCamsArr[n]==e[n]||(t=!0);t&&(console.crlog(`[Video] UploadCurOpenedCamNumber... ${JSON.stringify(e)}`),_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setOpenedCameraNumber(e),this.opendCamsArr=e)}getLocalCamStream(e){console.crlog("[Video] getLocalCamStream..."),this.videoInput.forEach((t=>{if(!t.disabled&&(this.multipleCams||!this.multipleCams&&t.id==this.defaultCamID))if(console.crlog(`[Video] Open cam${t.id}`),"streamCam"===t.kind||t.stream&&t.stream.active||"canvasStreamCam"===t.kind)if("streamCam"==t.kind)t.connect.stream=t.stream,t.connect2.stream=t.stream,this.refreshLocalContainerSrc("",t);else if("canvasStreamCam"==t.kind){if(t.connect.stream=t.stream,t.connect2.stream=t.stream,this.refreshLocalContainerSrc("",t),t.exData){t.exData.putImageTimer&&clearInterval(t.exData.putImageTimer),t.exData.putImageTimer=setInterval((()=>{t.exData.putImageFun()}),2e3);let e=0,i=300;const n=setInterval((()=>{e>3e3/i?(clearInterval(n),e=0):(t.exData.putImageFun(),e++)}),i)}}else t.stream&&t.stream.active&&this.refreshLocalContainerSrc("",t);else{let i={audio:!1,video:__Rtc.CRBrowser.curBrowserCfg.isMobile?this.parseVideoConstraints(null,t.facingMode):this.parseVideoConstraints(null,t.deviceId)};if(null!=e&&(i=e),t.locAttr.constraints){let e=i.video.deviceId;i.video=t.locAttr.constraints,i.video.deviceId=e}t.locAttr.panTiltZoom&&(i.video.pan=!0,i.video.tilt=!0,i.video.zoom=!0),console.crlog(`[Video] local video camID:${t.id} getUserMedia:${JSON.stringify(i)}`),navigator.mediaDevices.getUserMedia(i).then((e=>{t.deviceId&&console.crlog(`[Video] Local video camID:${t.id}, deviceID:${t.deviceId} getUserMedia success! stream:${e.id}`),t.facingMode&&console.crlog(`[Video] Local video camID:${t.id}, facingMode:${t.facingMode} getUserMedia success! stream:${e.id}`),console.crlog(`[Video] Local video camID:${t.id} current settings:${JSON.stringify(e.getVideoTracks()[0].getSettings())}`),0==this.VBGConfig.type||this.multipleCams?(t.stream=e,t.connect.stream=e,t.connect2.stream=e,this.refreshLocalContainerSrc("",t),CRVideo_NotifyVideoStream.target(CR.userInfo.userId,e),CRVideo_NotifyCameraStream.target(CR.userInfo.userId,t.id,e)):this.getVirtualBackgroundStream(e,t)})).catch((e=>{if(t.deviceId&&console.crlog(`[Video] Local video camID:${t.id}, deviceID:${t.deviceId} getUserMedia fail! ${e.name}`),t.facingMode&&console.crlog(`[Video] Local video camID:${t.id}, deviceID:${t.facingMode} getUserMedia fail! ${e.name}`),console.error(e),!__Rtc.CRBrowser.curBrowserCfg.isMobile||null==i.video.height&&null==i.video.width)if(null!=i.video.facingMode){const e={audio:!1,video:!0};console.crlog("[Video] This device can not support facingMode, try to open video without facingMode..."),this.getLocalCamStream(e)}else console.crlog(`[Video] CRVideo_OpenVideoFailed.target(${t.id},${e.name})`),CRVideo_OpenVideoFailed.target(t.id,e.name),3==CRVideo_GetVideoStatus(CRVideo.userInfo.userId)&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.stopVideo();else{const e={audio:!1,video:!0};i.video.deviceId&&(e.video={deviceId:i.video.deviceId}),i.video.facingMode&&(e.video={facingMode:i.video.facingMode}),console.crlog("[Video] Some mobile phone can not readable size 1(360p), change the video cfg to size 2(480p)"),1==this.videoCfg.size&&(this.videoCfg.size=2),this.getLocalCamStream(e)}}))}}))}refreshLocalContainerSrc(e,t){if(3!=CRVideo_GetVideoStatus(CRVideo.userInfo.userId))return!1;var i=(e,t)=>{if(e._userID==CR.userInfo.userId&&(t.id==e._videoID||-1==e._videoID&&t.id==this.defaultCamID)){console.crlog(`[Video] Refresh local videoContainer src..., containerID:${e._id}, camID:${t.id}`);const i=t.stream||null,n=i?i.id:null,r=i?i.active:null;console.crlog(`[Video] Local video camID:${t.id}, containerID:${e._id}, set srcObject, stream:${n}, active:${r}`),e._videoEle.srcObject=i,setTimeout((()=>{r&&e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.click()}),1e3)}};e?this.videoInput.forEach((t=>{i(e,t)})):t?__Rtc.CRRTCUI.videoContainerList.forEach((e=>{i(e,t)})):(console.crlog("[Video] Refresh all local videoContainer src..."),__Rtc.CRRTCUI.videoContainerList.forEach((e=>{e._userID==CR.userInfo.userId&&this.videoInput.forEach((t=>{i(e,t)}))})))}videoAllocRawExt2(e,t,i){const n=+t.cameraID,r=this.videoInput.find((e=>e.id==n%1e4));if(!r)return console.crlog(`[Video] LocalVideoConnection, can not find camItem with camID:${n}, do offer_cb.ice_response()`),e.ice_response(),void(e.isResponsed=!0);n<=1e4?(r.connect.offer_cb=e,r.connect.type="sendonly",r.connect.liteice=i.get("liteice")||"0",r.connect.vsParam=t,r.connect.rtc_streamid=i.get("rtc_streamid")||null,r.connect.rtc_eid=i.get("rtc_eid")||null,r.connect.rtc_mode="push",r.connect.HashMap=new Ice.HashMap,r.connect.caComplete=!1,this.setLocalVideoConnection(r.connect)):n>1e4&&(r.connect2.offer_cb=e,r.connect2.liteice=i.get("liteice")||"0",r.connect2.type="sendonly",r.connect2.vsParam=t,r.connect2.rtc_streamid=i.get("rtc_streamid")||null,r.connect2.rtc_eid=i.get("rtc_eid")||null,r.connect2.rtc_mode="push",r.connect2.HashMap=new Ice.HashMap,r.connect2.caComplete=!1,this.setLocalVideoConnection(r.connect2))}setLocalVideoConnection(e){const t=`[Video] MSID:${e.msid}, camID:${e.camID}, localVideoConnection`;console.crlog(`${t} new RTCPeerConnection...`);const i="1"===e.liteice?new RTCPeerConnection:new RTCPeerConnection(CR.rtcCfg);e.connection=i,e.logStr=t;let n,r=0;!function o(){if(r>1e4)return console.crlog(`${t} After waited more than 10 seconds, the camera video stream is not obtained, do offer_cb.ice_response()`),console.crlog(`${t} CRVideo_OpenVideoTimeout.target(10000)`),CRVideo_OpenVideoTimeout.target(1e4),e.offer_cb&&e.offer_cb.ice_response()&&(e.offer_cb.isResponsed=!0),void(3==CRVideo_GetVideoStatus(CRVideo.userInfo.userId)&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.stopVideo());if(!e.stream||!e.stream.active)return void(n=setTimeout((()=>{r+=50,o()}),50));const s=e.stream,a=e.stream.getVideoTracks()[0];i.addTrack&&"closed"!==i.signalingState?(console.crlog(`${t} addTrack(videoTrack, stream)`),i.addTrack(a,s)):setTimeout((function(){i.dispatchEvent(new Event("negotiationneeded"))}),100);console.crlog(`${t} createOffer()`),i.createOffer().then((n=>{console.crlog(`${t} createOffer success!`),n.sdp=__Rtc.CRRTCVideo.modifyOfferSDP(n.sdp,e),e.offer=n;let r=" ";n.sdp.includes("VP8")&&(r+="VP8"),n.sdp.includes("H264")&&(r+=" H264"),console.crlog(`${t} offer.sdp - length:${n.sdp.length}, codecs:${r}`),console.crlog(`${n.sdp}`),console.crlog(`${t} setLocalDescription(offer)`),i.setLocalDescription(n).then((i=>{console.crlog(`${t} setLocalDescription success!`),e.rtc_streamid&&(!e.offer_cb.isResponsed&&console.crlog(`${t} ice_response(${e.msid}, new Ice.HashMap())`),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,new Ice.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0),e.HashMap.set("sdp",e.offer.sdp),e.HashMap.set("rtc_streamid",e.rtc_streamid),e.HashMap.set("rtc_mode","push"),e.HashMap.set("rtc_eid",e.rtc_eid)),"1"===e.liteice&&window.__Rtc.CRRTCVideo.RtcGwVideoAlloc2(e)})).catch((e=>{console.crlog(`${t} setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${t} createOffer fail! ${e}`),console.error(e)}))}(),i.onicecandidate=i=>{"1"==e.liteice||e.caComplete||(console.crlog(`${t} onicecandidate: ${JSON.stringify(i.candidate)}`),i.candidate?e.candidates.push(i.candidate):e.caComplete=!0,e.caComplete&&this.iceResponse(e),setTimeout((()=>{e.caComplete||(e.caComplete=!0,this.iceResponse(e))}),300))},i.oniceconnectionstatechange=i=>{console.crlog(`${t} oniceconnectionstatechange, iceConnectionState: ${i.currentTarget.iceConnectionState}`),e&&e.iceConnectionState&&"completed"==e.iceConnectionState&&setTimeout((function(){e.answer_cb.isResponsed||(console.crlog(`${t} answer_cb ice_response()...`),e.answer_cb.ice_response(),e.answer_cb.isResponsed=!0)}),500)},i.onicegatheringstatechange=e=>{console.crlog(`${t} onicegatheringstatechange, iceConnectionState: ${e.target.iceGatheringState}`)},i.onconnectionstatechange=n=>{const r=n.currentTarget.connectionState;if(console.crlog(`${t} onconnectionstatechange, connectionState: ${r}`),"connected"==r){e.lastBytesSent=0;let n=0;clearInterval(e.rtpLogTimer);let r=()=>{i.getStats().then((i=>{i.forEach((i=>{if("outbound-rtp"==i.type){e.width=i.frameWidth,e.height=i.frameHeight,e.frameRate=i.framesPerSecond,e.codeRate=(i.bytesSent-e.lastBytesSent)/2e3,e.lastBytesSent=i.bytesSent;const r={packetsSent:i.packetsSent,retransmittedPacketsSent:i.retransmittedPacketsSent,bytesSent:i.bytesSent,headerBytesSent:i.headerBytesSent,retransmittedBytesSent:i.retransmittedBytesSent,framesEncoded:i.framesEncoded,keyFramesEncoded:i.keyFramesEncoded,totalEncodeTime:i.totalEncodeTime,totalEncodedBytesTarget:i.totalEncodedBytesTarget,frameWidth:i.frameWidth,frameHeight:i.frameHeight,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,hugeFramesSent:i.hugeFramesSent,totalPacketSendDelay:i.totalPacketSendDelay,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges,encoderImplementation:i.encoderImplementation,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,qpSum:i.qpSum,qualityLimitationDurations:i.qualityLimitationDurations};n++,n>=5&&(n=0,CR.isRtcLog&&console.crlog(`${t} outbound-rtp: ${JSON.stringify(r)}`))}"ssrc"==i.type&&console.crlog(`${t} ssrc: ${JSON.stringify(i)}`)}))}))};r(),e.rtpLogTimer=setInterval(r,2e3)}else"disconnected"!=r&&"failed"!=r||e.isFree||(clearInterval(e.rtpLogTimer),console.crlog(`${t} connection state ${i.connectionState}!`),"connected"!=i.lastState&&"connecting"!=i.lastState||setTimeout((()=>{__Rtc.CRICEAPI.MediaConnectionBreakReport(e.msid)}),1e3),console.crlog(`[Video] CRVideo_PeerConnectionError.target(${JSON.stringify({userID:CRVideo.userInfo.userId,nickName:CRVideo.userInfo.nickname,camID:e.camID,errDesc:"RemoteVideo RTCPeerConnection state failed"})})`),CRVideo_PeerConnectionError.target({userID:CRVideo.userInfo.userId,nickName:CRVideo.userInfo.nickname,camID:e.camID,errDesc:"RemoteVideo RTCPeerConnection state failed"}));i.lastState=r},i.onsignalingstatechange=e=>{console.crlog(`${t} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}modifyPeerAddrExt(e,t,i){let n;if(this.videoInput.forEach((e=>{e.connect.msid==i&&(n=e.connect),e.connect2.msid==i&&(n=e.connect2)})),n){const i=`[Video] MSID:${n.msid}, camID:${n.camID}, localVideoConnection`;let r=" ";e.sdp.includes("VP8")&&(r+="VP8"),e.sdp.includes("H264")&&(r+=" H264"),console.crlog(`${i} modifyPeerAddrExt, length:${e.sdp.length}, codecs:${r}`),n.answer_cb=t,n.answer=e,this.setRemoteDescription(n.camID),setTimeout((()=>{n.answer_cb&&!n.answer_cb.isResponsed&&(console.crlog(`${i} answer_cb ice_response()...`),n.answer_cb.ice_response(),n.answer_cb.isResponsed=!0)}),500)}}setRemoteDescription(e){let t;if(this.videoInput.forEach((i=>{i.connect.camID===e&&(t=i.connect),i.connect2.camID===e&&(t=i.connect2)})),t){if(t&&"stable"==t.connection.signalingState)return;const i=`[Video] MSID:${t.msid}, camID:${t.camID}, localVideoConnection`;console.crlog(`${i} answer sdp:\r\n${t.answer.sdp}`),console.crlog(`${i} setRemoteDescription(answer)`),t.connection.setRemoteDescription(new RTCSessionDescription(t.answer)).then((()=>{if(console.crlog(`${i} setRemoteDescription success!`),e<50){const n=t.connection.getSenders()[0];let r=this.getMaxbps(_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__.Z.getUploadSize(this.videoCfg.size,this.videoInput.find((t=>t.id==e%1e4)).ssVal));this.setVideoSenderParams(n,null,r).then((e=>{console.crlog(`${i} sender setParameters:${JSON.stringify(e)}, success!`)})).catch(((e,t)=>{console.crlog(`${i} sender setParameters:${JSON.stringify(e)}, fail! ${t}`)}))}this.getCurVideoCfg(t.stream).then((e=>{e.width&&e.height&&window.videoResolutionReport(t.msid,"video",e.width,e.height)}))})).catch((e=>{console.crlog(`${i} setRemoteDescription fail! ${e}`),console.error(e)}))}}iceResponse(e){const t=e.logStr;"1"===e.liteice?(console.crlog(`${t} response without candidates when liteice === '1'`),e.rtc_streamid?window.__Rtc.CRRTCVideo.RtcGwVideoAlloc2(e):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog(`${t} offer_cb ice_response(${e.msid}, HashMap)`),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0))):(e.HashMap.set("icecandidate",JSON.stringify(e.candidates)),console.crlog(`${t} response candidates(${e.candidates.length}): ${JSON.stringify(e.candidates)}`),e.rtc_streamid?window.__Rtc.CRRTCVideo.RtcGwVideoAlloc2(e):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog(`${t} offer_cb ice_response(${e.msid}, HashMap)`),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0)))}setVideoSenderParams(e,t,i){return new Promise(((n,r)=>{const o=e.getParameters();if(null!=o.encodings&&o.encodings!=[]||(o.encodings=[],o.encodings[0]={}),i&&(o.encodings[0].maxBitrate=i),t){const i=e.track.getSettings().height/t;o.encodings[0].scaleResolutionDownBy=Math.max(i,1)}e.setParameters(o).then((e=>n(o.encodings[0]))).catch((e=>(console.error(e),r(o.encodings[0],e))))}))}setEnableMutiVideo(e){const t=this.multipleCams;if(t==e)return;this.multipleCams=e;const i=CR.allMemberInfo.find((e=>e.userId==CR.userInfo.userId));1==t?(i&&"VOPEN"==i.videoStatus&&this.uploadCurOpenedCamNumber(),this.videoInput.forEach((e=>{e.id!==this.defaultCamID&&e.stream&&e.stream.active&&("streamCam"!==e.kind&&"canvasStreamCam"!==e.kind?(e.stream.getVideoTracks()[0].stop(),e.stream=null):"canvasStreamCam"==e.kind&&e.exData&&e.exData.putImageTimer&&clearInterval(e.exData.putImageTimer),e.connect.stream=null,e.connect2.stream=null)}))):i&&"VOPEN"==i.videoStatus&&(this.getLocalCamStream(),this.uploadCurOpenedCamNumber())}stopAllLocalVideoTrack(){console.crlog("[Video] Do stop all local video track..."),this.videoInput.forEach((e=>{e.stream&&"streamCam"!==e.kind&&"canvasStreamCam"!==e.kind?(e.stream.getVideoTracks()[0].stop(),e.stream=null):"canvasStreamCam"==e.kind&&e.exData&&e.exData.putImageTimer&&clearInterval(e.exData.putImageTimer)}))}addStreamCam(e,t,i){try{console.crlog(`[Video] AddStreamCam -- stream --\x3e id:${e.id}, active: ${e.active}`)}catch(e){console.error(e)}const n=this.streamCamID++,r=Ice.generateUUID(),o={};o.deviceId=r,o.name=t||r,o.kind=i&&"canvasStreamCam"==i.type?"canvasStreamCam":"streamCam",o.id=n,o.disabled=!1,o.locAttr={},o.stream=e,o.ssVal=0,o.connect=new _ConnectItemClass(n,++__Rtc.CRRTCLocalVideo.lastLocalVideoMSID),o.connect2=new _ConnectItemClass(n+1e4,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID+1e3),o.connect.stream=e,o.connect2.stream=e,i&&(o.exData=i),this.videoInput.push(o),this.uploadAllCamInfo(),this.uploadCurOpenedCamNumber(),this.videoDeviceStatus||this.uploadVideoDeviceStatus();const s=CR.allMemberInfo.find((e=>e.userId==CR.userInfo.userId));return s&&"VOPEN"==s.videoStatus&&this.multipleCams&&(this.getLocalCamStream(),this.uploadCurOpenedCamNumber()),n}removeStreamCam(e){const t=this.videoInput.findIndex((t=>t.id===e&&("streamCam"==t.kind||"canvasStreamCam"==t.kind)));-1!=t&&this.videoInput.splice(t,1),this.uploadAllCamInfo(),this.uploadCurOpenedCamNumber()}videoMSIDFree(e){this.videoInput.forEach((t=>{t.connect.msid==e&&(t.connect.isFree=!0),t.connect2.msid==e&&(t.connect2.isFree=!0)}))}setUploadSize(e,t){console.crlog(`[Video] Set upload size... camID:${e}, ssVal:${t}`);let i=_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__.Z.getUploadSize(this.videoCfg.size,t);255==t&&(i=0),this.videoInput.forEach((n=>{if(n.id==e&&n.stream&&n.stream.active&&!n.locAttr.constraints){n.ssVal=t;const r=this.parseVideoConstraints({size:i});console.crlog(`[Video] Local camID:${e} applyConstraints(${JSON.stringify(r)}) when set upload size...`),n.stream.getVideoTracks()[0].applyConstraints(r).then((()=>{console.crlog(`[Video] Local camID:${e} applyConstraints success! Current settings:${JSON.stringify(n.stream.getVideoTracks()[0].getSettings())}`)})),n.connect&&n.connect.connection&&"connected"==n.connect.connection.connectionState&&this.setMaxbps(n.connect.connection,i),n.connect2&&n.connect2.connection&&"connected"==n.connect2.connection.connectionState&&this.setMaxbps(n.connect2.connection,i)}}))}}class RemoteVideoClass{constructor(){this.initData()}initData(){console.crlog("[Video] RemoteVideoModule initData..."),this.lastRemoteVideoMSID=22e4,this.remoteVideoSSVal=0,this.connectList=[],this.subscribedCamList=[]}subscribeVideo(e,t,i){if(-1==t){const i=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.termIDtoUserID(e);t=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(i,"defaultCam")}if(console.crlog(`[Video] _videoCtrl.batchSubscribeVideo2(${e}, ${t}, ${i})`),_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.batchSubscribeVideo2(e,t,i),255==i){let i=null,n=null,r=!1;this.subscribedCamList.forEach(((o,s)=>{o.list.forEach(((a,c)=>{o.termID==e&&a.id==t&&(i=s,n=c,1==o.list.length&&(r=!0))}))})),r?null!==i&&this.subscribedCamList.splice(i,1):null!==i&&null!==n&&this.subscribedCamList[i].list.splice(n,1)}}videoAllocRawExt2(e,t,i){const n=+t.cameraID,r=+t.srcTermID,o=this.connectList.find((e=>e.termID==r));if(o){let s=o.list.find((e=>e.camID==n));s||(s=new _ConnectItem(n,++this.lastRemoteVideoMSID),o.list.push(s)),s.offer_cb=e,s.type="recvonly",s.liteice=i.get("liteice")||"0",s.vsParam=t,s.rtc_streamid=i.get("rtc_streamid")||null,s.rtc_mode="play",s.rtc_eid=i.get("rtc_eid")||null,s.HashMap=new Ice.HashMap,s.caComplete=!1,this.setRemoteVideoConnection(r,s)}else{const o=new _UserConnectList(r),s=new _ConnectItem(n,++this.lastRemoteVideoMSID);o.list.push(s),this.connectList.push(o),s.offer_cb=e,s.type="recvonly",s.liteice=i.get("liteice")||"0",s.vsParam=t,s.rtc_streamid=i.get("rtc_streamid")||null,s.rtc_mode="play",s.rtc_eid=i.get("rtc_eid")||null,s.HashMap=new Ice.HashMap,s.caComplete=!1,this.setRemoteVideoConnection(r,s)}}modifyPeerAddrExt(e,t,i){console.crlog(`[Video] MSID:${i} modifyPeerAddrExt...`),this.connectList.forEach((n=>{const r=n.list.find((e=>e.msid==i));if(r){r.answer_cb=t,r.answer=e;const i=n.termID,o=CR.allMemberInfo.find((e=>e.termId==i)),s=`[Video] MSID:${r.msid}, termID:${i}, userID:${o.userId}, camID:${-1==r.camID?o.defaultCam:r.camID}, remoteVideoConnection`;let a=" ";e.sdp.includes("VP8")&&(a+="VP8"),e.sdp.includes("H264")&&(a+=" H264"),console.crlog(`${s} received answer, length:${e.sdp.length}, codecs:${a}`),console.crlog(`${e.sdp}`),console.crlog(`${s} setRemoteDescription(answer)`),r.connection.setRemoteDescription(new RTCSessionDescription(e)).then((()=>{console.crlog(`${s} setRemoteDescription success!`)})).catch((e=>{console.crlog(`${s} setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{r.answer_cb.isResponsed||(console.crlog(`${s} answer_cb ice_response()...`),r.answer_cb.ice_response(),r.answer_cb.isResponsed=!0)}),500)}}))}setRemoteVideoConnection(e,t){const i=CR.allMemberInfo.find((t=>t.termId==e)),n=`[Video] MSID:${t.msid}, termID:${e}, userID:${i.userId}, camID:${t.camID}, remoteVideoConnection`;console.crlog(`${n} new RTCPeerConnection...`);const r="1"===t.liteice?new RTCPeerConnection:new RTCPeerConnection(CR.rtcCfg);t.connection=r,t.logStr=n;const o={offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1};console.crlog(`${n} createOffer(${JSON.stringify(o)})`),r.createOffer(o).then((e=>{console.crlog(`${n} createOffer success!`),e.sdp=__Rtc.CRRTCVideo.modifyOfferSDP(e.sdp,t);let i="";e.sdp.includes("VP8")&&(i+="VP8 "),e.sdp.includes("H264")&&(i+="H264 "),console.crlog(`${n} offer.sdp - length:${e.sdp.length}, codecs:${i}`),console.crlog(e.sdp),t.offer=e,console.crlog(`${n} setLocalDescription(offer)`),r.setLocalDescription(e).then((()=>{console.crlog(`${n} offer setLocalDescription success!`),t.rtc_streamid&&(!t.offer_cb.isResponsed&&console.crlog(`${n} ice_response(${t.msid}, new Ice.HashMap())`),!t.offer_cb.isResponsed&&t.offer_cb.ice_response(t.msid,new Ice.HashMap),!t.offer_cb.isResponsed&&(t.offer_cb.isResponsed=!0),t.HashMap.set("sdp",t.offer.sdp),t.HashMap.set("rtc_streamid",t.rtc_streamid),t.HashMap.set("rtc_mode","play"),t.HashMap.set("rtc_eid",t.rtc_eid),"1"===t.liteice&&window.__Rtc.CRRTCVideo.RtcGwVideoAlloc2(t))})).catch((e=>{console.error(`${n} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${n} createOffer fail! ${e}`),console.error(e)})),r.onicecandidate=e=>{"1"===t.liteice||t.caComplete||(console.crlog(`${n} onicecandidate: ${JSON.stringify(e.candidate)}`),e.candidate?t.candidates.push(e.candidate):t.caComplete=!0,t.caComplete&&this.iceResponse(t),setTimeout((()=>{t.caComplete||(t.caComplete=!0,this.iceResponse(t))}),300))},r.oniceconnectionstatechange=e=>{console.crlog(`${n} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),t&&t.iceConnectionState&&"completed"==t.iceConnectionState&&setTimeout((function(){t.answer_cb.isResponsed||(console.crlog(`${n} answer_cb ice_response()...`),t.answer_cb.ice_response(),t.answer_cb.isResponsed=!0)}),500)},r.ontrack=e=>{console.crlog(`${n} ontrack!`),console.crlog(`${n} video stream:${e.streams[0].id}`),t.stream=e.streams[0],console.crlog(`[Video] CRVideo_NotifyVideoStream.target(${i.userId}, ${e.streams[0]})`),CRVideo_NotifyVideoStream.target(i.userId,e.streams[0]),CRVideo_NotifyCameraStream.target(i.userId,t.camID%1e4,e.streams[0]);try{return void __Rtc.CRRTCUI.videoContainerList.forEach((e=>{e._userID==i.userId&&(e._videoID==t.camID%1e4||-1==e._videoID&&t.camID%1e4==i.defaultCam)&&(console.crlog(`${n} containerID:${e._id}, videoEle set srcObject...`),e._videoEle.srcObject=t.stream,setTimeout((()=>{t.stream&&t.stream.active&&e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.click()}),1e3))}))}catch(e){console.error(e)}},r.onconnectionstatechange=e=>{const o=e.currentTarget.connectionState;if(console.crlog(`${n} onconnectionstatechange, connectionState: ${o}`),"connected"==o){t.lastBytesReceived=0,t.codeRate=0,t.width=0,t.height=0,t.frameRate=0,t.lastPacketsLost=0,t.lastPacketsReceived=0,t.packetsLostRate=0;let e=0;clearInterval(t.rtpLogTimer),t.rtpLogTimer=setInterval((()=>{r.getStats().then((i=>{i.forEach((i=>{if("inbound-rtp"==i.type){t.codeRate=(i.bytesReceived-t.lastBytesReceived)/2e3,t.lastBytesReceived=i.bytesReceived,t.width=i.frameWidth,t.height=i.frameHeight,t.frameRate=i.framesPerSecond;let r=i.packetsLost-t.lastPacketsLost,o=i.packetsReceived-t.lastPacketsReceived;t.packetsLostRate=r<0?0:parseInt(r/(o+r)*1e4)/1e4,t.lastPacketsLost=i.packetsLost,t.lastPacketsReceived=i.packetsReceived;const s={jitter:i.jitter,packetsLost:i.packetsLost,packetsReceived:i.packetsReceived,dbPacketsLostRate:2*t.packetsLostRate,bytesReceived:i.bytesReceived,headerBytesReceived:i.headerBytesReceived,jitterBufferDelay:i.jitterBufferDelay,jitterBufferEmittedCount:i.jitterBufferEmittedCount,framesReceived:i.framesReceived,frameWidth:i.frameWidth,frameHeight:i.frameHeight,framesPerSecond:i.framesPerSecond,framesDecoded:i.framesDecoded,keyFramesDecoded:i.keyFramesDecoded,framesDropped:i.framesDropped,totalDecodeTime:i.totalDecodeTime,totalInterFrameDelay:parseInt(1e4*i.totalInterFrameDelay)/1e4,totalSquaredInterFrameDelay:parseInt(1e4*i.totalSquaredInterFrameDelay)/1e4,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount};e++,e>=5&&(e=0,CR.isRtcLog&&console.crlog(`${n} inbound-rtp: ${JSON.stringify(s)}`))}"ssrc"==i.type&&CR.isRtcLog&&console.crlog(`${n} ssrc: ${JSON.stringify(i)}`)}))}))}),2e3)}else"disconnected"!=o&&"failed"!=o||(clearInterval(t.rtpLogTimer),"failed"===r.connectionState&&(console.crlog(`${n} connection state failed!`),"connected"!=r.lastState&&"connecting"!=r.lastState||setTimeout((()=>{__Rtc.CRICEAPI.MediaConnectionBreakReport(t.msid)}),1e3),this.connectList.forEach((e=>{e.list.forEach(((e,n)=>{e.msid==t.msid&&(console.crlog(`[Video] CRVideo_PeerConnectionError.target(${JSON.stringify({userID:i.userId,nickName:i.nickname,camID:t.camID,errDesc:"RemoteVideo RTCPeerConnection state failed"})})`),CRVideo_PeerConnectionError.target({userID:i.userId,nickName:i.nickname,camID:t.camID,errDesc:"RemoteVideo RTCPeerConnection state failed"}))}))}))));r.lastState=o},r.onsignalingstatechange=e=>{console.crlog(`${n} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}iceResponse(e){const t=e.logStr;"1"===e.liteice?(console.crlog(`${t} response without candidates when liteice === '1'`),e.rtc_streamid?window.__Rtc.CRRTCVideo.RtcGwVideoAlloc2(e):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog(`${t} offer_cb ice_response(${e.msid}, HashMap)`),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0))):(e.HashMap.set("icecandidate",JSON.stringify(e.candidates)),console.crlog(`${t} response candidates(${e.candidates.length}): ${JSON.stringify(e.candidates)}`),e.rtc_streamid?window.__Rtc.CRRTCVideo.RtcGwVideoAlloc2(e):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog(`${t} offer_cb ice_response(${e.msid}, HashMap)`),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0)))}videoMSIDFree(e){this.connectList.forEach((t=>{t.list.forEach(((i,n)=>{if(i.msid==e){clearInterval(i.rtpLogTimer),i.connection&&i.connection.close(),i.connection&&(i.connection=null),i.stream=null;const e=CR.allMemberInfo.find((e=>e.termId==t.termID));__Rtc.CRRTCUI.videoContainerList.forEach((t=>{if(t._userID==e.userId&&(t._videoID==i.camID%1e4||-1==t._videoID&&i.camID%1e4==e.defaultCam))try{t._videoEle.srcObject=null}catch(e){}})),t.list.splice(n,1)}}))}))}updateSubscribeVideo(){this.subcribeTimer&&clearTimeout(this.subcribeTimer),this.subcribeTimer=setTimeout((()=>{console.crlog("[Video] UpdateSubscribeVideo...");const e=[],t=[];__Rtc.CRRTCUI.videoContainerList.forEach((t=>{const i=CR.allMemberInfo.find((e=>e.userId==t._userID));if(!i||!i.defaultCam||i.termId==CR.userInfo.termId||!t._handler.parentNode)return;let n=e.find((e=>e.termID==i.termId));n||(n={termID:i.termId,list:[]},e.push(n));const r=-1==t._videoID?i.defaultCam:t._videoID;null==n.list.find((e=>e.ID==r))&&i.openedCamIDs.includes(r)&&n.list.push({id:r,ssVal:t._ssVal||0})})),console.log(`[Video] oldSubscribeList: ${JSON.stringify(this.subscribedCamList)}`),console.log(`[Video] newSubscribeList: ${JSON.stringify(e)}`),e.forEach((e=>{const i=this.subscribedCamList.find((t=>t.termID==e.termID)),n=CR.allMemberInfo.find((t=>t.termId==e.termID));if(n)if(i){const r=[];e.list.forEach((e=>{null==i.list.find((t=>t.id==e.id&&t.ssVal==e.ssVal))&&r.push(e)})),r.forEach((e=>{const i={termID:n.termId,camID:e.id,ssVal:e.ssVal};t.push(i)}))}else e.list.forEach((e=>{const i={termID:n.termId,camID:e.id,ssVal:e.ssVal};t.push(i)}))})),this.subscribedCamList.forEach((i=>{const n=e.find((e=>e.termID==i.termID)),r=CR.allMemberInfo.find((e=>e.termId==i.termID));if(r)if(n){let e=[];i.list.forEach((t=>{null==n.list.find((e=>t.id==e.id))&&e.push(t)})),e.forEach((e=>{const i={termID:r.termId,camID:e.id,ssVal:255};t.push(i)}))}else i.list.forEach((e=>{const i={termID:r.termId,camID:e.id,ssVal:255};t.push(i)}))})),this.subscribedCamList=e,console.crlog(`[Video] resSubscribeList: ${JSON.stringify(t)}`),t.forEach((e=>{this.subscribeVideo(e.termID,e.camID,e.ssVal)}))}),100)}unSubscibevideo(e,t){const i=CR.allMemberInfo.find((t=>t.userId==e));i&&this.subscribedCamList.forEach((e=>{e.termID==i.termId&&e.list.forEach((e=>{e.id==t&&this.subscribeVideo(i.termId,t,255)}))}))}updateConnectList(e,t,i){const n=this.connectList.find((t=>t.termID==e));if(n){n.list.find((e=>e.camID==t))||n.list.push(new _ConnectItem(t,++this.lastRemoteVideoMSID))}else{const i=new _UserConnectList(e);i.list.push(new _ConnectItem(t,++this.lastRemoteVideoMSID)),this.connectList.push(i)}}refreshContainerSrc(e){e?this.connectList.forEach((t=>{const i=CR.allMemberInfo.find((e=>e.termId==t.termID));i&&t.list.forEach((t=>{!function(e,t,i){e._userID==i.userId&&(e._videoID==t.camID%1e4||-1==e._videoID&&t.camID%1e4==i.defaultCam)&&(t.stream&&t.stream.active&&console.crlog(`[Video] TermID:${i.termId}, userID:${i.userId}, containerID:${e._id} video set srcObject, stream:${t.stream.id}`),t.stream&&t.stream.active&&(e._videoEle.srcObject=t.stream),setTimeout((()=>{e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.click()}),1e3))}(e,t,i)}))})):(console.crlog("[Video] Do refresh all remote video container src..."),this.connectList.forEach((e=>{const t=CR.allMemberInfo.find((t=>t.termId==e.termID));t&&e.list.forEach((e=>{__Rtc.CRRTCUI.videoContainerList.forEach((i=>{i._userID==t.userId&&(i._videoID==e.camID%1e4||-1==i._videoID&&e.camID%1e4==t.defaultCam)&&(e.stream&&e.stream.active&&console.crlog(`[Video] TermID:${t.termId}, userID:${t.userId}, containerID:${i._id} video set srcObject, stream:${e.stream.id}`),e.stream&&e.stream.active&&(i._videoEle.srcObject=e.stream),setTimeout((()=>{i&&i._videoEle&&i._videoEle.srcObject&&i._videoEle.click()}),1e3))}))}))})))}userLeftHandler(e){console.crlog("[Video] Do user left meet video handler...");const t=this.subscribedCamList.findIndex((t=>t.termID==e));-1!=t&&this.subscribedCamList.splice(t,1);const i=this.connectList.findIndex((t=>t.termID==e));-1!=i&&this.connectList.splice(i,1),console.crlog(`[Video] curSubscribeList: ${JSON.stringify(this.subscribedCamList)}`)}closeAllRTCConnection(){console.crlog("[Video] Do close all remote video RTC connection..."),this.connectList.forEach((e=>{e.list.forEach((e=>{clearInterval(e.rtpLogTimer),e.connection&&(e.connection.close(),e.connection=null)}))}))}}window.__crVideoClass=VideoClass,window.__crLocalVideoClass=LocalVideoClass,window.__crRemoteVideoClass=RemoteVideoClass,window.__Rtc.CRRTCVideo=new window.__crVideoClass,window.__Rtc.CRRTCLocalVideo=new window.__crLocalVideoClass,window.__Rtc.CRRTCRemoteVideo=new window.__crRemoteVideoClass,window.CRVideo_VideoStatusChanged=new CR.CbProxy("CRVideo_VideoStatusChanged"),window.CRVideo_DefVideoChanged=new CR.CbProxy("CRVideo_DefVideoChanged"),window.CRVideo_VideoDevChanged=new CR.CbProxy("CRVideo_VideoDevChanged"),window.CRVideo_NotifyOpenVideo=new CR.CbProxy("CRVideo_NotifyOpenVideo"),window.CRVideo_NotifyVideoStream=new CR.CbProxy("CRVideo_NotifyVideoStream"),window.CRVideo_NotifyCameraStream=new CR.CbProxy("CRVideo_NotifyCameraStream"),window.CRVideo_SetVideoCfgRslt=new CR.CbProxy("CRVideo_SetVideoCfgRslt"),window.CRVideo_OpenVideoFailed=new CR.CbProxy("CRVideo_OpenVideoFailed"),window.CRVideo_OpenVideoTimeout=new CR.CbProxy("CRVideo_OpenVideoTimeout"),window.CRVideo_NotifyMainVideoModeChanged=new CR.CbProxy("CRVideo_NotifyMainVideoModeChanged"),window.CRVideo_NotifyMainVideoChanged=new CR.CbProxy("CRVideo_NotifyMainVideoChanged"),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoWallMode=new _src_inMeeting_meetSDK_callback_js__WEBPACK_IMPORTED_MODULE_6__.Z("notifyVideoWallMode"),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoWallVideos=new _src_inMeeting_meetSDK_callback_js__WEBPACK_IMPORTED_MODULE_6__.Z("notifyVideoWallVideos"),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoPolling=new _src_inMeeting_meetSDK_callback_js__WEBPACK_IMPORTED_MODULE_6__.Z("notifyVideoPolling")},9418:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const n={VSIZE_96:{value:5,width:160,height:96},VSIZE_128:{value:6,width:224,height:128},VSIZE_160:{value:7,width:288,height:160},VSIZE_192:{value:8,width:352,height:192},VSIZE_256:{value:9,width:448,height:256},VSIZE_288:{value:10,width:512,height:288},VSIZE_320:{value:11,width:576,height:320},VSIZE_360:{value:1,width:640,height:360},VSIZE_400:{value:12,width:704,height:400},VSIZE_480:{value:2,width:848,height:480},VSIZE_576:{value:13,width:1024,height:576},VSIZE_720:{value:3,width:1280,height:720},VSIZE_1080:{value:4,width:1920,height:1080},VSIZE_2K:{value:14,width:2160,height:1440},VSIZE_4K:{value:15,width:3840,height:2160}},r={get(e){let t={};for(let i in n)n[i].value==e&&(t=n[i]);return t},getUploadSize(e,t){let i=e;if(1==e)switch(t){case 0:case 1:case 2:case 3:case 4:i=1;break;case 5:i=9;break;case 6:i=8;break;case 7:i=7;break;case 8:i=6;break;case 255:i=5}else if(2==e)switch(t){case 0:case 1:i=2;break;case 2:case 3:case 4:i=1;break;case 5:i=9;break;case 6:i=8;break;case 7:i=7;break;case 8:i=6;break;case 255:i=5}else if(3==e)switch(t){case 0:i=3;break;case 1:i=13;break;case 2:case 3:case 4:i=2;break;case 5:i=10;break;case 6:i=9;break;case 7:i=8;break;case 8:i=6;break;case 255:i=5}else if(4==e)switch(t){case 0:i=4;break;case 1:i=3;break;case 2:case 3:case 4:i=2;break;case 5:i=10;break;case 6:i=9;break;case 7:i=7;break;case 8:i=6;break;case 255:i=5}else if(14==e)switch(t){case 0:i=n.VSIZE_2K.value;break;case 1:i=n.VSIZE_1080.value;break;case 2:i=n.VSIZE_720.value;break;case 3:i=n.VSIZE_576.value;break;case 4:i=n.VSIZE_480.value;break;case 5:i=n.VSIZE_288.value;break;case 6:i=n.VSIZE_256.value;break;case 7:i=n.VSIZE_192.value;break;case 8:i=n.VSIZE_128.value;break;case 255:i=n.VSIZE_96.value}else if(15==e)switch(t){case 0:i=n.VSIZE_4K.value;break;case 1:i=n.VSIZE_1080.value;break;case 2:i=n.VSIZE_720.value;break;case 3:i=n.VSIZE_576.value;break;case 4:i=n.VSIZE_480.value;break;case 5:i=n.VSIZE_288.value;break;case 6:i=n.VSIZE_256.value;break;case 7:i=n.VSIZE_192.value;break;case 8:i=n.VSIZE_128.value;break;case 255:i=n.VSIZE_96.value}return console.crlog(`[Video] Config size to upload size -- ssVal:${t}, sizeType:${e}, uploadSize:${i}`),i}}},7331:()=>{!function(e,t,i){function n(e){let t=0,i=0;try{t=e.split(".")[0],i=e.split(".")[1]}catch(e){throw e}return{termID:t,localID:i}}class r{constructor(e){this.boardID=`${e.wID.termID}.${e.wID.localID}`,this.title=e.name,this.width=e.width,this.height=e.height,this.pageCount=e.pageCount,this.curPage=e.curPage,this.pagePos1=e.animID,this.pagePos2=e.animFrames}}class o{constructor(){this._initData(),this._initDom(),this._activeDraw(),this._passiveDraw(),this._setCtx(),this._loadEvent()}_initData(){this._id=t.generateUUID(),this._wbDesc=null,this._pageID=0,this._bScaled=!1,this._showTitle=!0,this._ctx=null,this._canvasEle=null,this._bgImg=null,this._titleEle=null,this._handler=null,this._revocableEleArr=[],this._resumableEleArr=[],this.undoStatus=!1,this.redoStatus=!1,this.undoEnableChange=null,this.redoEnableChange=null,this._readOnly=!1,this._pelType={4:"Pencil",5:"NiteWriterPen",6:"Line",7:"ArrowLine",8:"ArrowsLine",9:"Text",10:"SolidRectangular",11:"HollowRectangular",12:"RoundedSolidRectangle",13:"RoundedHollowRectangle",14:"SolidEllipse",15:"HollowEllipse"},this._style={type:4,cursor:"default",lineType:1,lineWidth:2,strokeStyle:"#0000FF",fillColor:"#FC011A",fullOpacity:.5}}_initDom(){const e=document.createElement("div");e.style.position="relative",e.style.width="100%",e.style.height="100%",e.style.overflow="auto",this._handler=e;const t=document.createElement("div");t.style.position="absolute",t.style.left=0,t.style.top=0,t.style.width="100%",t.style.lineHeight="normal",t.style.zIndex=2,this._titleEle=t,this._handler.appendChild(t);const i=document.createElement("canvas");i.style.position="absolute",i.style.left="50%",i.style.top="50%",i.style.transform="translateX(-50%) translateY(-50%)",i.style.height="0",i.style.width="0",i.style.backgroundColor="#fff",this._canvasEle=i,this._ctx=i.getContext("2d"),this._handler.appendChild(i)}handler(){return console.crlog(`[BoardUI] ID:${this._id}, handler()`),this._handler}setCurBoardPage(e,t){console.crlog(`[BoardUI] ID:${this._id}, setCurBoard(${e},${t})`);const i={};try{i.termID=+e.split(".")[0],i.localID=+e.split(".")[1]}catch(e){console.crlog(`[BoardUI][Error] ID:${this._id}, setBoardPage fail! The boardID is not correct!`),console.error(e)}if(i=={})return;const n=__Rtc.CRRTCBoard.wbDescibes.filter((e=>e.wID.termID==i.termID&&e.wID.localID==i.localID));if(0==n.length)return;this._wbDesc=n[0],n[0].boardUI=this,this._pageID=+t,this._titleEle.innerHTML=this._wbDesc.name;new ResizeObserver((e=>{this._revocableEleArr=[],this._resumableEleArr=[],this._resizeCanvas()})).observe(this._handler)}getCurBoardPage(){}setReadOnly(e){this._readOnly=e}isScaledContents(e){if(console.crlog(`[BoardUI] ID:${this._id}, isScaledContents(${e})`),null==e)return this._bScaled;this._bScaled=!!e,this._wbDesc&&this._resizeCanvas()}setTitleStyle(e){for(var t in console.crlog(`[BoardUI] ID:${this._id}, setTitleStyle(${JSON.stringify(e)})`),e)try{this._titleEle.style[t]=e[t]}catch(e){console.error(e)}}setBoardStyle(e){for(var t in console.crlog(`[BoardUI] ID:${this._id}, setBoardStyle(${JSON.stringify(e)})`),e)try{this._canvasEle.style[t]=e[t]}catch(e){console.error(e)}}setPen(e){console.crlog(`[BoardUI] ID:${this._id}, setPen(${JSON.stringify(e)})`),this._style.type=e.type||this._style.type,this._style.lineWidth=e.lineWidth||this._style.lineWidth,this._style.lineType=e.lineType||this._style.lineType,this._style.fillColor=e.fillColor||this._style.fillColor,this._style.strokeStyle=e.strokeStyle||this._style.strokeStyle,this._style.cursor=e.cursor||this._style.cursor,this._canvasEle.style.cursor=this._style.cursor}undo(){console.crlog(`[BoardUI] ID:${this._id}, undo()`);const e=this._revocableEleArr.pop();e&&(this._resumableEleArr.push(e),this.removeElement([e.eID])),this._changeRedoAndUndoStatue()}redo(){console.crlog(`[BoardUI] ID:${this._id}, redo()`);const e=this._resumableEleArr.pop();e&&(this._revocableEleArr.push(e),this.addElement(this._switchEleType(e))),this._changeRedoAndUndoStatue()}clearSelf(){console.crlog(`[BoardUI] ID:${this._id}, clearSelf()`),this._wbDesc.pageDatas.filter((e=>e.pageNo===this._pageID)).forEach((e=>{const t=e.elementList.filter((e=>i.userInfo.termId===e.eID.ownerID));t.length>0&&(__Rtc.CRRTCBoard.delElement(this._wbDesc.wID,this._pageID,t.map((e=>e.eID))),this._resumableEleArr=[],this._revocableEleArr=[],this._changeRedoAndUndoStatue())}))}clear(){console.crlog(`[BoardUI] ID:${this._id}, clear()`),this._wbDesc.pageDatas.filter((e=>e.pageNo==this._pageID)).forEach((e=>{const t=e.elementList.map((e=>e.eID));t.length>0&&(__Rtc.CRRTCBoard.delElement(this._wbDesc.wID,this._pageID,t),this._resumableEleArr=[],this._revocableEleArr=[],this._changeRedoAndUndoStatue())}))}addElement(e){console.crlog(`[BoardUI] ID:${this._id}, addElement(${e})`),__Rtc.CRRTCBoard.addElement(this._wbDesc.wID,this._pageID,e)}removeElement(e){console.crlog(`[BoardUI] ID:${this._id}, removeElement(${e})`),__Rtc.CRRTCBoard.delElement(this._wbDesc.wID,this._pageID,e)}importImg(e){this._bgImg=e,this._resizeCanvas()}getCanvasElement(){return this._canvasEle||null}_drawBgImg(){this._bgImg&&this._ctx.drawImage(this._bgImg,0,0,this._canvasEle.width,this._canvasEle.height)}_resizeCanvas(){const e=this._wbDesc.width/this._wbDesc.height,t=this._handler.clientWidth/this._handler.clientHeight||1;this._bScaled||this._wbDesc.width>this._handler.clientWidth&&this._wbDesc.height>this._handler.clientHeight?e<=1&&e>t||e>1&&e>t?(this._canvasEle.style.width=`${this._handler.clientWidth}px`,this._canvasEle.style.height=this._handler.clientWidth/e+"px"):(this._canvasEle.style.height=`${this._handler.clientHeight}px`,this._canvasEle.style.width=this._handler.clientHeight*e+"px"):(this._canvasEle.style.height=`${this._wbDesc.height}px`,this._canvasEle.style.width=`${this._wbDesc.width}px`),this._canvasEle.height=this._wbDesc.height,this._canvasEle.width=this._wbDesc.width,this._drawBgImg(),this._drawAllPageData()}_activeDraw(){this._setCtx=()=>{this._ctx.strokeStyle=this._style.strokeStyle,this._ctx.lineWidth=this._style.lineWidth,3==this._style.lineType?this._ctx.setLineDash([5,6]):this._ctx.setLineDash([])},this._loadEvent=()=>{const{_ctx:t,_canvasEle:n}=this;e._canvasEle=this._canvasEle;let r=!1;n.ontouchstart=e=>{if(this._readOnly)return;r=!0,this._setCtx();const o=n.width/n.offsetWidth,s=e.touches[0].pageX-n.getBoundingClientRect().left,a=e.touches[0].pageY-n.getBoundingClientRect().top;var c=parseInt(s*o),l=parseInt(a*o);const d={};d.type=this._style.type,d.left=c,d.top=l,d.color=this._style.strokeStyle,d.width=this._style.lineWidth,d.style=this._style.lineType,d.eID={ownerID:i.userInfo.termId,ID:__Rtc.CRRTCBoard.lastElemValue++},d.orderId=0,d.size=1,d.data=[{x:0,y:0}];var u=[{x:c,y:l}];return n.ontouchmove=e=>{const i=e.touches[0].pageX-n.getBoundingClientRect().left,r=e.touches[0].pageY-n.getBoundingClientRect().top;var s=parseInt(i*o),a=parseInt(r*o);t.beginPath();const{x:c,y:l}=u[u.length-1];return t.moveTo(c,l),t.lineTo(s,a),u.push({x:s,y:a}),d.data.push({x:s-d.left,y:a-d.top}),d.size=d.data.length,t.stroke(),!1},n.ontouchend=e=>{r=!1,n.onmousemove=null,n.ontouchmove=null,n.ontouchend=null,document.onmouseup=null,this._revocableEleArr.push(d),this._resumableEleArr=[],this.addElement(this._switchEleType(d)),this._changeRedoAndUndoStatue()},!1},n.onmousedown=e=>{if(this._readOnly)return;if(r)return;this._setCtx();const o=n.width/n.offsetWidth;var s=parseInt(e.offsetX*o),a=parseInt(e.offsetY*o);const c={};c.type=this._style.type,c.left=s,c.top=a,c.color=this._style.strokeStyle,c.width=this._style.lineWidth,c.style=this._style.lineType,c.eID={ownerID:i.userInfo.termId,ID:__Rtc.CRRTCBoard.lastElemValue++},c.orderId=0,c.size=1,c.data=[{x:0,y:0}];var l=[{x:s,y:a}];n.onmousemove=e=>{var i=parseInt(e.offsetX*o),n=parseInt(e.offsetY*o);t.beginPath();const{x:r,y:s}=l[l.length-1];t.moveTo(r,s),t.lineTo(i,n),l.push({x:i,y:n}),c.data.push({x:i-c.left,y:n-c.top}),c.size=c.data.length,t.stroke()},document.onmouseup=()=>{n.onmousemove=null,n.ontouchmove=null,n.ontouchend=null,document.onmouseup=null,this._revocableEleArr.push(c),this._resumableEleArr=[],this.addElement(this._switchEleType(c)),this._changeRedoAndUndoStatue()}},console.crlog(`[BoardUI] ID:${this._id}, canvas on loadEvent...`)},this._switchEleType=e=>{switch(e.type){case 4:case 5:e=this._ele2buffer.pen(e)}return e},this._ele2buffer={pen(e){let t=0;const i={};i.eID=e.eID,i.left=e.left,i.top=e.top,i.type=e.type,i.orderId=e.orderId,i.noused=0;const n=e.data,r=n.length,o=new ArrayBuffer(15+4*n.length),s=new Uint8Array(o);this.color2buffer(s,t,e.color),t+=11,s[t++]=e.width,s[t++]=e.style,s[t++]=parseInt(r/256),s[t++]=r%256;let a=0;for(;a<n.length;)s[t++]=n[a].x>>8,s[t++]=255&n[a].x,s[t++]=n[a].y>>8,s[t++]=255&n[a].y,a++;return i.data=s,i},color2buffer(e,t,i){const n=this.hexColor2Rgba(i);e[t++]=1,e[t++]=e[t++]=n[3],e[t++]=e[t++]=n[0],e[t++]=e[t++]=n[1],e[t++]=e[t++]=n[2],e[t++]=e[t++]=0},hexColor2Rgba(e){var t=e;let i=[];if(/^(rgb|RGB)/.test(t))i=t.replace(/(?:\(|\)|RGBA|rgba|rgb|RGB)*/g,"").split(",").map((e=>+e)),i[3]=i[3]?Math.round(255*i[3]):255;else if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===e.length){for(var n="#",r=1;r<4;r+=1)n+=e.slice(r,r+1).concat(e.slice(r,r+1));e=n}for(r=1;r<7;r+=2)i.push(parseInt("0x"+e.slice(r,r+2)));i.push(255)}return i}}}_passiveDraw(){this._drawAllPageData=()=>{this._wbDesc.pageDatas&&this._wbDesc.pageDatas.forEach((e=>{e.pageNo==this._pageID&&e.elementList.forEach((e=>{this._drawElement(e)}))}))},this._drawElement=e=>{const t=__Rtc.CRRTCBoard.Uint8ArrayToData(e),i=this._pelType[t.type];this[`_draw${i}`]?this[`_draw${i}`](t):console.crlog(`[BoardUI] ID:${this._id}, _drawElement fail, type ${t.type} is not defined!`)},this._drawPencil=e=>{this._setLineStyle(e),this._ctx.beginPath(),this._ctx.moveTo(e.left,e.top);for(var t=0;t<e.data.length;t++)this._ctx.lineTo(e.left+e.data[t].w,e.top+e.data[t].h);this._ctx.stroke(),this._setCtx()},this._setLineStyle=e=>{this._ctx.strokeStyle=e.color,this._ctx.lineWidth=e.width,this._ctx.lineCap="round",3===e.style?this._ctx.setLineDash([5,6]):this._ctx.setLineDash([])}}_changeRedoAndUndoStatue(){const e=!!this._revocableEleArr.length,t=!!this._resumableEleArr.length;void 0!==e&&this.undoStatus!==e&&(this.undoStatus=e,this.undoEnableChange&&this.undoEnableChange(e)),void 0!==t&&this.redoStatus!==t&&(this.redoStatus=t,this.redoEnableChange&&this.redoEnableChange(t))}}e.__crBoardClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[Board] WhiteBoardModule initData..."),this.lastTabValue=100,this.lastElemValue=100,this.wbDescibes=[],this.boardUIList=[],this.iceNotifyParams={},this.myLastWID={}}initIceCallback(){this.ICECallback={notifySetCurrentPage(t,n,r,o,s){if(void 0!==this.iceNotifyParams.notifySetCurrentPage&&this.iceNotifyParams.notifySetCurrentPage.boardID.termID==t.termID&&this.iceNotifyParams.notifySetCurrentPage.boardID.localID==t.localID&&this.iceNotifyParams.notifySetCurrentPage.pageNo==n&&this.iceNotifyParams.notifySetCurrentPage.animID==r&&this.iceNotifyParams.notifySetCurrentPage.animFrames==o&&this.iceNotifyParams.notifySetCurrentPage.operatorID==s)return;this.iceNotifyParams.notifySetCurrentPage={},this.iceNotifyParams.notifySetCurrentPage.boardID=t,this.iceNotifyParams.notifySetCurrentPage.pageNo=n,this.iceNotifyParams.notifySetCurrentPage.animID=r,this.iceNotifyParams.notifySetCurrentPage.animFrames=o,this.iceNotifyParams.notifySetCurrentPage.operatorID=s,console.crlog(`[Board] ICE Notify --\x3e notifySetCurrentPage, params:${JSON.stringify({wID:t,pageNo:n,animID:r,animFrames:o,operatorID:s})}`);const a=i.findMemberInfo({want:"userId",use:"termId",value:s})||"";this.wbDescibes.forEach((e=>{e.wID.termID==t.termID&&e.wID.localID==t.localID&&(e.curPage=n)})),console.crlog(`[Board] CRVideo_NotifyBoardCurPageNo.target(${t.termID}.${t.localID},${n},${r},${o},${a})`),e.CRVideo_NotifyBoardCurPageNo.target(`${t.termID}.${t.localID}`,n,r,o,a)},notifyCreate(e,t){console.crlog(`[Board] ICE Notify --\x3e notifyCreate, params:${JSON.stringify(e)},${t}`),this.wbDescibes.push(e),this.queryBoardPageDatas(e);const n=new r(e),o=i.findMemberInfo({want:"userId",use:"termId",value:t})||"";console.crlog(`[Board] CRVideo_NotifyCreateBoard.target(${JSON.stringify(n)},${o})`),CRVideo_NotifyCreateBoard.target(n,o)},notifyClose(e,t){console.crlog(`[Board] ICE Notify --\x3e notifyClose, params:${JSON.stringify(e)},${t}`);const n=this.wbDescibes.findIndex((t=>t.wID.termID==e.termID&&t.wID.localID==e.localID)),r=i.findMemberInfo({want:"userId",use:"termId",value:t})||"";if(n>-1){this.wbDescibes.splice(n,1);const t=`${e.termID}.${e.localID}`;console.crlog(`[Board] CRVideo_NotifyCloseBoard.target(${t},${r})`),CRVideo_NotifyCloseBoard.target(t,r)}},notifyAddElement(e,t,i,n){console.crlog(`[Board] ICE Notify --\x3e notifyAddElement, params:${JSON.stringify(e)},${t},${i},${n}`),this.notifyAddElement(e,t,i,n)},notifyAddElementEx(e,t,i,n){console.crlog(`[Board] ICE Notify --\x3e notifyAddElementEx, params: ${JSON.stringify(e)},${t},${i},${n}`);for(var r=0;r<i.length;r++)this.notifyAddElement(e,pageNo,element,n)},notifyDelElement(e,t,i,n){console.crlog(`[Board] ICE Notify --\x3e notifyDelElement, params:${JSON.stringify(e)},${t},${JSON.stringify(i)},${n}`),this.notifyDelElement(e,t,i,n)},notifySetContainerSize(e,t,i){console.crlog(`[Board] ICE Notify --\x3e notifySetContainerSize, params:${e},${t},${i}`)},notifyImportPage(e,t,i){console.crlog(`[Board] ICE Notify --\x3e notifyImportPage, params: ${JSON.stringify(e)},${JSON.stringify(t)},${i}`)},notifyChangeName(e,t,i){console.crlog(`[Board] ICE Notify --\x3e notifyChangeName, params: ${JOSN.stringify(e)},${t},${i}`)},notifyChangeScale(e,t,i){console.crlog(`[Board] ICE Notify --\x3e notifyChangeScale, params: ${JSON.stringify(e)},${t},${i}`)},notifyChangeRotate(e,t,i){console.crlog(`[Board] ICE Notify --\x3e notifyChangeRotate, params: ${JSON.stringify(e)},${t},${i}`)},notifyShowThumPage(e,t,i){console.crlog(`[Board] ICE Notify --\x3e notifyShowThumPage, params: ${JSON.stringify(e)},${t},${i}`)},notifyMoveElement(e,t,i,n){console.crlog(`[Board] ICE Notify --\x3e notifyMoveElement, params: ${JSON.stringify(e)},${t},${i},${n}`)},notifyModifyElement(e,t,i,n){console.crlog(`[Board] ICE Notify --\x3e notifyModifyElement, params: ${JSON.stringify(e)},${t},${i},${n}`)},notifySetElementZPos(e,t,i,n){console.crlog(`[Board] ICE Notify --\x3e notifySetElementZPos, params: ${JSON.stringify(e)},${t},${i},${n}`)},notifySetIndicator(e,t,i){console.crlog(`[Board] ICE Notify --\x3e notifySetIndicator, params: ${JSON.stringify(e)},${t},${i}`)},notifySetHotspot(e,t,i,n,r){console.crlog(`[Board] ICE Notify --\x3e notifySetHotspot, params: ${JSON.stringify(e)},${t},${i},${n},${r}`)},notifySetMarkTerms(e,t,i){console.crlog(`[Board] ICE Notify --\x3e notifySetMarkTerms, params: ${JSON.stringify(e)},${t},${i}`)}}}initSDKInterface(){e.CRVideo_CreateBoardUIObj=e=>{try{console.crlog(`[Board] CRVideo_CreateBoardUIObj(${JSON.stringify(e)})`)}catch(e){console.error(e)}const t=new o;return console.crlog(`[Board] CRVideo_CreateBoardUIObj, return BoardUI ID${t._id}`),this.boardUIList.push(t),t},e.CRVideo_Creatboard=(e,t,n,r)=>new Promise(((o,s)=>{console.crlog(`[Board] CRVideo_Creatboard(${e},${t},${n},${r})`);const a={};a.name=e,a.width=t,a.height=n,a.pageCount=r,a.bAll=!0,a.wID={termID:i.userInfo.termId,localID:this.lastTabValue++},__Rtc.CRICEAPI.Create(a).then((e=>{console.crlog(`[Board] __Rtc.CRICEAPI.Create success! ${e[0]}`),__Rtc.CRRTCSync.saveLastTabValue(this.lastTabValue);const t=[];for(let e=0;e<r;e++)t.push({pageNo:e,elementList:[]});this.initBoardPageDat(a.wID,t),o({errCode:0,boardID:`${a.wID.termID}.${a.wID.localID}`})}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.Create fail! ${e}`),s({errCode:1,errDesc:e})}))})),e.CRVideo_Closeboard=e=>new Promise(((t,i)=>{console.crlog(`[Board] CRVideo_Closeboard(${e})`);const r=n(e);__Rtc.CRICEAPI.Close(r).then((e=>{console.crlog(`[Board] __Rtc.CRICEAPI.Close success! ${e[0]}`),t({errCode:0})}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.Close fail! ${e}`),i({errCode:1,errDesc:e})}))})),e.CRVideo_SetBoardCurPageNo=(e,t,i,r)=>new Promise(((o,s)=>{console.crlog(`[Board] CRVideo_SetBoardCurPageNo(${JSON.stringify({boardID:e,pageNo:t,pagePos1:i,pagePos2:r})})`),__Rtc.CRICEAPI.SetCurrentPage(n(e),t,i,r).then((e=>{console.crlog(`[Board] __Rtc.CRICEAPI.SetCurrentPage success! ${e[0]}`),o({errCode:0})}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.SetCurrentPage fail! ${e}`),s({errCode:1,errDesc:e})}))})),e.CRVideo_GetBoardList=()=>(console.crlog("[Board] CRVideo_GetBoardList()"),this.wbDescibes.map((e=>new r(e))))}Uint8ArrayToData(e){var t=[],i={},n=new Uint8Array(e.data.buffer),r=(n[0],{}),o=(n[9],n[11]),s=n[12],a=n[13]<<8|n[14];r.alpha=n[1],r.red=n[3],r.green=n[5],r.blue=n[7];for(var c=[],l=15;l<n.length;l+=2)c[l]=n[l],c[l+1]=n[l+1],n[l]>=240&&(c[l]=n[l]-256,c[l+1]=n[l+1]+256*(n[l]-256));for(l=15;l<c.length;l+=4)t.push({w:c[l]<<8|c[l+1],h:c[l+2]<<8|c[l+3]});return i.color=this.colorRGB2Hex("rgb("+r.red+","+r.green+","+r.blue+")"),i.width=o,i.style=s,i.size=a,i.data=t,i.eID=e.eID,i.orderId=e.orderId,i.type=e.type,i.left=e.left,i.top=e.top,i}elementDataToBuffer(e){var t={},i=e.data;const n=this.colorHexToRgba(e.color,1);var r=new ArrayBuffer(15+4*i.length);t.eID=e.eID,t.noused=0,t.left=e.left,t.top=e.top,t.type=e.type,t.data=new Uint8Array(r),t.data[0]=1,t.data[1]=t.data[2]=255,t.data[3]=t.data[4]=n.red,t.data[5]=t.data[6]=n.green,t.data[7]=t.data[8]=n.blue,t.data[9]=t.data[10]=0,t.data[11]=e.width,t.data[12]=1,t.data[13]=parseInt(e.size/256),t.data[14]=e.size%256;for(var o=0,s=15;o<i.length;o++)t.data[s]=i[o].w>>8,t.data[s+1]=255&i[o].w,t.data[s+2]=i[o].h>>8,t.data[s+3]=255&i[o].h,s+=4;return t}colorRGB2Hex(e){var t=e.split(",");return"#"+((1<<24)+(parseInt(t[0].split("(")[1])<<16)+(parseInt(t[1])<<8)+parseInt(t[2].split(")")[0])).toString(16).slice(1)}colorHexToRgba(e,t){var i="rgba("+parseInt("0x"+e.slice(1,3))+","+parseInt("0x"+e.slice(3,5))+","+parseInt("0x"+e.slice(5,7))+","+t+")";return{red:parseInt("0x"+e.slice(1,3)),green:parseInt("0x"+e.slice(3,5)),blue:parseInt("0x"+e.slice(5,7)),rgba:i}}termIdToNickname(e){var t,n="[object Array]"==Object.prototype.toString.call(e);if(n){t=[];for(var r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=JSON.parse(JSON.stringify(e[r])));for(var o=0;o<t.length;o++)t[o].ownerID==i.userInfo.termId&&(t[o].ownerID=i.userInfo.userId)}else"number"==typeof e?(t=null,t=e==i.userInfo.termId?i.userInfo.userId:e):"object"!=typeof e||n||(t={},(t=JSON.parse(JSON.stringify(e))).ownerID==i.userInfo.termId&&(t.ownerID=i.userInfo.userId));return t}initBoards(){console.crlog("[Board] Init boards..");const e=[];this.wbDescibes.forEach((t=>{this.queryBoardPageDatas(t),e.push(new r(t))})),console.crlog(`[Board] CRVideo_NotifyInitBoards.target(${JSON.stringify(e)})`),CRVideo_NotifyInitBoards.target(e)}queryAllWhiteBoardList(){console.crlog("[Board] Query all whiteBoard list.."),__Rtc.CRICEAPI.QueryAllBoardList().then((e=>{console.crlog(`[Board] __Rtc.CRICEAPI.QueryAllBoardList success! ${e[0]}`);const t=e[1];this.wbDescibes=t,this.wbDescibes.forEach((e=>{this.queryBoardPageDatas(e)}))}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.QueryAllBoardList fail! ${e}`),console.error(e)}))}queryBoardPageDatas(e){console.crlog(`[Board] Query board page datas, wbID:${JSON.stringify(e.wID)}`);const t=[];for(var i=0;i<e.pageCount;i++)t.push(i);t.length>0&&__Rtc.CRICEAPI.QueryElementByIDs(e.wID,t).then((t=>{const i=t[1].values();e.pageDatas=i,e.boardUI&&e.boardUI._drawAllPageData()}))}notifyAddElement(e,t,i,n){this.wbDescibes.forEach((n=>{n.wID.termID==e.termID&&n.wID.localID==e.localID&&n.pageDatas.forEach((e=>{e.pageNo==t&&(e.elementList.push(i),n.boardUI&&n.boardUI._drawElement(i),n.boardUI&&n.boardUI._resizeCanvas())}))}))}notifyDelElement(e,t,i,n){for(var r=0;r<i.length;r++){let n;this.wbDescibes.forEach((o=>{o.wID.termID==e.termID&&o.wID.localID==e.localID&&o.pageDatas.forEach((e=>{e.pageNo==t&&(n=e.elementList.findIndex((e=>e.eID.ownerID==i[r].ownerID&&e.eID.ID==i[r].ID)),-1!==n&&e.elementList.splice(n,1),o.boardUI&&o.boardUI._resizeCanvas())}))}))}}delElement(e,t,i){console.crlog(`[Board] DelElement, wID:${JSON.stringify(e)},pageNo:${t},delEleIDs}`),__Rtc.CRICEAPI.DelElement(e,t,i).then((e=>{}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.DelElement fail! ${e}`)}))}addElement(e,t,i){this.myLastWID={wID:e,pageNo:t,element:i},__Rtc.CRICEAPI.AddElement(e,t,i).then((e=>{}),(e=>{console.crlog(`[Board] __Rtc.CRICEAPI.AddElement fail! ${e}`)}))}initBoardPageDat(e,t){__Rtc.CRICEAPI.ImportPage(e,t).then((e=>{console.log(e)}),(e=>{console.log(e)}))}},e.__Rtc.CRRTCBoard=new e.__crBoardClass,e.CRVideo_NotifyInitBoards=new CRVideo.CbProxy("CRVideo_NotifyInitBoards"),e.CRVideo_NotifyBoardCurPageNo=new CRVideo.CbProxy("CRVideo_NotifyBoardCurPageNo"),e.CRVideo_NotifyCreateBoard=new CRVideo.CbProxy("CRVideo_NotifyCreateBoard"),e.CRVideo_NotifyCloseBoard=new CRVideo.CbProxy("CRVideo_NotifyCloseBoard"),e.CRVideo_NotifyInitBoardPageDat=new CRVideo.CbProxy("CRVideo_NotifyInitBoardPageDat"),e.CRVideo_NotifyBoardBkImage=new CRVideo.CbProxy("CRVideo_NotifyBoardBkImage"),e.CRVideo_NotifyAddBoardElement=new CRVideo.CbProxy("CRVideo_NotifyAddBoardElement"),e.CRVideo_NotifyModifyBoardElement=new CRVideo.CbProxy("CRVideo_NotifyModifyBoardElement"),e.CRVideo_NotifyDelBoardElement=new CRVideo.CbProxy("CRVideo_NotifyDelBoardElement"),e.CRVideo_NotifyMouseHotSpot=new CRVideo.CbProxy("CRVideo_NotifyMouseHotSpot")}(window,Ice,CRVideo)},5829:()=>{((e,t,i)=>{e.CRVideo_SetDNDStatus=function(e,i){try{console.crlog(`[CallMgr] CRVideo_SetDNDStatus(${+e},${i})`)}catch(e){}const n={cmd:"ClientCustomStatusUpdate",module:"CallServer",customStatus:+e,sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(n)},cookie:${i}`)}catch(e){}t.webSendcmd(n,i)},e.CRVideo_StartUserStatusNotify=function(e){try{console.crlog(`[CallMgr] CRVideo_StartUserStatusNotify(${e})`)}catch(e){}const i={cmd:"StartStatusPush",module:"CallServer",sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(i)},cookie:${e}`)}catch(e){}t.webSendcmd(i,e)},e.CRVideo_StopUserStatusNotify=function(e){try{console.crlog(`[CallMgr] CRVideo_StartUserStatusNotify(${e})`)}catch(e){}const i={cmd:"StopStatusPush",module:"CallServer",sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(i)},cookie:${e}`)}catch(e){}t.webSendcmd(i,e)},e.CRVideo_GetUserStatus=function(e){try{console.crlog("[CallMgr] CRVideo_GetUserStatus()")}catch(e){}const i={cmd:"GetUserStatus",module:"CallServer",sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(i)},cookie:${e}`)}catch(e){}t.webSendcmd(i,e)},e.CRVideo_GetOneUserStatus=function(e,i){try{console.crlog(`[CallMgr] CRVideo_GetOneUserStatus(${e},${i})`)}catch(e){}const n={cmd:"GetUserStatus",module:"CallServer",userID:String(e),sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(n)},cookie:${i}`)}catch(e){}t.webSendcmd(n,i)},e.CRVideo_Call=function(e,n,r,o){try{console.crlog(`[CallMgr] CRVideo_Call(${e},${JSON.stringify(n)},${r},${o}`)}catch(e){}const s={callID:i.generateUUID(),called:String(e),calledOEMKey:`${window.__CRNameUP}`,calledType:0,cmd:"ClientCall",meeting:{ID:n.ID,pswd:n.pswd,pubMeetUrl:n.pubMeetUrl,subject:n.subject},module:"CallServer",sessionID:t.sessionID,usrExDat:r||""};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(s)},cookie:${o}`)}catch(e){}t.webSendcmd(s,o)},e.CRVideo_AcceptCall=function(e,i,n,r){try{console.crlog(`[CallMgr] CRVideo_AcceptCall(${e},${JSON.stringify(i)},${n},${r})`)}catch(e){}console.crlog("[CallMgr] Meet ID"+i.ID),console.crlog("[CallMgr] Meet pubMeetUrl:"+i.pubMeetUrl),t.pubMeetUrl=i.pubMeetUrl,t.CallID=e;const o={callID:e,cmd:"ClientAccept",meeting:i,module:"CallServer",sessionID:t.sessionID,usrExDat:n||""};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(o)},cookie:${r}`)}catch(e){}t.webSendcmd(o,r)},e.CRVideo_RejectCall=function(e,i,n){try{console.crlog(`[CallMgr] CRVideo_RejectCall(${JSON.stringify(e,i,n)})`)}catch(e){}const r={callID:e,sessionID:t.sessionID,cmd:"ClientDecline",module:"CallServer",declineReason:"ClientDecline"};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(r)},cookie:${n}`)}catch(e){}t.webSendcmd(r,n)},e.CRVideo_HangupCall=function(e,i,n){try{console.crlog(`[CallMgr] CRVideo_HangupCall(${e},${i},${n})`)}catch(e){}const r={callID:e,sessionID:t.sessionID,cmd:"ClientReleaseCall",module:"CallServer",usrExDat:i||""};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(r)},cookie:${n}`)}catch(e){throw e}t.webSendcmd(r,n)},e.CRVideo_HungupCall=function(e,t,i){CRVideo_HangupCall(e,t,i)},t.callSvrCallback={ClientCustomStatusUpdate:function(t,i,n){try{console.crlog(`[Queue] CRVideo_SetDNDStatus -- CMDCallback --\x3e ClientCustomStatusUpdate: ${JSON.stringify(t)}`)}catch(e){}if(0===t.RspCode){try{console.crlog(`[CallMgr] CRVideo_SetDNDStatusSuccess.target(${n})`)}catch(e){}e.CRVideo_SetDNDStatusSuccess.target(n)}else{try{console.crlog(`[CallMgr] CRVideo_SetDNDStatusFail.target(${ICE_SDK_ERR(t.RspCode)},${n})`)}catch(e){}e.CRVideo_SetDNDStatusFail.target(ICE_SDK_ERR(t.RspCode),n)}},StartStatusPush:function(e,t,i){try{console.crlog(`[Queue] CRVideo_StartUserStatusNotify -- CMDCallback --\x3e StartStatusPush: ${JSON.stringify(e)}`)}catch(e){}try{console.crlog(`[CallMgr] CRVideo_StartUserStatusNotifyRslt.target(${ICE_SDK_ERR(e.RspCode)}, ${i})`)}catch(e){}CRVideo_StartUserStatusNotifyRslt.target(ICE_SDK_ERR(e.RspCode),i)},StopStatusPush:function(e,t,i){try{console.crlog(`[Queue] CRVideo_StopUserStatusNotify -- CMDCallback --\x3e StopStatusPush: ${JSON.stringify(e)}`)}catch(e){}try{console.crlog(`[CallMgr] CRVideo_StopUserStatusNotifyRslt.target(${ICE_SDK_ERR(e.RspCode)}, ${i})`)}catch(e){}CRVideo_StopUserStatusNotifyRslt.target(ICE_SDK_ERR(e.RspCode),i)},GetUserStatus:function(e,t,i){try{console.crlog(`[Queue] CRVideo_GetUserStatus -- CMDCallback --\x3e GetUserStatus: ${JSON.stringify(e)}`)}catch(e){}if(0===e.RspCode){let t=JSON.parse(JSON.stringify(e.userStatus));try{console.crlog(`[CallMgr] CRVideo_GetUserStatusSuccess.target(${JSON.stringify(t)}, ${i})`)}catch(e){}CRVideo_GetUserStatusSuccess.target(t,i)}else{try{console.crlog(`[CallMgr] CRVideo_GetUserStatusFail.target(${ICE_SDK_ERR(e.RspCode)}, ${i})`)}catch(e){}CRVideo_GetUserStatusFail.target(ICE_SDK_ERR(e.RspCode),i)}},ClientCall:function(e,t,i){const n=t.callID;try{console.crlog(`[CallMgr] CRVideo_Call -- CMDCallback --\x3e ClientCall: ${JSON.stringify(e)}`)}catch(e){}if(0==e.RspCode){try{console.crlog(`[CallMgr] CRVideo_CallSuccess.target(${n}, ${i});`)}catch(e){}CRVideo_CallSuccess.target(n,i)}else{try{console.crlog(`[CallMgr] CRVideo_CallFail.target(${n} ${ICE_SDK_ERR(e.RspCode)}, ${i});`)}catch(e){}CRVideo_CallFail.target(n,ICE_SDK_ERR(e.RspCode),i)}},ClientAccept:function(e,t,i){try{console.crlog(`[CallMgr] CRVideo_AcceptCall -- CMDCallback --\x3e AcceptCall: ${JSON.stringify(e)}`)}catch(e){}const n=t.callID;if(0==e.RspCode){try{console.crlog(`[CallMgr] CRVideo_AcceptCallSuccess.target(${n},${i})`)}catch(e){}CRVideo_AcceptCallSuccess.target(n,i)}else{try{console.crlog(`[CallMgr] CRVideo_AcceptCallFail.target(${n},${ICE_SDK_ERR(e.RspCode)},${i})`)}catch(e){}CRVideo_AcceptCallFail.target(n,ICE_SDK_ERR(e.RspCode),i)}},ClientDecline:function(e,t,i){try{console.crlog(`[CallMgr] CRVideo_RejectCall -- CMDCallback --\x3e ClientDecline: ${JSON.stringify(e)}`)}catch(e){}const n=t.callID;if(0==e.RspCode){try{console.crlog(`[CallMgr] CRVideo_RejectCallSuccess.target(${n},${i})`)}catch(e){}CRVideo_RejectCallSuccess.target(n,i)}else{try{console.crlog(`[CallMgr] CRVideo_RejectCallFail.target(${n},${ICE_SDK_ERR(e.RspCode)},${i})`)}catch(e){}CRVideo_RejectCallFail.target(n,ICE_SDK_ERR(e.RspCode),i)}},ClientReleaseCall:function(e,t,i){try{console.crlog(`[CallMgr] CRVideo_HangupCall -- CMDCallback --\x3e ClientReleaseCall: ${JSON.stringify(e)}`)}catch(e){}const n=t.callID;if(0==e.RspCode){try{console.crlog(`[CallMgr] CRVideo_HangupCallSuccess.target(${n},${i})`)}catch(e){}CRVideo_HangupCallSuccess.target(n,i)}else{try{console.crlog(`[CallMgr] CRVideo_HangupCallFail.target(${n},${ICE_SDK_ERR(e.RspCode)},${i})`)}catch(e){}CRVideo_HangupCallFail.target(n,ICE_SDK_ERR(e.RspCode),i)}},ServerPushUserStatus:function(e){let t={userID:e.usersStatus.userID,userStatus:e.usersStatus.userStatus,DNDType:e.usersStatus.isDND};try{console.crlog(`[CallMgr] CRVideo_NotifyUserStatus.target(${JSON.stringify(t)})`)}catch(e){}CRVideo_NotifyUserStatus.target(t)},ServerAccept:function(e){const i={ID:e.meeting.ID,pswd:e.meeting.pswd,subject:e.meeting.subject,pubMeetUrl:e.meeting.pubMeetUrl},n=e.callID,r=e.usrExDat;t.CallID=n;try{console.crlog(`[CallMgr] CRVideo_NotifyCallAccepted.target(${n},${i},${r})`)}catch(e){}CRVideo_NotifyCallAccepted.target(n,i,r)},ServerDecline:function(e){const t=e.callID,i=e.usrExDat;let n=1;switch(e.declineReason){case"NoAnswer":n=604;break;case"UserNotFound":n=605;break;case"Refuse":case"ClientDecline":n=606}try{console.crlog(`[CallMgr] CRVideo_NotifyCallRejected.target(${t},${n},${i})`)}catch(e){}CRVideo_NotifyCallRejected.target(t,n,i)},ServerCall:function(e){let i="";e.meeting&&(i={ID:e.meeting.ID,pswd:e.meeting.pswd,subject:e.meeting.subject,pubMeetUrl:e.meeting.pubMeetUrl});const n=e.callID,r=e.caller,o=e.usrExDat;t.CallID=n;try{console.crlog(`[CallMgr] CRVideo_NotifyCallIn.target(${n},${JSON.stringify(i)},${r},${o})`)}catch(e){}CRVideo_NotifyCallIn.target(e.callID,i,e.caller,e.usrExDat)},ServerReleaseCall:function(e){const i=e.callID,n=e.usrExDat;t.CallID="";try{console.crlog(`[CallMgr] CRVideo_NotifyCallHangup.target(${i},${n})`)}catch(e){}CRVideo_NotifyCallHangup.target(i,n),CRVideo_NotifyCallHungup.target(i,n)},ServerCancelCall:function(e){const i=e.callID,n=e.usrExDat;t.CallID="";try{console.crlog(`[CallMgr] CRVideo_NotifyCallHangup.target(${i},${n})`)}catch(e){}CRVideo_NotifyCallHangup.target(i,n),CRVideo_NotifyCallHungup.target(i,n)}},e.CRVideo_SetDNDStatusSuccess=new t.CbProxy("CRVideo_SetDNDStatusSuccess"),e.CRVideo_SetDNDStatusFail=new t.CbProxy("CRVideo_SetDNDStatusFail"),e.CRVideo_StartUserStatusNotifyRslt=new t.CbProxy("CRVideo_StartUserStatusNotifyRslt"),e.CRVideo_StopUserStatusNotifyRslt=new t.CbProxy("CRVideo_StopUserStatusNotifyRslt"),e.CRVideo_GetUserStatusSuccess=new t.CbProxy("CRVideo_GetUserStatusSuccess"),e.CRVideo_GetUserStatusFail=new t.CbProxy("CRVideo_GetUserStatusFail"),e.CRVideo_CallSuccess=new t.CbProxy("CRVideo_CallSuccess"),e.CRVideo_CallFail=new t.CbProxy("CRVideo_CallFail"),e.CRVideo_AcceptCallSuccess=new CRVideo.CbProxy("CRVideo_AcceptCallSuccess"),e.CRVideo_AcceptCallFail=new CRVideo.CbProxy("CRVideo_AcceptCallFail"),e.CRVideo_RejectCallSuccess=new CRVideo.CbProxy("CRVideo_RejectCallSuccess"),e.CRVideo_RejectCallFail=new CRVideo.CbProxy("CRVideo_RejectCallFail"),e.CRVideo_HangupCallSuccess=new CRVideo.CbProxy("CRVideo_HangupCallSuccess"),e.CRVideo_HangupCallFail=new CRVideo.CbProxy("CRVideo_HangupCallFail"),e.CRVideo_NotifyUserStatus=new t.CbProxy("CRVideo_NotifyUserStatus"),e.CRVideo_NotifyCallIn=new CRVideo.CbProxy("CRVideo_NotifyCallIn"),e.CRVideo_NotifyCallAccepted=new t.CbProxy("CRVideo_NotifyCallAccepted"),e.CRVideo_NotifyCallHangup=new CRVideo.CbProxy("CRVideo_NotifyCallHangup"),e.CRVideo_NotifyCallHungup=new CRVideo.CbProxy("CRVideo_NotifyCallHungup"),e.CRVideo_NotifyCallRejected=new CRVideo.CbProxy("CRVideo_NotifyCallRejected")})(window,CRVideo,Ice)},6533:()=>{const e=window.CRVideo;window._crInviteClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){}initIceCallback(){this.ICECallback={invite:(...e)=>{this.notifyInviteIn(...e)},cancelInvite:(...e)=>{this.notifyInviteCanceled(...e)},acceptInvite:(...e)=>{this.notifyInviteAccepted(...e)},rejectInvite:(...e)=>{this.notifyInviteRejected(...e)},inviteResult:(...e)=>{console.log(JSON.stringify(...e))}}}initSDKInterface(){window.CRVideo_Invite=(e,t,i)=>{try{console.crlog(`[Invite] CRVideo_Invite(${JSON.stringify({invitedUserID:e,userExtDat:t,cookie:i})})`)}catch(e){console.error(e)}return this.invite(e,t,i)},window.CRVideo_AcceptInvite=(e,t,i)=>{try{console.crlog(`[Invite] CRVideo_AcceptInvite(${JSON.stringify({inviteID:e,userExtDat:t,cookie:i})})`)}catch(e){console.error(e)}return this.acceptInvite(e,t,i)},window.CRVideo_RejectInvite=(e,t,i)=>{try{console.crlog(`[Invite] CRVideo_RejectInvite(${JSON.stringify({inviteID:e,userExtDat:t,cookie:i})})`)}catch(e){console.error(e)}return this.rejectInvite(e,t,i)},window.CRVideo_CancelInvite=(e,t,i)=>{try{console.crlog(`[Invite] CRVideo_CancelInvite(${JSON.stringify({inviteID:e,userExtDat:t,cookie:i})})`)}catch(e){console.error(e)}return this.cancelInvite(e,t,i)}}invite(t,i,n){const r=Ice.generateUUID(),o={module:"CallServer",cmd:"invite",inviteID:r,invitedUserID:t,usrExtDat:i||""};try{console.crlog(`[Invite] WebCMD:${JSON.stringify(o)},cookie:${n}`)}catch(e){}return e.callServerSendCMD(o).then((e=>{try{console.crlog(`[Invite] CRVideo_Invite -- CMDRslt --\x3e invite: ${JSON.stringify(e)}`)}catch(e){}if(0!==e.RspCode)return console.crlog(`[Invite] CRVideo_InviteFail.target(${r},${ICE_SDK_ERR(e.RspCode)},${n})`),void window.CRVideo_InviteFail.target(r,ICE_SDK_ERR(e.RspCode),n);console.crlog(`[Invite] CRVideo_InviteSuccess.target(${r},${n})`),window.CRVideo_InviteSuccess.target(r,n)})),r}acceptInvite(t,i,n){const r={module:"CallServer",cmd:"acceptInvite",inviteID:t,usrExtDat:i||""};try{console.crlog(`[Invite] WebCMD:${JSON.stringify(r)},cookie:${n}`)}catch(e){}e.callServerSendCMD(r).then((e=>{try{console.crlog(`[Invite] CRVideo_AcceptInvite -- CMDRslt --\x3e acceptInvite: ${JSON.stringify(e)}`)}catch(e){}if(0!==e.RspCode)return console.crlog(`[Invite] CRVideo_AcceptInviteFail.target(${t},${ICE_SDK_ERR(e.RspCode)},${n})`),void window.CRVideo_AcceptInviteFail.target(t,ICE_SDK_ERR(e.RspCode),n);console.crlog(`[Invite] CRVideo_AcceptInviteSuccess.target(${t},${n})`),window.CRVideo_AcceptInviteSuccess.target(t,n)}))}rejectInvite(t,i,n){const r={module:"CallServer",cmd:"rejectInvite",inviteID:t,usrExtDat:i||""};try{console.crlog(`[Invite] WebCMD:${JSON.stringify(r)},cookie:${n}`)}catch(e){}e.callServerSendCMD(r).then((e=>{try{console.crlog(`[Invite] CRVideo_RejectInvite -- CMDRslt --\x3e rejectInvite: ${JSON.stringify(e)}`)}catch(e){}if(0!==e.RspCode)return console.crlog(`[Invite] CRVideo_RejectInviteFail.target(${t},${ICE_SDK_ERR(e.RspCode)},${n})`),void window.CRVideo_RejectInviteFail.target(t,ICE_SDK_ERR(e.RspCode),n);console.crlog(`[Invite] CRVideo_RejectInviteSuccess.target(${t},${n})`),window.CRVideo_RejectInviteSuccess.target(t,n)}))}cancelInvite(t,i,n){const r={module:"CallServer",cmd:"cancelInvite",inviteID:t,usrExtDat:i||""};try{console.crlog(`[Invite] WebCMD:${JSON.stringify(r)},cookie:${n}`)}catch(e){}e.callServerSendCMD(r).then((e=>{try{console.crlog(`[Invite] CRVideo_CancelInvite -- CMDRslt --\x3e cancelInvite: ${JSON.stringify(e)}`)}catch(e){}if(0!==e.RspCode)return console.crlog(`[Invite] CRVideo_CancelInviteFail.target(${t},${ICE_SDK_ERR(e.RspCode)},${n})`),void window.CRVideo_CancelInviteFail.target(t,ICE_SDK_ERR(e.RspCode),n);console.crlog(`[Invite] CRVideo_CancelInviteSuccess.target(${t},${n})`),window.CRVideo_CancelInviteSuccess.target(t,n)}))}notifyInviteIn(e){const t=e.inviteID,i=e.inviterUserID,n=e.usrExtDat;console.crlog(`[Invite] CRVideo_NotifyInviteIn.target(${t},${i},${n})`),window.CRVideo_NotifyInviteIn.target(t,i,n)}notifyInviteCanceled(e){const t=e.inviteID,i=ICE_SDK_ERR(e.failCode),n=e.usrExtDat;console.crlog(`[Invite] CRVideo_NotifyInviteCanceled.target(${t},${i},${n})`),window.CRVideo_NotifyInviteCanceled.target(t,i,n)}notifyInviteAccepted(e){const t=e.inviteID,i=e.usrExtDat;console.crlog(`[Invite] CRVideo_NotifyInviteAccepted.target(${t},${i})`),window.CRVideo_NotifyInviteAccepted.target(t,i)}notifyInviteRejected(e){const t=e.inviteID,i=ICE_SDK_ERR(e.failCode),n=e.usrExtDat;console.crlog(`[Invite] CRVideo_NotifyInviteRejected.target(${t},${i},${n})`),window.CRVideo_NotifyInviteRejected.target(t,i,n)}},window.__Rtc.CRRTCInvite=new window._crInviteClass,window.CRVideo_InviteSuccess=new e.CbProxy("CRVideo_InviteSuccess"),window.CRVideo_InviteFail=new e.CbProxy("CRVideo_InviteFail"),window.CRVideo_AcceptInviteSuccess=new e.CbProxy("CRVideo_AcceptInviteSuccess"),window.CRVideo_AcceptInviteFail=new e.CbProxy("CRVideo_AcceptInviteFail"),window.CRVideo_RejectInviteSuccess=new e.CbProxy("CRVideo_RejectInviteSuccess"),window.CRVideo_RejectInviteFail=new e.CbProxy("CRVideo_RejectInviteFail"),window.CRVideo_CancelInviteSuccess=new e.CbProxy("CRVideo_CancelInviteSuccess"),window.CRVideo_CancelInviteFail=new e.CbProxy("CRVideo_CancelInviteFail"),window.CRVideo_NotifyInviteIn=new e.CbProxy("CRVideo_NotifyInviteIn"),window.CRVideo_NotifyInviteAccepted=new e.CbProxy("CRVideo_NotifyInviteAccepted"),window.CRVideo_NotifyInviteRejected=new e.CbProxy("CRVideo_NotifyInviteRejected"),window.CRVideo_NotifyInviteCanceled=new e.CbProxy("CRVideo_NotifyInviteCanceled")},2803:()=>{var e,t;e=window,(t=CRVideo).QueList=[],t.queStateList=[],t.queuingID=null,t.queuingInfo={},t.queuingTimer=null,t.queServiceArr=[],t.mycallInfo={},t.queUserList=[],e.CRVideo_InitQueueDat=function(e){try{console.crlog(`[QueueMgr] CRVideo_InitQueueDat(${e})`)}catch(e){}var i={cmd:"GetServiceData",module:"Queue",sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(i)}, cookie:${e}`)}catch(e){}t.webSendcmd(i,e)},e.CRVideo_GetAllQueueInfo=function(){try{console.crlog("[QueueMgr] CRVideo_GetAllQueueInfo()")}catch(e){}let e=[];return t.QueList.forEach((t=>{e.push({queID:+t.queID,prio:+t.prio,name:t.name,desc:t.desc})})),e},e.CRVideo_RefreshAllQueueStatus=function(i){try{!i&&console.crlog(`[QueueMgr] CRVideo_RefreshAllQueueStatus(${i})`)}catch(e){}let n=t.QueList.length;try{!i&&console.crlog(`[QueueMgr] All queue list length: ${n}`)}catch(e){}for(let r=0;r<n;r++){let n=t.QueList[r];e.CRVideo_GetQueueStatus(n.queID,"RefreshAllQueueStatus",i)}},e.CRVideo_GetQueueStatus=function(e,i,n){try{!n&&console.crlog(`[QueueMgr] CRVideo_GetQueueStatus(${e},${i},${n})`)}catch(e){}var r={cmd:"GetQueueStatus",module:"Queue",queID:e=parseInt(e),sessionID:t.sessionID};try{!n&&console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(r)}`)}catch(e){}t.webSendcmd(r,i,n)},e.CRVideo_StartService=function(e,i,n){try{console.crlog(`[QueueMgr] CRVideo_StartService(${e},${i},${n})`)}catch(e){}i=null==i?0:i;var r={cmd:"AgentEnter",module:"Queue",queID:e=parseInt(e),priority:i,sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(r)}, cookie: ${n}`)}catch(e){}t.webSendcmd(r,n)},e.CRVideo_StopService=function(e,i){try{console.crlog(`[QueueMgr] CRVideo_StopService(${e},${i})`)}catch(e){}var n={cmd:"AgentLeave",module:"Queue",queID:e=parseInt(e),sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(n)}, cookie: ${i}`)}catch(e){}t.webSendcmd(n,i)},e.CRVideo_AcceptAssignUser=function(e,i,n){try{console.crlog(`[QueueMgr] CRVideo_AcceptAssignUser(${e},${i},${n})`)}catch(e){}var r={accept:1,cmd:"AssignResponse",module:"Queue",queID:+e,userID:i,sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(r)}, cookie: ${n}`)}catch(e){}t.webSendcmd(r,n)},e.CRVideo_RejectAssignUser=function(e,i,n){try{console.crlog(`[QueueMgr] CRVideo_RejectAssignUser(${e},${i},${n})`)}catch(e){}var r={accept:0,cmd:"AssignResponse",module:"Queue",queID:+e,userID:i,sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(r)}, cookie: ${n}`)}catch(e){}t.webSendcmd(r,n)},e.CRVideo_ReqAssignUser=function(e,i,n){try{console.crlog(`[QueueMgr] CRVideo_ReqAssignUser(${e},${i},${n})`)}catch(e){}var r={cmd:"RequestUser",module:"Queue",sessionID:t.sessionID};i&&(r.queID=+i),n&&(r.userID=n);try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(r)}, cookie: ${e}`)}catch(e){}t.webSendcmd(r,e)},e.CRVideo_GetServingQueues=function(){let e=[];return t.queServiceArr.forEach((t=>{e.push(t)})),e},e.CRVideo_GetQueueUsers=function(e,i){try{console.crlog(`[QueueMgr] CRVideo_GetQueueUsers(${e},${i})`)}catch(e){}var n={cmd:"GetQueueUsers",module:"Queue",queID:+e,sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(n)}, cookie: ${i}`)}catch(e){}t.webSendcmd(n,i)},e.CRVideo_StartQueuing=function(e,i,n){try{console.crlog(`[QueueMgr] CRVideo_StartQueuing(${e},${JSON.stringify(i)},${n})`)}catch(e){}t.queuingID=parseInt(e);var r={cmd:"UserEnter",module:"Queue",queID:parseInt(e),sessionID:t.sessionID,usrExDat:i};try{console.crlog(`[QueueMgr] WebCMD:${JSON.stringify(r)},cookie:${n}`)}catch(e){}t.webSendcmd(r,n)},e.CRVideo_StopQueuing=function(e){try{console.crlog(`[QueueMgr] CRVideo_StopQueuing(${e})`)}catch(e){}var i={cmd:"UserLeave",module:"Queue",queID:+t.queuingID,sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD:${JSON.stringify(i)},cookie:${e}`)}catch(e){}t.webSendcmd(i,e),t.queuingID=null},e.CRVideo_GetUserServiceStatus=function(){console.crlog("[QueueMgr] CRVideo_GetUserServiceStatus()");const e={cmd:"GetUserServiceStatus",module:"Queue",sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD:${JSON.stringify(e)}`)}catch(e){}t.webSendcmd(e)},e.CRVideo_GetAgentServiceStatus=function(){console.crlog("[QueueMgr] CRVideo_GetAgentServiceStatus()");const e={cmd:"GetAgentServiceStatus",module:"Queue",sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD:${JSON.stringify(e)}`)}catch(e){}t.webSendcmd(e)},e.CRVideo_GetQueuingInfo=function(){const e=t.queuingInfo;return console.crlog(`[QueueMgr] CRVideo_GetQueuingInfo(), returnVal: ${JSON.stringify(e)}`),e},e.CRVideo_GetSessionInfo=function(){const e={callID:t.mycallInfo.callID||"",peerID:t.mycallInfo.peerID||"",peerName:t.mycallInfo.peerName||"",bCallAccepted:t.mycallInfo.bCallAccepted||0,duration:t.mycallInfo.duration||0,meetingID:t.mycallInfo.meetingID||null,meetingPswd:t.mycallInfo.meetingPswd||""};return console.crlog(`[QueueMgr] CRVideo_GetSessionInfo(), returnVal: ${JSON.stringify(e)}`),e},t.queCallback={GetServiceData:function(i,n,r){try{console.crlog(`[QueueMgr] CRVideo_InitQueueDat -- CMDCallback --\x3e GetServiceData: ${JSON.stringify(i)}`)}catch(e){}0===i.RspCode&&(t.QueList=i.ques,e.CRVideo_GetUserServiceStatus(),e.CRVideo_GetAgentServiceStatus());try{console.crlog(`[QueueMgr] CRVideo_InitQueueDatRslt.target(${ICE_SDK_ERR(i.RspCode)},${r})`)}catch(e){}e.CRVideo_InitQueueDatRslt.target(ICE_SDK_ERR(i.RspCode),r)},GetQueueStatus:function(i,n,r,o){try{!o&&console.crlog(`[QueueMgr] CRVideo_GetQueueStatus -- CMDCallback --\x3e GetQueueStatus: ${JSON.stringify(i)}`)}catch(e){}if(0===i.RspCode){t.queStateList.length;for(var s=!1,a=i.status,c=0;c<t.queStateList.length;c++)t.queStateList[c].queID!=a.queID||(t.queStateList[c]=a,s=!0);s||t.queStateList.push(a)}try{!o&&console.crlog(`[QueueMgr] CRVideo_GetQueueStatusRslt.target(${JSON.stringify(i.status)},${ICE_SDK_ERR(i.RspCode)},${r})`)}catch(e){}e.CRVideo_GetQueueStatusRslt.target(i.status,ICE_SDK_ERR(i.RspCode),r)},AgentEnter:function(e,i,n){try{console.crlog(`[QueueMgr] CRVideo_StartService -- CMDCallback --\x3e AgentEnter: ${JSON.stringify(e)}`)}catch(e){}0===e.RspCode&&(t.queServiceArr.push(i.queID),console.crlog(`[QueueMgr] queServiceArr: ${JSON.stringify(t.queServiceArr)}`));try{console.crlog(`[QueueMgr] CRVideo_StartServiceRslt.target(${i.queID},${ICE_SDK_ERR(e.RspCode)},${n})`)}catch(e){}CRVideo_StartServiceRslt.target(i.queID,ICE_SDK_ERR(e.RspCode),n)},AgentLeave:function(e,i,n){try{console.crlog(`[QueueMgr] CRVideo_StopService -- CMDCallback --\x3e AgentLeave: ${JSON.stringify(e)}`)}catch(e){}0===e.RspCode&&(t.queServiceArr.splice(t.queServiceArr.findIndex((e=>e==i.queID)),1),console.crlog(`[QueueMgr] queServiceArr: ${JSON.stringify(t.queServiceArr)}`));try{console.crlog(`[QueueMgr] CRVideo_StopServiceRslt.target(${i.queID},${ICE_SDK_ERR(e.RspCode)},${n})`)}catch(e){}CRVideo_StopServiceRslt.target(i.queID,ICE_SDK_ERR(e.RspCode),n)},AssignResponse:function(e,t,i){try{console.crlog(`[QueueMgr] CRVideo_AcceptAssignUserCRVideo_RejectAssignUser -- CMDCallback --\x3e AssignResponse: ${JSON.stringify(e)}`)}catch(e){}try{console.crlog(`[QueueMgr] CRVideo_ResponseAssignUserRslt.target(${ICE_SDK_ERR(e.RspCode)},${i})`)}catch(e){}CRVideo_ResponseAssignUserRslt.target(ICE_SDK_ERR(e.RspCode),i)},RequestUser:function(e,t,i){try{console.crlog(`[QueueMgr] CRVideo_ReqAssignUser -- CMDCallback --\x3e RequestUser: ${JSON.stringify(e)}`)}catch(e){}let n={queID:e.queID,userID:e.userID,nickname:e.userName,queuingTime:e.wait_time,usrExDat:e.usrExDat};try{console.crlog(`[QueueMgr] CRVideo_ReqAssignUserRslt.target(${ICE_SDK_ERR(e.RspCode)},${JSON.stringify(n)},${i})`)}catch(e){}CRVideo_ReqAssignUserRslt.target(ICE_SDK_ERR(e.RspCode),n,i)},GetQueueUsers:function(e,i,n){try{console.crlog(`[QueueMgr] CRVideo_GetQueueUsers -- CMDCallback --\x3e GetQueueUsers: ${JSON.stringify(e)}`)}catch(e){}const r=[];e.users.forEach((e=>{r.push({queID:i.queID,userID:e.userID,nickname:e.userName,queuingTime:e.wait_time,usrExDat:e.usrExDat})})),t.queUserList=r;try{console.crlog(`[QueueMgr] CRVideo_GetQueueUsersRslt.target(${ICE_SDK_ERR(e.RspCode)},${JSON.stringify(r)},${n})`)}catch(e){}CRVideo_GetQueueUsersRslt.target(ICE_SDK_ERR(e.RspCode),JSON.parse(JSON.stringify(r)),n)},UserEnter:function(i,n,r){try{console.crlog(`[QueueMgr] CRVideo_StartQueuing -- CMDCallback --\x3e UserEnter: ${JSON.stringify(i)}`)}catch(e){}let o=i.RspCode;0==o&&(t.queuingInfo={queID:n.queID,position:+i.position,queuingTime:0},t.queuingTimer=setInterval((()=>{t.queuingInfo.queuingTime++}),1e3));try{console.crlog(`[QueueMgr] CRVideo_StartQueuingRslt.target(${ICE_SDK_ERR(o)},${r})`)}catch(e){}e.CRVideo_StartQueuingRslt.target(ICE_SDK_ERR(o),r);try{console.crlog(`[QueueMgr] CRVideo_QueuingInfoChanged.target(${JSON.stringify(t.queuingInfo)})`)}catch(e){}e.CRVideo_QueuingInfoChanged.target(t.queuingInfo)},UserLeave:function(e,i,n){try{console.crlog(`[QueueMgr] CRVideo_StopQueuing -- CMDCallback --\x3e UserLeave: ${JSON.stringify(e)}`)}catch(e){}let r=e.RspCode;if(0==r){t.queuingInfo={queID:i.queID,position:-1,queuingTime:0};try{console.crlog("[QueueMgr] Clear Interval: queuingTimer")}catch(e){}clearInterval(t.queuingTimer)}try{console.crlog(`[QueueMgr] CRVideo_StopQueuingRslt.target(${ICE_SDK_ERR(r)},${n})`)}catch(e){}CRVideo_StopQueuingRslt.target(ICE_SDK_ERR(r),n)},GetUserServiceStatus:function(e,i,n){try{console.crlog(`[QueueMgr] CRVideo_GetUserServiceStatus -- CMDCallback --\x3e GetUserServiceStatus: ${JSON.stringify(e)}`)}catch(e){}0==e.RspCode&&(t.mycallInfo.callID=e.callInfo.callID,t.mycallInfo.peerID=e.callInfo.peerID,t.mycallInfo.peerName=e.callInfo.peerName,t.mycallInfo.bCallAccepted=e.callInfo.callState,t.mycallInfo.duration=e.callInfo.duration,t.mycallInfo.meetingID=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.ID:null,t.mycallInfo.meetingPswd=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.pswd:null,t.mycallInfo.position=void 0!==e.position?e.position:null,t.mycallInfo.queID=void 0!==e.queID?e.queID:null,t.mycallInfo.wait_time=void 0!==e.wait_time?e.wait_time:null)},GetAgentServiceStatus:function(e,i,n){try{console.crlog(`[QueueMgr] CRVideo_GetAgentServiceStatus -- CMDCallback --\x3e GetAgentServiceStatus: ${JSON.stringify(e)}`)}catch(e){}0==e.RspCode&&(t.mycallInfo.callID=e.callInfo.callID,t.mycallInfo.peerID=e.callInfo.peerID,t.mycallInfo.peerName=e.callInfo.peerName,t.mycallInfo.bCallAccepted=e.callInfo.callState,t.mycallInfo.duration=e.callInfo.duration,t.mycallInfo.meetingID=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.ID:null,t.mycallInfo.meetingPswd=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.pswd:null,t.mycallInfo.queIDs=void 0!==e.queIDs?e.queIDs:null)},NotifyQueueStatus:function(e){try{console.crlog(`[QueueMgr] CRVideo_QueueStatusChanged.target(${JSON.stringify(e.status)})`)}catch(e){}CRVideo_QueueStatusChanged.target(e.status)},AssignUser:function(e){const t={queID:e.queID,userID:e.userID,nickname:e.userName,queuingTime:e.wait_time,usrExDat:e.usrExDat};try{console.crlog(`[QueueMgr] CRVideo_AutoAssignUser.target(${JSON.stringify(t)})`)}catch(e){}CRVideo_AutoAssignUser.target(t)},AssignCancel:function(e){try{console.crlog(`[QueueMgr] CRVideo_CancelAssignUser.target(${e.queID},${e.userID})`)}catch(e){}CRVideo_CancelAssignUser.target(e.queID,e.userID)},NotifyUserEnter:function(e){const i={queID:e.queID,userID:e.user.userID,nickname:e.user.userName,queuingTime:e.user.wait_time,usrExDat:e.user.usrExDat};t.queUserList.find((t=>t.userID==e.user.userID))||t.queUserList.push(i),console.crlog(`[QueueMgr] CRVideo_NotifyUserEnter.target(${e.queID}, ${JSON.stringify(i)})`),CRVideo_NotifyUserEnter.target(e.queID,JSON.parse(JSON.stringify(i)))},NotifyUserLeave:function(e){let i=t.queUserList.findIndex((t=>t.userID==e.userID&&t.queID==e.queID));i>-1&&t.queUserList.splice(i,1),console.crlog(`[QueueMgr] CRVideo_NotifyUserLeave.target(${e.queID},${e.userID},${e.inService})`),CRVideo_NotifyUserLeave.target(e.queID,e.userID,e.inService)},NotifyPosition:function(e){const t={queID:e.status.queID,agent_num:e.status.agent_num,wait_num:e.status.wait_num,srv_num:e.status.srv_num},i={queID:e.status.queID,position:e.position,queuingTime:e.wait_time};try{console.crlog(`[QueueMgr] CRVideo_QueueStatusChanged.target(${JSON.stringify(t)})`)}catch(e){}CRVideo_QueueStatusChanged.target(t);try{console.crlog(`[QueueMgr] CRVideo_QueuingInfoChanged.target(${JSON.stringify(i)})`)}catch(e){}CRVideo_QueuingInfoChanged.target(i)}},e.CRVideo_InitQueueDatRslt=new t.CbProxy("CRVideo_InitQueueDatRslt"),e.CRVideo_GetQueueStatusRslt=new t.CbProxy("CRVideo_GetQueueStatusRslt"),e.CRVideo_StartServiceRslt=new t.CbProxy("CRVideo_StartServiceRslt"),e.CRVideo_StopServiceRslt=new t.CbProxy("CRVideo_StopServiceRslt"),e.CRVideo_ResponseAssignUserRslt=new t.CbProxy("CRVideo_ResponseAssignUserRslt"),e.CRVideo_ReqAssignUserRslt=new CRVideo.CbProxy("CRVideo_ReqAssignUserRslt"),e.CRVideo_GetQueueUsersRslt=new CRVideo.CbProxy("CRVideo_GetQueueUsersRslt"),e.CRVideo_StartQueuingRslt=new t.CbProxy("CRVideo_StartQueuingRslt"),e.CRVideo_StopQueuingRslt=new t.CbProxy("CRVideo_StopQueuingRslt"),e.CRVideo_AutoAssignUser=new t.CbProxy("CRVideo_AutoAssignUser"),e.CRVideo_CancelAssignUser=new t.CbProxy("CRVideo_CancelAssignUser"),e.CRVideo_NotifyUserEnter=new t.CbProxy("CRVideo_NotifyUserEnter"),e.CRVideo_NotifyUserLeave=new t.CbProxy("CRVideo_NotifyUserLeave"),e.CRVideo_QueueStatusChanged=new t.CbProxy("CRVideo_QueueStatusChanged"),e.CRVideo_QueuingInfoChanged=new t.CbProxy("CRVideo_QueuingInfoChanged")},1638:(e,t)=>{var i;function n(e,t){var i;i="undefined"!=typeof global?global:null,"undefined"==typeof RecordRTC&&i&&"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},global.console||(global.console={}),void 0!==global.console.log&&void 0!==global.console.error||(global.console.error=global.console.log=global.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(i.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},i.HTMLVideoElement=function(){}),"undefined"==typeof location&&(i.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(i.screen={width:0,height:0}),void 0===l&&(i.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),i.window=global),t=t||"multi-streams-mixer";var n=[],r=!1,o=document.createElement("canvas"),s=o.getContext("2d");o.style.opacity=0,o.style.position="absolute",o.style.zIndex=-1,o.style.top="-1000em",o.style.left="-1000em",o.className=t,(document.body||document.documentElement).appendChild(o),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var a=this,c=window.AudioContext;void 0===c&&("undefined"!=typeof webkitAudioContext&&(c=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(c=mozAudioContext));var l=window.URL;void 0===l&&"undefined"!=typeof webkitURL&&(l=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var d=window.MediaStream;void 0===d&&"undefined"!=typeof webkitMediaStream&&(d=webkitMediaStream),void 0!==d&&void 0===d.prototype.stop&&(d.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))});var u={};function h(){if(!r){var e=n.length,t=!1,i=[];if(n.forEach((function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:i.push(e)})),t)o.width=t.stream.width,o.height=t.stream.height;else if(i.length){o.width=e>1?2*i[0].width:i[0].width;var s=1;3!==e&&4!==e||(s=2),5!==e&&6!==e||(s=3),7!==e&&8!==e||(s=4),9!==e&&10!==e||(s=5),o.height=i[0].height*s}else o.width=a.width||360,o.height=a.height||240;t&&t instanceof HTMLVideoElement&&f(t),i.forEach((function(e,t){f(e,t)})),setTimeout(h,a.frameInterval)}}function f(e,t){if(!r){var i=0,n=0,o=e.width,a=e.height;1===t&&(i=e.width),2===t&&(n=e.height),3===t&&(i=e.width,n=e.height),4===t&&(n=2*e.height),5===t&&(i=e.width,n=2*e.height),6===t&&(n=3*e.height),7===t&&(i=e.width,n=3*e.height),void 0!==e.stream.left&&(i=e.stream.left),void 0!==e.stream.top&&(n=e.stream.top),void 0!==e.stream.width&&(o=e.stream.width),void 0!==e.stream.height&&(a=e.stream.height),s.drawImage(e,i,n,o,a),"function"==typeof e.stream.onRender&&e.stream.onRender(s,i,n,o,a,t)}}function p(){u.AudioContextConstructor||(u.AudioContextConstructor=new u.AudioContext),a.audioContext=u.AudioContextConstructor,a.audioSources=[],!0===a.useGainNode&&(a.gainNode=a.audioContext.createGain(),a.gainNode.connect(a.audioContext.destination),a.gainNode.gain.value=0);var t=0;if(e.forEach((function(e){if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){t++;var i=a.audioContext.createMediaStreamSource(e);!0===a.useGainNode&&i.connect(a.gainNode),a.audioSources.push(i)}})),t)return a.audioDestination=a.audioContext.createMediaStreamDestination(),a.audioSources.forEach((function(e){e.connect(a.audioDestination)})),a.audioDestination.stream}function _(e){var i=document.createElement("video");return function(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}(e,i),i.className=t,i.muted=!0,i.volume=0,i.width=e.width||a.width||360,i.height=e.height||a.height||240,i.click(),i.play(),i}function C(t){n=[],(t=t||e).forEach((function(e){if(e.getTracks().filter((function(e){return"video"===e.kind})).length){var t=_(e);t.stream=e,n.push(t)}}))}void 0!==c?u.AudioContext=c:"undefined"!=typeof webkitAudioContext&&(u.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){h()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";t instanceof Array||(t=[t]),t.forEach((function(t){var i=new d;if(t.getTracks().filter((function(e){return"video"===e.kind})).length){var r=_(t);r.stream=t,n.push(r),i.addTrack(t.getTracks().filter((function(e){return"video"===e.kind}))[0])}if(t.getTracks().filter((function(e){return"audio"===e.kind})).length){var o=a.audioContext.createMediaStreamSource(t);a.audioDestination=a.audioContext.createMediaStreamDestination(),o.connect(a.audioDestination),i.addTrack(a.audioDestination.stream.getTracks().filter((function(e){return"audio"===e.kind}))[0])}e.push(i)}))},this.releaseStreams=function(){n=[],r=!0,a.gainNode&&(a.gainNode.disconnect(),a.gainNode=null),a.audioSources.length&&(a.audioSources.forEach((function(e){e.disconnect()})),a.audioSources=[]),a.audioDestination&&(a.audioDestination.disconnect(),a.audioDestination=null),a.audioContext&&a.audioContext.close(),a.audioContext=null,s.clearRect(0,0,o.width,o.height),o.stream&&(o.stream.stop(),o.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),C(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){r=!1;var t=function(){var e;C(),"captureStream"in o?e=o.captureStream():"mozCaptureStream"in o?e=o.mozCaptureStream():a.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new d;return e.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(e){t.addTrack(e)})),o.stream=t,t}(),i=p();return i&&i.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(e){t.addTrack(e)})),e.forEach((function(e){e.fullcanvas&&!0})),t},this.getMixedAudioStream=p}"undefined"==typeof RecordRTC&&(e.exports=n,void 0===(i=function(){return n}.apply(t,[]))||(e.exports=i))},8624:function(){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,i){return e==Array.prototype||e==Object.prototype||(e[t]=i.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var i=e[t];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function r(e,t){if(t)e:{var r=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in r))break e;r=r[s]}(t=t(o=r[e=e[e.length-1]]))!=o&&null!=t&&i(r,e,{configurable:!0,writable:!0,value:t})}}function o(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function s(e){var i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return i?i.call(e):{next:t(e)}}function a(e){if(!(e instanceof Array)){e=s(e);for(var t,i=[];!(t=e.next()).done;)i.push(t.value);e=i}return e}r("Symbol",(function(e){function t(e,t){this.h=e,i(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.h};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}})),r("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var r="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),s=0;s<r.length;s++){var a=n[r[s]];"function"==typeof a&&"function"!=typeof a.prototype[e]&&i(a.prototype,e,{configurable:!0,writable:!0,value:function(){return o(t(this))}})}return e}));var c="function"==typeof Object.assign?Object.assign:function(e,t){for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};r("Object.assign",(function(e){return e||c}));var l,d="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var u;e:{var h={};try{h.__proto__={a:!0},u=h.a;break e}catch(e){}u=!1}l=u?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var f=l;function p(e,t){if(e.prototype=d(t.prototype),e.prototype.constructor=e,f)f(e,t);else for(var i in t)if("prototype"!=i)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(t,i);n&&Object.defineProperty(e,i,n)}else e[i]=t[i];e.za=t.prototype}function _(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function C(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function g(e,t){e.l={ma:t,na:!0},e.h=e.s||e.v}function m(e,t,i){return e.h=i,{value:t}}function R(e){this.h=new _,this.i=e}function S(e,t,i,n){try{var r=t.call(e.h.j,i);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.h.m=!1,r;var o=r.value}catch(t){return e.h.j=null,g(e.h,t),I(e)}return e.h.j=null,n.call(e.h,o),I(e)}function I(e){for(;e.h.h;)try{var t=e.i(e.h);if(t)return e.h.m=!1,{value:t.value,done:!1}}catch(t){e.h.i=void 0,g(e.h,t)}if(e.h.m=!1,e.h.l){if(t=e.h.l,e.h.l=null,t.na)throw t.ma;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function y(e){this.next=function(t){return C(e.h),e.h.j?t=S(e,e.h.j.next,t,e.h.u):(e.h.u(t),t=I(e)),t},this.throw=function(t){return C(e.h),e.h.j?t=S(e,e.h.j.throw,t,e.h.u):(g(e.h,t),t=I(e)),t},this.return=function(t){return function(e,t){C(e.h);var i=e.h.j;return i?S(e,"return"in i?i.return:function(e){return{value:e,done:!0}},t,e.h.return):(e.h.return(t),I(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function v(e){return function(e){function t(t){return e.next(t)}function i(t){return e.throw(t)}return new Promise((function(n,r){!function e(o){o.done?n(o.value):Promise.resolve(o.value).then(t,i).then(e,r)}(e.next())}))}(new y(new R(e)))}function w(e){return e||Array.prototype.fill}_.prototype.u=function(e){this.i=e},_.prototype.return=function(e){this.l={return:e},this.h=this.v},r("Promise",(function(e){function t(e){this.i=0,this.j=void 0,this.h=[],this.u=!1;var t=this.l();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function i(){this.h=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;i.prototype.i=function(e){if(null==this.h){this.h=[];var t=this;this.j((function(){t.m()}))}this.h.push(e)};var o=n.setTimeout;i.prototype.j=function(e){o(e,0)},i.prototype.m=function(){for(;this.h&&this.h.length;){var e=this.h;this.h=[];for(var t=0;t<e.length;++t){var i=e[t];e[t]=null;try{i()}catch(e){this.l(e)}}}this.h=null},i.prototype.l=function(e){this.j((function(){throw e}))},t.prototype.l=function(){function e(e){return function(n){i||(i=!0,e.call(t,n))}}var t=this,i=!1;return{resolve:e(this.I),reject:e(this.m)}},t.prototype.I=function(e){if(e===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.L(e);else{e:switch(typeof e){case"object":var i=null!=e;break e;case"function":i=!0;break e;default:i=!1}i?this.F(e):this.s(e)}},t.prototype.F=function(e){var t=void 0;try{t=e.then}catch(e){return void this.m(e)}"function"==typeof t?this.M(t,e):this.s(e)},t.prototype.m=function(e){this.v(2,e)},t.prototype.s=function(e){this.v(1,e)},t.prototype.v=function(e,t){if(0!=this.i)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.i);this.i=e,this.j=t,2===this.i&&this.K(),this.H()},t.prototype.K=function(){var e=this;o((function(){if(e.D()){var t=n.console;void 0!==t&&t.error(e.j)}}),1)},t.prototype.D=function(){if(this.u)return!1;var e=n.CustomEvent,t=n.Event,i=n.dispatchEvent;return void 0===i||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=n.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.j,i(e))},t.prototype.H=function(){if(null!=this.h){for(var e=0;e<this.h.length;++e)a.i(this.h[e]);this.h=null}};var a=new i;return t.prototype.L=function(e){var t=this.l();e.T(t.resolve,t.reject)},t.prototype.M=function(e,t){var i=this.l();try{e.call(t,i.resolve,i.reject)}catch(e){i.reject(e)}},t.prototype.then=function(e,i){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){o(e)}}:t}var r,o,s=new t((function(e,t){r=e,o=t}));return this.T(n(e,r),n(i,o)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.T=function(e,t){function i(){switch(n.i){case 1:e(n.j);break;case 2:t(n.j);break;default:throw Error("Unexpected state: "+n.i)}}var n=this;null==this.h?a.i(i):this.h.push(i),this.u=!0},t.resolve=r,t.reject=function(e){return new t((function(t,i){i(e)}))},t.race=function(e){return new t((function(t,i){for(var n=s(e),o=n.next();!o.done;o=n.next())r(o.value).T(t,i)}))},t.all=function(e){var i=s(e),n=i.next();return n.done?r([]):new t((function(e,t){function o(t){return function(i){s[t]=i,0==--a&&e(s)}}var s=[],a=0;do{s.push(void 0),a++,r(n.value).T(o(s.length-1),t),n=i.next()}while(!n.done)}))},t})),r("Array.prototype.keys",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var i=0,n=!1,r={next:function(){if(!n&&i<e.length){var r=i++;return{value:t(r,e[r]),done:!1}}return n=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e){return e}))}})),r("Array.prototype.fill",(function(e){return e||function(e,t,i){var n=this.length||0;for(0>t&&(t=Math.max(0,n+t)),(null==i||i>n)&&(i=n),0>(i=Number(i))&&(i=Math.max(0,n+i)),t=Number(t||0);t<i;t++)this[t]=e;return this}})),r("Int8Array.prototype.fill",w),r("Uint8Array.prototype.fill",w),r("Uint8ClampedArray.prototype.fill",w),r("Int16Array.prototype.fill",w),r("Uint16Array.prototype.fill",w),r("Int32Array.prototype.fill",w),r("Uint32Array.prototype.fill",w),r("Float32Array.prototype.fill",w),r("Float64Array.prototype.fill",w),r("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),r("Array.prototype.includes",(function(e){return e||function(e,t){var i=this;i instanceof String&&(i=String(i));var n=i.length;for(0>(t=t||0)&&(t=Math.max(t+n,0));t<n;t++){var r=i[t];if(r===e||Object.is(r,e))return!0}return!1}})),r("String.prototype.includes",(function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}}));var E=this||self;function b(e,t){e=e.split(".");var i,n=E;e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(;e.length&&(i=e.shift());)e.length||void 0===t?n=n[i]&&n[i]!==Object.prototype[i]?n[i]:n[i]={}:n[i]=t}function D(e){var t;return(t=E.navigator)&&(t=t.userAgent)||(t=""),-1!=t.indexOf(e)}var M=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var i=e.length,n=Array(i),r="string"==typeof e?e.split(""):e,o=0;o<i;o++)o in r&&(n[o]=t.call(void 0,r[o],o,e));return n},P={},x=null;function T(e){var t=e.length,i=3*t/4;i%3?i=Math.floor(i):-1!="=.".indexOf(e[t-1])&&(i=-1!="=.".indexOf(e[t-2])?i-2:i-1);var n=new Uint8Array(i),r=0;return function(e,t){function i(t){for(;n<e.length;){var i=e.charAt(n++),r=x[i];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(i))throw Error("Unknown base64 encoding at char: "+i)}return t}A();for(var n=0;;){var r=i(-1),o=i(0),s=i(64),a=i(64);if(64===a&&-1===r)break;t(r<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(e,(function(e){n[r++]=e})),r!==i?n.subarray(0,r):n}function A(){if(!x){x={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],i=0;5>i;i++){var n=e.concat(t[i].split(""));P[i]=n;for(var r=0;r<n.length;r++){var o=n[r];void 0===x[o]&&(x[o]=r)}}}}var O="undefined"!=typeof Uint8Array,V=!(D("Trident")||D("MSIE"))&&"function"==typeof E.btoa;function k(e){if(!V){var t;void 0===t&&(t=0),A(),t=P[t];for(var i=Array(Math.floor(e.length/3)),n=t[64]||"",r=0,o=0;r<e.length-2;r+=3){var s=e[r],a=e[r+1],c=e[r+2],l=t[s>>2];s=t[(3&s)<<4|a>>4],a=t[(15&a)<<2|c>>6],c=t[63&c],i[o++]=l+s+a+c}switch(l=0,c=n,e.length-r){case 2:c=t[(15&(l=e[r+1]))<<2]||n;case 1:e=e[r],i[o]=t[e>>2]+t[(3&e)<<4|l>>4]+c+n}return i.join("")}for(t="";10240<e.length;)t+=String.fromCharCode.apply(null,e.subarray(0,10240)),e=e.subarray(10240);return t+=String.fromCharCode.apply(null,e),btoa(t)}var N,L=RegExp("[-_.]","g");function U(e){switch(e){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function B(e){if(!V)return T(e);L.test(e)&&(e=e.replace(L,U)),e=atob(e);for(var t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}function F(){return N||(N=new Uint8Array(0))}var j={},$="function"==typeof Uint8Array.prototype.slice,H=0,q=0;function K(e){var t=0>e,i=(e=Math.abs(e))>>>0;e=Math.floor((e-i)/4294967296),t&&(t=(i=s(z(i,e))).next().value,e=i.next().value,i=t),H=i>>>0,q=e>>>0}var W,G="function"==typeof BigInt;function z(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}function J(e,t){this.i=e>>>0,this.h=t>>>0}function Q(e){if(!e)return W||(W=new J(0,0));if(!/^-?\d+$/.test(e))return null;if(16>e.length)K(Number(e));else if(G)e=BigInt(e),H=Number(e&BigInt(4294967295))>>>0,q=Number(e>>BigInt(32)&BigInt(4294967295));else{var t=+("-"===e[0]);q=H=0;for(var i=e.length,n=t,r=(i-t)%6+t;r<=i;n=r,r+=6)n=Number(e.slice(n,r)),q*=1e6,4294967296<=(H=1e6*H+n)&&(q+=H/4294967296|0,H%=4294967296);t&&(e=(t=s(z(H,q))).next().value,t=t.next().value,H=e,q=t)}return new J(H,q)}function Z(e,t){return Error("Invalid wire type: "+e+" (at position "+t+")")}function X(){return Error("Failed to read varint, encoding is invalid.")}function Y(e,t){return Error("Tried to read past the end of the data "+t+" > "+e)}function ee(){throw Error("Invalid UTF8")}function te(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var ie,ne,re,oe=void 0,se="undefined"!=typeof TextDecoder,ae="undefined"!=typeof TextEncoder;function ce(e){if(e!==j)throw Error("illegal external caller")}function le(e,t){if(ce(t),this.V=e,null!=e&&0===e.length)throw Error("ByteString should be constructed with non-empty values")}function de(){return re||(re=new le(null,j))}function ue(e){ce(j);var t=e.V;return null==(t=null==t||O&&null!=t&&t instanceof Uint8Array?t:"string"==typeof t?B(t):null)?t:e.V=t}function he(e,t){this.i=null,this.m=!1,this.h=this.j=this.l=0,fe(this,e,t)}function fe(e,t,i){i=void 0===i?{}:i,e.S=void 0!==i.S&&i.S,t&&(t=function(e){if("string"==typeof e)return{buffer:B(e),C:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),C:!1};if(e.constructor===Uint8Array)return{buffer:e,C:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),C:!1};if(e.constructor===le)return{buffer:ue(e)||F(),C:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}(t),e.i=t.buffer,e.m=t.C,e.l=0,e.j=e.i.length,e.h=e.l)}function pe(e,t){if(e.h=t,t>e.j)throw Y(e.j,t)}function _e(e){var t=e.i,i=e.h,n=t[i++],r=127&n;if(128&n&&(r|=(127&(n=t[i++]))<<7,128&n&&(r|=(127&(n=t[i++]))<<14,128&n&&(r|=(127&(n=t[i++]))<<21,128&n&&(r|=(n=t[i++])<<28,128&n&&128&t[i++]&&128&t[i++]&&128&t[i++]&&128&t[i++]&&128&t[i++])))))throw X();return pe(e,i),r}function Ce(e,t){if(0>t)throw Error("Tried to read a negative byte length: "+t);var i=e.h,n=i+t;if(n>e.j)throw Y(t,e.j-i);return e.h=n,i}he.prototype.reset=function(){this.h=this.l};var ge=[];function me(){this.h=[]}function Re(e,t,i){for(;0<i||127<t;)e.h.push(127&t|128),t=(t>>>7|i<<25)>>>0,i>>>=7;e.h.push(t)}function Se(e,t){for(;127<t;)e.h.push(127&t|128),t>>>=7;e.h.push(t)}function Ie(e,t){if(ge.length){var i=ge.pop();fe(i,e,t),e=i}else e=new he(e,t);this.h=e,this.j=this.h.h,this.i=this.l=-1,this.setOptions(t)}function ye(e){var t=e.h;if(t.h==t.j)return!1;e.j=e.h.h;var i=_e(e.h)>>>0;if(t=i>>>3,!(0<=(i&=7)&&5>=i))throw Z(i,e.j);if(1>t)throw Error("Invalid field number: "+t+" (at position "+e.j+")");return e.l=t,e.i=i,!0}function ve(e){switch(e.i){case 0:if(0!=e.i)ve(e);else e:{for(var t=(e=e.h).h,i=t+10,n=e.i;t<i;)if(0==(128&n[t++])){pe(e,t);break e}throw X()}break;case 1:pe(e=e.h,e.h+8);break;case 2:2!=e.i?ve(e):(t=_e(e.h)>>>0,pe(e=e.h,e.h+t));break;case 5:pe(e=e.h,e.h+4);break;case 3:for(t=e.l;;){if(!ye(e))throw Error("Unmatched start-group tag: stream EOF");if(4==e.i){if(e.l!=t)throw Error("Unmatched end-group tag");break}ve(e)}break;default:throw Z(e.i,e.j)}}me.prototype.length=function(){return this.h.length},me.prototype.end=function(){var e=this.h;return this.h=[],e},Ie.prototype.setOptions=function(e){e=void 0===e?{}:e,this.ca=void 0!==e.ca&&e.ca},Ie.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};var we=[];function Ee(){this.j=[],this.i=0,this.h=new me}function be(e,t){0!==t.length&&(e.j.push(t),e.i+=t.length)}var De="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol():void 0;function Me(e,t){return De?e[De]|=t:void 0!==e.A?e.A|=t:(Object.defineProperties(e,{A:{value:t,configurable:!0,writable:!0,enumerable:!1}}),t)}function Pe(e,t){De?e[De]&&(e[De]&=~t):void 0!==e.A&&(e.A&=~t)}function xe(e){var t;return null==(t=De?e[De]:e.A)?0:t}function Te(e,t){De?e[De]=t:void 0!==e.A?e.A=t:Object.defineProperties(e,{A:{value:t,configurable:!0,writable:!0,enumerable:!1}})}function Ae(e){return Me(e,1),e}function Oe(e,t){Te(t,-51&(0|e))}function Ve(e,t){Te(t,-41&(18|e))}var ke={};function Ne(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)&&e.constructor===Object}var Le,Ue,Be=[];function Fe(e){if(2&xe(e.o))throw Error("Cannot mutate an immutable Message")}function je(e){var t=e.length;(t=t?e[t-1]:void 0)&&Ne(t)?t.g=1:(t={},e.push((t.g=1,t)))}function $e(e){var t=e.i+e.G;return e.B||(e.B=e.o[t]={})}function He(e,t){return-1===t?null:t>=e.i?e.B?e.B[t]:void 0:e.o[t+e.G]}function qe(e,t,i,n){Fe(e),Ke(e,t,i,n)}function Ke(e,t,i,n){e.j&&(e.j=void 0),t>=e.i||n?$e(e)[t]=i:(e.o[t+e.G]=i,(e=e.B)&&t in e&&delete e[t])}function We(e,t,i,n){var r=He(e,t);Array.isArray(r)||(r=Le);var o=xe(r);if(1&o||Ae(r),n)2&o||Me(r,2),1&i||Object.freeze(r);else{n=!(2&i);var s=2&o;1&i||!s?n&&16&o&&!s&&Pe(r,16):Ke(e,t,r=Ae(Array.prototype.slice.call(r)))}return r}function Ge(e,t){var i=He(e,t),n=null==i?i:"number"==typeof i||"NaN"===i||"Infinity"===i||"-Infinity"===i?Number(i):void 0;return null!=n&&n!==i&&Ke(e,t,n),n}function ze(e,t,i,n,r){e.h||(e.h={});var o=e.h[i],s=We(e,i,3,r);if(!o){var a=s;o=[];var c=!!(16&xe(e.o));s=!!(2&xe(a));var l=a;!r&&s&&(a=Array.prototype.slice.call(a));for(var d=s,u=0;u<a.length;u++){var h=a[u],f=t,p=!1;if(p=void 0!==p&&p,void 0!==(h=Array.isArray(h)?new f(h):p?new f:void 0)){var _=p=xe(f=h.o);s&&(_|=2),c&&(_|=16),_!=p&&Te(f,_),f=_,d=d||!!(2&f),o.push(h)}}return e.h[i]=o,t=33|(c=xe(a)),c!=(t=d?-9&t:8|t)&&(d=a,Object.isFrozen(d)&&(d=Array.prototype.slice.call(d)),Te(d,t),a=d),l!==a&&Ke(e,i,a),(r||n&&s)&&Me(o,2),n&&Object.freeze(o),o}return r||(r=Object.isFrozen(o),n&&!r?Object.freeze(o):!n&&r&&(o=Array.prototype.slice.call(o),e.h[i]=o)),o}function Je(e,t,i){var n=!!(2&xe(e.o));if(t=ze(e,t,i,n,n),e=We(e,i,3,n),!(n||8&xe(e))){for(n=0;n<t.length;n++){if(2&xe((i=t[n]).o)){var r=at(i,!1);r.j=i}else r=i;i!==r&&(t[n]=r,e[n]=r.o)}Me(e,8)}return t}function Qe(e,t,i){if(null!=i&&"number"!=typeof i)throw Error("Value of float/double field must be a number|null|undefined, found "+typeof i+": "+i);qe(e,t,i)}function Ze(e,t,i,n,r){Fe(e);var o=ze(e,i,t,!1,!1);return i=null!=n?n:new i,e=We(e,t,2,!1),null!=r?(o.splice(r,0,i),e.splice(r,0,i.o)):(o.push(i),e.push(i.o)),i.C()&&Pe(e,8),i}function Xe(e,t){return null==e?t:e}function Ye(e,t,i){return i=void 0===i?0:i,Xe(Ge(e,t),i)}function et(e,t,i,n){if(null!=e){if(Array.isArray(e))e=tt(e,t,i,void 0!==n);else if(Ne(e)){var r,o={};for(r in e)o[r]=et(e[r],t,i,n);e=o}else e=t(e,n);return e}}function tt(e,t,i,n){var r=xe(e);n=n?!!(16&r):void 0,e=Array.prototype.slice.call(e);for(var o=0;o<e.length;o++)e[o]=et(e[o],t,i,n);return i(r,e),e}function it(e){return e.ja===ke?e.toJSON():function(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"object":if(e)if(Array.isArray(e)){if(0!=(128&xe(e)))return je(e=Array.prototype.slice.call(e)),e}else{if(O&&null!=e&&e instanceof Uint8Array)return k(e);if(e instanceof le){var t=e.V;return null==t?"":"string"==typeof t?t:e.V=k(t)}}}return e}(e)}function nt(e,t){128&e&&je(t)}function rt(e,t,i){if(i=void 0===i?Ve:i,null!=e){if(O&&e instanceof Uint8Array)return e.length?new le(new Uint8Array(e),j):de();if(Array.isArray(e)){var n=xe(e);return 2&n?e:!t||32&n||!(16&n||0===n)?(4&(t=xe(e=tt(e,rt,4&n?Ve:i,!0)))&&2&t&&Object.freeze(e),e):(Te(e,2|n),e)}return e.ja===ke?st(e):e}}function ot(e,t,i,n,r,o,s){if(e=e.h&&e.h[i]){if(2&(n=xe(e))?n=e:(Ve(n,o=M(e,st)),Object.freeze(o),n=o),Fe(t),s=null==n?Le:Ae([]),null!=n){for(o=!!n.length,e=0;e<n.length;e++){var a=n[e];o=o&&!(2&xe(a.o)),s[e]=a.o}o=1|(o?8:0),((e=xe(s))&o)!==o&&(Object.isFrozen(s)&&(s=Array.prototype.slice.call(s)),Te(s,e|o)),t.h||(t.h={}),t.h[i]=n}else t.h&&(t.h[i]=void 0);Ke(t,i,s,r)}else qe(t,i,rt(n,o,s),r)}function st(e){return 2&xe(e.o)||Me((e=at(e,!0)).o,2),e}function at(e,t){var i=e.o,n=[];Me(n,16);var r=e.constructor.h;if(r&&n.push(r),r=e.B){n.length=i.length,n.fill(void 0,n.length,i.length);var o={};n[n.length-1]=o}0!=(128&xe(i))&&je(n),t=t||e.C()?Ve:Oe,o=e.constructor,Ue=n,n=new o(n),Ue=void 0,e.R&&(n.R=e.R.slice()),o=!!(16&xe(i));for(var s=r?i.length-1:i.length,a=0;a<s;a++)ot(e,n,a-e.G,i[a],!1,o,t);if(r)for(var c in r)ot(e,n,+c,r[c],!0,o,t);return n}function ct(e,t,i){null==e&&(e=Ue),Ue=void 0;var n,r=this.constructor.i||0,o=0<r,s=this.constructor.h,a=!1;if(null==e){var c=48,l=!0;o&&(r=0,c|=128),Te(e=s?[s]:[],c)}else{if(!Array.isArray(e))throw Error();if(s&&s!==e[0])throw Error();var d=c=Me(e,0);if((l=0!=(16&d))&&((a=0!=(32&d))||(d|=32)),o){if(128&d)r=0;else if(0<e.length){var u=e[e.length-1];if(Ne(u)&&"g"in u){r=0,d|=128,delete u.g;var h,f=!0;for(h in u){f=!1;break}f&&e.pop()}}}else if(128&d)throw Error();c!==d&&Te(e,d)}if(this.G=(s?0:-1)-r,this.h=void 0,this.o=e,r=(s=this.o.length)-1,s&&Ne(s=this.o[r])?(this.B=s,this.i=r-this.G):void 0!==t&&-1<t?(this.i=Math.max(t,r+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE,!o&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(i)for(t=l&&!a&&!0,o=this.i,l=0;l<i.length;l++)(a=i[l])<o?(r=e[a+=this.G])?lt(r,t):e[a]=Le:(n||(n=$e(this)),(r=n[a])?lt(r,t):n[a]=Le)}function lt(e,t){if(Array.isArray(e)){var i=xe(e),n=1;!t||2&i||(n|=16),(i&n)!==n&&Te(e,i|n)}}function dt(e,t,i){if(i){var n,r={};for(n in i){var o=i[n],s=o.ra;s||(r.J=o.xa||o.oa.W,o.ia?(r.aa=mt(o.ia),s=function(e){return function(t,i,n){return e.J(t,i,n,e.aa)}}(r)):o.ka?(r.Z=Rt(o.da.P,o.ka),s=function(e){return function(t,i,n){return e.J(t,i,n,e.Z)}}(r)):s=r.J,o.ra=s),s(t,e,o.da),r={J:r.J,aa:r.aa,Z:r.Z}}}!function(e,t){if(t=t.R){be(e,e.h.end());for(var i=0;i<t.length;i++)be(e,ue(t[i])||F())}}(t,e)}Te(Be,23),Le=Object.freeze(Be),ct.prototype.toJSON=function(){return tt(this.o,it,nt)},ct.prototype.C=function(){return!!(2&xe(this.o))},ct.prototype.ja=ke,ct.prototype.toString=function(){return this.o.toString()};var ut=Symbol();function ht(e,t,i){return e[ut]||(e[ut]=function(e,n){return t(e,n,i)})}function ft(e){var t=e[ut];if(!t){var i=Tt(e);t=function(e,t){return At(e,t,i)},e[ut]=t}return t}function pt(e){var t=function(e){var t=e.ia;return t?ft(t):(t=e.wa)?ht(e.da.P,t,e.ka):void 0}(e),i=e.da,n=e.oa.U;return t?function(e,r){return n(e,r,i,t)}:function(e,t){return n(e,t,i)}}function _t(e,t){var i=e[t];return"function"==typeof i&&0===i.length&&(i=i(),e[t]=i),Array.isArray(i)&&(bt in i||St in i||0<i.length&&"function"==typeof i[0])?i:void 0}function Ct(e,t,i,n,r,o){t.P=e[0];var s=1;if(e.length>s&&"number"!=typeof e[s]){var a=e[s++];i(t,a)}for(;s<e.length;){i=e[s++];for(var c=s+1;c<e.length&&"number"!=typeof e[c];)c++;switch(a=e[s++],c-=s){case 0:n(t,i,a);break;case 1:(c=_t(e,s))?(s++,r(t,i,a,c)):n(t,i,a,e[s++]);break;case 2:r(t,i,a,c=_t(e,c=s++),e[s++]);break;case 3:o(t,i,a,e[s++],e[s++],e[s++]);break;case 4:o(t,i,a,e[s++],e[s++],e[s++],e[s++]);break;default:throw Error("unexpected number of binary field arguments: "+c)}}return t}var gt=Symbol();function mt(e){var t=e[gt];if(!t){var i=Et(e);t=function(e,t){return Ot(e,t,i)},e[gt]=t}return t}function Rt(e,t){var i=e[gt];return i||(i=function(e,i){return dt(e,i,t)},e[gt]=i),i}var St=Symbol();function It(e,t){e.push(t)}function yt(e,t,i){e.push(t,i.W)}function vt(e,t,i,n){var r=mt(n),o=Et(n).P,s=i.W;e.push(t,(function(e,t,i){return s(e,t,i,o,r)}))}function wt(e,t,i,n,r,o){var s=Rt(n,o),a=i.W;e.push(t,(function(e,t,i){return a(e,t,i,n,s)}))}function Et(e){var t=e[St];return t||(t=Ct(e,e[St]=[],It,yt,vt,wt),bt in e&&St in e&&(e.length=0),t)}var bt=Symbol();function Dt(e,t){e[0]=t}function Mt(e,t,i,n){var r=i.U;e[t]=n?function(e,t,i){return r(e,t,i,n)}:r}function Pt(e,t,i,n,r){var o=i.U,s=ft(n),a=Tt(n).P;e[t]=function(e,t,i){return o(e,t,i,a,s,r)}}function xt(e,t,i,n,r,o,s){var a=i.U,c=ht(n,r,o);e[t]=function(e,t,i){return a(e,t,i,n,c,s)}}function Tt(e){var t=e[bt];return t||(t=Ct(e,e[bt]={},Dt,Mt,Pt,xt),bt in e&&St in e&&(e.length=0),t)}function At(e,t,i){for(;ye(t)&&4!=t.i;){var n=t.l,r=i[n];if(!r){var o=i[0];o&&(o=o[n])&&(r=i[n]=pt(o))}if(!r||!r(t,e,n)){n=e,o=(r=t).j,ve(r);var s=r;if(!s.ca){if(r=s.h.h-o,s.h.h=o,s=s.h,0==r)r=de();else{if(o=Ce(s,r),s.S&&s.m)r=s.i.subarray(o,o+r);else{s=s.i;var a=o;r=a===(r=o+r)?F():$?s.slice(a,r):new Uint8Array(s.subarray(a,r))}r=0==r.length?de():new le(r,j)}(o=n.R)?o.push(r):n.R=[r]}}}return e}function Ot(e,t,i){for(var n=i.length,r=1==n%2,o=r?1:0;o<n;o+=2)(0,i[o+1])(t,e,i[o]);dt(e,t,r?i[0]:void 0)}function Vt(e,t){return{U:e,W:t}}var kt=Vt((function(e,t,i){if(5!==e.i)return!1;var n=(e=e.h).i,r=e.h,o=n[r],s=n[r+1],a=n[r+2];return n=n[r+3],pe(e,e.h+4),e=2*((s=(o<<0|s<<8|a<<16|n<<24)>>>0)>>31)+1,o=s>>>23&255,s&=8388607,qe(t,i,255==o?s?NaN:1/0*e:0==o?e*Math.pow(2,-149)*s:e*Math.pow(2,o-150)*(s+Math.pow(2,23))),!0}),(function(e,t,i){if(null!=(t=Ge(t,i))){Se(e.h,8*i+5),e=e.h;var n=+t;0===n?0<1/n?H=q=0:(q=0,H=2147483648):isNaN(n)?(q=0,H=2147483647):34028234663852886e22<(n=(i=0>n?-2147483648:0)?-n:n)?(q=0,H=(2139095040|i)>>>0):11754943508222875e-54>n?(n=Math.round(n/Math.pow(2,-149)),q=0,H=(i|n)>>>0):(t=Math.floor(Math.log(n)/Math.LN2),n*=Math.pow(2,-t),16777216<=(n=Math.round(8388608*n))&&++t,q=0,H=(i|t+127<<23|8388607&n)>>>0),i=H,e.h.push(i>>>0&255),e.h.push(i>>>8&255),e.h.push(i>>>16&255),e.h.push(i>>>24&255)}})),Nt=Vt((function(e,t,i){if(0!==e.i)return!1;var n=e.h,r=0,o=e=0,s=n.i,a=n.h;do{var c=s[a++];r|=(127&c)<<o,o+=7}while(32>o&&128&c);for(32<o&&(e|=(127&c)>>4),o=3;32>o&&128&c;o+=7)e|=(127&(c=s[a++]))<<o;if(pe(n,a),!(128>c))throw X();return n=r>>>0,(e=2147483648&(c=e>>>0))&&(c=~c>>>0,0==(n=1+~n>>>0)&&(c=c+1>>>0)),n=4294967296*c+(n>>>0),qe(t,i,e?-n:n),!0}),(function(e,t,i){null!=(t=He(t,i))&&("string"==typeof t&&Q(t),null!=t&&(Se(e.h,8*i),"number"==typeof t?(e=e.h,K(t),Re(e,H,q)):(i=Q(t),Re(e.h,i.i,i.h))))})),Lt=Vt((function(e,t,i){return 0===e.i&&(qe(t,i,_e(e.h)),!0)}),(function(e,t,i){if(null!=(t=He(t,i))&&null!=t)if(Se(e.h,8*i),e=e.h,0<=(i=t))Se(e,i);else{for(t=0;9>t;t++)e.h.push(127&i|128),i>>=7;e.h.push(1)}})),Ut=Vt((function(e,t,i){if(2!==e.i)return!1;var n=_e(e.h)>>>0,r=Ce(e=e.h,n);if(e=e.i,se){var o,s=e;(o=ie)||(o=ie=new TextDecoder("utf-8",{fatal:!0})),e=r+n,s=0===r&&e===s.length?s:s.subarray(r,e);try{var a=o.decode(s)}catch(e){if(void 0===oe){try{o.decode(new Uint8Array([128]))}catch(e){}try{o.decode(new Uint8Array([97])),oe=!0}catch(e){oe=!1}}throw!oe&&(ie=void 0),e}}else{n=(a=r)+n,r=[];for(var c,l,d=null;a<n;)128>(c=e[a++])?r.push(c):224>c?a>=n?ee():(l=e[a++],194>c||128!=(192&l)?(a--,ee()):r.push((31&c)<<6|63&l)):240>c?a>=n-1?ee():128!=(192&(l=e[a++]))||224===c&&160>l||237===c&&160<=l||128!=(192&(s=e[a++]))?(a--,ee()):r.push((15&c)<<12|(63&l)<<6|63&s):244>=c?a>=n-2?ee():128!=(192&(l=e[a++]))||0!=l-144+(c<<28)>>30||128!=(192&(s=e[a++]))||128!=(192&(o=e[a++]))?(a--,ee()):(c=(7&c)<<18|(63&l)<<12|(63&s)<<6|63&o,c-=65536,r.push(55296+(c>>10&1023),56320+(1023&c))):ee(),8192<=r.length&&(d=te(d,r),r.length=0);a=te(d,r)}return qe(t,i,a),!0}),(function(e,t,i){if(null!=(t=He(t,i))){var n=!1;if(n=void 0!==n&&n,ae){if(n&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(t))throw Error("Found an unpaired surrogate");t=(ne||(ne=new TextEncoder)).encode(t)}else{for(var r=0,o=new Uint8Array(3*t.length),s=0;s<t.length;s++){var a=t.charCodeAt(s);if(128>a)o[r++]=a;else{if(2048>a)o[r++]=a>>6|192;else{if(55296<=a&&57343>=a){if(56319>=a&&s<t.length){var c=t.charCodeAt(++s);if(56320<=c&&57343>=c){a=1024*(a-55296)+c-56320+65536,o[r++]=a>>18|240,o[r++]=a>>12&63|128,o[r++]=a>>6&63|128,o[r++]=63&a|128;continue}s--}if(n)throw Error("Found an unpaired surrogate");a=65533}o[r++]=a>>12|224,o[r++]=a>>6&63|128}o[r++]=63&a|128}}t=r===o.length?o:o.subarray(0,r)}Se(e.h,8*i+2),Se(e.h,t.length),be(e,e.h.end()),be(e,t)}})),Bt=Vt((function(e,t,i,n,r){if(2!==e.i)return!1;t=Ze(t,i,n),i=e.h.j,n=_e(e.h)>>>0;var o=e.h.h+n,s=o-i;if(0>=s&&(e.h.j=o,r(t,e,void 0,void 0,void 0),s=o-e.h.h),s)throw Error("Message parsing ended unexpectedly. Expected to read "+n+" bytes, instead read "+(n-s)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.h.h=o,e.h.j=i,!0}),(function(e,t,i,n,r){if(null!=(t=Je(t,n,i)))for(n=0;n<t.length;n++){var o=e;Se(o.h,8*i+2);var s=o.h.end();be(o,s),s.push(o.i),o=s,r(t[n],e),s=e;var a=o.pop();for(a=s.i+s.h.length()-a;127<a;)o.push(127&a|128),a>>>=7,s.i++;o.push(a),s.i++}}));function Ft(e){return function(t,i){e:{if(we.length){var n=we.pop();n.setOptions(i),fe(n.h,t,i),t=n}else t=new Ie(t,i);try{var r=Tt(e),o=At(new r.P,t,r);break e}finally{(r=t.h).i=null,r.m=!1,r.l=0,r.j=0,r.h=0,r.S=!1,t.l=-1,t.i=-1,100>we.length&&we.push(t)}o=void 0}return o}}function jt(e){return function(){var t=new Ee;Ot(this,t,Et(e)),be(t,t.h.end());for(var i=new Uint8Array(t.i),n=t.j,r=n.length,o=0,s=0;s<r;s++){var a=n[s];i.set(a,o),o+=a.length}return t.j=[i],i}}function $t(e){ct.call(this,e)}p($t,ct);var Ht=[$t,1,Lt,2,kt,3,Ut,4,Ut];function qt(e){ct.call(this,e,-1,Kt)}$t.prototype.l=jt(Ht),p(qt,ct),qt.prototype.addClassification=function(e,t){return Ze(this,1,$t,e,t),this};var Kt=[1],Wt=Ft([qt,1,Bt,Ht]);function Gt(e){ct.call(this,e)}p(Gt,ct);var zt=[Gt,1,kt,2,kt,3,kt,4,kt,5,kt];function Jt(e){ct.call(this,e,-1,Qt)}Gt.prototype.l=jt(zt),p(Jt,ct);var Qt=[1],Zt=Ft([Jt,1,Bt,zt]);function Xt(e){ct.call(this,e)}p(Xt,ct);var Yt=[Xt,1,kt,2,kt,3,kt,4,kt,5,kt,6,Nt],ei=Ft(Yt);function ti(e,t,i){if(i=e.createShader(0===i?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(i));return i}function ii(e){return Je(e,$t,1).map((function(e){var t=He(e,1);return{index:null==t?0:t,qa:Ye(e,2),label:null!=He(e,3)?Xe(He(e,3),""):void 0,displayName:null!=He(e,4)?Xe(He(e,4),""):void 0}}))}function ni(e){return{x:Ye(e,1),y:Ye(e,2),z:Ye(e,3),visibility:null!=Ge(e,4)?Ye(e,4):void 0}}function ri(e,t){this.i=e,this.h=t,this.m=0}function oi(e,t,i){return function(e,t){var i=e.h;if(void 0===e.s){var n=ti(i,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),r=ti(i,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=i.createProgram();if(i.attachShader(o,n),i.attachShader(o,r),i.linkProgram(o),!i.getProgramParameter(o,i.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+i.getProgramInfoLog(o));n=e.s=o,i.useProgram(n),r=i.getUniformLocation(n,"sampler0"),e.l={O:i.getAttribLocation(n,"aVertex"),N:i.getAttribLocation(n,"aTex"),ya:r},e.v=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,e.v),i.enableVertexAttribArray(e.l.O),i.vertexAttribPointer(e.l.O,2,i.FLOAT,!1,0,0),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,null),e.u=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,e.u),i.enableVertexAttribArray(e.l.N),i.vertexAttribPointer(e.l.N,2,i.FLOAT,!1,0,0),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,null),i.uniform1i(r,0)}n=e.l,i.useProgram(e.s),i.canvas.width=t.width,i.canvas.height=t.height,i.viewport(0,0,t.width,t.height),i.activeTexture(i.TEXTURE0),e.i.bindTexture2d(t.glName),i.enableVertexAttribArray(n.O),i.bindBuffer(i.ARRAY_BUFFER,e.v),i.vertexAttribPointer(n.O,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(n.N),i.bindBuffer(i.ARRAY_BUFFER,e.u),i.vertexAttribPointer(n.N,2,i.FLOAT,!1,0,0),i.bindFramebuffer(i.DRAW_FRAMEBUFFER?i.DRAW_FRAMEBUFFER:i.FRAMEBUFFER,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.colorMask(!0,!0,!0,!0),i.drawArrays(i.TRIANGLE_FAN,0,4),i.disableVertexAttribArray(n.O),i.disableVertexAttribArray(n.N),i.bindBuffer(i.ARRAY_BUFFER,null),e.i.bindTexture2d(0)}(e,t),"function"==typeof e.h.canvas.transferToImageBitmap?Promise.resolve(e.h.canvas.transferToImageBitmap()):i?Promise.resolve(e.h.canvas):"function"==typeof createImageBitmap?createImageBitmap(e.h.canvas):(void 0===e.j&&(e.j=document.createElement("canvas")),new Promise((function(t){e.j.height=e.h.canvas.height,e.j.width=e.h.canvas.width,e.j.getContext("2d",{}).drawImage(e.h.canvas,0,0,e.h.canvas.width,e.h.canvas.height),t(e.j)})))}function si(e){this.h=e}Xt.prototype.l=jt(Yt);var ai=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function ci(e,t){return t+e}function li(e,t){window[e]=t}function di(e){if(this.h=e,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=e&&e.locateFile||ci,"object"==typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.ha=t,e.options)for(var i=(t=s(Object.keys(e.options))).next();!i.done;i=t.next()){i=i.value;var n=e.options[i].default;void 0!==n&&(this.l[i]="function"==typeof n?n():n)}}function ui(e){var t,i,n,r,o,s,c,l,d,u,h;return v((function(f){switch(f.h){case 1:return e.ga?(t=void 0===e.h.files?[]:"function"==typeof e.h.files?e.h.files(e.l):e.h.files,m(f,v((function(e){switch(e.h){case 1:return e.s=2,m(e,WebAssembly.instantiate(ai),4);case 4:e.h=3,e.s=0;break;case 2:return e.s=0,e.l=null,e.return(!1);case 3:return e.return(!0)}})),2)):f.return();case 2:if(i=f.i,"object"==typeof window)return li("createMediapipeSolutionsWasm",{locateFile:e.locateFile}),li("createMediapipeSolutionsPackedAssets",{locateFile:e.locateFile}),s=t.filter((function(e){return void 0!==e.data})),c=t.filter((function(e){return void 0===e.data})),l=Promise.all(s.map((function(t){var i=hi(e,t.url);if(void 0!==t.path){var n=t.path;i=i.then((function(t){return e.overrideFile(n,t),Promise.resolve(t)}))}return i}))),d=Promise.all(c.map((function(t){return void 0===t.simd||t.simd&&i||!t.simd&&!i?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise((function(e){t.addEventListener("load",(function(){e()}),!1),t.addEventListener("error",(function(){e()}),!1),document.body.appendChild(t)}))}(e.locateFile(t.url,e.ha)):Promise.resolve()}))).then((function(){var t,i,n;return v((function(r){if(1==r.h)return t=window.createMediapipeSolutionsWasm,i=window.createMediapipeSolutionsPackedAssets,n=e,m(r,t(i),2);n.i=r.i,r.h=0}))})),u=v((function(t){return e.h.graph&&e.h.graph.url?t=m(t,hi(e,e.h.graph.url),0):(t.h=0,t=void 0),t})),m(f,Promise.all([d,l,u]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return n=t.filter((function(e){return void 0===e.simd||e.simd&&i||!e.simd&&!i})).map((function(t){return e.locateFile(t.url,e.ha)})),importScripts.apply(null,a(n)),r=e,m(f,createMediapipeSolutionsWasm(Module),6);case 6:r.i=f.i,e.m=new OffscreenCanvas(1,1),e.i.canvas=e.m,o=e.i.GL.createContext(e.m,{antialias:!1,alpha:!1,va:"undefined"!=typeof WebGL2RenderingContext?2:1}),e.i.GL.makeContextCurrent(o),f.h=4;break;case 7:if(e.m=document.createElement("canvas"),!(h=e.m.getContext("webgl2",{}))&&!(h=e.m.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),f.return();e.K=h,e.i.canvas=e.m,e.i.createContext(e.m,!0,!0,{});case 4:e.j=new e.i.SolutionWasm,e.ga=!1,f.h=0}}))}function hi(e,t){var i,n;return v((function(r){return t in e.L?r.return(e.L[t]):(i=e.locateFile(t,""),n=fetch(i).then((function(e){return e.arrayBuffer()})),e.L[t]=n,r.return(n))}))}function fi(e,t,i){var n,r,o,a,c,l,d,u,h,f,p,_,C,g;return v((function(R){switch(R.h){case 1:if(!i)return R.return(t);for(n={},r=0,o=s(Object.keys(i)),a=o.next();!a.done;a=o.next())c=a.value,"string"!=typeof(l=i[c])&&"texture"===l.type&&void 0!==t[l.stream]&&++r;1<r&&(e.M=!1),d=s(Object.keys(i)),a=d.next();case 2:if(a.done){R.h=4;break}if(u=a.value,"string"==typeof(h=i[u]))return C=n,g=u,m(R,function(e,t,i){var n;return v((function(r){return"number"==typeof i||i instanceof Uint8Array||i instanceof e.i.Uint8BlobList?r.return(i):i instanceof e.i.Texture2dDataOut?((n=e.v[t])||(n=new ri(e.i,e.K),e.v[t]=n),r.return(oi(n,i,e.M))):r.return(void 0)}))}(e,u,t[h]),14);if(f=t[h.stream],"detection_list"===h.type){if(f){for(var S=f.getRectList(),I=f.getLandmarksList(),y=f.getClassificationsList(),w=[],E=0;E<S.size();++E){var b=ei(S.get(E)),D=void 0;D=void 0===D?0:D,b={la:{sa:Ye(b,1),ta:Ye(b,2),height:Ye(b,3),width:Ye(b,4),rotation:Ye(b,5,0),pa:Xe(He(b,6),D)},ea:Je(Zt(I.get(E)),Gt,1).map(ni),ba:ii(Wt(y.get(E)))},w.push(b)}S=w}else S=[];n[u]=S,R.h=7;break}if("proto_list"===h.type){if(f){for(S=Array(f.size()),I=0;I<f.size();I++)S[I]=f.get(I);f.delete()}else S=[];n[u]=S,R.h=7;break}if(void 0===f){R.h=3;break}if("float_list"===h.type){n[u]=f,R.h=7;break}if("proto"===h.type){n[u]=f,R.h=7;break}if("texture"!==h.type)throw Error("Unknown output config type: '"+h.type+"'");return(p=e.v[u])||(p=new ri(e.i,e.K),e.v[u]=p),m(R,oi(p,f,e.M),13);case 13:_=R.i,n[u]=_;case 7:h.transform&&n[u]&&(n[u]=h.transform(n[u])),R.h=3;break;case 14:C[g]=R.i;case 3:a=d.next(),R.h=2;break;case 4:return R.return(n)}}))}function pi(e,t){for(var i=t.name||"$",n=[].concat(a(t.wants)),r=new e.i.StringList,o=s(t.wants),c=o.next();!c.done;c=o.next())r.push_back(c.value);o=e.i.PacketListener.implement({onResults:function(r){for(var o={},s=0;s<t.wants.length;++s)o[n[s]]=r.get(s);var a=e.listeners[i];a&&(e.I=fi(e,o,t.outs).then((function(i){i=a(i);for(var r=0;r<t.wants.length;++r){var s=o[n[r]];"object"==typeof s&&s.hasOwnProperty&&s.hasOwnProperty("delete")&&s.delete()}i&&(e.I=i)})))}}),e.j.attachMultiListener(r,o),r.delete()}function _i(e){return void 0===e&&(e=0),1===e?"selfie_segmentation_landscape.tflite":"selfie_segmentation.tflite"}function Ci(e){var t=this;e=e||{},this.h=new di({locateFile:e.locateFile,files:function(e){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:_i(e.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"==typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(e){var i,n,r;return v((function(o){return 1==o.h?(i=_i(e),n="third_party/mediapipe/modules/selfie_segmentation/"+i,m(o,hi(t.h,i),2)):(r=o.i,t.h.overrideFile(n,r),o.return(!0))}))}}}})}(e=di.prototype).close=function(){return this.j&&this.j.delete(),Promise.resolve()},e.reset=function(){var e=this;return v((function(t){e.j&&(e.j.reset(),e.s={},e.v={}),t.h=0}))},e.setOptions=function(e,t){var i=this;if(t=t||this.h.options){for(var n=[],r=[],o={},a=s(Object.keys(e)),c=a.next();!c.done;o={X:o.X,Y:o.Y},c=a.next())if(!((c=c.value)in this.l)||this.l[c]!==e[c]){this.l[c]=e[c];var l=t[c];void 0!==l&&(l.onChange&&(o.X=l.onChange,o.Y=e[c],n.push(function(e){return function(){return v((function(t){if(1==t.h)return m(t,e.X(e.Y),2);!0===t.i&&(i.u=!0),t.h=0}))}}(o))),l.graphOptionXref&&(c=Object.assign({},{calculatorName:"",calculatorIndex:0},l.graphOptionXref,{valueNumber:1===l.type?e[c]:0,valueBoolean:0===l.type&&e[c],valueString:2===l.type?e[c]:""}),r.push(c)))}0===n.length&&0===r.length||(this.u=!0,this.H=(void 0===this.H?[]:this.H).concat(r),this.F=(void 0===this.F?[]:this.F).concat(n))}},e.initialize=function(){var e=this;return v((function(t){return 1==t.h?m(t,ui(e),2):3!=t.h?m(t,function(e){var t,i,n,r,o,a,c,l;return v((function(d){if(1==d.h)return e.h.graph&&e.h.graph.url&&e.fa===e.h.graph.url?d.return():(e.u=!0,e.h.graph&&e.h.graph.url?(e.fa=e.h.graph.url,m(d,hi(e,e.h.graph.url),3)):void(d.h=2));for(2!=d.h&&(t=d.i,e.j.loadGraph(t)),i=s(Object.keys(e.D)),n=i.next();!n.done;n=i.next())r=n.value,e.j.overrideFile(r,e.D[r]);if(e.D={},e.h.listeners)for(o=s(e.h.listeners),a=o.next();!a.done;a=o.next())c=a.value,pi(e,c);l=e.l,e.l={},e.setOptions(l),d.h=0}))}(e),3):m(t,function(e){var t,i,n,r,o,a;return v((function(c){switch(c.h){case 1:if(!e.u)return c.return();if(!e.F){c.h=2;break}t=s(e.F),i=t.next();case 3:if(i.done){c.h=5;break}return m(c,(0,i.value)(),4);case 4:i=t.next(),c.h=3;break;case 5:e.F=void 0;case 2:if(e.H){for(n=new e.i.GraphOptionChangeRequestList,r=s(e.H),o=r.next();!o.done;o=r.next())a=o.value,n.push_back(a);e.j.changeOptions(n),n.delete(),e.H=void 0}e.u=!1,c.h=0}}))}(e),0)}))},e.overrideFile=function(e,t){this.j?this.j.overrideFile(e,t):this.D[e]=t},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(e,t){var i,n,r,o,a,c,l,d,u,h=this;return v((function(f){switch(f.h){case 1:return h.h.inputs?(i=1e3*(null==t?performance.now():t),m(f,h.I,2)):f.return();case 2:return m(f,h.initialize(),3);case 3:for(n=new h.i.PacketDataList,r=s(Object.keys(e)),o=r.next();!o.done;o=r.next())if(a=o.value,c=h.h.inputs[a]){e:{var p=e[a];switch(c.type){case"video":var _=h.s[c.stream];if(_||(_=new ri(h.i,h.K),h.s[c.stream]=_),0===_.m&&(_.m=_.i.createTexture()),"undefined"!=typeof HTMLVideoElement&&p instanceof HTMLVideoElement)var C=p.videoWidth,g=p.videoHeight;else"undefined"!=typeof HTMLImageElement&&p instanceof HTMLImageElement?(C=p.naturalWidth,g=p.naturalHeight):(C=p.width,g=p.height);g={glName:_.m,width:C,height:g},(C=_.h).canvas.width=g.width,C.canvas.height=g.height,C.activeTexture(C.TEXTURE0),_.i.bindTexture2d(_.m),C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,p),_.i.bindTexture2d(0),_=g;break e;case"detections":for((_=h.s[c.stream])||(_=new si(h.i),h.s[c.stream]=_),_.data||(_.data=new _.h.DetectionListData),_.data.reset(p.length),g=0;g<p.length;++g){C=p[g];var R=_.data,S=R.setBoundingBox,I=g,y=C.la,v=new Xt;if(Qe(v,1,y.sa),Qe(v,2,y.ta),Qe(v,3,y.height),Qe(v,4,y.width),Qe(v,5,y.rotation),qe(v,6,y.pa),y=v.l(),S.call(R,I,y),C.ea)for(R=0;R<C.ea.length;++R){v=C.ea[R],I=(S=_.data).addNormalizedLandmark,y=g,v=Object.assign({},v,{visibility:v.visibility?v.visibility:0});var w=new Gt;Qe(w,1,v.x),Qe(w,2,v.y),Qe(w,3,v.z),v.visibility&&Qe(w,4,v.visibility),v=w.l(),I.call(S,y,v)}if(C.ba)for(R=0;R<C.ba.length;++R)I=(S=_.data).addClassification,y=g,v=C.ba[R],Qe(w=new $t,2,v.qa),v.index&&qe(w,1,v.index),v.label&&qe(w,3,v.label),v.displayName&&qe(w,4,v.displayName),v=w.l(),I.call(S,y,v)}_=_.data;break e;default:_={}}}switch(l=_,d=c.stream,c.type){case"video":n.pushTexture2d(Object.assign({},l,{stream:d,timestamp:i}));break;case"detections":(u=l).stream=d,u.timestamp=i,n.pushDetectionList(u);break;default:throw Error("Unknown input config type: '"+c.type+"'")}}return h.j.send(n),m(f,h.I,4);case 4:n.delete(),f.h=0}}))},e.onResults=function(e,t){this.listeners[t||"$"]=e},b("Solution",di),b("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=Ci.prototype).close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(e){this.h.onResults(e)},e.initialize=function(){var e=this;return v((function(t){return m(t,e.h.initialize(),0)}))},e.reset=function(){this.h.reset()},e.send=function(e){var t=this;return v((function(i){return m(i,t.h.send(e),0)}))},e.setOptions=function(e){this.h.setOptions(e)},b("SelfieSegmentation",Ci),b("VERSION","0.1.1675465747")}).call(this)},1046:e=>{e.exports=function(){function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[s]={exports:{}};t[s][0].call(l.exports,(function(e){return r(t[s][1][e]||e)}),l,l.exports,e,t,i,n)}return i[s].exports}for(var o=void 0,s=0;s<n.length;s++)r(n[s]);return r}return e}()({1:[function(e,t,i){"use strict";var n=(0,e("./adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window});t.exports=n},{"./adapter_factory.js":2}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.adapterFactory=d;var n=l(e("./utils")),r=l(e("./chrome/chrome_shim")),o=l(e("./firefox/firefox_shim")),s=l(e("./safari/safari_shim")),a=l(e("./common_shim")),c=l(e("sdp"));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function d(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},i=n.log,l=n.detectBrowser(e),d={browserDetails:l,commonShim:a,extractVersion:n.extractVersion,disableLog:n.disableLog,disableWarnings:n.disableWarnings,sdp:c};switch(l.browser){case"chrome":if(!r||!r.shimPeerConnection||!t.shimChrome)return i("Chrome shim is not included in this adapter release."),d;if(null===l.version)return i("Chrome shim can not determine version, not shimming."),d;i("adapter.js shimming chrome."),d.browserShim=r,a.shimAddIceCandidateNullOrEmpty(e,l),r.shimGetUserMedia(e,l),r.shimMediaStream(e,l),r.shimPeerConnection(e,l),r.shimOnTrack(e,l),r.shimAddTrackRemoveTrack(e,l),r.shimGetSendersWithDtmf(e,l),r.shimGetStats(e,l),r.shimSenderReceiverGetStats(e,l),r.fixNegotiationNeeded(e,l),a.shimRTCIceCandidate(e,l),a.shimConnectionState(e,l),a.shimMaxMessageSize(e,l),a.shimSendThrowTypeError(e,l),a.removeExtmapAllowMixed(e,l);break;case"firefox":if(!o||!o.shimPeerConnection||!t.shimFirefox)return i("Firefox shim is not included in this adapter release."),d;i("adapter.js shimming firefox."),d.browserShim=o,a.shimAddIceCandidateNullOrEmpty(e,l),o.shimGetUserMedia(e,l),o.shimPeerConnection(e,l),o.shimOnTrack(e,l),o.shimRemoveStream(e,l),o.shimSenderGetStats(e,l),o.shimReceiverGetStats(e,l),o.shimRTCDataChannel(e,l),o.shimAddTransceiver(e,l),o.shimGetParameters(e,l),o.shimCreateOffer(e,l),o.shimCreateAnswer(e,l),a.shimRTCIceCandidate(e,l),a.shimConnectionState(e,l),a.shimMaxMessageSize(e,l),a.shimSendThrowTypeError(e,l);break;case"safari":if(!s||!t.shimSafari)return i("Safari shim is not included in this adapter release."),d;i("adapter.js shimming safari."),d.browserShim=s,a.shimAddIceCandidateNullOrEmpty(e,l),s.shimRTCIceServerUrls(e,l),s.shimCreateOfferLegacy(e,l),s.shimCallbacksAPI(e,l),s.shimLocalStreamsAPI(e,l),s.shimRemoteStreamsAPI(e,l),s.shimTrackEventTransceiver(e,l),s.shimGetUserMedia(e,l),s.shimAudioContext(e,l),a.shimRTCIceCandidate(e,l),a.shimMaxMessageSize(e,l),a.shimSendThrowTypeError(e,l),a.removeExtmapAllowMixed(e,l);break;default:i("Unsupported browser!")}return d}},{"./chrome/chrome_shim":3,"./common_shim":6,"./firefox/firefox_shim":7,"./safari/safari_shim":10,"./utils":11,sdp:12}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),i.shimMediaStream=l,i.shimOnTrack=d,i.shimGetSendersWithDtmf=u,i.shimGetStats=h,i.shimSenderReceiverGetStats=f,i.shimAddTrackRemoveTrackWithNative=p,i.shimAddTrackRemoveTrack=_,i.shimPeerConnection=C,i.fixNegotiationNeeded=g;var s=a(e("../utils.js"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function d(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var i=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(n){var r=void 0;r=e.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find((function(e){return e.track&&e.track.id===n.track.id})):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],i.dispatchEvent(o)})),t.stream.getTracks().forEach((function(n){var r=void 0;r=e.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find((function(e){return e.track&&e.track.id===n.id})):{track:n};var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],i.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else s.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function u(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var r=i.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var i=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){i._senders.push(t(i,e))}))};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],s.apply(this,[e]),e.getTracks().forEach((function(e){var i=t._senders.find((function(t){return t.track===e}));i&&t._senders.splice(t._senders.indexOf(i),1)}))}}else if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function h(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,i=Array.prototype.slice.call(arguments),n=i[0],r=i[1],o=i[2];if(arguments.length>0&&"function"==typeof n)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof n))return t.apply(this,[]);var s=function(e){var t={};return e.result().forEach((function(e){var i={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){i[t]=e.stat(t)})),t[i.id]=i})),t},a=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){r(a(s(e)))};return t.apply(this,[c,n])}return new Promise((function(i,n){t.apply(e,[function(e){i(a(s(e)))},n])})).then(r,o)}}}function f(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i});var i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],i=void 0,n=void 0,r=void 0;return this.getSenders().forEach((function(e){e.track===t&&(i?r=!0:i=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(n?r=!0:n=e),e.track===t})),r||i&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function p(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){if(!i)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[i.id]?-1===this._shimmedLocalStreams[i.id].indexOf(n)&&this._shimmedLocalStreams[i.id].push(n):this._shimmedLocalStreams[i.id]=[i,n],n};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var n=this.getSenders();i.apply(this,arguments);var r=this.getSenders().filter((function(e){return-1===n.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(r)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(i){var n=t._shimmedLocalStreams[i].indexOf(e);-1!==n&&t._shimmedLocalStreams[i].splice(n,1),1===t._shimmedLocalStreams[i].length&&delete t._shimmedLocalStreams[i]})),r.apply(this,arguments)}}function _(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return p(e);var i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=i.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var i=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(i.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}n.apply(this,[t])};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,i){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[i.id];if(o)o.addTrack(t),Promise.resolve().then((function(){n.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[i.id]=s,this._reverseStreams[s.id]=i,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var i=e.RTCPeerConnection.prototype[t],n=c({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(this,[function(i){var n=a(e,i);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):i.apply(this,arguments).then((function(t){return a(e,t)}))}));e.RTCPeerConnection.prototype[t]=n[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=l(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=s.get.apply(this);return""===e.type?e:a(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var i=void 0;Object.keys(this._streams).forEach((function(n){t._streams[n].getTracks().find((function(t){return e.track===t}))&&(i=t._streams[n])})),i&&(1===i.getTracks().length?this.removeStream(this._reverseStreams[i.id]):i.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function a(e,t){var i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(r.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:i})}function l(e,t){var i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(n.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:i})}}function C(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var i=e.RTCPeerConnection.prototype[t],n=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=n[t]}))}function g(e,t){s.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var i=e.target;if(!(t.version<72||i.getConfiguration&&"plan-b"===i.getConfiguration().sdpSemantics)||"stable"===i.signalingState)return e}))}},{"../utils.js":11,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,i){"use strict";function n(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(i){return t(i).then((function(t){var n=i.video&&i.video.width,r=i.video&&i.video.height,o=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},n&&(i.video.mandatory.maxWidth=n),r&&(i.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(i)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=n},{}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}i.shimGetUserMedia=s;var o=r(e("../utils.js")).log;function s(e,t){var i=e&&e.navigator;if(i.mediaDevices){var r=function(e){if("object"!==(void 0===e?"undefined":n(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var r="object"===n(e[i])?e[i]:{ideal:e[i]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var s={};"number"==typeof r.ideal?(s[o("min",i)]=r.ideal,t.optional.push(s),(s={})[o("max",i)]=r.ideal,t.optional.push(s)):(s[o("",i)]=r.ideal,t.optional.push(s))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",i)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,i)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,s){if(t.version>=61)return s(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===n(e.audio)){var a=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===n(e.video)){var c=e.video.facingMode;c=c&&("object"===(void 0===c?"undefined":n(c))?c:{ideal:c});var l=t.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||l)){delete e.video.facingMode;var d=void 0;if("environment"===c.exact||"environment"===c.ideal?d=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(d=["front"]),d)return i.mediaDevices.enumerateDevices().then((function(t){var i=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return d.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!i&&t.length&&d.includes("back")&&(i=t[t.length-1]),i&&(e.video.deviceId=c.exact?{exact:i.deviceId}:{ideal:i.deviceId}),e.video=r(e.video),o("chrome: "+JSON.stringify(e)),s(e)}))}e.video=r(e.video)}return o("chrome: "+JSON.stringify(e)),s(e)},a=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},c=function(e,t,n){s(e,(function(e){i.webkitGetUserMedia(e,t,(function(e){n&&n(a(e))}))}))};if(i.getUserMedia=c.bind(i),i.mediaDevices.getUserMedia){var l=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(e){return s(e,(function(e){return l(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(a(e))}))}))}}}}},{"../utils.js":11}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.shimRTCIceCandidate=c,i.shimMaxMessageSize=l,i.shimSendThrowTypeError=d,i.shimConnectionState=u,i.removeExtmapAllowMixed=h,i.shimAddIceCandidateNullOrEmpty=f;var r=a(e("sdp")),o=s(e("./utils"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function c(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var i=new t(e),o=r.default.parseCandidate(e.candidate),s=Object.assign(i,o);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,o.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function l(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var i=function(e){if(!e||!e.sdp)return!1;var t=r.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=r.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},n=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var i=parseInt(t[1],10);return i!=i?-1:i},o=function(e){var i=65536;return"firefox"===t.browser&&(i=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),i},s=function(e,i){var n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);var o=r.default.matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?n=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==i&&(n=2147483637),n},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),i(arguments[0])){var e=n(arguments[0]),r=o(e),c=s(arguments[0],e),l=void 0;l=0===r&&0===c?Number.POSITIVE_INFINITY:0===r||0===c?Math.max(r,c):Math.min(r,c);var d={};Object.defineProperty(d,"maxMessageSize",{get:function(){return l}}),this._sctp=d}return a.apply(this,arguments)}}}function d(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return i(e,this),e},o.wrapPeerConnectionEvent(e,"datachannel",(function(e){return i(e.channel,e.target),e}))}function i(e,t){var i=e.send;e.send=function(){var n=arguments[0],r=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return i.apply(e,arguments)}}}function u(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var i=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var i=new Event("connectionstatechange",e);t.dispatchEvent(i)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}}))}}function h(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var n=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return i.apply(this,arguments)}}}function f(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var i=e.RTCPeerConnection.prototype.addIceCandidate;i&&0!==i.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}},{"./utils":11,sdp:12}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),i.shimOnTrack=l,i.shimPeerConnection=d,i.shimSenderGetStats=u,i.shimReceiverGetStats=h,i.shimRemoveStream=f,i.shimRTCDataChannel=p,i.shimAddTransceiver=_,i.shimGetParameters=C,i.shimCreateOffer=g,i.shimCreateAnswer=m;var s=a(e("../utils"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e){"object"===(void 0===e?"undefined":n(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function d(e,t){if("object"===(void 0===e?"undefined":n(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var i=e.RTCPeerConnection.prototype[t],n=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=n[t]}));var i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),n=e[0],o=e[1],s=e[2];return r.apply(this,[n||null]).then((function(e){if(t.version<53&&!o)try{e.forEach((function(e){e.type=i[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,n){e.set(n,Object.assign({},t,{type:i[t.type]||t.type}))}))}return e})).then(o,s)}}}function u(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i});var i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function h(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function f(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;s.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(i){i.track&&e.getTracks().includes(i.track)&&t.removeTrack(i)}))})}function p(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function _(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],i=e&&"sendEncodings"in e;i&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var n=t.apply(this,arguments);if(i){var r=n.sender,o=r.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===Object.keys(o.encodings[0]).length)&&(o.encodings=e.sendEncodings,r.sendEncodings=e.sendEncodings,this.setParametersPromises.push(r.setParameters(o).then((function(){delete r.sendEncodings})).catch((function(){delete r.sendEncodings}))))}return n})}}function C(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function g(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,i=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,i)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}function m(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,i=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,i)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}},{"../utils":11,"./getdisplaymedia":8,"./getusermedia":9}],8:[function(e,t,i){"use strict";function n(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){var n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return!0===i.video?i.video={mediaSource:t}:i.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(i)})}Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=n},{}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.shimGetUserMedia=s;var r=o(e("../utils"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function s(e,t){var i=e&&e.navigator,o=e&&e.MediaStreamTrack;if(i.getUserMedia=function(e,t,n){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){var s=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},a=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":n(e))&&"object"===n(e.audio)&&(e=JSON.parse(JSON.stringify(e)),s(e.audio,"autoGainControl","mozAutoGainControl"),s(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},o&&o.prototype.getSettings){var c=o.prototype.getSettings;o.prototype.getSettings=function(){var e=c.apply(this,arguments);return s(e,"mozAutoGainControl","autoGainControl"),s(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var l=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":n(e))&&(e=JSON.parse(JSON.stringify(e)),s(e,"autoGainControl","mozAutoGainControl"),s(e,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[e])}}}}},{"../utils":11}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.shimLocalStreamsAPI=s,i.shimRemoteStreamsAPI=a,i.shimCallbacksAPI=c,i.shimGetUserMedia=l,i.shimConstraints=d,i.shimRTCIceServerUrls=u,i.shimTrackEventTransceiver=h,i.shimCreateOfferLegacy=f,i.shimAudioContext=p;var r=o(e("../utils"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function s(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var i=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(n){return t.call(i,n,e)})),e.getVideoTracks().forEach((function(n){return t.call(i,n,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var i=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r&&r.forEach((function(e){i._localStreams?i._localStreams.includes(e)||i._localStreams.push(e):i._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var i=this._localStreams.indexOf(e);if(-1!==i){this._localStreams.splice(i,1);var n=e.getTracks();this.getSenders().forEach((function(e){n.includes(e.track)&&t.removeTrack(e)}))}})}}function a(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var i=new Event("addstream");i.stream=e,t.dispatchEvent(i)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var i=new Event("addstream");i.stream=t,e.dispatchEvent(i)}}))}),t.apply(e,arguments)}}}function c(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,i=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,s=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){var i=arguments.length>=2?arguments[2]:arguments[0],n=r.apply(this,[i]);return t?(n.then(e,t),Promise.resolve()):n};var c=function(e,t,i){var n=o.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n};t.setLocalDescription=c,c=function(e,t,i){var n=s.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.setRemoteDescription=c,c=function(e,t,i){var n=a.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.addIceCandidate=c}}function l(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var i=t.mediaDevices,n=i.getUserMedia.bind(i);t.mediaDevices.getUserMedia=function(e){return n(d(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,i,n){t.mediaDevices.getUserMedia(e).then(i,n)}.bind(t))}function d(e){return e&&void 0!==e.video?Object.assign({},e,{video:r.compactObject(e.video)}):e}function u(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){for(var n=[],o=0;o<e.iceServers.length;o++){var s=e.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,n.push(s)):n.push(e.iceServers[o])}e.iceServers=n}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function h(e){"object"===(void 0===e?"undefined":n(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function f(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var i=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveAudio||i||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function p(e){"object"!==(void 0===e?"undefined":n(e))||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}},{"../utils":11}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.extractVersion=a,i.wrapPeerConnectionEvent=c,i.disableLog=l,i.disableWarnings=d,i.log=u,i.deprecated=h,i.detectBrowser=f,i.compactObject=_,i.walkStats=C,i.filterStats=g;var o=!0,s=!0;function a(e,t,i){var n=e.match(t);return n&&n.length>=i&&parseInt(n[i],10)}function c(e,t,i){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,r=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return r.apply(this,arguments);var o=function(e){var t=i(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,o),r.apply(this,[e,o])};var o=n.removeEventListener;n.removeEventListener=function(e,i){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(i))return o.apply(this,arguments);var n=this._eventMap[t].get(i);return this._eventMap[t].delete(i),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function l(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":n(e))+". Please use a boolean."):(o=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function d(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":n(e))+". Please use a boolean."):(s=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function u(){if("object"===("undefined"==typeof window?"undefined":n(window))){if(o)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function h(e,t){s&&console.warn(e+" is deprecated, please use "+t+" instead.")}function f(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var i=e.navigator;if(i.mozGetUserMedia)t.browser="firefox",t.version=a(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=a(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=a(i.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function p(e){return"[object Object]"===Object.prototype.toString.call(e)}function _(e){return p(e)?Object.keys(e).reduce((function(t,i){var n=p(e[i]),o=n?_(e[i]):e[i],s=n&&!Object.keys(o).length;return void 0===o||s?t:Object.assign(t,r({},i,o))}),{}):e}function C(e,t,i){t&&!i.has(t.id)&&(i.set(t.id,t),Object.keys(t).forEach((function(n){n.endsWith("Id")?C(e,e.get(t[n]),i):n.endsWith("Ids")&&t[n].forEach((function(t){C(e,e.get(t),i)}))})))}function g(e,t,i){var n=i?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(i){i.type===n&&i.trackId===t.id&&C(e,i,r)}))})),r}},{}],12:[function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t=void 0,i={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":i.relatedAddress=t[n+1];break;case"rport":i.relatedPort=parseInt(t[n+1],10);break;case"tcptype":i.tcpType=t[n+1];break;case"ufrag":i.ufrag=t[n+1],i.usernameFragment=t[n+1];break;default:void 0===i[t[n]]&&(i[t[n]]=t[n+1])}return i},r.writeCandidate=function(e){var t=[];t.push(e.foundation);var i=e.component;"rtp"===i?t.push(1):"rtcp"===i?t.push(2):t.push(i),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),i={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.channels=3===t.length?parseInt(t[2],10):1,i.numChannels=i.channels,i},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var i=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==i?"/"+i:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t={},i=void 0,n=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<n.length;r++)t[(i=n[r].trim().split("="))[0].trim()]=i[1];return t},r.writeFmtp=function(e){var t="",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)})),t+="a=fmtp:"+i+" "+n.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+i+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),i={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(i.attribute=e.substr(t+1,n-t-1),i.value=e.substr(n+1)):i.attribute=e.substr(t+1),i},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var i="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){i+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),i},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===n(e.keyParams)?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var i=r.matchPrefix(e+t,"a=ice-ufrag:")[0],n=r.matchPrefix(e+t,"a=ice-pwd:")[0];return i&&n?{usernameFragment:i.substr(12),password:n.substr(10)}:null},r.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=r.splitLines(e)[0].split(" "),n=3;n<i.length;n++){var o=i[n],s=r.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=r.parseRtpMap(s),c=r.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?r.parseFmtp(c[0]):{},a.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var i="";i+="m="+e+" ",i+=t.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){i+=r.writeRtpMap(e),i+=r.writeFmtp(e),i+=r.writeRtcpFb(e)}));var n=0;return t.codecs.forEach((function(e){e.maxptime>n&&(n=e.maxptime)})),n>0&&(i+="a=maxptime:"+n+"\r\n"),t.headerExtensions&&t.headerExtensions.forEach((function(e){i+=r.writeExtmap(e)})),i},r.parseRtpEncodingParameters=function(e){var t=[],i=r.parseRtpParameters(e),n=-1!==i.fecMechanisms.indexOf("RED"),o=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),a=s.length>0&&s[0].ssrc,c=void 0,l=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));l.length>0&&l[0].length>1&&l[0][0]===a&&(c=l[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var i={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(i.rtx={ssrc:c}),t.push(i),n&&((i=JSON.parse(JSON.stringify(i))).fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},t.push(i))}})),0===t.length&&a&&t.push({ssrc:a});var d=r.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,t.forEach((function(e){e.maxBitrate=d}))),t},r.parseRtcpParameters=function(e){var t={},i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];i&&(t.cname=i.value,t.ssrc=i.ssrc);var n=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=n.length>0,t.compound=0===n.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},r.parseMsid=function(e){var t=void 0,i=r.matchPrefix(e,"a=msid:");if(1===i.length)return{stream:(t=i[0].substr(7).split(" "))[0],track:t[1]};var n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return n.length>0?{stream:(t=n[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t=r.parseMLine(e),i=r.matchPrefix(e,"a=max-message-size:"),n=void 0;i.length>0&&(n=parseInt(i[0].substr(19),10)),isNaN(n)&&(n=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:t.fmt,maxMessageSize:n};var s=r.matchPrefix(e,"a=sctpmap:");if(s.length>0){var a=s[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:n}}},r.writeSctpDescription=function(e,t){var i=[];return i="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&i.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),i.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,i){var n=void 0!==t?t:2;return"v=0\r\no="+(i||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.getDirection=function(e,t){for(var i=r.splitLines(e),n=0;n<i.length;n++)switch(i[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[n].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),i=0;i<t.length;i++)if(t[i].length<2||"="!==t[i].charAt(1))return!1;return!0},"object"===(void 0===t?"undefined":n(t))&&(t.exports=r)},{}]},{},[1])(1)},3412:function(e,t,i){var n;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */e=i.nmd(e),function(){var r,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",c=16,l=32,d=64,u=128,h=256,f=1/0,p=9007199254740991,_=NaN,C=4294967295,g=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",l],["partialRight",d],["rearg",h]],m="[object Arguments]",R="[object Array]",S="[object Boolean]",I="[object Date]",y="[object Error]",v="[object Function]",w="[object GeneratorFunction]",E="[object Map]",b="[object Number]",D="[object Object]",M="[object Promise]",P="[object RegExp]",x="[object Set]",T="[object String]",A="[object Symbol]",O="[object WeakMap]",V="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",L="[object Float64Array]",U="[object Int8Array]",B="[object Int16Array]",F="[object Int32Array]",j="[object Uint8Array]",$="[object Uint8ClampedArray]",H="[object Uint16Array]",q="[object Uint32Array]",K=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,J=/[&<>"']/g,Q=RegExp(z.source),Z=RegExp(J.source),X=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ie=/^\w*$/,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(re.source),se=/^\s+/,ae=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,de=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_e=/\w*$/,Ce=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,Re=/^0o[0-7]+$/i,Se=/^(?:0|[1-9]\d*)$/,Ie=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ye=/($^)/,ve=/['\n\r\u2028\u2029\\]/g,we="\\ud800-\\udfff",Ee="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",be="\\u2700-\\u27bf",De="a-z\\xdf-\\xf6\\xf8-\\xff",Me="A-Z\\xc0-\\xd6\\xd8-\\xde",Pe="\\ufe0e\\ufe0f",xe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Te="[']",Ae="["+we+"]",Oe="["+xe+"]",Ve="["+Ee+"]",ke="\\d+",Ne="["+be+"]",Le="["+De+"]",Ue="[^"+we+xe+ke+be+De+Me+"]",Be="\\ud83c[\\udffb-\\udfff]",Fe="[^"+we+"]",je="(?:\\ud83c[\\udde6-\\uddff]){2}",$e="[\\ud800-\\udbff][\\udc00-\\udfff]",He="["+Me+"]",qe="\\u200d",Ke="(?:"+Le+"|"+Ue+")",We="(?:"+He+"|"+Ue+")",Ge="(?:['](?:d|ll|m|re|s|t|ve))?",ze="(?:['](?:D|LL|M|RE|S|T|VE))?",Je="(?:"+Ve+"|"+Be+")"+"?",Qe="["+Pe+"]?",Ze=Qe+Je+("(?:"+qe+"(?:"+[Fe,je,$e].join("|")+")"+Qe+Je+")*"),Xe="(?:"+[Ne,je,$e].join("|")+")"+Ze,Ye="(?:"+[Fe+Ve+"?",Ve,je,$e,Ae].join("|")+")",et=RegExp(Te,"g"),tt=RegExp(Ve,"g"),it=RegExp(Be+"(?="+Be+")|"+Ye+Ze,"g"),nt=RegExp([He+"?"+Le+"+"+Ge+"(?="+[Oe,He,"$"].join("|")+")",We+"+"+ze+"(?="+[Oe,He+Ke,"$"].join("|")+")",He+"?"+Ke+"+"+Ge,He+"+"+ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ke,Xe].join("|"),"g"),rt=RegExp("["+qe+we+Ee+Pe+"]"),ot=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,st=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,ct={};ct[N]=ct[L]=ct[U]=ct[B]=ct[F]=ct[j]=ct[$]=ct[H]=ct[q]=!0,ct[m]=ct[R]=ct[V]=ct[S]=ct[k]=ct[I]=ct[y]=ct[v]=ct[E]=ct[b]=ct[D]=ct[P]=ct[x]=ct[T]=ct[O]=!1;var lt={};lt[m]=lt[R]=lt[V]=lt[k]=lt[S]=lt[I]=lt[N]=lt[L]=lt[U]=lt[B]=lt[F]=lt[E]=lt[b]=lt[D]=lt[P]=lt[x]=lt[T]=lt[A]=lt[j]=lt[$]=lt[H]=lt[q]=!0,lt[y]=lt[v]=lt[O]=!1;var dt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,ht=parseInt,ft="object"==typeof global&&global&&global.Object===Object&&global,pt="object"==typeof self&&self&&self.Object===Object&&self,_t=ft||pt||Function("return this")(),Ct=t&&!t.nodeType&&t,gt=Ct&&e&&!e.nodeType&&e,mt=gt&&gt.exports===Ct,Rt=mt&&ft.process,St=function(){try{var e=gt&&gt.require&&gt.require("util").types;return e||Rt&&Rt.binding&&Rt.binding("util")}catch(e){}}(),It=St&&St.isArrayBuffer,yt=St&&St.isDate,vt=St&&St.isMap,wt=St&&St.isRegExp,Et=St&&St.isSet,bt=St&&St.isTypedArray;function Dt(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function Mt(e,t,i,n){for(var r=-1,o=null==e?0:e.length;++r<o;){var s=e[r];t(n,s,i(s),e)}return n}function Pt(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}function xt(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}function Tt(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0}function At(e,t){for(var i=-1,n=null==e?0:e.length,r=0,o=[];++i<n;){var s=e[i];t(s,i,e)&&(o[r++]=s)}return o}function Ot(e,t){return!!(null==e?0:e.length)&&Ht(e,t,0)>-1}function Vt(e,t,i){for(var n=-1,r=null==e?0:e.length;++n<r;)if(i(t,e[n]))return!0;return!1}function kt(e,t){for(var i=-1,n=null==e?0:e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}function Nt(e,t){for(var i=-1,n=t.length,r=e.length;++i<n;)e[r+i]=t[i];return e}function Lt(e,t,i,n){var r=-1,o=null==e?0:e.length;for(n&&o&&(i=e[++r]);++r<o;)i=t(i,e[r],r,e);return i}function Ut(e,t,i,n){var r=null==e?0:e.length;for(n&&r&&(i=e[--r]);r--;)i=t(i,e[r],r,e);return i}function Bt(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}var Ft=Gt("length");function jt(e,t,i){var n;return i(e,(function(e,i,r){if(t(e,i,r))return n=i,!1})),n}function $t(e,t,i,n){for(var r=e.length,o=i+(n?1:-1);n?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function Ht(e,t,i){return t==t?function(e,t,i){var n=i-1,r=e.length;for(;++n<r;)if(e[n]===t)return n;return-1}(e,t,i):$t(e,Kt,i)}function qt(e,t,i,n){for(var r=i-1,o=e.length;++r<o;)if(n(e[r],t))return r;return-1}function Kt(e){return e!=e}function Wt(e,t){var i=null==e?0:e.length;return i?Qt(e,t)/i:_}function Gt(e){return function(t){return null==t?r:t[e]}}function zt(e){return function(t){return null==e?r:e[t]}}function Jt(e,t,i,n,r){return r(e,(function(e,r,o){i=n?(n=!1,e):t(i,e,r,o)})),i}function Qt(e,t){for(var i,n=-1,o=e.length;++n<o;){var s=t(e[n]);s!==r&&(i=i===r?s:i+s)}return i}function Zt(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}function Xt(e){return e?e.slice(0,_i(e)+1).replace(se,""):e}function Yt(e){return function(t){return e(t)}}function ei(e,t){return kt(t,(function(t){return e[t]}))}function ti(e,t){return e.has(t)}function ii(e,t){for(var i=-1,n=e.length;++i<n&&Ht(t,e[i],0)>-1;);return i}function ni(e,t){for(var i=e.length;i--&&Ht(t,e[i],0)>-1;);return i}var ri=zt({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),oi=zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function si(e){return"\\"+dt[e]}function ai(e){return rt.test(e)}function ci(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}function li(e,t){return function(i){return e(t(i))}}function di(e,t){for(var i=-1,n=e.length,r=0,o=[];++i<n;){var s=e[i];s!==t&&s!==a||(e[i]=a,o[r++]=i)}return o}function ui(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}function hi(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=[e,e]})),i}function fi(e){return ai(e)?function(e){var t=it.lastIndex=0;for(;it.test(e);)++t;return t}(e):Ft(e)}function pi(e){return ai(e)?function(e){return e.match(it)||[]}(e):function(e){return e.split("")}(e)}function _i(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var Ci=zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gi=function e(t){var i,n=(t=null==t?_t:gi.defaults(_t.Object(),t,gi.pick(_t,st))).Array,ae=t.Date,we=t.Error,Ee=t.Function,be=t.Math,De=t.Object,Me=t.RegExp,Pe=t.String,xe=t.TypeError,Te=n.prototype,Ae=Ee.prototype,Oe=De.prototype,Ve=t["__core-js_shared__"],ke=Ae.toString,Ne=Oe.hasOwnProperty,Le=0,Ue=(i=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",Be=Oe.toString,Fe=ke.call(De),je=_t._,$e=Me("^"+ke.call(Ne).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=mt?t.Buffer:r,qe=t.Symbol,Ke=t.Uint8Array,We=He?He.allocUnsafe:r,Ge=li(De.getPrototypeOf,De),ze=De.create,Je=Oe.propertyIsEnumerable,Qe=Te.splice,Ze=qe?qe.isConcatSpreadable:r,Xe=qe?qe.iterator:r,Ye=qe?qe.toStringTag:r,it=function(){try{var e=fo(De,"defineProperty");return e({},"",{}),e}catch(e){}}(),rt=t.clearTimeout!==_t.clearTimeout&&t.clearTimeout,dt=ae&&ae.now!==_t.Date.now&&ae.now,ft=t.setTimeout!==_t.setTimeout&&t.setTimeout,pt=be.ceil,Ct=be.floor,gt=De.getOwnPropertySymbols,Rt=He?He.isBuffer:r,St=t.isFinite,Ft=Te.join,zt=li(De.keys,De),mi=be.max,Ri=be.min,Si=ae.now,Ii=t.parseInt,yi=be.random,vi=Te.reverse,wi=fo(t,"DataView"),Ei=fo(t,"Map"),bi=fo(t,"Promise"),Di=fo(t,"Set"),Mi=fo(t,"WeakMap"),Pi=fo(De,"create"),xi=Mi&&new Mi,Ti={},Ai=Bo(wi),Oi=Bo(Ei),Vi=Bo(bi),ki=Bo(Di),Ni=Bo(Mi),Li=qe?qe.prototype:r,Ui=Li?Li.valueOf:r,Bi=Li?Li.toString:r;function Fi(e){if(ia(e)&&!Ks(e)&&!(e instanceof qi)){if(e instanceof Hi)return e;if(Ne.call(e,"__wrapped__"))return Fo(e)}return new Hi(e)}var ji=function(){function e(){}return function(t){if(!ta(t))return{};if(ze)return ze(t);e.prototype=t;var i=new e;return e.prototype=r,i}}();function $i(){}function Hi(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function qi(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=C,this.__views__=[]}function Ki(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Wi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Gi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function zi(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Gi;++t<i;)this.add(e[t])}function Ji(e){var t=this.__data__=new Wi(e);this.size=t.size}function Qi(e,t){var i=Ks(e),n=!i&&qs(e),r=!i&&!n&&Js(e),o=!i&&!n&&!r&&da(e),s=i||n||r||o,a=s?Zt(e.length,Pe):[],c=a.length;for(var l in e)!t&&!Ne.call(e,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||So(l,c))||a.push(l);return a}function Zi(e){var t=e.length;return t?e[Jn(0,t-1)]:r}function Xi(e,t){return No(xr(e),cn(t,0,e.length))}function Yi(e){return No(xr(e))}function en(e,t,i){(i!==r&&!js(e[t],i)||i===r&&!(t in e))&&sn(e,t,i)}function tn(e,t,i){var n=e[t];Ne.call(e,t)&&js(n,i)&&(i!==r||t in e)||sn(e,t,i)}function nn(e,t){for(var i=e.length;i--;)if(js(e[i][0],t))return i;return-1}function rn(e,t,i,n){return fn(e,(function(e,r,o){t(n,e,i(e),o)})),n}function on(e,t){return e&&Tr(t,Aa(t),e)}function sn(e,t,i){"__proto__"==t&&it?it(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function an(e,t){for(var i=-1,o=t.length,s=n(o),a=null==e;++i<o;)s[i]=a?r:Da(e,t[i]);return s}function cn(e,t,i){return e==e&&(i!==r&&(e=e<=i?e:i),t!==r&&(e=e>=t?e:t)),e}function ln(e,t,i,n,o,s){var a,c=1&t,l=2&t,d=4&t;if(i&&(a=o?i(e,n,o,s):i(e)),a!==r)return a;if(!ta(e))return e;var u=Ks(e);if(u){if(a=function(e){var t=e.length,i=new e.constructor(t);t&&"string"==typeof e[0]&&Ne.call(e,"index")&&(i.index=e.index,i.input=e.input);return i}(e),!c)return xr(e,a)}else{var h=Co(e),f=h==v||h==w;if(Js(e))return wr(e,c);if(h==D||h==m||f&&!o){if(a=l||f?{}:mo(e),!c)return l?function(e,t){return Tr(e,_o(e),t)}(e,function(e,t){return e&&Tr(t,Oa(t),e)}(a,e)):function(e,t){return Tr(e,po(e),t)}(e,on(a,e))}else{if(!lt[h])return o?e:{};a=function(e,t,i){var n=e.constructor;switch(t){case V:return Er(e);case S:case I:return new n(+e);case k:return function(e,t){var i=t?Er(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,i);case N:case L:case U:case B:case F:case j:case $:case H:case q:return br(e,i);case E:return new n;case b:case T:return new n(e);case P:return function(e){var t=new e.constructor(e.source,_e.exec(e));return t.lastIndex=e.lastIndex,t}(e);case x:return new n;case A:return r=e,Ui?De(Ui.call(r)):{}}var r}(e,h,c)}}s||(s=new Ji);var p=s.get(e);if(p)return p;s.set(e,a),aa(e)?e.forEach((function(n){a.add(ln(n,t,i,n,e,s))})):na(e)&&e.forEach((function(n,r){a.set(r,ln(n,t,i,r,e,s))}));var _=u?r:(d?l?oo:ro:l?Oa:Aa)(e);return Pt(_||e,(function(n,r){_&&(n=e[r=n]),tn(a,r,ln(n,t,i,r,e,s))})),a}function dn(e,t,i){var n=i.length;if(null==e)return!n;for(e=De(e);n--;){var o=i[n],s=t[o],a=e[o];if(a===r&&!(o in e)||!s(a))return!1}return!0}function un(e,t,i){if("function"!=typeof e)throw new xe(o);return Ao((function(){e.apply(r,i)}),t)}function hn(e,t,i,n){var r=-1,o=Ot,s=!0,a=e.length,c=[],l=t.length;if(!a)return c;i&&(t=kt(t,Yt(i))),n?(o=Vt,s=!1):t.length>=200&&(o=ti,s=!1,t=new zi(t));e:for(;++r<a;){var d=e[r],u=null==i?d:i(d);if(d=n||0!==d?d:0,s&&u==u){for(var h=l;h--;)if(t[h]===u)continue e;c.push(d)}else o(t,u,n)||c.push(d)}return c}Fi.templateSettings={escape:X,evaluate:Y,interpolate:ee,variable:"",imports:{_:Fi}},Fi.prototype=$i.prototype,Fi.prototype.constructor=Fi,Hi.prototype=ji($i.prototype),Hi.prototype.constructor=Hi,qi.prototype=ji($i.prototype),qi.prototype.constructor=qi,Ki.prototype.clear=function(){this.__data__=Pi?Pi(null):{},this.size=0},Ki.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ki.prototype.get=function(e){var t=this.__data__;if(Pi){var i=t[e];return i===s?r:i}return Ne.call(t,e)?t[e]:r},Ki.prototype.has=function(e){var t=this.__data__;return Pi?t[e]!==r:Ne.call(t,e)},Ki.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Pi&&t===r?s:t,this},Wi.prototype.clear=function(){this.__data__=[],this.size=0},Wi.prototype.delete=function(e){var t=this.__data__,i=nn(t,e);return!(i<0)&&(i==t.length-1?t.pop():Qe.call(t,i,1),--this.size,!0)},Wi.prototype.get=function(e){var t=this.__data__,i=nn(t,e);return i<0?r:t[i][1]},Wi.prototype.has=function(e){return nn(this.__data__,e)>-1},Wi.prototype.set=function(e,t){var i=this.__data__,n=nn(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this},Gi.prototype.clear=function(){this.size=0,this.__data__={hash:new Ki,map:new(Ei||Wi),string:new Ki}},Gi.prototype.delete=function(e){var t=uo(this,e).delete(e);return this.size-=t?1:0,t},Gi.prototype.get=function(e){return uo(this,e).get(e)},Gi.prototype.has=function(e){return uo(this,e).has(e)},Gi.prototype.set=function(e,t){var i=uo(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this},zi.prototype.add=zi.prototype.push=function(e){return this.__data__.set(e,s),this},zi.prototype.has=function(e){return this.__data__.has(e)},Ji.prototype.clear=function(){this.__data__=new Wi,this.size=0},Ji.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},Ji.prototype.get=function(e){return this.__data__.get(e)},Ji.prototype.has=function(e){return this.__data__.has(e)},Ji.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Wi){var n=i.__data__;if(!Ei||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Gi(n)}return i.set(e,t),this.size=i.size,this};var fn=Vr(In),pn=Vr(yn,!0);function _n(e,t){var i=!0;return fn(e,(function(e,n,r){return i=!!t(e,n,r)})),i}function Cn(e,t,i){for(var n=-1,o=e.length;++n<o;){var s=e[n],a=t(s);if(null!=a&&(c===r?a==a&&!la(a):i(a,c)))var c=a,l=s}return l}function gn(e,t){var i=[];return fn(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i}function mn(e,t,i,n,r){var o=-1,s=e.length;for(i||(i=Ro),r||(r=[]);++o<s;){var a=e[o];t>0&&i(a)?t>1?mn(a,t-1,i,n,r):Nt(r,a):n||(r[r.length]=a)}return r}var Rn=kr(),Sn=kr(!0);function In(e,t){return e&&Rn(e,t,Aa)}function yn(e,t){return e&&Sn(e,t,Aa)}function vn(e,t){return At(t,(function(t){return Xs(e[t])}))}function wn(e,t){for(var i=0,n=(t=Sr(t,e)).length;null!=e&&i<n;)e=e[Uo(t[i++])];return i&&i==n?e:r}function En(e,t,i){var n=t(e);return Ks(e)?n:Nt(n,i(e))}function bn(e){return null==e?e===r?"[object Undefined]":"[object Null]":Ye&&Ye in De(e)?function(e){var t=Ne.call(e,Ye),i=e[Ye];try{e[Ye]=r;var n=!0}catch(e){}var o=Be.call(e);n&&(t?e[Ye]=i:delete e[Ye]);return o}(e):function(e){return Be.call(e)}(e)}function Dn(e,t){return e>t}function Mn(e,t){return null!=e&&Ne.call(e,t)}function Pn(e,t){return null!=e&&t in De(e)}function xn(e,t,i){for(var o=i?Vt:Ot,s=e[0].length,a=e.length,c=a,l=n(a),d=1/0,u=[];c--;){var h=e[c];c&&t&&(h=kt(h,Yt(t))),d=Ri(h.length,d),l[c]=!i&&(t||s>=120&&h.length>=120)?new zi(c&&h):r}h=e[0];var f=-1,p=l[0];e:for(;++f<s&&u.length<d;){var _=h[f],C=t?t(_):_;if(_=i||0!==_?_:0,!(p?ti(p,C):o(u,C,i))){for(c=a;--c;){var g=l[c];if(!(g?ti(g,C):o(e[c],C,i)))continue e}p&&p.push(C),u.push(_)}}return u}function Tn(e,t,i){var n=null==(e=Po(e,t=Sr(t,e)))?e:e[Uo(Zo(t))];return null==n?r:Dt(n,e,i)}function An(e){return ia(e)&&bn(e)==m}function On(e,t,i,n,o){return e===t||(null==e||null==t||!ia(e)&&!ia(t)?e!=e&&t!=t:function(e,t,i,n,o,s){var a=Ks(e),c=Ks(t),l=a?R:Co(e),d=c?R:Co(t),u=(l=l==m?D:l)==D,h=(d=d==m?D:d)==D,f=l==d;if(f&&Js(e)){if(!Js(t))return!1;a=!0,u=!1}if(f&&!u)return s||(s=new Ji),a||da(e)?io(e,t,i,n,o,s):function(e,t,i,n,r,o,s){switch(i){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case V:return!(e.byteLength!=t.byteLength||!o(new Ke(e),new Ke(t)));case S:case I:case b:return js(+e,+t);case y:return e.name==t.name&&e.message==t.message;case P:case T:return e==t+"";case E:var a=ci;case x:var c=1&n;if(a||(a=ui),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;n|=2,s.set(e,t);var d=io(a(e),a(t),n,r,o,s);return s.delete(e),d;case A:if(Ui)return Ui.call(e)==Ui.call(t)}return!1}(e,t,l,i,n,o,s);if(!(1&i)){var p=u&&Ne.call(e,"__wrapped__"),_=h&&Ne.call(t,"__wrapped__");if(p||_){var C=p?e.value():e,g=_?t.value():t;return s||(s=new Ji),o(C,g,i,n,s)}}if(!f)return!1;return s||(s=new Ji),function(e,t,i,n,o,s){var a=1&i,c=ro(e),l=c.length,d=ro(t),u=d.length;if(l!=u&&!a)return!1;var h=l;for(;h--;){var f=c[h];if(!(a?f in t:Ne.call(t,f)))return!1}var p=s.get(e),_=s.get(t);if(p&&_)return p==t&&_==e;var C=!0;s.set(e,t),s.set(t,e);var g=a;for(;++h<l;){var m=e[f=c[h]],R=t[f];if(n)var S=a?n(R,m,f,t,e,s):n(m,R,f,e,t,s);if(!(S===r?m===R||o(m,R,i,n,s):S)){C=!1;break}g||(g="constructor"==f)}if(C&&!g){var I=e.constructor,y=t.constructor;I==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof I&&I instanceof I&&"function"==typeof y&&y instanceof y||(C=!1)}return s.delete(e),s.delete(t),C}(e,t,i,n,o,s)}(e,t,i,n,On,o))}function Vn(e,t,i,n){var o=i.length,s=o,a=!n;if(null==e)return!s;for(e=De(e);o--;){var c=i[o];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var l=(c=i[o])[0],d=e[l],u=c[1];if(a&&c[2]){if(d===r&&!(l in e))return!1}else{var h=new Ji;if(n)var f=n(d,u,l,e,t,h);if(!(f===r?On(u,d,3,n,h):f))return!1}}return!0}function kn(e){return!(!ta(e)||(t=e,Ue&&Ue in t))&&(Xs(e)?$e:me).test(Bo(e));var t}function Nn(e){return"function"==typeof e?e:null==e?rc:"object"==typeof e?Ks(e)?$n(e[0],e[1]):jn(e):fc(e)}function Ln(e){if(!Eo(e))return zt(e);var t=[];for(var i in De(e))Ne.call(e,i)&&"constructor"!=i&&t.push(i);return t}function Un(e){if(!ta(e))return function(e){var t=[];if(null!=e)for(var i in De(e))t.push(i);return t}(e);var t=Eo(e),i=[];for(var n in e)("constructor"!=n||!t&&Ne.call(e,n))&&i.push(n);return i}function Bn(e,t){return e<t}function Fn(e,t){var i=-1,r=Gs(e)?n(e.length):[];return fn(e,(function(e,n,o){r[++i]=t(e,n,o)})),r}function jn(e){var t=ho(e);return 1==t.length&&t[0][2]?Do(t[0][0],t[0][1]):function(i){return i===e||Vn(i,e,t)}}function $n(e,t){return yo(e)&&bo(t)?Do(Uo(e),t):function(i){var n=Da(i,e);return n===r&&n===t?Ma(i,e):On(t,n,3)}}function Hn(e,t,i,n,o){e!==t&&Rn(t,(function(s,a){if(o||(o=new Ji),ta(s))!function(e,t,i,n,o,s,a){var c=xo(e,i),l=xo(t,i),d=a.get(l);if(d)return void en(e,i,d);var u=s?s(c,l,i+"",e,t,a):r,h=u===r;if(h){var f=Ks(l),p=!f&&Js(l),_=!f&&!p&&da(l);u=l,f||p||_?Ks(c)?u=c:zs(c)?u=xr(c):p?(h=!1,u=wr(l,!0)):_?(h=!1,u=br(l,!0)):u=[]:oa(l)||qs(l)?(u=c,qs(c)?u=ma(c):ta(c)&&!Xs(c)||(u=mo(l))):h=!1}h&&(a.set(l,u),o(u,l,n,s,a),a.delete(l));en(e,i,u)}(e,t,a,i,Hn,n,o);else{var c=n?n(xo(e,a),s,a+"",e,t,o):r;c===r&&(c=s),en(e,a,c)}}),Oa)}function qn(e,t){var i=e.length;if(i)return So(t+=t<0?i:0,i)?e[t]:r}function Kn(e,t,i){t=t.length?kt(t,(function(e){return Ks(e)?function(t){return wn(t,1===e.length?e[0]:e)}:e})):[rc];var n=-1;t=kt(t,Yt(lo()));var r=Fn(e,(function(e,i,r){var o=kt(t,(function(t){return t(e)}));return{criteria:o,index:++n,value:e}}));return function(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].value;return e}(r,(function(e,t){return function(e,t,i){var n=-1,r=e.criteria,o=t.criteria,s=r.length,a=i.length;for(;++n<s;){var c=Dr(r[n],o[n]);if(c)return n>=a?c:c*("desc"==i[n]?-1:1)}return e.index-t.index}(e,t,i)}))}function Wn(e,t,i){for(var n=-1,r=t.length,o={};++n<r;){var s=t[n],a=wn(e,s);i(a,s)&&er(o,Sr(s,e),a)}return o}function Gn(e,t,i,n){var r=n?qt:Ht,o=-1,s=t.length,a=e;for(e===t&&(t=xr(t)),i&&(a=kt(e,Yt(i)));++o<s;)for(var c=0,l=t[o],d=i?i(l):l;(c=r(a,d,c,n))>-1;)a!==e&&Qe.call(a,c,1),Qe.call(e,c,1);return e}function zn(e,t){for(var i=e?t.length:0,n=i-1;i--;){var r=t[i];if(i==n||r!==o){var o=r;So(r)?Qe.call(e,r,1):hr(e,r)}}return e}function Jn(e,t){return e+Ct(yi()*(t-e+1))}function Qn(e,t){var i="";if(!e||t<1||t>p)return i;do{t%2&&(i+=e),(t=Ct(t/2))&&(e+=e)}while(t);return i}function Zn(e,t){return Oo(Mo(e,t,rc),e+"")}function Xn(e){return Zi(ja(e))}function Yn(e,t){var i=ja(e);return No(i,cn(t,0,i.length))}function er(e,t,i,n){if(!ta(e))return e;for(var o=-1,s=(t=Sr(t,e)).length,a=s-1,c=e;null!=c&&++o<s;){var l=Uo(t[o]),d=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var u=c[l];(d=n?n(u,l,c):r)===r&&(d=ta(u)?u:So(t[o+1])?[]:{})}tn(c,l,d),c=c[l]}return e}var tr=xi?function(e,t){return xi.set(e,t),e}:rc,ir=it?function(e,t){return it(e,"toString",{configurable:!0,enumerable:!1,value:tc(t),writable:!0})}:rc;function nr(e){return No(ja(e))}function rr(e,t,i){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(i=i>o?o:i)<0&&(i+=o),o=t>i?0:i-t>>>0,t>>>=0;for(var s=n(o);++r<o;)s[r]=e[r+t];return s}function or(e,t){var i;return fn(e,(function(e,n,r){return!(i=t(e,n,r))})),!!i}function sr(e,t,i){var n=0,r=null==e?n:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;n<r;){var o=n+r>>>1,s=e[o];null!==s&&!la(s)&&(i?s<=t:s<t)?n=o+1:r=o}return r}return ar(e,t,rc,i)}function ar(e,t,i,n){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=i(t))!=t,c=null===t,l=la(t),d=t===r;o<s;){var u=Ct((o+s)/2),h=i(e[u]),f=h!==r,p=null===h,_=h==h,C=la(h);if(a)var g=n||_;else g=d?_&&(n||f):c?_&&f&&(n||!p):l?_&&f&&!p&&(n||!C):!p&&!C&&(n?h<=t:h<t);g?o=u+1:s=u}return Ri(s,4294967294)}function cr(e,t){for(var i=-1,n=e.length,r=0,o=[];++i<n;){var s=e[i],a=t?t(s):s;if(!i||!js(a,c)){var c=a;o[r++]=0===s?0:s}}return o}function lr(e){return"number"==typeof e?e:la(e)?_:+e}function dr(e){if("string"==typeof e)return e;if(Ks(e))return kt(e,dr)+"";if(la(e))return Bi?Bi.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ur(e,t,i){var n=-1,r=Ot,o=e.length,s=!0,a=[],c=a;if(i)s=!1,r=Vt;else if(o>=200){var l=t?null:Qr(e);if(l)return ui(l);s=!1,r=ti,c=new zi}else c=t?[]:a;e:for(;++n<o;){var d=e[n],u=t?t(d):d;if(d=i||0!==d?d:0,s&&u==u){for(var h=c.length;h--;)if(c[h]===u)continue e;t&&c.push(u),a.push(d)}else r(c,u,i)||(c!==a&&c.push(u),a.push(d))}return a}function hr(e,t){return null==(e=Po(e,t=Sr(t,e)))||delete e[Uo(Zo(t))]}function fr(e,t,i,n){return er(e,t,i(wn(e,t)),n)}function pr(e,t,i,n){for(var r=e.length,o=n?r:-1;(n?o--:++o<r)&&t(e[o],o,e););return i?rr(e,n?0:o,n?o+1:r):rr(e,n?o+1:0,n?r:o)}function _r(e,t){var i=e;return i instanceof qi&&(i=i.value()),Lt(t,(function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))}),i)}function Cr(e,t,i){var r=e.length;if(r<2)return r?ur(e[0]):[];for(var o=-1,s=n(r);++o<r;)for(var a=e[o],c=-1;++c<r;)c!=o&&(s[o]=hn(s[o]||a,e[c],t,i));return ur(mn(s,1),t,i)}function gr(e,t,i){for(var n=-1,o=e.length,s=t.length,a={};++n<o;){var c=n<s?t[n]:r;i(a,e[n],c)}return a}function mr(e){return zs(e)?e:[]}function Rr(e){return"function"==typeof e?e:rc}function Sr(e,t){return Ks(e)?e:yo(e,t)?[e]:Lo(Ra(e))}var Ir=Zn;function yr(e,t,i){var n=e.length;return i=i===r?n:i,!t&&i>=n?e:rr(e,t,i)}var vr=rt||function(e){return _t.clearTimeout(e)};function wr(e,t){if(t)return e.slice();var i=e.length,n=We?We(i):new e.constructor(i);return e.copy(n),n}function Er(e){var t=new e.constructor(e.byteLength);return new Ke(t).set(new Ke(e)),t}function br(e,t){var i=t?Er(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function Dr(e,t){if(e!==t){var i=e!==r,n=null===e,o=e==e,s=la(e),a=t!==r,c=null===t,l=t==t,d=la(t);if(!c&&!d&&!s&&e>t||s&&a&&l&&!c&&!d||n&&a&&l||!i&&l||!o)return 1;if(!n&&!s&&!d&&e<t||d&&i&&o&&!n&&!s||c&&i&&o||!a&&o||!l)return-1}return 0}function Mr(e,t,i,r){for(var o=-1,s=e.length,a=i.length,c=-1,l=t.length,d=mi(s-a,0),u=n(l+d),h=!r;++c<l;)u[c]=t[c];for(;++o<a;)(h||o<s)&&(u[i[o]]=e[o]);for(;d--;)u[c++]=e[o++];return u}function Pr(e,t,i,r){for(var o=-1,s=e.length,a=-1,c=i.length,l=-1,d=t.length,u=mi(s-c,0),h=n(u+d),f=!r;++o<u;)h[o]=e[o];for(var p=o;++l<d;)h[p+l]=t[l];for(;++a<c;)(f||o<s)&&(h[p+i[a]]=e[o++]);return h}function xr(e,t){var i=-1,r=e.length;for(t||(t=n(r));++i<r;)t[i]=e[i];return t}function Tr(e,t,i,n){var o=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var c=t[s],l=n?n(i[c],e[c],c,i,e):r;l===r&&(l=e[c]),o?sn(i,c,l):tn(i,c,l)}return i}function Ar(e,t){return function(i,n){var r=Ks(i)?Mt:rn,o=t?t():{};return r(i,e,lo(n,2),o)}}function Or(e){return Zn((function(t,i){var n=-1,o=i.length,s=o>1?i[o-1]:r,a=o>2?i[2]:r;for(s=e.length>3&&"function"==typeof s?(o--,s):r,a&&Io(i[0],i[1],a)&&(s=o<3?r:s,o=1),t=De(t);++n<o;){var c=i[n];c&&e(t,c,n,s)}return t}))}function Vr(e,t){return function(i,n){if(null==i)return i;if(!Gs(i))return e(i,n);for(var r=i.length,o=t?r:-1,s=De(i);(t?o--:++o<r)&&!1!==n(s[o],o,s););return i}}function kr(e){return function(t,i,n){for(var r=-1,o=De(t),s=n(t),a=s.length;a--;){var c=s[e?a:++r];if(!1===i(o[c],c,o))break}return t}}function Nr(e){return function(t){var i=ai(t=Ra(t))?pi(t):r,n=i?i[0]:t.charAt(0),o=i?yr(i,1).join(""):t.slice(1);return n[e]()+o}}function Lr(e){return function(t){return Lt(Xa(qa(t).replace(et,"")),e,"")}}function Ur(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=ji(e.prototype),n=e.apply(i,t);return ta(n)?n:i}}function Br(e){return function(t,i,n){var o=De(t);if(!Gs(t)){var s=lo(i,3);t=Aa(t),i=function(e){return s(o[e],e,o)}}var a=e(t,i,n);return a>-1?o[s?t[a]:a]:r}}function Fr(e){return no((function(t){var i=t.length,n=i,s=Hi.prototype.thru;for(e&&t.reverse();n--;){var a=t[n];if("function"!=typeof a)throw new xe(o);if(s&&!c&&"wrapper"==ao(a))var c=new Hi([],!0)}for(n=c?n:i;++n<i;){var l=ao(a=t[n]),d="wrapper"==l?so(a):r;c=d&&vo(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?c[ao(d[0])].apply(c,d[3]):1==a.length&&vo(a)?c[l]():c.thru(a)}return function(){var e=arguments,n=e[0];if(c&&1==e.length&&Ks(n))return c.plant(n).value();for(var r=0,o=i?t[r].apply(this,e):n;++r<i;)o=t[r].call(this,o);return o}}))}function jr(e,t,i,o,s,a,c,l,d,h){var f=t&u,p=1&t,_=2&t,C=24&t,g=512&t,m=_?r:Ur(e);return function u(){for(var R=arguments.length,S=n(R),I=R;I--;)S[I]=arguments[I];if(C)var y=co(u),v=function(e,t){for(var i=e.length,n=0;i--;)e[i]===t&&++n;return n}(S,y);if(o&&(S=Mr(S,o,s,C)),a&&(S=Pr(S,a,c,C)),R-=v,C&&R<h){var w=di(S,y);return zr(e,t,jr,u.placeholder,i,S,w,l,d,h-R)}var E=p?i:this,b=_?E[e]:e;return R=S.length,l?S=function(e,t){var i=e.length,n=Ri(t.length,i),o=xr(e);for(;n--;){var s=t[n];e[n]=So(s,i)?o[s]:r}return e}(S,l):g&&R>1&&S.reverse(),f&&d<R&&(S.length=d),this&&this!==_t&&this instanceof u&&(b=m||Ur(b)),b.apply(E,S)}}function $r(e,t){return function(i,n){return function(e,t,i,n){return In(e,(function(e,r,o){t(n,i(e),r,o)})),n}(i,e,t(n),{})}}function Hr(e,t){return function(i,n){var o;if(i===r&&n===r)return t;if(i!==r&&(o=i),n!==r){if(o===r)return n;"string"==typeof i||"string"==typeof n?(i=dr(i),n=dr(n)):(i=lr(i),n=lr(n)),o=e(i,n)}return o}}function qr(e){return no((function(t){return t=kt(t,Yt(lo())),Zn((function(i){var n=this;return e(t,(function(e){return Dt(e,n,i)}))}))}))}function Kr(e,t){var i=(t=t===r?" ":dr(t)).length;if(i<2)return i?Qn(t,e):t;var n=Qn(t,pt(e/fi(t)));return ai(t)?yr(pi(n),0,e).join(""):n.slice(0,e)}function Wr(e){return function(t,i,o){return o&&"number"!=typeof o&&Io(t,i,o)&&(i=o=r),t=pa(t),i===r?(i=t,t=0):i=pa(i),function(e,t,i,r){for(var o=-1,s=mi(pt((t-e)/(i||1)),0),a=n(s);s--;)a[r?s:++o]=e,e+=i;return a}(t,i,o=o===r?t<i?1:-1:pa(o),e)}}function Gr(e){return function(t,i){return"string"==typeof t&&"string"==typeof i||(t=ga(t),i=ga(i)),e(t,i)}}function zr(e,t,i,n,o,s,a,c,u,h){var f=8&t;t|=f?l:d,4&(t&=~(f?d:l))||(t&=-4);var p=[e,t,o,f?s:r,f?a:r,f?r:s,f?r:a,c,u,h],_=i.apply(r,p);return vo(e)&&To(_,p),_.placeholder=n,Vo(_,e,t)}function Jr(e){var t=be[e];return function(e,i){if(e=ga(e),(i=null==i?0:Ri(_a(i),292))&&St(e)){var n=(Ra(e)+"e").split("e");return+((n=(Ra(t(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return t(e)}}var Qr=Di&&1/ui(new Di([,-0]))[1]==f?function(e){return new Di(e)}:lc;function Zr(e){return function(t){var i=Co(t);return i==E?ci(t):i==x?hi(t):function(e,t){return kt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xr(e,t,i,s,f,p,_,C){var g=2&t;if(!g&&"function"!=typeof e)throw new xe(o);var m=s?s.length:0;if(m||(t&=-97,s=f=r),_=_===r?_:mi(_a(_),0),C=C===r?C:_a(C),m-=f?f.length:0,t&d){var R=s,S=f;s=f=r}var I=g?r:so(e),y=[e,t,i,s,f,R,S,p,_,C];if(I&&function(e,t){var i=e[1],n=t[1],r=i|n,o=r<131,s=n==u&&8==i||n==u&&i==h&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==i;if(!o&&!s)return e;1&n&&(e[2]=t[2],r|=1&i?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Mr(l,c,t[4]):c,e[4]=l?di(e[3],a):t[4]}(c=t[5])&&(l=e[5],e[5]=l?Pr(l,c,t[6]):c,e[6]=l?di(e[5],a):t[6]);(c=t[7])&&(e[7]=c);n&u&&(e[8]=null==e[8]?t[8]:Ri(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=r}(y,I),e=y[0],t=y[1],i=y[2],s=y[3],f=y[4],!(C=y[9]=y[9]===r?g?0:e.length:mi(y[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)v=8==t||t==c?function(e,t,i){var o=Ur(e);return function s(){for(var a=arguments.length,c=n(a),l=a,d=co(s);l--;)c[l]=arguments[l];var u=a<3&&c[0]!==d&&c[a-1]!==d?[]:di(c,d);return(a-=u.length)<i?zr(e,t,jr,s.placeholder,r,c,u,r,r,i-a):Dt(this&&this!==_t&&this instanceof s?o:e,this,c)}}(e,t,C):t!=l&&33!=t||f.length?jr.apply(r,y):function(e,t,i,r){var o=1&t,s=Ur(e);return function t(){for(var a=-1,c=arguments.length,l=-1,d=r.length,u=n(d+c),h=this&&this!==_t&&this instanceof t?s:e;++l<d;)u[l]=r[l];for(;c--;)u[l++]=arguments[++a];return Dt(h,o?i:this,u)}}(e,t,i,s);else var v=function(e,t,i){var n=1&t,r=Ur(e);return function t(){return(this&&this!==_t&&this instanceof t?r:e).apply(n?i:this,arguments)}}(e,t,i);return Vo((I?tr:To)(v,y),e,t)}function Yr(e,t,i,n){return e===r||js(e,Oe[i])&&!Ne.call(n,i)?t:e}function eo(e,t,i,n,o,s){return ta(e)&&ta(t)&&(s.set(t,e),Hn(e,t,r,eo,s),s.delete(t)),e}function to(e){return oa(e)?r:e}function io(e,t,i,n,o,s){var a=1&i,c=e.length,l=t.length;if(c!=l&&!(a&&l>c))return!1;var d=s.get(e),u=s.get(t);if(d&&u)return d==t&&u==e;var h=-1,f=!0,p=2&i?new zi:r;for(s.set(e,t),s.set(t,e);++h<c;){var _=e[h],C=t[h];if(n)var g=a?n(C,_,h,t,e,s):n(_,C,h,e,t,s);if(g!==r){if(g)continue;f=!1;break}if(p){if(!Bt(t,(function(e,t){if(!ti(p,t)&&(_===e||o(_,e,i,n,s)))return p.push(t)}))){f=!1;break}}else if(_!==C&&!o(_,C,i,n,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function no(e){return Oo(Mo(e,r,Wo),e+"")}function ro(e){return En(e,Aa,po)}function oo(e){return En(e,Oa,_o)}var so=xi?function(e){return xi.get(e)}:lc;function ao(e){for(var t=e.name+"",i=Ti[t],n=Ne.call(Ti,t)?i.length:0;n--;){var r=i[n],o=r.func;if(null==o||o==e)return r.name}return t}function co(e){return(Ne.call(Fi,"placeholder")?Fi:e).placeholder}function lo(){var e=Fi.iteratee||oc;return e=e===oc?Nn:e,arguments.length?e(arguments[0],arguments[1]):e}function uo(e,t){var i,n,r=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?r["string"==typeof t?"string":"hash"]:r.map}function ho(e){for(var t=Aa(e),i=t.length;i--;){var n=t[i],r=e[n];t[i]=[n,r,bo(r)]}return t}function fo(e,t){var i=function(e,t){return null==e?r:e[t]}(e,t);return kn(i)?i:r}var po=gt?function(e){return null==e?[]:(e=De(e),At(gt(e),(function(t){return Je.call(e,t)})))}:Cc,_o=gt?function(e){for(var t=[];e;)Nt(t,po(e)),e=Ge(e);return t}:Cc,Co=bn;function go(e,t,i){for(var n=-1,r=(t=Sr(t,e)).length,o=!1;++n<r;){var s=Uo(t[n]);if(!(o=null!=e&&i(e,s)))break;e=e[s]}return o||++n!=r?o:!!(r=null==e?0:e.length)&&ea(r)&&So(s,r)&&(Ks(e)||qs(e))}function mo(e){return"function"!=typeof e.constructor||Eo(e)?{}:ji(Ge(e))}function Ro(e){return Ks(e)||qs(e)||!!(Ze&&e&&e[Ze])}function So(e,t){var i=typeof e;return!!(t=null==t?p:t)&&("number"==i||"symbol"!=i&&Se.test(e))&&e>-1&&e%1==0&&e<t}function Io(e,t,i){if(!ta(i))return!1;var n=typeof t;return!!("number"==n?Gs(i)&&So(t,i.length):"string"==n&&t in i)&&js(i[t],e)}function yo(e,t){if(Ks(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!la(e))||(ie.test(e)||!te.test(e)||null!=t&&e in De(t))}function vo(e){var t=ao(e),i=Fi[t];if("function"!=typeof i||!(t in qi.prototype))return!1;if(e===i)return!0;var n=so(i);return!!n&&e===n[0]}(wi&&Co(new wi(new ArrayBuffer(1)))!=k||Ei&&Co(new Ei)!=E||bi&&Co(bi.resolve())!=M||Di&&Co(new Di)!=x||Mi&&Co(new Mi)!=O)&&(Co=function(e){var t=bn(e),i=t==D?e.constructor:r,n=i?Bo(i):"";if(n)switch(n){case Ai:return k;case Oi:return E;case Vi:return M;case ki:return x;case Ni:return O}return t});var wo=Ve?Xs:gc;function Eo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function bo(e){return e==e&&!ta(e)}function Do(e,t){return function(i){return null!=i&&(i[e]===t&&(t!==r||e in De(i)))}}function Mo(e,t,i){return t=mi(t===r?e.length-1:t,0),function(){for(var r=arguments,o=-1,s=mi(r.length-t,0),a=n(s);++o<s;)a[o]=r[t+o];o=-1;for(var c=n(t+1);++o<t;)c[o]=r[o];return c[t]=i(a),Dt(e,this,c)}}function Po(e,t){return t.length<2?e:wn(e,rr(t,0,-1))}function xo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var To=ko(tr),Ao=ft||function(e,t){return _t.setTimeout(e,t)},Oo=ko(ir);function Vo(e,t,i){var n=t+"";return Oo(e,function(e,t){var i=t.length;if(!i)return e;var n=i-1;return t[n]=(i>1?"& ":"")+t[n],t=t.join(i>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Pt(g,(function(i){var n="_."+i[0];t&i[1]&&!Ot(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(de):[]}(n),i)))}function ko(e){var t=0,i=0;return function(){var n=Si(),o=16-(n-i);if(i=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function No(e,t){var i=-1,n=e.length,o=n-1;for(t=t===r?n:t;++i<t;){var s=Jn(i,o),a=e[s];e[s]=e[i],e[i]=a}return e.length=t,e}var Lo=function(e){var t=ks(e,(function(e){return 500===i.size&&i.clear(),e})),i=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ne,(function(e,i,n,r){t.push(n?r.replace(fe,"$1"):i||e)})),t}));function Uo(e){if("string"==typeof e||la(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bo(e){if(null!=e){try{return ke.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fo(e){if(e instanceof qi)return e.clone();var t=new Hi(e.__wrapped__,e.__chain__);return t.__actions__=xr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var jo=Zn((function(e,t){return zs(e)?hn(e,mn(t,1,zs,!0)):[]})),$o=Zn((function(e,t){var i=Zo(t);return zs(i)&&(i=r),zs(e)?hn(e,mn(t,1,zs,!0),lo(i,2)):[]})),Ho=Zn((function(e,t){var i=Zo(t);return zs(i)&&(i=r),zs(e)?hn(e,mn(t,1,zs,!0),r,i):[]}));function qo(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=null==i?0:_a(i);return r<0&&(r=mi(n+r,0)),$t(e,lo(t,3),r)}function Ko(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=n-1;return i!==r&&(o=_a(i),o=i<0?mi(n+o,0):Ri(o,n-1)),$t(e,lo(t,3),o,!0)}function Wo(e){return(null==e?0:e.length)?mn(e,1):[]}function Go(e){return e&&e.length?e[0]:r}var zo=Zn((function(e){var t=kt(e,mr);return t.length&&t[0]===e[0]?xn(t):[]})),Jo=Zn((function(e){var t=Zo(e),i=kt(e,mr);return t===Zo(i)?t=r:i.pop(),i.length&&i[0]===e[0]?xn(i,lo(t,2)):[]})),Qo=Zn((function(e){var t=Zo(e),i=kt(e,mr);return(t="function"==typeof t?t:r)&&i.pop(),i.length&&i[0]===e[0]?xn(i,r,t):[]}));function Zo(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Xo=Zn(Yo);function Yo(e,t){return e&&e.length&&t&&t.length?Gn(e,t):e}var es=no((function(e,t){var i=null==e?0:e.length,n=an(e,t);return zn(e,kt(t,(function(e){return So(e,i)?+e:e})).sort(Dr)),n}));function ts(e){return null==e?e:vi.call(e)}var is=Zn((function(e){return ur(mn(e,1,zs,!0))})),ns=Zn((function(e){var t=Zo(e);return zs(t)&&(t=r),ur(mn(e,1,zs,!0),lo(t,2))})),rs=Zn((function(e){var t=Zo(e);return t="function"==typeof t?t:r,ur(mn(e,1,zs,!0),r,t)}));function os(e){if(!e||!e.length)return[];var t=0;return e=At(e,(function(e){if(zs(e))return t=mi(e.length,t),!0})),Zt(t,(function(t){return kt(e,Gt(t))}))}function ss(e,t){if(!e||!e.length)return[];var i=os(e);return null==t?i:kt(i,(function(e){return Dt(t,r,e)}))}var as=Zn((function(e,t){return zs(e)?hn(e,t):[]})),cs=Zn((function(e){return Cr(At(e,zs))})),ls=Zn((function(e){var t=Zo(e);return zs(t)&&(t=r),Cr(At(e,zs),lo(t,2))})),ds=Zn((function(e){var t=Zo(e);return t="function"==typeof t?t:r,Cr(At(e,zs),r,t)})),us=Zn(os);var hs=Zn((function(e){var t=e.length,i=t>1?e[t-1]:r;return i="function"==typeof i?(e.pop(),i):r,ss(e,i)}));function fs(e){var t=Fi(e);return t.__chain__=!0,t}function ps(e,t){return t(e)}var _s=no((function(e){var t=e.length,i=t?e[0]:0,n=this.__wrapped__,o=function(t){return an(t,e)};return!(t>1||this.__actions__.length)&&n instanceof qi&&So(i)?((n=n.slice(i,+i+(t?1:0))).__actions__.push({func:ps,args:[o],thisArg:r}),new Hi(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(o)}));var Cs=Ar((function(e,t,i){Ne.call(e,i)?++e[i]:sn(e,i,1)}));var gs=Br(qo),ms=Br(Ko);function Rs(e,t){return(Ks(e)?Pt:fn)(e,lo(t,3))}function Ss(e,t){return(Ks(e)?xt:pn)(e,lo(t,3))}var Is=Ar((function(e,t,i){Ne.call(e,i)?e[i].push(t):sn(e,i,[t])}));var ys=Zn((function(e,t,i){var r=-1,o="function"==typeof t,s=Gs(e)?n(e.length):[];return fn(e,(function(e){s[++r]=o?Dt(t,e,i):Tn(e,t,i)})),s})),vs=Ar((function(e,t,i){sn(e,i,t)}));function ws(e,t){return(Ks(e)?kt:Fn)(e,lo(t,3))}var Es=Ar((function(e,t,i){e[i?0:1].push(t)}),(function(){return[[],[]]}));var bs=Zn((function(e,t){if(null==e)return[];var i=t.length;return i>1&&Io(e,t[0],t[1])?t=[]:i>2&&Io(t[0],t[1],t[2])&&(t=[t[0]]),Kn(e,mn(t,1),[])})),Ds=dt||function(){return _t.Date.now()};function Ms(e,t,i){return t=i?r:t,t=e&&null==t?e.length:t,Xr(e,u,r,r,r,r,t)}function Ps(e,t){var i;if("function"!=typeof t)throw new xe(o);return e=_a(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=r),i}}var xs=Zn((function(e,t,i){var n=1;if(i.length){var r=di(i,co(xs));n|=l}return Xr(e,n,t,i,r)})),Ts=Zn((function(e,t,i){var n=3;if(i.length){var r=di(i,co(Ts));n|=l}return Xr(t,n,e,i,r)}));function As(e,t,i){var n,s,a,c,l,d,u=0,h=!1,f=!1,p=!0;if("function"!=typeof e)throw new xe(o);function _(t){var i=n,o=s;return n=s=r,u=t,c=e.apply(o,i)}function C(e){var i=e-d;return d===r||i>=t||i<0||f&&e-u>=a}function g(){var e=Ds();if(C(e))return m(e);l=Ao(g,function(e){var i=t-(e-d);return f?Ri(i,a-(e-u)):i}(e))}function m(e){return l=r,p&&n?_(e):(n=s=r,c)}function R(){var e=Ds(),i=C(e);if(n=arguments,s=this,d=e,i){if(l===r)return function(e){return u=e,l=Ao(g,t),h?_(e):c}(d);if(f)return vr(l),l=Ao(g,t),_(d)}return l===r&&(l=Ao(g,t)),c}return t=ga(t)||0,ta(i)&&(h=!!i.leading,a=(f="maxWait"in i)?mi(ga(i.maxWait)||0,t):a,p="trailing"in i?!!i.trailing:p),R.cancel=function(){l!==r&&vr(l),u=0,n=d=s=l=r},R.flush=function(){return l===r?c:m(Ds())},R}var Os=Zn((function(e,t){return un(e,1,t)})),Vs=Zn((function(e,t,i){return un(e,ga(t)||0,i)}));function ks(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new xe(o);var i=function(){var n=arguments,r=t?t.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var s=e.apply(this,n);return i.cache=o.set(r,s)||o,s};return i.cache=new(ks.Cache||Gi),i}function Ns(e){if("function"!=typeof e)throw new xe(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ks.Cache=Gi;var Ls=Ir((function(e,t){var i=(t=1==t.length&&Ks(t[0])?kt(t[0],Yt(lo())):kt(mn(t,1),Yt(lo()))).length;return Zn((function(n){for(var r=-1,o=Ri(n.length,i);++r<o;)n[r]=t[r].call(this,n[r]);return Dt(e,this,n)}))})),Us=Zn((function(e,t){var i=di(t,co(Us));return Xr(e,l,r,t,i)})),Bs=Zn((function(e,t){var i=di(t,co(Bs));return Xr(e,d,r,t,i)})),Fs=no((function(e,t){return Xr(e,h,r,r,r,t)}));function js(e,t){return e===t||e!=e&&t!=t}var $s=Gr(Dn),Hs=Gr((function(e,t){return e>=t})),qs=An(function(){return arguments}())?An:function(e){return ia(e)&&Ne.call(e,"callee")&&!Je.call(e,"callee")},Ks=n.isArray,Ws=It?Yt(It):function(e){return ia(e)&&bn(e)==V};function Gs(e){return null!=e&&ea(e.length)&&!Xs(e)}function zs(e){return ia(e)&&Gs(e)}var Js=Rt||gc,Qs=yt?Yt(yt):function(e){return ia(e)&&bn(e)==I};function Zs(e){if(!ia(e))return!1;var t=bn(e);return t==y||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!oa(e)}function Xs(e){if(!ta(e))return!1;var t=bn(e);return t==v||t==w||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ys(e){return"number"==typeof e&&e==_a(e)}function ea(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function ta(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ia(e){return null!=e&&"object"==typeof e}var na=vt?Yt(vt):function(e){return ia(e)&&Co(e)==E};function ra(e){return"number"==typeof e||ia(e)&&bn(e)==b}function oa(e){if(!ia(e)||bn(e)!=D)return!1;var t=Ge(e);if(null===t)return!0;var i=Ne.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&ke.call(i)==Fe}var sa=wt?Yt(wt):function(e){return ia(e)&&bn(e)==P};var aa=Et?Yt(Et):function(e){return ia(e)&&Co(e)==x};function ca(e){return"string"==typeof e||!Ks(e)&&ia(e)&&bn(e)==T}function la(e){return"symbol"==typeof e||ia(e)&&bn(e)==A}var da=bt?Yt(bt):function(e){return ia(e)&&ea(e.length)&&!!ct[bn(e)]};var ua=Gr(Bn),ha=Gr((function(e,t){return e<=t}));function fa(e){if(!e)return[];if(Gs(e))return ca(e)?pi(e):xr(e);if(Xe&&e[Xe])return function(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}(e[Xe]());var t=Co(e);return(t==E?ci:t==x?ui:ja)(e)}function pa(e){return e?(e=ga(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function _a(e){var t=pa(e),i=t%1;return t==t?i?t-i:t:0}function Ca(e){return e?cn(_a(e),0,C):0}function ga(e){if("number"==typeof e)return e;if(la(e))return _;if(ta(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ta(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xt(e);var i=ge.test(e);return i||Re.test(e)?ht(e.slice(2),i?2:8):Ce.test(e)?_:+e}function ma(e){return Tr(e,Oa(e))}function Ra(e){return null==e?"":dr(e)}var Sa=Or((function(e,t){if(Eo(t)||Gs(t))Tr(t,Aa(t),e);else for(var i in t)Ne.call(t,i)&&tn(e,i,t[i])})),Ia=Or((function(e,t){Tr(t,Oa(t),e)})),ya=Or((function(e,t,i,n){Tr(t,Oa(t),e,n)})),va=Or((function(e,t,i,n){Tr(t,Aa(t),e,n)})),wa=no(an);var Ea=Zn((function(e,t){e=De(e);var i=-1,n=t.length,o=n>2?t[2]:r;for(o&&Io(t[0],t[1],o)&&(n=1);++i<n;)for(var s=t[i],a=Oa(s),c=-1,l=a.length;++c<l;){var d=a[c],u=e[d];(u===r||js(u,Oe[d])&&!Ne.call(e,d))&&(e[d]=s[d])}return e})),ba=Zn((function(e){return e.push(r,eo),Dt(ka,r,e)}));function Da(e,t,i){var n=null==e?r:wn(e,t);return n===r?i:n}function Ma(e,t){return null!=e&&go(e,t,Pn)}var Pa=$r((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),e[t]=i}),tc(rc)),xa=$r((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),Ne.call(e,t)?e[t].push(i):e[t]=[i]}),lo),Ta=Zn(Tn);function Aa(e){return Gs(e)?Qi(e):Ln(e)}function Oa(e){return Gs(e)?Qi(e,!0):Un(e)}var Va=Or((function(e,t,i){Hn(e,t,i)})),ka=Or((function(e,t,i,n){Hn(e,t,i,n)})),Na=no((function(e,t){var i={};if(null==e)return i;var n=!1;t=kt(t,(function(t){return t=Sr(t,e),n||(n=t.length>1),t})),Tr(e,oo(e),i),n&&(i=ln(i,7,to));for(var r=t.length;r--;)hr(i,t[r]);return i}));var La=no((function(e,t){return null==e?{}:function(e,t){return Wn(e,t,(function(t,i){return Ma(e,i)}))}(e,t)}));function Ua(e,t){if(null==e)return{};var i=kt(oo(e),(function(e){return[e]}));return t=lo(t),Wn(e,i,(function(e,i){return t(e,i[0])}))}var Ba=Zr(Aa),Fa=Zr(Oa);function ja(e){return null==e?[]:ei(e,Aa(e))}var $a=Lr((function(e,t,i){return t=t.toLowerCase(),e+(i?Ha(t):t)}));function Ha(e){return Za(Ra(e).toLowerCase())}function qa(e){return(e=Ra(e))&&e.replace(Ie,ri).replace(tt,"")}var Ka=Lr((function(e,t,i){return e+(i?"-":"")+t.toLowerCase()})),Wa=Lr((function(e,t,i){return e+(i?" ":"")+t.toLowerCase()})),Ga=Nr("toLowerCase");var za=Lr((function(e,t,i){return e+(i?"_":"")+t.toLowerCase()}));var Ja=Lr((function(e,t,i){return e+(i?" ":"")+Za(t)}));var Qa=Lr((function(e,t,i){return e+(i?" ":"")+t.toUpperCase()})),Za=Nr("toUpperCase");function Xa(e,t,i){return e=Ra(e),(t=i?r:t)===r?function(e){return ot.test(e)}(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.match(ue)||[]}(e):e.match(t)||[]}var Ya=Zn((function(e,t){try{return Dt(e,r,t)}catch(e){return Zs(e)?e:new we(e)}})),ec=no((function(e,t){return Pt(t,(function(t){t=Uo(t),sn(e,t,xs(e[t],e))})),e}));function tc(e){return function(){return e}}var ic=Fr(),nc=Fr(!0);function rc(e){return e}function oc(e){return Nn("function"==typeof e?e:ln(e,1))}var sc=Zn((function(e,t){return function(i){return Tn(i,e,t)}})),ac=Zn((function(e,t){return function(i){return Tn(e,i,t)}}));function cc(e,t,i){var n=Aa(t),r=vn(t,n);null!=i||ta(t)&&(r.length||!n.length)||(i=t,t=e,e=this,r=vn(t,Aa(t)));var o=!(ta(i)&&"chain"in i&&!i.chain),s=Xs(e);return Pt(r,(function(i){var n=t[i];e[i]=n,s&&(e.prototype[i]=function(){var t=this.__chain__;if(o||t){var i=e(this.__wrapped__);return(i.__actions__=xr(this.__actions__)).push({func:n,args:arguments,thisArg:e}),i.__chain__=t,i}return n.apply(e,Nt([this.value()],arguments))})})),e}function lc(){}var dc=qr(kt),uc=qr(Tt),hc=qr(Bt);function fc(e){return yo(e)?Gt(Uo(e)):function(e){return function(t){return wn(t,e)}}(e)}var pc=Wr(),_c=Wr(!0);function Cc(){return[]}function gc(){return!1}var mc=Hr((function(e,t){return e+t}),0),Rc=Jr("ceil"),Sc=Hr((function(e,t){return e/t}),1),Ic=Jr("floor");var yc,vc=Hr((function(e,t){return e*t}),1),wc=Jr("round"),Ec=Hr((function(e,t){return e-t}),0);return Fi.after=function(e,t){if("function"!=typeof t)throw new xe(o);return e=_a(e),function(){if(--e<1)return t.apply(this,arguments)}},Fi.ary=Ms,Fi.assign=Sa,Fi.assignIn=Ia,Fi.assignInWith=ya,Fi.assignWith=va,Fi.at=wa,Fi.before=Ps,Fi.bind=xs,Fi.bindAll=ec,Fi.bindKey=Ts,Fi.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ks(e)?e:[e]},Fi.chain=fs,Fi.chunk=function(e,t,i){t=(i?Io(e,t,i):t===r)?1:mi(_a(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var s=0,a=0,c=n(pt(o/t));s<o;)c[a++]=rr(e,s,s+=t);return c},Fi.compact=function(e){for(var t=-1,i=null==e?0:e.length,n=0,r=[];++t<i;){var o=e[t];o&&(r[n++]=o)}return r},Fi.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),i=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Nt(Ks(i)?xr(i):[i],mn(t,1))},Fi.cond=function(e){var t=null==e?0:e.length,i=lo();return e=t?kt(e,(function(e){if("function"!=typeof e[1])throw new xe(o);return[i(e[0]),e[1]]})):[],Zn((function(i){for(var n=-1;++n<t;){var r=e[n];if(Dt(r[0],this,i))return Dt(r[1],this,i)}}))},Fi.conforms=function(e){return function(e){var t=Aa(e);return function(i){return dn(i,e,t)}}(ln(e,1))},Fi.constant=tc,Fi.countBy=Cs,Fi.create=function(e,t){var i=ji(e);return null==t?i:on(i,t)},Fi.curry=function e(t,i,n){var o=Xr(t,8,r,r,r,r,r,i=n?r:i);return o.placeholder=e.placeholder,o},Fi.curryRight=function e(t,i,n){var o=Xr(t,c,r,r,r,r,r,i=n?r:i);return o.placeholder=e.placeholder,o},Fi.debounce=As,Fi.defaults=Ea,Fi.defaultsDeep=ba,Fi.defer=Os,Fi.delay=Vs,Fi.difference=jo,Fi.differenceBy=$o,Fi.differenceWith=Ho,Fi.drop=function(e,t,i){var n=null==e?0:e.length;return n?rr(e,(t=i||t===r?1:_a(t))<0?0:t,n):[]},Fi.dropRight=function(e,t,i){var n=null==e?0:e.length;return n?rr(e,0,(t=n-(t=i||t===r?1:_a(t)))<0?0:t):[]},Fi.dropRightWhile=function(e,t){return e&&e.length?pr(e,lo(t,3),!0,!0):[]},Fi.dropWhile=function(e,t){return e&&e.length?pr(e,lo(t,3),!0):[]},Fi.fill=function(e,t,i,n){var o=null==e?0:e.length;return o?(i&&"number"!=typeof i&&Io(e,t,i)&&(i=0,n=o),function(e,t,i,n){var o=e.length;for((i=_a(i))<0&&(i=-i>o?0:o+i),(n=n===r||n>o?o:_a(n))<0&&(n+=o),n=i>n?0:Ca(n);i<n;)e[i++]=t;return e}(e,t,i,n)):[]},Fi.filter=function(e,t){return(Ks(e)?At:gn)(e,lo(t,3))},Fi.flatMap=function(e,t){return mn(ws(e,t),1)},Fi.flatMapDeep=function(e,t){return mn(ws(e,t),f)},Fi.flatMapDepth=function(e,t,i){return i=i===r?1:_a(i),mn(ws(e,t),i)},Fi.flatten=Wo,Fi.flattenDeep=function(e){return(null==e?0:e.length)?mn(e,f):[]},Fi.flattenDepth=function(e,t){return(null==e?0:e.length)?mn(e,t=t===r?1:_a(t)):[]},Fi.flip=function(e){return Xr(e,512)},Fi.flow=ic,Fi.flowRight=nc,Fi.fromPairs=function(e){for(var t=-1,i=null==e?0:e.length,n={};++t<i;){var r=e[t];n[r[0]]=r[1]}return n},Fi.functions=function(e){return null==e?[]:vn(e,Aa(e))},Fi.functionsIn=function(e){return null==e?[]:vn(e,Oa(e))},Fi.groupBy=Is,Fi.initial=function(e){return(null==e?0:e.length)?rr(e,0,-1):[]},Fi.intersection=zo,Fi.intersectionBy=Jo,Fi.intersectionWith=Qo,Fi.invert=Pa,Fi.invertBy=xa,Fi.invokeMap=ys,Fi.iteratee=oc,Fi.keyBy=vs,Fi.keys=Aa,Fi.keysIn=Oa,Fi.map=ws,Fi.mapKeys=function(e,t){var i={};return t=lo(t,3),In(e,(function(e,n,r){sn(i,t(e,n,r),e)})),i},Fi.mapValues=function(e,t){var i={};return t=lo(t,3),In(e,(function(e,n,r){sn(i,n,t(e,n,r))})),i},Fi.matches=function(e){return jn(ln(e,1))},Fi.matchesProperty=function(e,t){return $n(e,ln(t,1))},Fi.memoize=ks,Fi.merge=Va,Fi.mergeWith=ka,Fi.method=sc,Fi.methodOf=ac,Fi.mixin=cc,Fi.negate=Ns,Fi.nthArg=function(e){return e=_a(e),Zn((function(t){return qn(t,e)}))},Fi.omit=Na,Fi.omitBy=function(e,t){return Ua(e,Ns(lo(t)))},Fi.once=function(e){return Ps(2,e)},Fi.orderBy=function(e,t,i,n){return null==e?[]:(Ks(t)||(t=null==t?[]:[t]),Ks(i=n?r:i)||(i=null==i?[]:[i]),Kn(e,t,i))},Fi.over=dc,Fi.overArgs=Ls,Fi.overEvery=uc,Fi.overSome=hc,Fi.partial=Us,Fi.partialRight=Bs,Fi.partition=Es,Fi.pick=La,Fi.pickBy=Ua,Fi.property=fc,Fi.propertyOf=function(e){return function(t){return null==e?r:wn(e,t)}},Fi.pull=Xo,Fi.pullAll=Yo,Fi.pullAllBy=function(e,t,i){return e&&e.length&&t&&t.length?Gn(e,t,lo(i,2)):e},Fi.pullAllWith=function(e,t,i){return e&&e.length&&t&&t.length?Gn(e,t,r,i):e},Fi.pullAt=es,Fi.range=pc,Fi.rangeRight=_c,Fi.rearg=Fs,Fi.reject=function(e,t){return(Ks(e)?At:gn)(e,Ns(lo(t,3)))},Fi.remove=function(e,t){var i=[];if(!e||!e.length)return i;var n=-1,r=[],o=e.length;for(t=lo(t,3);++n<o;){var s=e[n];t(s,n,e)&&(i.push(s),r.push(n))}return zn(e,r),i},Fi.rest=function(e,t){if("function"!=typeof e)throw new xe(o);return Zn(e,t=t===r?t:_a(t))},Fi.reverse=ts,Fi.sampleSize=function(e,t,i){return t=(i?Io(e,t,i):t===r)?1:_a(t),(Ks(e)?Xi:Yn)(e,t)},Fi.set=function(e,t,i){return null==e?e:er(e,t,i)},Fi.setWith=function(e,t,i,n){return n="function"==typeof n?n:r,null==e?e:er(e,t,i,n)},Fi.shuffle=function(e){return(Ks(e)?Yi:nr)(e)},Fi.slice=function(e,t,i){var n=null==e?0:e.length;return n?(i&&"number"!=typeof i&&Io(e,t,i)?(t=0,i=n):(t=null==t?0:_a(t),i=i===r?n:_a(i)),rr(e,t,i)):[]},Fi.sortBy=bs,Fi.sortedUniq=function(e){return e&&e.length?cr(e):[]},Fi.sortedUniqBy=function(e,t){return e&&e.length?cr(e,lo(t,2)):[]},Fi.split=function(e,t,i){return i&&"number"!=typeof i&&Io(e,t,i)&&(t=i=r),(i=i===r?C:i>>>0)?(e=Ra(e))&&("string"==typeof t||null!=t&&!sa(t))&&!(t=dr(t))&&ai(e)?yr(pi(e),0,i):e.split(t,i):[]},Fi.spread=function(e,t){if("function"!=typeof e)throw new xe(o);return t=null==t?0:mi(_a(t),0),Zn((function(i){var n=i[t],r=yr(i,0,t);return n&&Nt(r,n),Dt(e,this,r)}))},Fi.tail=function(e){var t=null==e?0:e.length;return t?rr(e,1,t):[]},Fi.take=function(e,t,i){return e&&e.length?rr(e,0,(t=i||t===r?1:_a(t))<0?0:t):[]},Fi.takeRight=function(e,t,i){var n=null==e?0:e.length;return n?rr(e,(t=n-(t=i||t===r?1:_a(t)))<0?0:t,n):[]},Fi.takeRightWhile=function(e,t){return e&&e.length?pr(e,lo(t,3),!1,!0):[]},Fi.takeWhile=function(e,t){return e&&e.length?pr(e,lo(t,3)):[]},Fi.tap=function(e,t){return t(e),e},Fi.throttle=function(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new xe(o);return ta(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),As(e,t,{leading:n,maxWait:t,trailing:r})},Fi.thru=ps,Fi.toArray=fa,Fi.toPairs=Ba,Fi.toPairsIn=Fa,Fi.toPath=function(e){return Ks(e)?kt(e,Uo):la(e)?[e]:xr(Lo(Ra(e)))},Fi.toPlainObject=ma,Fi.transform=function(e,t,i){var n=Ks(e),r=n||Js(e)||da(e);if(t=lo(t,4),null==i){var o=e&&e.constructor;i=r?n?new o:[]:ta(e)&&Xs(o)?ji(Ge(e)):{}}return(r?Pt:In)(e,(function(e,n,r){return t(i,e,n,r)})),i},Fi.unary=function(e){return Ms(e,1)},Fi.union=is,Fi.unionBy=ns,Fi.unionWith=rs,Fi.uniq=function(e){return e&&e.length?ur(e):[]},Fi.uniqBy=function(e,t){return e&&e.length?ur(e,lo(t,2)):[]},Fi.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?ur(e,r,t):[]},Fi.unset=function(e,t){return null==e||hr(e,t)},Fi.unzip=os,Fi.unzipWith=ss,Fi.update=function(e,t,i){return null==e?e:fr(e,t,Rr(i))},Fi.updateWith=function(e,t,i,n){return n="function"==typeof n?n:r,null==e?e:fr(e,t,Rr(i),n)},Fi.values=ja,Fi.valuesIn=function(e){return null==e?[]:ei(e,Oa(e))},Fi.without=as,Fi.words=Xa,Fi.wrap=function(e,t){return Us(Rr(t),e)},Fi.xor=cs,Fi.xorBy=ls,Fi.xorWith=ds,Fi.zip=us,Fi.zipObject=function(e,t){return gr(e||[],t||[],tn)},Fi.zipObjectDeep=function(e,t){return gr(e||[],t||[],er)},Fi.zipWith=hs,Fi.entries=Ba,Fi.entriesIn=Fa,Fi.extend=Ia,Fi.extendWith=ya,cc(Fi,Fi),Fi.add=mc,Fi.attempt=Ya,Fi.camelCase=$a,Fi.capitalize=Ha,Fi.ceil=Rc,Fi.clamp=function(e,t,i){return i===r&&(i=t,t=r),i!==r&&(i=(i=ga(i))==i?i:0),t!==r&&(t=(t=ga(t))==t?t:0),cn(ga(e),t,i)},Fi.clone=function(e){return ln(e,4)},Fi.cloneDeep=function(e){return ln(e,5)},Fi.cloneDeepWith=function(e,t){return ln(e,5,t="function"==typeof t?t:r)},Fi.cloneWith=function(e,t){return ln(e,4,t="function"==typeof t?t:r)},Fi.conformsTo=function(e,t){return null==t||dn(e,t,Aa(t))},Fi.deburr=qa,Fi.defaultTo=function(e,t){return null==e||e!=e?t:e},Fi.divide=Sc,Fi.endsWith=function(e,t,i){e=Ra(e),t=dr(t);var n=e.length,o=i=i===r?n:cn(_a(i),0,n);return(i-=t.length)>=0&&e.slice(i,o)==t},Fi.eq=js,Fi.escape=function(e){return(e=Ra(e))&&Z.test(e)?e.replace(J,oi):e},Fi.escapeRegExp=function(e){return(e=Ra(e))&&oe.test(e)?e.replace(re,"\\$&"):e},Fi.every=function(e,t,i){var n=Ks(e)?Tt:_n;return i&&Io(e,t,i)&&(t=r),n(e,lo(t,3))},Fi.find=gs,Fi.findIndex=qo,Fi.findKey=function(e,t){return jt(e,lo(t,3),In)},Fi.findLast=ms,Fi.findLastIndex=Ko,Fi.findLastKey=function(e,t){return jt(e,lo(t,3),yn)},Fi.floor=Ic,Fi.forEach=Rs,Fi.forEachRight=Ss,Fi.forIn=function(e,t){return null==e?e:Rn(e,lo(t,3),Oa)},Fi.forInRight=function(e,t){return null==e?e:Sn(e,lo(t,3),Oa)},Fi.forOwn=function(e,t){return e&&In(e,lo(t,3))},Fi.forOwnRight=function(e,t){return e&&yn(e,lo(t,3))},Fi.get=Da,Fi.gt=$s,Fi.gte=Hs,Fi.has=function(e,t){return null!=e&&go(e,t,Mn)},Fi.hasIn=Ma,Fi.head=Go,Fi.identity=rc,Fi.includes=function(e,t,i,n){e=Gs(e)?e:ja(e),i=i&&!n?_a(i):0;var r=e.length;return i<0&&(i=mi(r+i,0)),ca(e)?i<=r&&e.indexOf(t,i)>-1:!!r&&Ht(e,t,i)>-1},Fi.indexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=null==i?0:_a(i);return r<0&&(r=mi(n+r,0)),Ht(e,t,r)},Fi.inRange=function(e,t,i){return t=pa(t),i===r?(i=t,t=0):i=pa(i),function(e,t,i){return e>=Ri(t,i)&&e<mi(t,i)}(e=ga(e),t,i)},Fi.invoke=Ta,Fi.isArguments=qs,Fi.isArray=Ks,Fi.isArrayBuffer=Ws,Fi.isArrayLike=Gs,Fi.isArrayLikeObject=zs,Fi.isBoolean=function(e){return!0===e||!1===e||ia(e)&&bn(e)==S},Fi.isBuffer=Js,Fi.isDate=Qs,Fi.isElement=function(e){return ia(e)&&1===e.nodeType&&!oa(e)},Fi.isEmpty=function(e){if(null==e)return!0;if(Gs(e)&&(Ks(e)||"string"==typeof e||"function"==typeof e.splice||Js(e)||da(e)||qs(e)))return!e.length;var t=Co(e);if(t==E||t==x)return!e.size;if(Eo(e))return!Ln(e).length;for(var i in e)if(Ne.call(e,i))return!1;return!0},Fi.isEqual=function(e,t){return On(e,t)},Fi.isEqualWith=function(e,t,i){var n=(i="function"==typeof i?i:r)?i(e,t):r;return n===r?On(e,t,r,i):!!n},Fi.isError=Zs,Fi.isFinite=function(e){return"number"==typeof e&&St(e)},Fi.isFunction=Xs,Fi.isInteger=Ys,Fi.isLength=ea,Fi.isMap=na,Fi.isMatch=function(e,t){return e===t||Vn(e,t,ho(t))},Fi.isMatchWith=function(e,t,i){return i="function"==typeof i?i:r,Vn(e,t,ho(t),i)},Fi.isNaN=function(e){return ra(e)&&e!=+e},Fi.isNative=function(e){if(wo(e))throw new we("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return kn(e)},Fi.isNil=function(e){return null==e},Fi.isNull=function(e){return null===e},Fi.isNumber=ra,Fi.isObject=ta,Fi.isObjectLike=ia,Fi.isPlainObject=oa,Fi.isRegExp=sa,Fi.isSafeInteger=function(e){return Ys(e)&&e>=-9007199254740991&&e<=p},Fi.isSet=aa,Fi.isString=ca,Fi.isSymbol=la,Fi.isTypedArray=da,Fi.isUndefined=function(e){return e===r},Fi.isWeakMap=function(e){return ia(e)&&Co(e)==O},Fi.isWeakSet=function(e){return ia(e)&&"[object WeakSet]"==bn(e)},Fi.join=function(e,t){return null==e?"":Ft.call(e,t)},Fi.kebabCase=Ka,Fi.last=Zo,Fi.lastIndexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=n;return i!==r&&(o=(o=_a(i))<0?mi(n+o,0):Ri(o,n-1)),t==t?function(e,t,i){for(var n=i+1;n--;)if(e[n]===t)return n;return n}(e,t,o):$t(e,Kt,o,!0)},Fi.lowerCase=Wa,Fi.lowerFirst=Ga,Fi.lt=ua,Fi.lte=ha,Fi.max=function(e){return e&&e.length?Cn(e,rc,Dn):r},Fi.maxBy=function(e,t){return e&&e.length?Cn(e,lo(t,2),Dn):r},Fi.mean=function(e){return Wt(e,rc)},Fi.meanBy=function(e,t){return Wt(e,lo(t,2))},Fi.min=function(e){return e&&e.length?Cn(e,rc,Bn):r},Fi.minBy=function(e,t){return e&&e.length?Cn(e,lo(t,2),Bn):r},Fi.stubArray=Cc,Fi.stubFalse=gc,Fi.stubObject=function(){return{}},Fi.stubString=function(){return""},Fi.stubTrue=function(){return!0},Fi.multiply=vc,Fi.nth=function(e,t){return e&&e.length?qn(e,_a(t)):r},Fi.noConflict=function(){return _t._===this&&(_t._=je),this},Fi.noop=lc,Fi.now=Ds,Fi.pad=function(e,t,i){e=Ra(e);var n=(t=_a(t))?fi(e):0;if(!t||n>=t)return e;var r=(t-n)/2;return Kr(Ct(r),i)+e+Kr(pt(r),i)},Fi.padEnd=function(e,t,i){e=Ra(e);var n=(t=_a(t))?fi(e):0;return t&&n<t?e+Kr(t-n,i):e},Fi.padStart=function(e,t,i){e=Ra(e);var n=(t=_a(t))?fi(e):0;return t&&n<t?Kr(t-n,i)+e:e},Fi.parseInt=function(e,t,i){return i||null==t?t=0:t&&(t=+t),Ii(Ra(e).replace(se,""),t||0)},Fi.random=function(e,t,i){if(i&&"boolean"!=typeof i&&Io(e,t,i)&&(t=i=r),i===r&&("boolean"==typeof t?(i=t,t=r):"boolean"==typeof e&&(i=e,e=r)),e===r&&t===r?(e=0,t=1):(e=pa(e),t===r?(t=e,e=0):t=pa(t)),e>t){var n=e;e=t,t=n}if(i||e%1||t%1){var o=yi();return Ri(e+o*(t-e+ut("1e-"+((o+"").length-1))),t)}return Jn(e,t)},Fi.reduce=function(e,t,i){var n=Ks(e)?Lt:Jt,r=arguments.length<3;return n(e,lo(t,4),i,r,fn)},Fi.reduceRight=function(e,t,i){var n=Ks(e)?Ut:Jt,r=arguments.length<3;return n(e,lo(t,4),i,r,pn)},Fi.repeat=function(e,t,i){return t=(i?Io(e,t,i):t===r)?1:_a(t),Qn(Ra(e),t)},Fi.replace=function(){var e=arguments,t=Ra(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fi.result=function(e,t,i){var n=-1,o=(t=Sr(t,e)).length;for(o||(o=1,e=r);++n<o;){var s=null==e?r:e[Uo(t[n])];s===r&&(n=o,s=i),e=Xs(s)?s.call(e):s}return e},Fi.round=wc,Fi.runInContext=e,Fi.sample=function(e){return(Ks(e)?Zi:Xn)(e)},Fi.size=function(e){if(null==e)return 0;if(Gs(e))return ca(e)?fi(e):e.length;var t=Co(e);return t==E||t==x?e.size:Ln(e).length},Fi.snakeCase=za,Fi.some=function(e,t,i){var n=Ks(e)?Bt:or;return i&&Io(e,t,i)&&(t=r),n(e,lo(t,3))},Fi.sortedIndex=function(e,t){return sr(e,t)},Fi.sortedIndexBy=function(e,t,i){return ar(e,t,lo(i,2))},Fi.sortedIndexOf=function(e,t){var i=null==e?0:e.length;if(i){var n=sr(e,t);if(n<i&&js(e[n],t))return n}return-1},Fi.sortedLastIndex=function(e,t){return sr(e,t,!0)},Fi.sortedLastIndexBy=function(e,t,i){return ar(e,t,lo(i,2),!0)},Fi.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var i=sr(e,t,!0)-1;if(js(e[i],t))return i}return-1},Fi.startCase=Ja,Fi.startsWith=function(e,t,i){return e=Ra(e),i=null==i?0:cn(_a(i),0,e.length),t=dr(t),e.slice(i,i+t.length)==t},Fi.subtract=Ec,Fi.sum=function(e){return e&&e.length?Qt(e,rc):0},Fi.sumBy=function(e,t){return e&&e.length?Qt(e,lo(t,2)):0},Fi.template=function(e,t,i){var n=Fi.templateSettings;i&&Io(e,t,i)&&(t=r),e=Ra(e),t=ya({},t,n,Yr);var o,s,a=ya({},t.imports,n.imports,Yr),c=Aa(a),l=ei(a,c),d=0,u=t.interpolate||ye,h="__p += '",f=Me((t.escape||ye).source+"|"+u.source+"|"+(u===ee?pe:ye).source+"|"+(t.evaluate||ye).source+"|$","g"),p="//# sourceURL="+(Ne.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(f,(function(t,i,n,r,a,c){return n||(n=r),h+=e.slice(d,c).replace(ve,si),i&&(o=!0,h+="' +\n__e("+i+") +\n'"),a&&(s=!0,h+="';\n"+a+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),d=c+t.length,t})),h+="';\n";var _=Ne.call(t,"variable")&&t.variable;if(_){if(he.test(_))throw new we("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(s?h.replace(K,""):h).replace(W,"$1").replace(G,"$1;"),h="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var C=Ya((function(){return Ee(c,p+"return "+h).apply(r,l)}));if(C.source=h,Zs(C))throw C;return C},Fi.times=function(e,t){if((e=_a(e))<1||e>p)return[];var i=C,n=Ri(e,C);t=lo(t),e-=C;for(var r=Zt(n,t);++i<e;)t(i);return r},Fi.toFinite=pa,Fi.toInteger=_a,Fi.toLength=Ca,Fi.toLower=function(e){return Ra(e).toLowerCase()},Fi.toNumber=ga,Fi.toSafeInteger=function(e){return e?cn(_a(e),-9007199254740991,p):0===e?e:0},Fi.toString=Ra,Fi.toUpper=function(e){return Ra(e).toUpperCase()},Fi.trim=function(e,t,i){if((e=Ra(e))&&(i||t===r))return Xt(e);if(!e||!(t=dr(t)))return e;var n=pi(e),o=pi(t);return yr(n,ii(n,o),ni(n,o)+1).join("")},Fi.trimEnd=function(e,t,i){if((e=Ra(e))&&(i||t===r))return e.slice(0,_i(e)+1);if(!e||!(t=dr(t)))return e;var n=pi(e);return yr(n,0,ni(n,pi(t))+1).join("")},Fi.trimStart=function(e,t,i){if((e=Ra(e))&&(i||t===r))return e.replace(se,"");if(!e||!(t=dr(t)))return e;var n=pi(e);return yr(n,ii(n,pi(t))).join("")},Fi.truncate=function(e,t){var i=30,n="...";if(ta(t)){var o="separator"in t?t.separator:o;i="length"in t?_a(t.length):i,n="omission"in t?dr(t.omission):n}var s=(e=Ra(e)).length;if(ai(e)){var a=pi(e);s=a.length}if(i>=s)return e;var c=i-fi(n);if(c<1)return n;var l=a?yr(a,0,c).join(""):e.slice(0,c);if(o===r)return l+n;if(a&&(c+=l.length-c),sa(o)){if(e.slice(c).search(o)){var d,u=l;for(o.global||(o=Me(o.source,Ra(_e.exec(o))+"g")),o.lastIndex=0;d=o.exec(u);)var h=d.index;l=l.slice(0,h===r?c:h)}}else if(e.indexOf(dr(o),c)!=c){var f=l.lastIndexOf(o);f>-1&&(l=l.slice(0,f))}return l+n},Fi.unescape=function(e){return(e=Ra(e))&&Q.test(e)?e.replace(z,Ci):e},Fi.uniqueId=function(e){var t=++Le;return Ra(e)+t},Fi.upperCase=Qa,Fi.upperFirst=Za,Fi.each=Rs,Fi.eachRight=Ss,Fi.first=Go,cc(Fi,(yc={},In(Fi,(function(e,t){Ne.call(Fi.prototype,t)||(yc[t]=e)})),yc),{chain:!1}),Fi.VERSION="4.17.21",Pt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Fi[e].placeholder=Fi})),Pt(["drop","take"],(function(e,t){qi.prototype[e]=function(i){i=i===r?1:mi(_a(i),0);var n=this.__filtered__&&!t?new qi(this):this.clone();return n.__filtered__?n.__takeCount__=Ri(i,n.__takeCount__):n.__views__.push({size:Ri(i,C),type:e+(n.__dir__<0?"Right":"")}),n},qi.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Pt(["filter","map","takeWhile"],(function(e,t){var i=t+1,n=1==i||3==i;qi.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:lo(e,3),type:i}),t.__filtered__=t.__filtered__||n,t}})),Pt(["head","last"],(function(e,t){var i="take"+(t?"Right":"");qi.prototype[e]=function(){return this[i](1).value()[0]}})),Pt(["initial","tail"],(function(e,t){var i="drop"+(t?"":"Right");qi.prototype[e]=function(){return this.__filtered__?new qi(this):this[i](1)}})),qi.prototype.compact=function(){return this.filter(rc)},qi.prototype.find=function(e){return this.filter(e).head()},qi.prototype.findLast=function(e){return this.reverse().find(e)},qi.prototype.invokeMap=Zn((function(e,t){return"function"==typeof e?new qi(this):this.map((function(i){return Tn(i,e,t)}))})),qi.prototype.reject=function(e){return this.filter(Ns(lo(e)))},qi.prototype.slice=function(e,t){e=_a(e);var i=this;return i.__filtered__&&(e>0||t<0)?new qi(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==r&&(i=(t=_a(t))<0?i.dropRight(-t):i.take(t-e)),i)},qi.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},qi.prototype.toArray=function(){return this.take(C)},In(qi.prototype,(function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),o=Fi[n?"take"+("last"==t?"Right":""):t],s=n||/^find/.test(t);o&&(Fi.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,c=t instanceof qi,l=a[0],d=c||Ks(t),u=function(e){var t=o.apply(Fi,Nt([e],a));return n&&h?t[0]:t};d&&i&&"function"==typeof l&&1!=l.length&&(c=d=!1);var h=this.__chain__,f=!!this.__actions__.length,p=s&&!h,_=c&&!f;if(!s&&d){t=_?t:new qi(this);var C=e.apply(t,a);return C.__actions__.push({func:ps,args:[u],thisArg:r}),new Hi(C,h)}return p&&_?e.apply(this,a):(C=this.thru(u),p?n?C.value()[0]:C.value():C)})})),Pt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Te[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Fi.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var r=this.value();return t.apply(Ks(r)?r:[],e)}return this[i]((function(i){return t.apply(Ks(i)?i:[],e)}))}})),In(qi.prototype,(function(e,t){var i=Fi[t];if(i){var n=i.name+"";Ne.call(Ti,n)||(Ti[n]=[]),Ti[n].push({name:t,func:i})}})),Ti[jr(r,2).name]=[{name:"wrapper",func:r}],qi.prototype.clone=function(){var e=new qi(this.__wrapped__);return e.__actions__=xr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=xr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=xr(this.__views__),e},qi.prototype.reverse=function(){if(this.__filtered__){var e=new qi(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},qi.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,i=Ks(e),n=t<0,r=i?e.length:0,o=function(e,t,i){var n=-1,r=i.length;for(;++n<r;){var o=i[n],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Ri(t,e+s);break;case"takeRight":e=mi(e,t-s)}}return{start:e,end:t}}(0,r,this.__views__),s=o.start,a=o.end,c=a-s,l=n?a:s-1,d=this.__iteratees__,u=d.length,h=0,f=Ri(c,this.__takeCount__);if(!i||!n&&r==c&&f==c)return _r(e,this.__actions__);var p=[];e:for(;c--&&h<f;){for(var _=-1,C=e[l+=t];++_<u;){var g=d[_],m=g.iteratee,R=g.type,S=m(C);if(2==R)C=S;else if(!S){if(1==R)continue e;break e}}p[h++]=C}return p},Fi.prototype.at=_s,Fi.prototype.chain=function(){return fs(this)},Fi.prototype.commit=function(){return new Hi(this.value(),this.__chain__)},Fi.prototype.next=function(){this.__values__===r&&(this.__values__=fa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},Fi.prototype.plant=function(e){for(var t,i=this;i instanceof $i;){var n=Fo(i);n.__index__=0,n.__values__=r,t?o.__wrapped__=n:t=n;var o=n;i=i.__wrapped__}return o.__wrapped__=e,t},Fi.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof qi){var t=e;return this.__actions__.length&&(t=new qi(this)),(t=t.reverse()).__actions__.push({func:ps,args:[ts],thisArg:r}),new Hi(t,this.__chain__)}return this.thru(ts)},Fi.prototype.toJSON=Fi.prototype.valueOf=Fi.prototype.value=function(){return _r(this.__wrapped__,this.__actions__)},Fi.prototype.first=Fi.prototype.head,Xe&&(Fi.prototype[Xe]=function(){return this}),Fi}();_t._=gi,(n=function(){return gi}.call(t,i,t,e))===r||(e.exports=n)}.call(this)},7456:e=>{e.exports=function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t){var i={utf8:{stringToBytes:function(e){return i.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(i.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],i=0;i<e.length;i++)t.push(255&e.charCodeAt(i));return t},bytesToString:function(e){for(var t=[],i=0;i<e.length;i++)t.push(String.fromCharCode(e[i]));return t.join("")}}};e.exports=i},function(e,t,i){!function(){var t=i(2),n=i(0).utf8,r=i(3),o=i(0).bin,s=function(e,i){e.constructor==String?e=i&&"binary"===i.encoding?o.stringToBytes(e):n.stringToBytes(e):r(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var a=t.bytesToWords(e),c=8*e.length,l=1732584193,d=-271733879,u=-1732584194,h=271733878,f=0;f<a.length;f++)a[f]=16711935&(a[f]<<8|a[f]>>>24)|4278255360&(a[f]<<24|a[f]>>>8);a[c>>>5]|=128<<c%32,a[14+(c+64>>>9<<4)]=c;var p=s._ff,_=s._gg,C=s._hh,g=s._ii;for(f=0;f<a.length;f+=16){var m=l,R=d,S=u,I=h;l=p(l,d,u,h,a[f+0],7,-680876936),h=p(h,l,d,u,a[f+1],12,-389564586),u=p(u,h,l,d,a[f+2],17,606105819),d=p(d,u,h,l,a[f+3],22,-1044525330),l=p(l,d,u,h,a[f+4],7,-176418897),h=p(h,l,d,u,a[f+5],12,1200080426),u=p(u,h,l,d,a[f+6],17,-1473231341),d=p(d,u,h,l,a[f+7],22,-45705983),l=p(l,d,u,h,a[f+8],7,1770035416),h=p(h,l,d,u,a[f+9],12,-1958414417),u=p(u,h,l,d,a[f+10],17,-42063),d=p(d,u,h,l,a[f+11],22,-1990404162),l=p(l,d,u,h,a[f+12],7,1804603682),h=p(h,l,d,u,a[f+13],12,-40341101),u=p(u,h,l,d,a[f+14],17,-1502002290),l=_(l,d=p(d,u,h,l,a[f+15],22,1236535329),u,h,a[f+1],5,-165796510),h=_(h,l,d,u,a[f+6],9,-1069501632),u=_(u,h,l,d,a[f+11],14,643717713),d=_(d,u,h,l,a[f+0],20,-373897302),l=_(l,d,u,h,a[f+5],5,-701558691),h=_(h,l,d,u,a[f+10],9,38016083),u=_(u,h,l,d,a[f+15],14,-660478335),d=_(d,u,h,l,a[f+4],20,-405537848),l=_(l,d,u,h,a[f+9],5,568446438),h=_(h,l,d,u,a[f+14],9,-1019803690),u=_(u,h,l,d,a[f+3],14,-187363961),d=_(d,u,h,l,a[f+8],20,1163531501),l=_(l,d,u,h,a[f+13],5,-1444681467),h=_(h,l,d,u,a[f+2],9,-51403784),u=_(u,h,l,d,a[f+7],14,1735328473),l=C(l,d=_(d,u,h,l,a[f+12],20,-1926607734),u,h,a[f+5],4,-378558),h=C(h,l,d,u,a[f+8],11,-2022574463),u=C(u,h,l,d,a[f+11],16,1839030562),d=C(d,u,h,l,a[f+14],23,-35309556),l=C(l,d,u,h,a[f+1],4,-1530992060),h=C(h,l,d,u,a[f+4],11,1272893353),u=C(u,h,l,d,a[f+7],16,-155497632),d=C(d,u,h,l,a[f+10],23,-1094730640),l=C(l,d,u,h,a[f+13],4,681279174),h=C(h,l,d,u,a[f+0],11,-358537222),u=C(u,h,l,d,a[f+3],16,-722521979),d=C(d,u,h,l,a[f+6],23,76029189),l=C(l,d,u,h,a[f+9],4,-640364487),h=C(h,l,d,u,a[f+12],11,-421815835),u=C(u,h,l,d,a[f+15],16,530742520),l=g(l,d=C(d,u,h,l,a[f+2],23,-995338651),u,h,a[f+0],6,-198630844),h=g(h,l,d,u,a[f+7],10,1126891415),u=g(u,h,l,d,a[f+14],15,-1416354905),d=g(d,u,h,l,a[f+5],21,-57434055),l=g(l,d,u,h,a[f+12],6,1700485571),h=g(h,l,d,u,a[f+3],10,-1894986606),u=g(u,h,l,d,a[f+10],15,-1051523),d=g(d,u,h,l,a[f+1],21,-2054922799),l=g(l,d,u,h,a[f+8],6,1873313359),h=g(h,l,d,u,a[f+15],10,-30611744),u=g(u,h,l,d,a[f+6],15,-1560198380),d=g(d,u,h,l,a[f+13],21,1309151649),l=g(l,d,u,h,a[f+4],6,-145523070),h=g(h,l,d,u,a[f+11],10,-1120210379),u=g(u,h,l,d,a[f+2],15,718787259),d=g(d,u,h,l,a[f+9],21,-343485551),l=l+m>>>0,d=d+R>>>0,u=u+S>>>0,h=h+I>>>0}return t.endian([l,d,u,h])};s._ff=function(e,t,i,n,r,o,s){var a=e+(t&i|~t&n)+(r>>>0)+s;return(a<<o|a>>>32-o)+t},s._gg=function(e,t,i,n,r,o,s){var a=e+(t&n|i&~n)+(r>>>0)+s;return(a<<o|a>>>32-o)+t},s._hh=function(e,t,i,n,r,o,s){var a=e+(t^i^n)+(r>>>0)+s;return(a<<o|a>>>32-o)+t},s._ii=function(e,t,i,n,r,o,s){var a=e+(i^(t|~n))+(r>>>0)+s;return(a<<o|a>>>32-o)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,i){if(null==e)throw new Error("Illegal argument "+e);var n=t.wordsToBytes(s(e,i));return i&&i.asBytes?n:i&&i.asString?o.bytesToString(n):t.bytesToHex(n)}}()},function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&i.rotl(e,8)|4278255360&i.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=i.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],i=0,n=0;i<e.length;i++,n+=8)t[n>>>5]|=e[i]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],i=0;i<32*e.length;i+=8)t.push(e[i>>>5]>>>24-i%32&255);return t},bytesToHex:function(e){for(var t=[],i=0;i<e.length;i++)t.push((e[i]>>>4).toString(16)),t.push((15&e[i]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(parseInt(e.substr(i,2),16));return t},bytesToBase64:function(e){for(var i=[],n=0;n<e.length;n+=3)for(var r=e[n]<<16|e[n+1]<<8|e[n+2],o=0;o<4;o++)8*n+6*o<=8*e.length?i.push(t.charAt(r>>>6*(3-o)&63)):i.push("=");return i.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var i=[],n=0,r=0;n<e.length;r=++n%4)0!=r&&i.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|t.indexOf(e.charAt(n))>>>6-2*r);return i}};e.exports=i}()},function(e,t){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(i(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,i){e.exports=i(1)}])},7282:()=>{
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */(function(){"use strict";function e(e){throw e}var t=void 0,i=!0,n=this;function r(e,i){var r,o=e.split("."),s=n;!(o[0]in s)&&s.execScript&&s.execScript("var "+o[0]);for(;o.length&&(r=o.shift());)o.length||i===t?s=s[r]?s[r]:s[r]={}:s[r]=i}var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function s(t,i){this.index="number"==typeof i?i:0,this.i=0,this.buffer=t instanceof(o?Uint8Array:Array)?t:new(o?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&e(Error("invalid index")),this.buffer.length<=this.index&&this.f()}s.prototype.f=function(){var e,t=this.buffer,i=t.length,n=new(o?Uint8Array:Array)(i<<1);if(o)n.set(t);else for(e=0;e<i;++e)n[e]=t[e];return this.buffer=n},s.prototype.d=function(e,t,i){var n,r=this.buffer,o=this.index,s=this.i,a=r[o];if(i&&1<t&&(e=8<t?(h[255&e]<<24|h[e>>>8&255]<<16|h[e>>>16&255]<<8|h[e>>>24&255])>>32-t:h[e]>>8-t),8>t+s)a=a<<t|e,s+=t;else for(n=0;n<t;++n)a=a<<1|e>>t-n-1&1,8==++s&&(s=0,r[o++]=h[a],a=0,o===r.length&&(r=this.f()));r[o]=a,this.buffer=r,this.i=s,this.index=o},s.prototype.finish=function(){var e,t=this.buffer,i=this.index;return 0<this.i&&(t[i]<<=8-this.i,t[i]=h[t[i]],i++),o?e=t.subarray(0,i):(t.length=i,e=t),e};var a,c=new(o?Uint8Array:Array)(256);for(a=0;256>a;++a){for(var l=u=a,d=7,u=u>>>1;u;u>>>=1)l<<=1,l|=1&u,--d;c[a]=(l<<d&255)>>>0}var h=c;function f(e){this.buffer=new(o?Uint16Array:Array)(2*e),this.length=0}function p(e){var t,i,n,r,s,a,c,l,d,u,h=e.length,f=0,p=Number.POSITIVE_INFINITY;for(l=0;l<h;++l)e[l]>f&&(f=e[l]),e[l]<p&&(p=e[l]);for(t=1<<f,i=new(o?Uint32Array:Array)(t),n=1,r=0,s=2;n<=f;){for(l=0;l<h;++l)if(e[l]===n){for(a=0,c=r,d=0;d<n;++d)a=a<<1|1&c,c>>=1;for(u=n<<16|l,d=a;d<t;d+=s)i[d]=u;++r}++n,r<<=1,s<<=1}return[i,f,p]}function _(e,t){this.h=g,this.w=0,this.input=o&&e instanceof Array?new Uint8Array(e):e,this.b=0,t&&(t.lazy&&(this.w=t.lazy),"number"==typeof t.compressionType&&(this.h=t.compressionType),t.outputBuffer&&(this.a=o&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.b=t.outputIndex)),this.a||(this.a=new(o?Uint8Array:Array)(32768))}f.prototype.getParent=function(e){return 2*((e-2)/4|0)},f.prototype.push=function(e,t){var i,n,r,o=this.buffer;for(i=this.length,o[this.length++]=t,o[this.length++]=e;0<i&&(n=this.getParent(i),o[i]>o[n]);)r=o[i],o[i]=o[n],o[n]=r,r=o[i+1],o[i+1]=o[n+1],o[n+1]=r,i=n;return this.length},f.prototype.pop=function(){var e,t,i,n,r,o=this.buffer;for(t=o[0],e=o[1],this.length-=2,o[0]=o[this.length],o[1]=o[this.length+1],r=0;!((n=2*r+2)>=this.length)&&(n+2<this.length&&o[n+2]>o[n]&&(n+=2),o[n]>o[r]);)i=o[r],o[r]=o[n],o[n]=i,i=o[r+1],o[r+1]=o[n+1],o[n+1]=i,r=n;return{index:e,value:t,length:this.length}};var C,g=2,m={NONE:0,r:1,k:g,N:3},R=[];for(C=0;288>C;C++)switch(i){case 143>=C:R.push([C+48,8]);break;case 255>=C:R.push([C-144+400,9]);break;case 279>=C:R.push([C-256+0,7]);break;case 287>=C:R.push([C-280+192,8]);break;default:e("invalid literal: "+C)}function S(e,t){this.length=e,this.G=t}_.prototype.j=function(){var n,r,a,c,l=this.input;switch(this.h){case 0:for(a=0,c=l.length;a<c;){var d,u,h,f=r=o?l.subarray(a,a+65535):l.slice(a,a+65535),p=(a+=r.length)===c,_=t,C=t,m=this.a,S=this.b;if(o){for(m=new Uint8Array(this.a.buffer);m.length<=S+f.length+5;)m=new Uint8Array(m.length<<1);m.set(this.a)}if(d=p?1:0,m[S++]=0|d,h=65536+~(u=f.length)&65535,m[S++]=255&u,m[S++]=u>>>8&255,m[S++]=255&h,m[S++]=h>>>8&255,o)m.set(f,S),S+=f.length,m=m.subarray(0,S);else{for(_=0,C=f.length;_<C;++_)m[S++]=f[_];m.length=S}this.b=S,this.a=m}break;case 1:var I=new s(o?new Uint8Array(this.a.buffer):this.a,this.b);I.d(1,1,i),I.d(1,2,i);var y,w,D,M=v(this,l);for(y=0,w=M.length;y<w;y++)if(D=M[y],s.prototype.d.apply(I,R[D]),256<D)I.d(M[++y],M[++y],i),I.d(M[++y],5),I.d(M[++y],M[++y],i);else if(256===D)break;this.a=I.finish(),this.b=this.a.length;break;case g:var P,x,T,A,O,V,k,N,L,U,B,F,j,$,H,q=new s(o?new Uint8Array(this.a.buffer):this.a,this.b),K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=Array(19);for(P=g,q.d(1,1,i),q.d(P,2,i),x=v(this,l),k=b(V=E(this.L,15)),L=b(N=E(this.K,7)),T=286;257<T&&0===V[T-1];T--);for(A=30;1<A&&0===N[A-1];A--);var G,z,J,Q,Z,X,Y=T,ee=A,te=new(o?Uint32Array:Array)(Y+ee),ie=new(o?Uint32Array:Array)(316),ne=new(o?Uint8Array:Array)(19);for(G=z=0;G<Y;G++)te[z++]=V[G];for(G=0;G<ee;G++)te[z++]=N[G];if(!o)for(G=0,Q=ne.length;G<Q;++G)ne[G]=0;for(G=Z=0,Q=te.length;G<Q;G+=z){for(z=1;G+z<Q&&te[G+z]===te[G];++z);if(J=z,0===te[G])if(3>J)for(;0<J--;)ie[Z++]=0,ne[0]++;else for(;0<J;)(X=138>J?J:138)>J-3&&X<J&&(X=J-3),10>=X?(ie[Z++]=17,ie[Z++]=X-3,ne[17]++):(ie[Z++]=18,ie[Z++]=X-11,ne[18]++),J-=X;else if(ie[Z++]=te[G],ne[te[G]]++,3>--J)for(;0<J--;)ie[Z++]=te[G],ne[te[G]]++;else for(;0<J;)(X=6>J?J:6)>J-3&&X<J&&(X=J-3),ie[Z++]=16,ie[Z++]=X-3,ne[16]++,J-=X}for(n=o?ie.subarray(0,Z):ie.slice(0,Z),U=E(ne,7),$=0;19>$;$++)W[$]=U[K[$]];for(O=19;4<O&&0===W[O-1];O--);for(B=b(U),q.d(T-257,5,i),q.d(A-1,5,i),q.d(O-4,4,i),$=0;$<O;$++)q.d(W[$],3,i);for($=0,H=n.length;$<H;$++)if(F=n[$],q.d(B[F],U[F],i),16<=F){switch($++,F){case 16:j=2;break;case 17:j=3;break;case 18:j=7;break;default:e("invalid code: "+F)}q.d(n[$],j,i)}var re,oe,se,ae,ce,le,de,ue,he=[k,V],fe=[L,N];for(ce=he[0],le=he[1],de=fe[0],ue=fe[1],re=0,oe=x.length;re<oe;++re)if(se=x[re],q.d(ce[se],le[se],i),256<se)q.d(x[++re],x[++re],i),ae=x[++re],q.d(de[ae],ue[ae],i),q.d(x[++re],x[++re],i);else if(256===se)break;this.a=q.finish(),this.b=this.a.length;break;default:e("invalid compression type")}return this.a};var I=function(){function t(t){switch(i){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case 12>=t:return[265,t-11,1];case 14>=t:return[266,t-13,1];case 16>=t:return[267,t-15,1];case 18>=t:return[268,t-17,1];case 22>=t:return[269,t-19,2];case 26>=t:return[270,t-23,2];case 30>=t:return[271,t-27,2];case 34>=t:return[272,t-31,2];case 42>=t:return[273,t-35,3];case 50>=t:return[274,t-43,3];case 58>=t:return[275,t-51,3];case 66>=t:return[276,t-59,3];case 82>=t:return[277,t-67,4];case 98>=t:return[278,t-83,4];case 114>=t:return[279,t-99,4];case 130>=t:return[280,t-115,4];case 162>=t:return[281,t-131,5];case 194>=t:return[282,t-163,5];case 226>=t:return[283,t-195,5];case 257>=t:return[284,t-227,5];case 258===t:return[285,t-258,0];default:e("invalid length: "+t)}}var n,r,o=[];for(n=3;258>=n;n++)r=t(n),o[n]=r[2]<<24|r[1]<<16|r[0];return o}(),y=o?new Uint32Array(I):I;function v(n,r){function s(t,n){var r,o,s,a,c=t.G,l=[],d=0;switch(r=y[t.length],l[d++]=65535&r,l[d++]=r>>16&255,l[d++]=r>>24,i){case 1===c:o=[0,c-1,0];break;case 2===c:o=[1,c-2,0];break;case 3===c:o=[2,c-3,0];break;case 4===c:o=[3,c-4,0];break;case 6>=c:o=[4,c-5,1];break;case 8>=c:o=[5,c-7,1];break;case 12>=c:o=[6,c-9,2];break;case 16>=c:o=[7,c-13,2];break;case 24>=c:o=[8,c-17,3];break;case 32>=c:o=[9,c-25,3];break;case 48>=c:o=[10,c-33,4];break;case 64>=c:o=[11,c-49,4];break;case 96>=c:o=[12,c-65,5];break;case 128>=c:o=[13,c-97,5];break;case 192>=c:o=[14,c-129,6];break;case 256>=c:o=[15,c-193,6];break;case 384>=c:o=[16,c-257,7];break;case 512>=c:o=[17,c-385,7];break;case 768>=c:o=[18,c-513,8];break;case 1024>=c:o=[19,c-769,8];break;case 1536>=c:o=[20,c-1025,9];break;case 2048>=c:o=[21,c-1537,9];break;case 3072>=c:o=[22,c-2049,10];break;case 4096>=c:o=[23,c-3073,10];break;case 6144>=c:o=[24,c-4097,11];break;case 8192>=c:o=[25,c-6145,11];break;case 12288>=c:o=[26,c-8193,12];break;case 16384>=c:o=[27,c-12289,12];break;case 24576>=c:o=[28,c-16385,13];break;case 32768>=c:o=[29,c-24577,13];break;default:e("invalid distance")}for(r=o,l[d++]=r[0],l[d++]=r[1],l[d++]=r[2],s=0,a=l.length;s<a;++s)g[m++]=l[s];S[l[0]]++,I[l[3]]++,R=t.length+n-1,p=null}var a,c,l,d,u,h,f,p,_,C={},g=o?new Uint16Array(2*r.length):[],m=0,R=0,S=new(o?Uint32Array:Array)(286),I=new(o?Uint32Array:Array)(30),v=n.w;if(!o){for(l=0;285>=l;)S[l++]=0;for(l=0;29>=l;)I[l++]=0}for(S[256]=1,a=0,c=r.length;a<c;++a){for(l=u=0,d=3;l<d&&a+l!==c;++l)u=u<<8|r[a+l];if(C[u]===t&&(C[u]=[]),h=C[u],!(0<R--)){for(;0<h.length&&32768<a-h[0];)h.shift();if(a+3>=c){for(p&&s(p,-1),l=0,d=c-a;l<d;++l)_=r[a+l],g[m++]=_,++S[_];break}0<h.length?(f=w(r,a,h),p?p.length<f.length?(_=r[a-1],g[m++]=_,++S[_],s(f,0)):s(p,-1):f.length<v?p=f:s(f,0)):p?s(p,-1):(_=r[a],g[m++]=_,++S[_])}h.push(a)}return g[m++]=256,S[256]++,n.L=S,n.K=I,o?g.subarray(0,m):g}function w(e,t,i){var n,r,o,s,a,c,l=0,d=e.length;s=0,c=i.length;e:for(;s<c;s++){if(n=i[c-s-1],o=3,3<l){for(a=l;3<a;a--)if(e[n+a-1]!==e[t+a-1])continue e;o=l}for(;258>o&&t+o<d&&e[n+o]===e[t+o];)++o;if(o>l&&(r=n,l=o),258===o)break}return new S(l,t-r)}function E(e,t){var i,n,r,s,a,c=e.length,l=new f(572),d=new(o?Uint8Array:Array)(c);if(!o)for(s=0;s<c;s++)d[s]=0;for(s=0;s<c;++s)0<e[s]&&l.push(s,e[s]);if(i=Array(l.length/2),n=new(o?Uint32Array:Array)(l.length/2),1===i.length)return d[l.pop().index]=1,d;for(s=0,a=l.length/2;s<a;++s)i[s]=l.pop(),n[s]=i[s].value;for(r=function(e,t,i){function n(e){var i=p[e][_[e]];i===t?(n(e+1),n(e+1)):--h[i],++_[e]}var r,s,a,c,l,d=new(o?Uint16Array:Array)(i),u=new(o?Uint8Array:Array)(i),h=new(o?Uint8Array:Array)(t),f=Array(i),p=Array(i),_=Array(i),C=(1<<i)-t,g=1<<i-1;for(d[i-1]=t,s=0;s<i;++s)C<g?u[s]=0:(u[s]=1,C-=g),C<<=1,d[i-2-s]=(d[i-1-s]/2|0)+t;for(d[0]=u[0],f[0]=Array(d[0]),p[0]=Array(d[0]),s=1;s<i;++s)d[s]>2*d[s-1]+u[s]&&(d[s]=2*d[s-1]+u[s]),f[s]=Array(d[s]),p[s]=Array(d[s]);for(r=0;r<t;++r)h[r]=i;for(a=0;a<d[i-1];++a)f[i-1][a]=e[a],p[i-1][a]=a;for(r=0;r<i;++r)_[r]=0;for(1===u[i-1]&&(--h[0],++_[i-1]),s=i-2;0<=s;--s){for(c=r=0,l=_[s+1],a=0;a<d[s];a++)(c=f[s+1][l]+f[s+1][l+1])>e[r]?(f[s][a]=c,p[s][a]=t,l+=2):(f[s][a]=e[r],p[s][a]=r,++r);_[s]=0,1===u[s]&&n(s)}return h}(n,n.length,t),s=0,a=i.length;s<a;++s)d[i[s].index]=r[s];return d}function b(e){var t,i,n,r,s=new(o?Uint16Array:Array)(e.length),a=[],c=[],l=0;for(t=0,i=e.length;t<i;t++)a[e[t]]=1+(0|a[e[t]]);for(t=1,i=16;t<=i;t++)c[t]=l,l+=0|a[t],l<<=1;for(t=0,i=e.length;t<i;t++)for(l=c[e[t]],c[e[t]]+=1,n=s[t]=0,r=e[t];n<r;n++)s[t]=s[t]<<1|1&l,l>>>=1;return s}function D(t,i){switch(this.l=[],this.m=32768,this.e=this.g=this.c=this.q=0,this.input=o?new Uint8Array(t):t,this.s=!1,this.n=P,this.B=!1,!i&&(i={})||(i.index&&(this.c=i.index),i.bufferSize&&(this.m=i.bufferSize),i.bufferType&&(this.n=i.bufferType),i.resize&&(this.B=i.resize)),this.n){case M:this.b=32768,this.a=new(o?Uint8Array:Array)(32768+this.m+258);break;case P:this.b=0,this.a=new(o?Uint8Array:Array)(this.m),this.f=this.J,this.t=this.H,this.o=this.I;break;default:e(Error("invalid inflate mode"))}}var M=0,P=1,x={D:M,C:P};D.prototype.p=function(){for(;!this.s;){var n=J(this,3);switch(1&n&&(this.s=i),n>>>=1){case 0:var r=this.input,s=this.c,a=this.a,c=this.b,l=r.length,d=t,u=a.length,h=t;switch(this.e=this.g=0,s+1>=l&&e(Error("invalid uncompressed block header: LEN")),d=r[s++]|r[s++]<<8,s+1>=l&&e(Error("invalid uncompressed block header: NLEN")),d===~(r[s++]|r[s++]<<8)&&e(Error("invalid uncompressed block header: length verify")),s+d>r.length&&e(Error("input buffer is broken")),this.n){case M:for(;c+d>a.length;){if(d-=h=u-c,o)a.set(r.subarray(s,s+h),c),c+=h,s+=h;else for(;h--;)a[c++]=r[s++];this.b=c,a=this.f(),c=this.b}break;case P:for(;c+d>a.length;)a=this.f({v:2});break;default:e(Error("invalid inflate mode"))}if(o)a.set(r.subarray(s,s+d),c),c+=d,s+=d;else for(;d--;)a[c++]=r[s++];this.c=s,this.b=c,this.a=a;break;case 1:this.o(W,z);break;case 2:var f,_,C,g,m=J(this,5)+257,R=J(this,5)+1,S=J(this,4)+4,I=new(o?Uint8Array:Array)(V.length),y=t,v=t,w=t,E=t,b=t;for(b=0;b<S;++b)I[V[b]]=J(this,3);if(!o)for(b=S,S=I.length;b<S;++b)I[V[b]]=0;for(f=p(I),y=new(o?Uint8Array:Array)(m+R),b=0,g=m+R;b<g;)switch(v=Q(this,f),v){case 16:for(E=3+J(this,2);E--;)y[b++]=w;break;case 17:for(E=3+J(this,3);E--;)y[b++]=0;w=0;break;case 18:for(E=11+J(this,7);E--;)y[b++]=0;w=0;break;default:w=y[b++]=v}_=p(o?y.subarray(0,m):y.slice(0,m)),C=p(o?y.subarray(m):y.slice(m)),this.o(_,C);break;default:e(Error("unknown BTYPE: "+n))}}return this.t()};var T,A,O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=o?new Uint16Array(O):O,k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],N=o?new Uint16Array(k):k,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],U=o?new Uint8Array(L):L,B=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],F=o?new Uint16Array(B):B,j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$=o?new Uint8Array(j):j,H=new(o?Uint8Array:Array)(288);for(T=0,A=H.length;T<A;++T)H[T]=143>=T?8:255>=T?9:279>=T?7:8;var q,K,W=p(H),G=new(o?Uint8Array:Array)(30);for(q=0,K=G.length;q<K;++q)G[q]=5;var z=p(G);function J(t,i){for(var n,r=t.g,o=t.e,s=t.input,a=t.c,c=s.length;o<i;)a>=c&&e(Error("input buffer is broken")),r|=s[a++]<<o,o+=8;return n=r&(1<<i)-1,t.g=r>>>i,t.e=o-i,t.c=a,n}function Q(t,i){for(var n,r,o=t.g,s=t.e,a=t.input,c=t.c,l=a.length,d=i[0],u=i[1];s<u&&!(c>=l);)o|=a[c++]<<s,s+=8;return(r=(n=d[o&(1<<u)-1])>>>16)>s&&e(Error("invalid code length: "+r)),t.g=o>>r,t.e=s-r,t.c=c,65535&n}function Z(e){if("string"==typeof e){var t,i,n=e.split("");for(t=0,i=n.length;t<i;t++)n[t]=(255&n[t].charCodeAt(0))>>>0;e=n}for(var r,o=1,s=0,a=e.length,c=0;0<a;){a-=r=1024<a?1024:a;do{s+=o+=e[c++]}while(--r);o%=65521,s%=65521}return(s<<16|o)>>>0}function X(t,i){var n,r;if(this.input=t,this.c=0,!i&&(i={})||(i.index&&(this.c=i.index),i.verify&&(this.M=i.verify)),n=t[this.c++],r=t[this.c++],(15&n)===Y)this.method=Y;else e(Error("unsupported compression method"));0!=((n<<8)+r)%31&&e(Error("invalid fcheck flag:"+((n<<8)+r)%31)),32&r&&e(Error("fdict flag is not supported")),this.A=new D(t,{index:this.c,bufferSize:i.bufferSize,bufferType:i.bufferType,resize:i.resize})}D.prototype.o=function(e,t){var i=this.a,n=this.b;this.u=e;for(var r,o,s,a,c=i.length-258;256!==(r=Q(this,e));)if(256>r)n>=c&&(this.b=n,i=this.f(),n=this.b),i[n++]=r;else for(a=N[o=r-257],0<U[o]&&(a+=J(this,U[o])),r=Q(this,t),s=F[r],0<$[r]&&(s+=J(this,$[r])),n>=c&&(this.b=n,i=this.f(),n=this.b);a--;)i[n]=i[n++-s];for(;8<=this.e;)this.e-=8,this.c--;this.b=n},D.prototype.I=function(e,t){var i=this.a,n=this.b;this.u=e;for(var r,o,s,a,c=i.length;256!==(r=Q(this,e));)if(256>r)n>=c&&(c=(i=this.f()).length),i[n++]=r;else for(a=N[o=r-257],0<U[o]&&(a+=J(this,U[o])),r=Q(this,t),s=F[r],0<$[r]&&(s+=J(this,$[r])),n+a>c&&(c=(i=this.f()).length);a--;)i[n]=i[n++-s];for(;8<=this.e;)this.e-=8,this.c--;this.b=n},D.prototype.f=function(){var e,t,i=new(o?Uint8Array:Array)(this.b-32768),n=this.b-32768,r=this.a;if(o)i.set(r.subarray(32768,i.length));else for(e=0,t=i.length;e<t;++e)i[e]=r[e+32768];if(this.l.push(i),this.q+=i.length,o)r.set(r.subarray(n,n+32768));else for(e=0;32768>e;++e)r[e]=r[n+e];return this.b=32768,r},D.prototype.J=function(e){var t,i,n,r=this.input.length/this.c+1|0,s=this.input,a=this.a;return e&&("number"==typeof e.v&&(r=e.v),"number"==typeof e.F&&(r+=e.F)),2>r?i=(n=(s.length-this.c)/this.u[2]/2*258|0)<a.length?a.length+n:a.length<<1:i=a.length*r,o?(t=new Uint8Array(i)).set(a):t=a,this.a=t},D.prototype.t=function(){var e,t,i,n,r,s=0,a=this.a,c=this.l,l=new(o?Uint8Array:Array)(this.q+(this.b-32768));if(0===c.length)return o?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(t=0,i=c.length;t<i;++t)for(n=0,r=(e=c[t]).length;n<r;++n)l[s++]=e[n];for(t=32768,i=this.b;t<i;++t)l[s++]=a[t];return this.l=[],this.buffer=l},D.prototype.H=function(){var e,t=this.b;return o?this.B?(e=new Uint8Array(t)).set(this.a.subarray(0,t)):e=this.a.subarray(0,t):(this.a.length>t&&(this.a.length=t),e=this.a),this.buffer=e},X.prototype.p=function(){var t,i=this.input;return t=this.A.p(),this.c=this.A.c,this.M&&((i[this.c++]<<24|i[this.c++]<<16|i[this.c++]<<8|i[this.c++])>>>0!==Z(t)&&e(Error("invalid adler-32 checksum"))),t};var Y=8;function ee(e,t){this.input=e,this.a=new(o?Uint8Array:Array)(32768),this.h=te.k;var i,n={};for(i in!t&&(t={})||"number"!=typeof t.compressionType||(this.h=t.compressionType),t)n[i]=t[i];n.outputBuffer=this.a,this.z=new _(this.input,n)}var te=m;function ie(e,t){var i,n,o,s;if(Object.keys)i=Object.keys(t);else for(n in i=[],o=0,t)i[o++]=n;for(o=0,s=i.length;o<s;++o)r(e+"."+(n=i[o]),t[n])}ee.prototype.j=function(){var t,i,n,r,s,a,c,l=0;if(c=this.a,(t=Y)===Y)i=Math.LOG2E*Math.log(32768)-8;else e(Error("invalid compression method"));if(n=i<<4|t,c[l++]=n,t===Y)switch(this.h){case te.NONE:s=0;break;case te.r:s=1;break;case te.k:s=2;break;default:e(Error("unsupported compression type"))}else e(Error("invalid compression method"));return r=s<<6|0,c[l++]=r|31-(256*n+r)%31,a=Z(this.input),this.z.b=l,l=(c=this.z.j()).length,o&&((c=new Uint8Array(c.buffer)).length<=l+4&&(this.a=new Uint8Array(c.length+4),this.a.set(c),c=this.a),c=c.subarray(0,l+4)),c[l++]=a>>24&255,c[l++]=a>>16&255,c[l++]=a>>8&255,c[l++]=255&a,c},r("Zlib.Inflate",X),r("Zlib.Inflate.prototype.decompress",X.prototype.p),ie("Zlib.Inflate.BufferType",{ADAPTIVE:x.C,BLOCK:x.D}),r("Zlib.Deflate",ee),r("Zlib.Deflate.compress",(function(e,t){return new ee(e,t).j()})),r("Zlib.Deflate.prototype.compress",ee.prototype.j),ie("Zlib.Deflate.CompressionType",{NONE:te.NONE,FIXED:te.r,DYNAMIC:te.k})}).call(window)},2480:()=>{}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(i.exports,i,i.exports,__webpack_require__),i.loaded=!0,i.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>We});__webpack_require__(3412),__webpack_require__(1638),__webpack_require__(7282),__webpack_require__(1046),__webpack_require__(896),__webpack_require__(7923),__webpack_require__(7686),__webpack_require__(4623),__webpack_require__(9292),__webpack_require__(650),__webpack_require__(7613),__webpack_require__(3330),__webpack_require__(4973),__webpack_require__(8588),__webpack_require__(6957),__webpack_require__(7957),__webpack_require__(5672),__webpack_require__(9228),__webpack_require__(3403),__webpack_require__(2377),__webpack_require__(493),__webpack_require__(8112),__webpack_require__(8009),__webpack_require__(8629),__webpack_require__(1798),__webpack_require__(6983),__webpack_require__(2190),__webpack_require__(816),__webpack_require__(1847),__webpack_require__(8463),__webpack_require__(2522),__webpack_require__(6806),__webpack_require__(5856),__webpack_require__(899),__webpack_require__(8113),__webpack_require__(5760),__webpack_require__(9598),__webpack_require__(5655),__webpack_require__(7801);const e=new class{constructor(){this.apis=[],window.CRVideo_SetApisNoLog=e=>{if(e.add)for(let t=0;t<e.add.length;t++)this.add(e.add[t]);if(e.remove)for(let t=0;t<e.remove.length;t++)this.remove(e.remove[t])}}add(e){this.apis.push(e)}remove(e){let t=this.apis.findIndex((t=>t==e));this.apis.splice(t,1)}};CRVideo.CbProxy=function(t){this.name=t,this.target=function(...i){try{"[object Function]"===Object.prototype.toString.call(this.callback)?(!this.noLogArr.includes(this.name)&&!e.apis.includes(this.name)&&console.crlog(`[SDK][Callback] ${this.name}.target(${i})`),this.callback.apply(null,i)):!this.noLogArr.includes(this.name)&&!e.apis.includes(this.name)&&console.crlog("[SDK][Callback] Undefined callback: "+t)}catch(e){console.error(e)}},this.noLogArr=["CRVideo_GetQueueStatusRslt","CRVideo_CloudMixerOutputInfoChanged","CRVideo_ShakeHandRslt","CRVideo_MicEnergyUpdate","CRVideo_NetStateChanged","CRVideo_NotifyNetworkDelay","CRVideo_NotifyNetworkLostRate"]};__webpack_require__(3780);var t=__webpack_require__(6817),i=__webpack_require__(5174);CRVideo.sdkver="2.11.4",CRVideo.sdkInfo="SDKVer: 2.11.4; Last-Modified: Victor.LiuWei 2024/4/25 14:16:45",console.crlog(`[SDK] ${CRVideo.sdkInfo}`),CRVideo.isSDKConsole=!0,CRVideo.isUploadLog=!0,CRVideo.isCallSer=!0,CRVideo.MSProtocol=1,CRVideo.isWebRTC=!0,CRVideo.protocol="https:",CRVideo.isRtcLog=!0,CRVideo.__crfib=function(e){return e<2?e:CRVideo.__crfib(e-1)+CRVideo.__crfib(e-2)},window.addEventListener("unload",(e=>{(CRVideo.isMeeting||CRVideo.isLoginCallserver)&&(CRVideo.isMeeting&&__Rtc.CR__Exit(""),CRVideo.isLoginCallserver&&CRVideo.webSendcmd({cmd:"Logout",module:"CallServer",sessionID:CRVideo.sessionID}),CRVideo.__crfib(25))})),window.CRVideo_GetSDKVersion=()=>CRVideo.sdkver,window.CRVideo_WriteLog=e=>{console.crlog(`[APP] ${e}`)},window.CRVideo_SetSDKParams=e=>{if(console.crlog(`[SDK] CRVideo_SetSDKParams:${JSON.stringify(e)}`),void 0!==e)return null!=e.isSDKConsole&&(CRVideo.isSDKConsole=!1!==e.isSDKConsole),null!=e.isUploadLog&&(CRVideo.isUploadLog=!1!==e.isUploadLog),null!=e.isRtcLog&&(CRVideo.isRtcLog=!1!==e.isRtcLog),null!=e.screenSendBW&&(__Rtc.CRRTCScreen.screenShareCfg.maxKbps=+e.screenSendBW),null!=e.mediaSendBW&&(__Rtc.CRRTCMedia.mediaCfg.maxKbps=+e.mediaSendBW),null!=e.isCallSer&&(CRVideo.isCallSer=!1!==e.isCallSer),void 0!==e.MSProtocol&&(CRVideo.MSProtocol=+e.MSProtocol),null!=e.isWebRTC&&(CRVideo.isWebRTC=!1!==e.isWebRTC),CRVideo.virtualBackgroundAssets=e.virtualBackgroundAssets||void 0,console.crlog(`[Init] Set isUploadLog:${CRVideo.isUploadLog},isSDKConsole:${CRVideo.isSDKConsole}, on init sdk!`),void window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole);console.crlog(`[Init] Set isUploadLog:${CRVideo.isUploadLog},isSDKConsole:${CRVideo.isSDKConsole}, on init sdk!`),window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole),CRVideo_UploadingLog()},window.CRVideo_Init=e=>(console.crlog(`[Init] CRVideo_Init(${JSON.stringify(e)})`),new Promise(((t,n)=>(localStorage.getItem("CRRTCSDK_SDKVer")!=CRVideo.sdkver&&(localStorage.removeItem("CRRTCSDK_UserInfoHistory"),localStorage.removeItem("CRRTCSDK_UserInfo"),localStorage.setItem("CRRTCSDK_SDKVer",CRVideo.sdkver)),void 0!==e&&(CRVideo.isSDKConsole=!1!==e.isSDKConsole,CRVideo.isUploadLog=!1!==e.isUploadLog,CRVideo.isRtcLog=!1!==e.isRtcLog,e.screenSendBW&&(__Rtc.CRRTCScreen.screenShareCfg.maxKbps=+e.screenSendBW),e.mediaSendBW&&(__Rtc.CRRTCMedia.mediaCfg.maxKbps=+e.mediaSendBW),CRVideo.isCallSer=!1!==e.isCallSer,void 0!==e.MSProtocol&&(CRVideo.MSProtocol=+e.MSProtocol)),console.crlog(`[Init] Set isUploadLog:${CRVideo.isUploadLog},isSDKConsole:${CRVideo.isSDKConsole}, on init sdk!`),window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole),null!=e&&!1===e.isWebRTC&&(CRVideo.isWebRTC=!1),CRVideo.isWebRTC?window.RTCPeerConnection?window.navigator.mediaDevices?window.navigator.mediaDevices.enumerateDevices?window.navigator.mediaDevices.getUserMedia?(window.location.protocol&&"http:"==window.location.protocol&&console.crlog('[Init][Error] The current page protocal is "HTTP", You should use "HTTPS" protocol!'),window.location.protocol&&"http:"==window.location.protocol&&console.error('The current page protocal is "HTTP", You should use "HTTPS" protocol!'),console.crlog("[Init] First enumerateDevices on init..."),void navigator.mediaDevices.enumerateDevices().then((e=>{const r=[],o=[],s=[];let a;if(e.forEach((e=>{"audioinput"==e.kind?o.push(e):"audiooutput"==e.kind?s.push(e):"videoinput"==e.kind&&r.push(e)})),console.crlog(`[Init] Video input devices: ${JSON.stringify(r)}`),console.crlog(`[Init] Audio input devices: ${JSON.stringify(o)}`),console.crlog(`[Init] Audio output devices: ${JSON.stringify(s)}`),a=(0!==r.length||0!==o.length)&&(0===r.length?{video:!1,audio:!0}:0===o.length?{video:!0,audio:!1}:{video:!0,audio:!0}),!a)return i.Z.SDK_Event.emitEventListener("SDKInit"),console.crlog("[Init] Init sdk success, no video or audio input devices, still return init success!"),t(0);console.crlog(`[Init] GetUserMedia on init device promission, constrains: ${JSON.stringify(a)}`),navigator.mediaDevices.getUserMedia(a).then((e=>{if(console.crlog("[Init] Get video & audio permission by getUserMedia on init, success!"),!e)return console.crlog(`[Init] Get video & audio permission by getUserMedia on init, fail! GetUserMedia stream :${e}`),n(8001);{const n=new RTCPeerConnection({iceServers:[{urls:"stun:121.42.156.84:3478"}]});window.__Rtc.firstInitStream=e;const r=e.getVideoTracks(),o=e.getAudioTracks();r.length>0&&n.addTrack(r[0],e),o.length>0&&n.addTrack(o[0],e),n.createOffer().then((n=>(window.__Rtc.baseOffer=n,n.sdp.includes("H264")&&n.sdp.includes("VP8")?window.__Rtc.rtc_codecs="VP8;H264":n.sdp.includes("H264")?window.__Rtc.rtc_codecs="H264":n.sdp.includes("VP8")?window.__Rtc.rtc_codecs="VP8":window.__Rtc.rtc_codecs="",console.crlog(`[Init] __Rtc.rtc_codecs(encode): ${window.__Rtc.rtc_codecs}`),window.rtc_codecs=window.__Rtc.rtc_codecs,e.getTracks().forEach((e=>{"video"==e.kind&&(console.crlog("[Init] Stop video stream on get video & audio permission..."),e.stop()),"audio"!=e.kind||__Rtc.CRBrowser.weixin.isWeixin||"iOS"==__Rtc.CRBrowser.curBrowserCfg.platform||(console.crlog("[Init] Stop audio stream on get video & audio permission..."),e.stop())})),i.Z.SDK_Event.emitEventListener("SDKInit"),console.crlog("[Init] Init sdk success!"),t(0))))}})).catch((e=>(console.crlog(`[Init] Get video & audio permission by getUserMedia on init, fail! GetUserMedia fail: ${e}`),"NotAllowedError"==e.name?(console.crlog(`[Init] Init sdk fail,user not allowd devices promission! ${e.name}`),n(8002)):"NotReadableError"==e.name?(console.crlog(`[Init] InitDevicePromission fail, NotReadableError ${e}`),n(8007)):(console.crlog(`[Init] Init sdk fail, getUserMedia fail: ${e.name}`),n(8001)))))})).catch((e=>(console.crlog(`[Init] Enumerate devices fail! ${e}`),console.error(e),n(8003))))):(console.crlog('[Init] Init SDK fail! "window.navigator.mediaDevices.getUserMedia" API not found!'),n(8004)):(console.crlog('[Init] Init SDK fail! "window.navigator.mediaDevices.enumerateDevices" API not found!'),n(8004)):(console.crlog('[Init] Init SDK fail! "window.navigator.mediaDevices" API not found!'),n(8004)):(console.crlog('[Init] Init SDK fail! "window.RTCPeerConnection" API not found!'),n(8004)):(i.Z.SDK_Event.emitEventListener("SDKInit"),console.crlog("[Init] Init sdk success when isWebRTC-false!"),t(0)))))),window.CRVideo_SetServerAddr=e=>{e.includes(":8934")&&(e=`sdk.${window.__CRName}.com`);try{console.crlog(`[Init] CRVideo_SetServerAddr(${e})`)}catch(e){console.error(e)}e=e.replace(/\s*/g,""),CRVideo.webServerAddr=e,t.Z.server.setServerAddr(e)},function(e,t,i){e.__Rtc.CRBrowser=new class{constructor(){this.initData(),this.getPlatform(),this.getBrowser(),console.crlog(`[Browser] UA: ${this.ua}`),console.crlog(`[Browser] Browser: ${JSON.stringify(this.curBrowserCfg)}`)}initData(){this.ua=e.navigator.userAgent,this.curBrowserCfg={name:"",minVer:null,ver:null,support:!1,platform:"unknown",isMobile:!1,OSVer:""},this.supportVer={Windows_Chrome:58,Windows_Edg:80,Windows_Edge:999,Windows_OPR:70,Windows_Firefox:78,Windows_QQBrowser:10,Android_Chrome:58,Mac_Safari:12,Mac_Chrome:69,iOS_Safari:12,iOS_Chrome:69,iOS_QQBrowser:11,iOS_MicroMessenger:7,iOS_uniApp:1},this.weixin={isWeixin:!1,weixinVer:null}}getPlatform(){if((this.ua.match(/AppleWebKit.*Mobile.*/)||this.ua.includes("Android"))&&(this.curBrowserCfg.isMobile=!0),this.ua.includes("Windows")&&(this.curBrowserCfg.platform="Windows"),this.ua.includes("Macintosh")&&(this.curBrowserCfg.platform="Mac"),this.ua.includes("Android")&&(this.curBrowserCfg.platform="Android"),/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&(this.curBrowserCfg.platform="iOS"),"iOS"==this.curBrowserCfg.platform){const e=this.ua.split(" like Mac OS X")[0].split(" OS ")[1].split("_")||null;this.curBrowserCfg.OSVer=e.join(".")}}getBrowser(){if(this.curBrowserCfg.isMobile){if("Android"==this.curBrowserCfg.platform&&this.ua.includes("Chrome/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("Chrome/")[1].split(".")[0]),"iOS"==this.curBrowserCfg.platform&&(this.ua.includes("Safari")&&!/(Chrome|FxiOS|EdgiOS|CriOS|MQQ|QQ|MXiOS|Sogou|baidu|Baidu|MicroMessenger|UC|Quark|AliApp|QH|Qihoo|2345|Browser)/i.test(this.ua)&&(this.curBrowserCfg.name="Safari",this.curBrowserCfg.ver=+this.ua.split("Version/")[1].split(".")[0],this.curBrowserCfg.platform="iOS"),this.ua.includes("CriOS/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("CriOS/")[1].split(".")[0]),this.ua.includes("MQQBrowser/")&&(this.curBrowserCfg.name="QQBrowser",this.curBrowserCfg.ver=+this.ua.split("MQQBrowser/")[1].split(".")[0]),this.ua.includes("MicroMessenger/")&&(this.curBrowserCfg.name="MicroMessenger",this.curBrowserCfg.ver=+this.ua.split("MicroMessenger/")[1].split(".")[0]),this.ua.includes("uni-app")&&(this.curBrowserCfg.name="uniApp",this.curBrowserCfg.ver=1)),this.ua.includes("MicroMessenger/")||this.ua.includes("WeChat/")||this.ua.includes("Weixin"))try{this.weixin.isWeixin=!0,this.weixin.weixinVer=this.ua.split("MicroMessenger/")[1].split("(")[0]}catch(e){console.error(e)}console.crlog(`[Browser] ${JSON.stringify(this.weixin)}`)}else"Mac"==this.curBrowserCfg.platform&&this.ua.includes("Safari")&&!/(Chrome|FxiOS|EdgiOS|CriOS|MQQ|QQ|MXiOS|Sogou|baidu|Baidu|MicroMessenger|UC|Quark|AliApp|QH|Qihoo|2345|Browser)/i.test(this.ua)&&(this.curBrowserCfg.name="Safari",this.curBrowserCfg.ver=+this.ua.split("Version/")[1].split(".")[0]),this.ua.includes("Chrome/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("Chrome/")[1].split(".")[0]),/(Edg|Edge)/i.test(this.ua)&&(this.ua.includes("Edg/")?(this.curBrowserCfg.name="Edg",this.curBrowserCfg.ver=+this.ua.split("Edg/")[1].split(".")[0]):this.ua.includes("Edge/")&&(this.curBrowserCfg.name="Edge",this.curBrowserCfg.ver=+this.ua.split("Edge/")[1].split(".")[0])),this.ua.includes("Firefox/")&&(this.curBrowserCfg.name="Firefox",this.curBrowserCfg.ver=+this.ua.split("Firefox/")[1].split(".")[0]);const e=`${this.curBrowserCfg.platform}_${this.curBrowserCfg.name}`;console.crlog(`[Browser] ${e} ${this.curBrowserCfg.ver}`),this.curBrowserCfg.minVer=this.supportVer[e]||999}}}(window,Ice,CRVideo);var n=__webpack_require__(9277),r=__webpack_require__(6836);const o=window.CRVideo;window.Ice;var s=function(e,i,s){const l=`https://${o.webServerAddr}${n.Z.getJsCallServerInfo}`;var d={RequestId:window.Ice.generateUUID(),MgrSDKVer:o.sdkver,PRODUCT:"H5",APPIDMode:CRVideo.APPIDMode,...e};let u={};u=__Rtc._ReplaceObjParam(d,"UserPswd","******"),u=__Rtc._ReplaceObjParam(u,"Token","******"),u=__Rtc._ReplaceObjParam(u,"CustomPswd","******"),console.crlog("[Login] WebAPI request url: "+l+", data:"+JSON.stringify(u)),(0,r.Z)({url:l,type:"get",timeout:3e4,data:d,success:function(n){if(console.crlog("[Login] WebAPI, /servlet/getJsCallServerInfo result: "+JSON.stringify(n)),__Rtc.postCmd.CallServerInfo=n,o.webLoginOAuth=e,t.Z.auth.setAuth(e),o.callServerLoginOAuth=i,void 0!==n.RspCode&&0==n.RspCode){let r=-1;function l(){o.callserverExiting?(console.crlog("[Login] callserver exiting.... waiting...."),r=setTimeout((()=>{l()}),500)):(console.crlog("[Login] callserver exiting complete...."),clearInterval(r),a(n,s))}l()}else c(n,s)},error:function(e){console.crlog("[Login] GetJsCallServerInfo API request fail:"),console.crlog(`[Login][Error] ${e}`),console.error(e),c({RspCode:11e3,RspDesc:"Server not responding..!"},s)}})},a=function(e,t){if(console.crlog("[Login] GetCallServerInfoSuccess..."),setTimeout((()=>{console.crlog(`[Login] key:${btoa(o.crpswdmd5).replace("=","").split("").reverse().join("")}`)}),0),e.Data&&e.APPIDMode?(o.APPIDMode=+e.APPIDMode,o.multiProject=e.Data):o.APPIDMode=0,void 0!==e.TokenTime&&0!==e.TokenTime&&l(e.TokenTime),e.stunServerAddr&&""!=e.stunServerAddr&&(o.stunServerAddr=e.stunServerAddr.split(";")[0]),o.loginAuthFlag=1,""===o.LoginParam.nick_name&&e.Data&&e.Data.username&&(o.LoginParam.nick_name=e.Data.username),""===o.LoginParam.user_id&&e.Data&&e.Data.userId&&(o.LoginParam.user_id=e.Data.userId),o.userInfo={nickname:CRVideo.LoginParam.nick_name,userId:CRVideo.LoginParam.user_id},o.isCallSer)__Rtc.postCmd.IceCruxCreate(t);else{try{console.crlog(`[Login] CRVideo_LoginSuccess.target(${o.LoginParam.user_id}, ${t})`)}catch(e){}CRVideo_LoginSuccess.target(o.LoginParam.user_id,t),CRVideo_UploadingLog()}e.uploadUrl&&CRVideo.isUploadLog&&__Rtc.postCmd.IceLogCreate()},c=function(e,t){try{console.crlog(`[Login] Login authentication failed, RspCode:${e.RspCode} --- RspDesc:${e.RspDesc}`),console.crlog(`[Login] CRVideo_LoginFail.target(${window.WEB_SDK_ERR(e.RspCode)},${t})`)}catch(e){}CRVideo_LoginFail.target(window.WEB_SDK_ERR(e.RspCode),t)},l=function(){let e,t;return function(i){console.crlog("[Login] Update webAPI Token Expire Time: "+i),clearTimeout(e),clearTimeout(t);const n=i>30?1e3*(i-30):0;function r(){console.crlog("[Login] !!!Token Expire!!!"),o.ic&&(clearTimeout(o.HandShark),console.crlog("[Login] CallServer destroy connection..."),o.destroyCruxConnect(),o.LineOffHandler(CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT)),o.isMeeting&&(console.crlog("[Login] TokenCRVideo_ExitMeeting('token')"),CRVideo_ExitMeeting("token"))}console.crlog(`[Login] Token${n/1e3+30} `),n>2147483647||(e=setTimeout((()=>{t=setTimeout(r,1e3*(n>30?30:i)),console.crlog("[Login] CRVideo_NotifyTokenWillExpire.target()"),CRVideo_NotifyTokenWillExpire.target()}),n))}}();o.LineOffHandler=e=>{console.crlog(`[CMD] line off .... ${e}`),o.callserverCastPrx?(o.callserverCastPrx=null,console.crlog(`[Login] CRVideo_LineOff.target(${e})`),CRVideo_LineOff.target(e)):18==e&&(o.loginAuthFlag=0,o.webLoginOAuth={},console.crlog(`[Login] CRVideo_LineOff.target(${e})`),CRVideo_LineOff.target(e))},o.__LoginCallserver=()=>{const e=CRVideo.LoginParam.cookie,t=__Rtc.CRBrowser.curBrowserCfg,i={OEMKey:`${window.__CRNameUP}`,SDKVersion:CRVideo.sdkver,cmd:"Login",...CRVideo.callServerLoginOAuth,deviceType:`${t.platform}_${t.name}`,language:"zh_CN",module:"CallServer",productType:"h5sdk",userID:CRVideo.LoginParam.user_id,userName:CRVideo.LoginParam.nick_name},n=__Rtc._ReplaceObjParam(i,"crPswd","******");try{console.crlog(`[Login] WebCMD:${JSON.stringify(n)}, cookie:${e}`)}catch(e){}o.webSendcmd(i,e)},window.CRVideo_Login=function(e,t,i="",n="",r="",a=""){try{console.crlog(`[Login] CRVideo_Login(${e},'******',${i},${n},${r},${a})`)}catch(e){}let c,l=!1;if("CRDEMO"==window.__CRKEY&&(window.location.href.includes("/meetingDemo/index.html")||window.location.href.includes("/meetingDemo/m_index.html")||window.location.href.includes("/remoteRecordDemo/index.html")||window.location.href.includes("/videoCallDemo/index.html")||window.location.href.includes("/videoCallDemo/m_index.html")||window.location.href.includes("/whiteBoardDemo/index.html"))&&(l=!0),"appID"===e&&l&&(e=`demo@${window.__CRName}.com`),"appSecret"===t&&l&&(t="e388f02f750e65ebba95ab9493cda01e".split("").reverse().join("")),!(""!==i&&void 0!==i&&""!==n&&void 0!==n||CRVideo.SDKKey&&"MeetSDK"==CRVideo.SDKKey))return CRVideo_LoginFail.target(5,a),void CRVideo_UploadingLog();if(0==o.webServerAddr.replace(/\s+/g,"").length)return CRVideo_LoginFail.target(201,a);o.crpswdmd5=t,o.loginCookie=a,o.LoginParam={account:e,psw:t,nick_name:i,user_id:n,CustomID:n,CustomPswd:r||"",cookie:a};try{console.crlog(`[Login] Login param: ${JSON.stringify(window.__Rtc._ReplaceObjParam(o.LoginParam,"psw","******"))}`)}catch(e){}c=r?{UserName:e,UserPswd:t,CustomID:n,CustomPswd:r||""}:{UserName:e,UserPswd:t};s(c,{crAcnt:e,crPswd:t},a)},window.CRVideo_LoginByToken=(e,t,n,r,a)=>{try{console.crlog(`[Login] CRVideo_LoginByToken('******',${t},${n},${r},${a})`)}catch(e){}let c,l;try{const t=e.split(".")[1],n=!!t&&i.Z.base64decode(t).replace(/\0/g,"");c=JSON.parse(n)}catch(e){console.crlog("[Login] token"),console.crlog(e);try{console.crlog(`[Login] CRVideo_LoginFail.target(1,${a});`)}catch(e){}return CRVideo_LoginFail.target(1,a),void CRVideo_UploadingLog()}o.LoginParam={account:c.appID,nick_name:t,user_id:n,CustomID:n,CustomPswd:r||"",cookie:a||""},l=r?{Token:e,CustomID:n,CustomPswd:r||""}:{Token:e};const d={crToken:e};try{console.crlog(`[Login] Login param: ${JSON.stringify(o.LoginParam)}`)}catch(e){}s(l,d,a)},window.CRVideo_UpdateToken=function(e){console.crlog("[Login] CRVideo_UpdateToken('******')");const t=`https://${o.webServerAddr}${n.Z.HandToken}`,i={ClientVer:"",Language:"",RequestId:window.Ice.generateUUID(),MgrSDKVer:o.sdkver,PRODUCT:"H5",Token:e},s=__Rtc._ReplaceObjParam(i,"Token","******");try{console.crlog("[Login] WebAPI UpdateToken: url: "+t+" ,data: "+JSON.stringify(s))}catch(e){}(0,r.Z)({url:t,data:{_data_:JSON.stringify(i)},dataType:"jsonp",jsonp:"callback",success:function(t){if(console.crlog("[Login] WebAPI UpdateToken result: "+JSON.stringify(t)),0==t.RspCode){t.TokenTime&&l(t.TokenTime);try{console.crlog(`[Login] CRVideo_UpdateTokenRslt.target(${CRVideo_ERR_DEF.NOERR})`)}catch(e){}CRVideo_UpdateTokenRslt.target(CRVideo_ERR_DEF.NOERR),o.webLoginOAuth={Token:e},o.callServerLoginOAuth={crToken:e}}else{try{console.crlog(`[Login] CRVideo_UpdateTokenRslt.target(${CRVideo_ERR_DEF.SDK_TOKEN_AUTH_FAILED})`)}catch(e){}CRVideo_UpdateTokenRslt.target(CRVideo_ERR_DEF.SDK_TOKEN_AUTH_FAILED)}},error:function(e){try{console.crlog(`[Login] CRVideo_UpdateTokenRslt.target(${CRVideo_ERR_DEF.NOSERVER_RSP})`)}catch(e){}CRVideo_UpdateTokenRslt.target(CRVideo_ERR_DEF.NOSERVER_RSP)}})},window.CRVideo_Logout=function(){if(o.loginAuthFlag=0,o.webLoginOAuth={},o.LoginParam={},console.crlog("[Login] CRVideo_Logout()"),clearInterval(o.resetAdapterTimer),!o.isCallSer)return;o.callserverExiting=!0,setTimeout((()=>{o.callserverExiting=!1}),3e3);const e={cmd:"Logout",module:"CallServer",sessionID:o.sessionID};try{console.crlog(`[Login] WebCMD:${JSON.stringify(e)},cookie:${cookie}`)}catch(e){}o.webSendcmd(e),o.CallID="",o.HandErrTimes=0,o.KEEPLIVE_COMMIT=!1},o.loginCallback={Login:function(e,t,i){try{console.crlog(`[Login] CRVideo_Login -- CMDCallback --\x3e Login: ${JSON.stringify(e)}`)}catch(e){}0==e.RspCode?(console.crlog("[Login] CallServer login success!"),o.sessionID=e.sessionID,o.isLoginCallserver=!0,console.crlog(`[Login] CRVideo_LoginSuccess.target(${e.userID}, ${i})`),CRVideo_LoginSuccess.target(e.userID,i),CRVideo_UploadingLog(),console.crlog("[Login] CallServer sessionID: "+e.sessionID),console.crlog("[Login] Begain shakeHand..."),window.CRVideo_ShakeHand()):(console.crlog("[Login] CallServer login fail!"),console.crlog(`[Login] CRVideo_LoginFail.target(${ICE_SDK_ERR(e.RspDesc)},${i})`),CRVideo_LoginFail.target(ICE_SDK_ERR(e.RspDesc),i),CRVideo_UploadingLog())},Logout:function(e,t){if(0==e.RspCode)console.crlog("[Login] Callserver logout success..."),setTimeout((()=>{CRVideo_UploadingLog()}),1e3),setTimeout((()=>{o.destroyCruxConnect()}),1e3);else{console.crlog("[Login] Callserver logout fail...");try{console.crlog(`[Login] ${JSON.stringify(e)}`)}catch(e){}}o.isLoginCallserver=!1},ServerKickoutUser:function(e){o.HandErrTimes=0,o.isLoginCallserver=!1,clearTimeout(o.HandShark),o.LineOffHandler(CRVideo_ERR_DEF.SDK_USER_BEEN_KICKOUT)}},window.CRVideo_LineOff=new o.CbProxy("CRVideo_LineOff"),window.CRVideo_LoginSuccess=new o.CbProxy("CRVideo_LoginSuccess"),window.CRVideo_LoginFail=new o.CbProxy("CRVideo_LoginFail"),window.CRVideo_NotifyTokenWillExpire=new o.CbProxy("CRVideo_NotifyTokenWillExpire"),window.CRVideo_UpdateTokenRslt=new o.CbProxy("CRVideo_UpdateTokenRslt"),window.CRVideo_LogoutSuccess=new CRVideo.CbProxy("CRVideo_LogoutSuccess"),window.CRVideo_LogoutFail=new CRVideo.CbProxy("CRVideo_LogoutFail");__webpack_require__(2803),__webpack_require__(5829),__webpack_require__(6533);CRVideo.addEventListener=function(e,t,i){e.addEventListener?e.addEventListener(t,i):e.attachEvent&&e.attachEvent("on"+t,i)},CRVideo.ic=null,CRVideo.webServerAddr=null,CRVideo.proxy=null,CRVideo.logproxy=null,CRVideo.queuingID=null,CRVideo.sessionID=null,CRVideo.cookie="",CRVideo.MeetInfoObj=null,CRVideo.CallID="",CRVideo.HandErrTimes=0,CRVideo.loginAuthFlag=0,CRVideo.meetSubject="test",CRVideo.IceAddr=null,CRVideo.logServer=null,CRVideo.logUUID="",__Rtc._ReplaceObjParam=function(e,t,i){let n={};for(var r in e)n[r]=r!==t?e[r]:i;return n},__Rtc.postCmd={config:{HandSharkTime:1e4}},function(e,t){var n={},r=["Ice::ConnectionLostException","Ice::ConnectFailedException"],o=function(){const e=new Ice.InitializationData;return e.properties=Ice.createProperties(),e.properties.setProperty("Ice.Trace.Network","0"),e.properties.setProperty("Ice.Trace.Protocol","0"),e.properties.setProperty("Ice.ACM.Client","0"),e.properties.setProperty("Ice.ACM.Server","0"),e.properties.setProperty("Ice.Default.EncodingVersion","1.0"),Ice.initialize(e)},s=function(){console.crlog("[Callsvr] destroy Crux Connect on IceCruxCreate..."),a();var r=e.CallServerInfo,s=r.callSvrList,c=new Array;c=r.callSvrList.indexOf(";")>-1?s.split(";")[0]:s;var l=i.Z.parse_url("https://"+c),d="jserver:wss";l?(n.crux=o(),l.path&&(d+=" -r "+l.path),l.host&&(d+=" -h "+l.host),l.port?d+=" -p "+l.port:d+=" -p 443",console.crlog("[Callsvr] "+d),CRVideo.proxy=n.crux.stringToProxy(d),t.ic=n.crux,CRVideo_SetAdapter().then(CRVideo.__LoginCallserver).catch((e=>{CRVideo_LoginFail.target(204,CRVideo.LoginParam.cookie),CRVideo_UploadingLog()}))):console.error("[Callsvr] error: jserver parseUrl")},a=function(){n.crux&&n.crux.destroy&&(clearTimeout(CRVideo.HandShark),console.crlog("[Callsvr] Websockt destroy Crux connect..."),n.crux.destroy(),clearInterval(CRVideo.resetAdapterTimer),CRVideo.callserverCastPrx=null,setTimeout((()=>{CRVideo.callserverExiting=!1}),100))},c=function(){n.Log&&n.Log.destroy&&(console.crlog("[LogServer] Websockt destroy Log connect..."),n.Log.destroy(),CRVideo.logproxy=null)};e.IceCruxCreate=s,CRVideo.destroyCruxConnect=a,e.IceLogCreate=function(){console.crlog("[LogServer] destroy Log Connect on IceLogCreate..."),c();var t="",r=e.CallServerInfo;if(r?t=r.uploadUrl.split(";")[0]?r.uploadUrl.split(";")[0]:r.uploadUrl.split(";")[1]:window.rtcProxy.crmt&&window.rtcProxy.crmt.WEBLOGCFG&&(t=window.rtcProxy.crmt.WEBLOGCFG),t){var s=i.Z.parse_url("https://"+t);if(s){var a="Log.ClientLogServer:wss";s.path&&(a+=" -r "+s.path),s.host&&(a+=" -h "+s.host),s.port?a+=" -p "+s.port:a+=" -p 443",console.crlog("[LogServer] logserver: "+a),n.Log=o(),CRVideo.logproxy=n.Log.stringToProxy(a),CRVideo_LoggerAdapter();var l="";window.sessionStorage&&((l=window.sessionStorage.getItem("logUUID"))||(l=Ice.generateUUID(),window.sessionStorage.setItem("logUUID",l))),CRVideo.logUUID=l,null==CRVideo.isUploadLog&&(CRVideo.isUploadLog=0),CRVideo.logIceConnect=n.Log,CRVideo_UploadingReport()}else console.error("[LogServer] error: ClientLogServer parseUrl")}},CRVideo.destroyLogConnect=c,e.destroyLogConnect=c,e.resetCruxConnect=function(e){var t=e.toString();r.find((e=>-1!=t.indexOf(e)))&&(console.crlog("[Callsvr] callserver loginAgain..."),s())},e.errorLoginAgain=r}(__Rtc.postCmd,CRVideo);var d={NotifyQueueStatus:CRVideo.queCallback.NotifyQueueStatus,NotifyPosition:CRVideo.queCallback.NotifyPosition,AssignUser:CRVideo.queCallback.AssignUser,AssignCancel:CRVideo.queCallback.AssignCancel,NotifyUserEnter:CRVideo.queCallback.NotifyUserEnter,NotifyUserLeave:CRVideo.queCallback.NotifyUserLeave,ServerAccept:CRVideo.callSvrCallback.ServerAccept,ServerDecline:CRVideo.callSvrCallback.ServerDecline,ServerCall:CRVideo.callSvrCallback.ServerCall,ServerPushUserStatus:CRVideo.callSvrCallback.ServerPushUserStatus,ServerReleaseCall:CRVideo.callSvrCallback.ServerReleaseCall,ServerCancelCall:CRVideo.callSvrCallback.ServerCancelCall,ServerKickoutUser:CRVideo.loginCallback.ServerKickoutUser,invite:__Rtc.CRRTCInvite.ICECallback.invite,acceptInvite:__Rtc.CRRTCInvite.ICECallback.acceptInvite,rejectInvite:__Rtc.CRRTCInvite.ICECallback.rejectInvite,cancelInvite:__Rtc.CRRTCInvite.ICECallback.cancelInvite,inviteResult:__Rtc.CRRTCInvite.ICECallback.inviteResult},u={Login:CRVideo.loginCallback.Login,GetServiceData:CRVideo.queCallback.GetServiceData,GetQueueStatus:CRVideo.queCallback.GetQueueStatus,UserEnter:CRVideo.queCallback.UserEnter,UserLeave:CRVideo.queCallback.UserLeave,AgentEnter:CRVideo.queCallback.AgentEnter,AgentLeave:CRVideo.queCallback.AgentLeave,AssignResponse:CRVideo.queCallback.AssignResponse,StartStatusPush:CRVideo.callSvrCallback.StartStatusPush,StopStatusPush:CRVideo.callSvrCallback.StopStatusPush,GetUserStatus:CRVideo.callSvrCallback.GetUserStatus,GetUserServiceStatus:CRVideo.queCallback.GetUserServiceStatus,GetAgentServiceStatus:CRVideo.queCallback.GetAgentServiceStatus,ClientCustomStatusUpdate:CRVideo.callSvrCallback.ClientCustomStatusUpdate,RequestUser:CRVideo.queCallback.RequestUser,GetQueueUsers:CRVideo.queCallback.GetQueueUsers,ClientCall:CRVideo.callSvrCallback.ClientCall,ClientAccept:CRVideo.callSvrCallback.ClientAccept,ClientDecline:CRVideo.callSvrCallback.ClientDecline,ClientReleaseCall:CRVideo.callSvrCallback.ClientReleaseCall,Logout:CRVideo.loginCallback.Logout,ShakeHand:function(e,t,i){0==e.RspCode?function(e,t){const i=(new Date).getTime()-t;0==e.RspCode?(console.crlog(`[Callserver] Callserver shakeHand success, delay: ${i}ms`),CRVideo.HandErrTimes=CRVideo.HandErrTimes-1):console.crlog(`[Callserver] Callserver shakeHand fail: ${JSON.stringify(e)},`)}(e,i):console.crlog("[Callsvr] ShakeHandRslt"+e.RspCode)}};const h={data:{sendTask:[]},receive(e,t,n){let r=0;const o=t[r++],s=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],a=i.Z.Uint8ArrToChar(t.slice(r,r+=s));if(0===o){console.crlog("[Callsvr] Received bufferData, received header data...");const e=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],n=i.Z.Uint8ArrToChar(t.slice(r,r+=e)),s=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++];this.data[a]={type:o,fileName:n,dataSize:s,dataBurst:[]}}else if(1===o){this.isStarting||(console.crlog("[Callsvr] Received bufferData, start to recive part data..."),this.isStarting=!0);const e=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],i=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],n=Array.prototype.concat.apply([],t.slice(r,i+r));this.data[a].type=o,this.data[a].dataBurst.push({start:e,length:i,data:n})}else if(2===o){console.crlog("[Callsvr] Received bufferData, transmit finished...");const t=this.data[a].dataBurst;t.sort(((e,t)=>e.start-t.start));let n=0,r=[];console.crlog("[Callsvr] Received bufferData, start to concat...");for(let e=0;e<t.length;e++)n+=t[e].length,r=r.concat(t[e].data);if(r=i.Z.Uint8ArrToChar(r),n===this.data[a].dataSize)try{console.crlog(`[Callsvr] CRVideo_NotifyBufferData.target(${e.sourceUserId},bufferData)`),CRVideo_NotifyBufferData.target(e.sourceUserId,r)}catch(e){console.error(e)}}n.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}))},receiveFile(e,t,n){let r=0;const o=t[r++],s=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],a=i.Z.Uint8ArrToChar(t.slice(r,r+=s));if(0===o){console.crlog("[Callsvr] Received fileData, received header data...");const e=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],n=i.Z.Uint8ArrToChar(t.slice(r,r+=e)).split("\\").pop(),s=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++];this.data[a]={type:o,fileName:n,dataSize:s,dataBurst:[]}}else if(1===o){this.isStarting||(console.crlog("[Callsvr] Received fileData, start to recive part data..."),this.isStarting=!0);const e=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],i=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],n=Array.prototype.concat.apply([],t.slice(r,i+r));this.data[a].type=o,this.data[a].dataBurst.push({start:e,length:i,data:n})}else if(2===o){console.crlog("[Callsvr] Received fileData, transmit finished...");const t=this.data[a].dataBurst;t.sort(((e,t)=>e.start-t.start));let i=0,n=[];console.crlog("[Callsvr] Received fileData, start to concat...");for(let e=0;e<t.length;e++)i+=t[e].length,n=n.concat(t[e].data);if(i===this.data[a].dataSize)try{this.writeFile(e.sourceUserId,new Uint8Array(n).buffer,this.data[a].fileName,a)}catch(e){console.error(e)}}n.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}))},writeFile(e,t,n,r){const o=i.Z.getFileType(n),s=new Blob([t]);window.URL.createObjectURL(s);console.crlog(`[Callsvr] Recevied file success, fileName: ${n}, fileType: ${o}, size: ${parseInt(s.size/1024)}KB`),console.crlog(`[Callsvr] CRVideo_NotifyFileData.target(${e}, ${t}, ${n})`),CRVideo_NotifyFileData.target(e,t,n)},sendFile(e,t,n,r,o){const s=102400,a=n,c=i.Z.splitCutArr(a,s),l=a.length,d=i.Z.charToUint8Arr(t),u=d.length,f=new C,p=f.create(0,8+d.length);let _=p.length-8-d.length;p[_++]=(4278190080&u)>>24,p[_++]=(16711680&u)>>16,p[_++]=(65280&u)>>8,p[_++]=255&u;for(let e=0;e<d.length;e++)p[_++]=d[e];p[_++]=(4278190080&l)>>24,p[_++]=(16711680&l)>>16,p[_++]=(65280&l)>>8,p[_++]=255&l;var g={cmd:"SendFile",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:e};function m(e){h.data.sendTask.forEach((e=>{e.uuid==r&&(e.state=3)})),console.crlog(`[Callsvr] CRVideo_SendFileRslt.target(${r},1,${o})`),CRVideo_SendFileRslt.target(r,e||1,o)}h.data.sendTask.forEach((e=>{e.uuid==r&&(e.state=1)})),CRVideo.webSendBuffer(g,p,((e,t)=>{if(0!==t)return void m(t);let i=0;function n(t,i){const n=t*s,l=c.length?s:a.length%s,d=f.create(1,l+8);let u=d.length-(l+8);d[u++]=(4278190080&n)>>24,d[u++]=(16711680&n)>>16,d[u++]=(65280&n)>>8,d[u++]=255&n,d[u++]=(4278190080&l)>>24,d[u++]=(16711680&l)>>16,d[u++]=(65280&l)>>8,d[u++]=255&l;for(let e=0;e<i.length;e++)d[u++]=i[e];CRVideo_SendProgress.target(e,n,a.length,o),CRVideo.webSendBuffer(g,d,r,e,o)}function r(e,t){if(t&&0!==t)return void m(t);const r=h.data.sendTask.find((t=>t.uuid==e)),s=c.shift();if(s)1==r.state?(n(i,s),i++):(console.crlog(`[Callsvr] CRVideo_SendFileRslt.target(${e},1199,${o})`),CRVideo_SendFileRslt.target(e,1199,o));else{const t=f.create(2,0);CRVideo.webSendBuffer(g,t,((e,t)=>{0===t?(h.data.sendTask.forEach((t=>{t.uuid==e&&(t.state=2)})),console.crlog(`[Callsvr] CRVideo_SendFileRslt.target(${e},0,${o})`),CRVideo_SendFileRslt.target(e,0,o)):m(t)}),e,o)}}r(e)}),r,o)}};var f=Ice.Class(SendCmd.Cmd,{sendCmd_async:function(e,t,i){e.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}));var n=JSON.parse(t),r=n.cmd;n.module;if(null!=r){console.crlog(`[Callsvr] Received cmd callback:${r} --\x3e ${JSON.stringify(n)}`);try{d[r](n)}catch(e){console.crlog(e),console.error(e)}}},sendBuffer_async:function(t,i,n,r){t.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}));var o=JSON.parse(i);if("SendCMD"==o.cmd){var s=function(e){var t,i,n,r,o,s;for(t="",n=e.length,i=0;i<n;)switch((r=e[i++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:o=e[i++],t+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e[i++],s=e[i++],t+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&s)<<0)}return t}(n);e.apis.includes("CRVideo_NotifyCmdData")||console.crlog(`[Callsvr] CRVideo_NotifyCmdData.target(${o.sourceUserId}, ${s});`),CRVideo_NotifyCmdData.target(o.sourceUserId,s)}else"SendBuffer"==o.cmd?h.receive(o,n,t):"SendFile"==o.cmd&&h.receiveFile(o,n,t)}}),p=Ice.Class(LogSpace.ClientLogServer,{log:function(e){console.crlog("[Callsvr] log:"+e)},logFatal:function(e){console.crlog("[Callsvr] logFatal:"+e)},usrReport:function(e){console.crlog("[Callsvr] usrReport:"+e)},logDetail:function(e){console.crlog("[Callsvr] logDetail:"+e)}});function C(){this.uuid=Ice.generateUUID(),this.CommonArray=[],this.init()}window.CRVideo_SetAdapter=function(){const e=new Promise(((e,t)=>{Ice.Promise.try2((function(){SendCmd.CmdPrx.checkedCast(CRVideo.proxy).then((function(t){return CRVideo.callserverCastPrx=t,console.crlog("[Callsvr] Ice set adapter success!"),CRVideo.ic.createObjectAdapter("").then((function(e){CRVideo.cruxAdapter=e,e.add(new f,CRVideo.ic.stringToIdentity("jclient")),e.activate();let t=CRVideo.callserverCastPrx.ice_getCachedConnection();if(null==t)return console.crlog("[Callsvr] callserver ice_getCachedConnection is null!"),!1;t.setAdapter(e)})),e()})).exception((function(e){return console.crlog("[Callsvr] !!!Callserver checkedCast fail. is: "+e),t()}))})).exception((function(e){return t()}))}));return e},window.CRVideo_LoggerAdapter=function(){Ice.Promise.try2((function(){CRVideo.ServerLogger=LogSpace.ClientLogServerPrx.checkedCast(CRVideo.logproxy).then((function(e){CRVideo.logIceConnect.createObjectAdapter("").then((function(t){CRVideo.logServerPrx=e,CRVideo.logServerAdapter=t,t.add(new p,Ice.stringToIdentity("jclient"));let i=CRVideo.logServerPrx.ice_getCachedConnection();if(null==i)return console.crlog("[Callsvr] log ice_getCachedConnection is null!"),!1;i.setAdapter(t)}))}))})).exception((function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try2(__Rtc.postCmd.destroyLogConnect).finally((function(){process.exit(1)}))}))},C.prototype.init=function(){let e=0;const t=this.uuid.length;this.CommonArray[e++]=0,this.CommonArray[e++]=(4278190080&t)>>24,this.CommonArray[e++]=(16711680&t)>>16,this.CommonArray[e++]=(65280&t)>>8,this.CommonArray[e++]=255&t;const i=new TextEncoder("utf-8").encode(this.uuid);for(let n=0;n<t;n++)this.CommonArray[e++]=i[n]},C.prototype.create=function(e,t){const i=new Uint8Array(this.CommonArray.length+t);for(let e=0;e<this.CommonArray.length;e++)i[e]=this.CommonArray[e];return i[0]=e,i},C.prototype.getUUID=function(){return this.uuid},window.CRVideo_SendBuffer=function(e,t,i){function n(e){h.data.sendTask.forEach((e=>{e.uuid==d&&(e.state=3)})),console.crlog("[Callsvr] CRVideo_SendBuffer finished "+JSON.stringify(f)),CRVideo_SendBufferRslt.target(d,e||1,i)}const r=102400;let o=new TextEncoder("utf-8").encode(t.toString());const s=function(e,t){let i=0,n=[];for(;i<e.length;)n.push(e.slice(i,i+=t));return n}(o,r),a=o.length,c=new C,l=c.create(0,8),d=c.getUUID();h.data.sendTask.push({uuid:d,state:0});let u=l.length-8;l[u++]=l[u++]=l[u++]=l[u++]=0,l[u++]=(4278190080&a)>>24,l[u++]=(16711680&a)>>16,l[u++]=(65280&a)>>8,l[u++]=255&a;var f={cmd:"SendBuffer",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:e};return h.data.sendTask.forEach((e=>{e.uuid==d&&(e.state=1)})),CRVideo.webSendBuffer(f,l,(function(e,t){if(0!==t)return void n(t);let a=0;function l(t,a){const l=t*r,u=s.length?r:o.length%r,h=c.create(1,u+8);let p=h.length-(u+8);h[p++]=(4278190080&l)>>24,h[p++]=(16711680&l)>>16,h[p++]=(65280&l)>>8,h[p++]=255&l,h[p++]=(4278190080&u)>>24,h[p++]=(16711680&u)>>16,h[p++]=(65280&u)>>8,h[p++]=255&u;for(let e=0;e<a.length;e++)h[p++]=a[e];CRVideo_SendProgress.target(e,l,o.length,i),CRVideo.webSendBuffer(f,h,(function(e,t){0===t?d(e):n(t)}),e,i)}function d(e){const t=h.data.sendTask.find((t=>t.uuid==e)),r=s.shift();if(r)1==t.state?(l(a,r),a++):(console.crlog(`[Callsvr] CRVideo_SendBufferRslt.target(${e},1199,${i})`),CRVideo_SendBufferRslt.target(e,1199,i));else{const t=c.create(2,0);CRVideo.webSendBuffer(f,t,(function(e,t){0===t?(h.data.sendTask.forEach((t=>{t.uuid==e&&(t.state=2)})),CRVideo_SendBufferRslt.target(e,0,i)):n(t)}),e,i)}}d(e)}),d,i),d},window.CRVideo_SendFile=function(e,t,i){console.crlog(`[Callsvr] CRVideo_SendFile(${e},${t.name})`);const n=Ice.generateUUID();try{const o=t.name;var r=new FileReader;r.readAsArrayBuffer(t),r.onload=t=>{const s=new Int8Array(r.result);h.data.sendTask.push({uuid:n,state:0}),h.sendFile(e,o,s,n,i)}}catch(e){throw console.crlog(`[Callsvr] [error] ${e}`),e}return n},window.CRVideo_SendCmd=function(t,i,n){try{e.apis.includes("CRVideo_SendCmd")||console.crlog(`[Callsvr] CRVideo_SendCmd(${t},${i},${n})`)}catch(e){throw e}var r={cmd:"SendCMD",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:t},o=new TextEncoder("utf-8").encode(i.toString());const s=Ice.generateUUID();return CRVideo.webSendBuffer(r,o,CRVideo_SendCmdRslt.callback,s,n),s},window.CRVideo_CancelSend=function(e){h.data.sendTask.forEach((t=>{t.uuid==e&&(t.state=0)}))},CRVideo.webSendBuffer=function(e,t,i,n,r){Ice.Promise.try2((function(){CRVideo.callserverCastPrx&&(CRVideo.ic.createObjectAdapter("").then((function(e){CRVideo.cruxAdapter=e,e.add(new f,CRVideo.ic.stringToIdentity("jclient")),e.activate();let t=CRVideo.callserverCastPrx.ice_getCachedConnection();if(null==t)return console.crlog("[Callsvr] callserver ice_getCachedConnection is null!"),!1;t.setAdapter(e)})),CRVideo.callserverCastPrx.sendBuffer(JSON.stringify(e),t).then((function(t){void 0!==i&&i(n,CRVideo_ERR_DEF.NOERR,r);e.cmd})).exception((function(e){let t=e.reason;void 0!==i&&(t.includes("not found")?i(n,CRVideo_ERR_DEF.SENDDATA_TARGETINVALID,r):i(n,CRVideo_ERR_DEF.UNKNOWERR,r)),console.crlog("[Callsvr] ex = "+e),console.error(e),console.crlog("[Callsvr] reason = "+e.reason)})))})).exception((function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try2(CRVideo.destroyCruxConnect).finally((function(){process.exit(1)}))}))},CRVideo.webSendcmd=function(e,t,i){var n=e.cmd;e.module;CRVideo.callserverCastPrx&&CRVideo.callserverCastPrx.sendCmd(JSON.stringify(e)).then((function(r){let o=CRVideo.callserverCastPrx.ice_getCachedConnection();null!=o?o.setAdapter(CRVideo.cruxAdapter):console.crlog("[Callsvr] callserver ice_getCachedConnection is null!");var s=JSON.parse(r);0!=s.RspCode&&console.crlog("[Callsvr] !!!error. sendcmdName: "+n+", RspCode: "+s.RspCode+", RspDesc: "+s.RspDesc),u[n]&&u[n](s,e,t,i)})).exception((function(r){console.crlog(`[Callsvr] !!!Callserver send cmd uncheckedCast fail. error: ${r.error}, reason: ${r.reason}`),3!==r.error&&1006!==r.error||CRVideo.LineOffHandler(204),console.error(r),u[n]&&u[n]({RspCode:204},e,t,i)}))},CRVideo.webLogDetail=function(e,t,i){CRVideo.logproxy&&Ice.Promise.try2((function(){LogSpace.ClientLogServerPrx.checkedCast(CRVideo.logproxy).then((function(n){n.logDetail(e,t,i).then((function(e){})).exception((function(e){console.crlog("[LOG] Log uploading fail!",e)}))})).exception((function(e){console.crlog("[LOG] !!! log checkedCast fail. is: "+e),-1!=__Rtc.postCmd.errorLoginAgain.indexOf(e.toString())&&__Rtc.postCmd.IceLogCreate()}))})).exception((function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try((function(){CRVideo.destroyCruxConnect})).finally((function(){process.exit(1)}))}))},window.CRVideo_ShakeHand=function(){if(clearTimeout(CRVideo.HandShark),CRVideo.HandShark=setTimeout(CRVideo_ShakeHand,__Rtc.postCmd.config.HandSharkTime),CRVideo.HandErrTimes>120)CRVideo.HandErrTimes=0,console.crlog("[Callsvr] HandErrTimes error: Abnormal dropped!!!!!"),CRVideo.LineOffHandler(CRVideo_ERR_DEF.SOCKETEXCEPTION);else{let e=(new Date).getTime(),t={cmd:"ShakeHand",module:"CallServer",sessionID:CRVideo.sessionID};CRVideo.CallID&&(t.callID=CRVideo.CallID),CRVideo.webSendcmd(t,e),CRVideo.HandErrTimes=CRVideo.HandErrTimes+1}},CRVideo.callServerSendCMD=function(e){return new Promise(((t,i)=>{Ice.Promise.try2((()=>{if(!CRVideo.callserverCastPrx)return console.crlog("[Callserver] Did not login callserver!"),i("[Callserver] Did not login callserver!");{const n=JSON.stringify(Object.assign(e,{sessionID:CRVideo.sessionID}));CRVideo.callserverCastPrx.sendCmd(n).then((e=>t(JSON.parse(e)))).exception((t=>{if(console.crlog(`[Callserver] SendCMD Fail, cmd: ${e.cmd}`),console.crlog(t),!t||3!==t.error)return i(t);CRVideo.LineOffHandler(204)}))}})).exception((e=>(console.crlog(e.toString()),i(`[Error] Callserver connect Fail, ${e.toString()}`))))}))},window.CRVideo_NotifyCmdData=new CRVideo.CbProxy("CRVideo_NotifyCmdData"),window.CRVideo_SendCmdRslt=new CRVideo.CbProxy("CRVideo_SendCmdRslt"),window.CRVideo_SendBufferRslt=new CRVideo.CbProxy("CRVideo_SendBufferRslt"),window.CRVideo_SendProgress=new CRVideo.CbProxy("CRVideo_SendProgress"),window.CRVideo_SendFileRslt=new CRVideo.CbProxy("CRVideo_SendFileRslt"),window.CRVideo_SendProgress=new CRVideo.CbProxy("CRVideo_SendProgress"),window.CRVideo_CancelSendRslt=new CRVideo.CbProxy("CRVideo_CancelSendRslt"),window.CRVideo_NotifyBufferData=new CRVideo.CbProxy("CRVideo_NotifyBufferData"),window.CRVideo_NotifyFileData=new CRVideo.CbProxy("CRVideo_NotifyFileData"),window.CRVideo_NotifyCancelSend=new CRVideo.CbProxy("CRVideo_NotifyCancelSend");__webpack_require__(2398);var g=__webpack_require__(3826);Cr.LHProxy=function(e){this.__config=e,!this.__config||"ws"!=this.__config.protocol&&"wss"!=this.__config.protocol?this._protocol="wss":this._protocol=this.__config.protocol,this._type="html5",this._logining=!1},Cr.LHProxy.prototype.initIce=function(){var e=new Cr.AsyncResult;return this.callbackDict={},this._initData=new Ice.InitializationData,this._initData.properties=Ice.createProperties(),this._initData.properties.setProperty("Ice.Trace.Network","0"),this._initData.properties.setProperty("Ice.Trace.Protocol","0"),this._initData.properties.setProperty("Ice.ACM.Client","0"),this._initData.properties.setProperty("Ice.Default.EncodingVersion","1.0"),this._initData.properties.setProperty("Ice.ThreadPool.Client.Serialize","1"),this._initData.properties.setProperty("Ice.ThreadPool.Server.Serialize","1"),e.complete([0,""]),e},Cr.LHProxy.prototype.registeredCallback=function(e,t){if(this.callbackDict[e])throw"";this.callbackDict[e]=t},Cr.LHProxy.prototype.unregisterCallback=function(e,t){this.callbackDict[e]=null,delete this.callbackDict[e]},Cr.LHProxy.prototype.callCallback=function(e,t){var i=this.callbackDict[e];if(i&&"function"==typeof i)try{i.call(null,t)}catch(e){console.crlog(`[SDK][Error] ${e}`),console.error(e)}},Cr.LHProxy.prototype.initCon=function(){try{this._communicator&&(this._communicator.destroy(),this._communicator=null),this._connection&&(this._connection.destroy(0),this._connection=null),this._adapter&&(this._adapter.destroy(),this._adapter=null),this._routerPrx&&(this._routerPrx.destroySession(),this._routerPrx=null)}catch(e){console.crlog("[RTC] ice Init fail.!")}},Cr.LHProxy.prototype.refreshSession=function(){var e=new Cr.AsyncResult;try{this._routerPrx.refreshSession().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.keepAlive=function(e){var t=new Cr.AsyncResult;try{var i=new Ice.HashMap;i.set("w",e.toString()),this._conferenceRequest.keepAlive(i).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.exit=function(e){var t=new Cr.AsyncResult;try{console.crlog(`[Ice] this._conferenceRequest.exit(${e})`),this._conferenceRequest.exit(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.getActiveMembers=function(){var e=new Cr.AsyncResult;try{new Ice.HashMap;this._conferenceRequest.getActiveMembers().then(function(t){for(var i in t){var n=t[i].extProperty.get(Conference.MINFO_OPENEDCAMIDS);null!=n&&(n=n.split(";")[0]),t[i].openedCamIDs=n}e.complete([0,"",t])}.bind(this)).exception(function(t){e.complete([204,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.SendIMMsg=function(e,t,n,r,o){var s=new Cr.AsyncResult;try{var a=new Ice.Context;a._fwd="z";var c=new Conference.InIMMsgInfo;c.targetTermId=e,c.targetNickname=t,c.font=n,c.msg=i.Z.html2chat(r),c.sendTime=o,this._chatRequest.sendIMMsg(c,a).then(function(){s.complete([0,""])}.bind(this)).exception(function(e){e instanceof Conference.ContainsSensitiveWords?s.complete([900,""]):e instanceof Conference.NotPermitError?s.complete([901,""]):s.complete([1,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){s.complete([3,e.toString()])}return s},Cr.LHProxy.prototype.getIMMsgCount=function(){var e=new Cr.AsyncResult;try{this._chatRequest.getIMMsgCount().then(function(t){e.complete([0,"",t])}.bind(this)).exception(function(t){e.complete([1,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.getLastMsg=function(e){var t=new Cr.AsyncResult;try{var n=new Ice.Context;n._fwd="z",this._chatRequest.getLastMsg(e,n).then(function(e){var n=[];for(var r in e){var o=e[r],s=o.srcNickname.split("\0"),a=i.Z.chat2html(o.inMsg.msg,o.inMsg.font.color,o.inMsg.font.size),c={type:a[0],index:o.index,msg:a[2],head:a[1],sendTime:o.inMsg.sendTime,targetNickname:o.inMsg.targetNickname,targetTermId:o.inMsg.targetTermId,srcNickname:s[0],srcTermId:o.srcTermId,ishost:s.length>1};n.push(new Cr.MsgInfo(c))}t.complete([0,"",n])}.bind(this)).exception(function(e){t.complete([1,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.getLastNMsg=function(e,t){var n=new Cr.AsyncResult;try{var r=new Ice.Context;r._fwd="z",this._chatRequest.getLastNMsg(e,t,r).then(function(e){var t=[];for(var r in e){var o=e[r],s=o.srcNickname.split("\0"),a=i.Z.chat2html(o.inMsg.msg,o.inMsg.font.color,o.inMsg.font.size),c={type:a[0],index:o.index,msg:a[2],head:a[1],sendTime:o.inMsg.sendTime,targetNickname:o.inMsg.targetNickname,targetTermId:o.inMsg.targetTermId,srcNickname:s[0],srcTermId:o.srcTermId,ishost:s.length>1};t.push(new Cr.MsgInfo(c))}n.complete([0,"",t]),console.crlog&&console.crlog("[RTC] It takes time to get chat history:"+((new Date).getTime()-Cr.AccessLoginStartTime))}.bind(this)).exception(function(e){n.complete([1,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.getBroadCastUrl=function(){var e=new Cr.AsyncResult;try{this._conferenceRequest.getBroadCastUrl().then((function(t){var i={rtmp:t.get(Conference.BOARDCAST_RTMP),hls:t.get(Conference.BOARDCAST_HLS)};e.complete([0,"",i])})).exception((function(t){e.complete([1,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.askQues=function(e,t,i,n,r,o){var s=new Cr.AsyncResult;try{var a=new Conference.QuesAsk;a.typeID=e,a.asktime=t,a.termID=i,n&&""!=n&&(r='<headimg src="'+n+'"/>'+ +r),a.content=r,a.nickname=o,this._ansQuesCtrl.askQues(a).then((function(e){s.complete([0,"",e])})).exception((function(e){s.complete([1,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}))}catch(e){s.complete([3,e.toString()])}return s},Cr.LHProxy.prototype.getQuesList=function(){var e=new Cr.AsyncResult;try{this._ansQuesCtrl.getQuesList().then((function(t){for(var i in quesList=[],t){var n=t[i];quesList.push(new Cr.QuesInf(n))}e.complete([0,"",quesList])})).exception((function(t){e.complete([1,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.getLuckyDrawCfg=function(){var e=new Cr.AsyncResult;try{this._conferenceRequest.getLuckyDrawCfg().then((function(t){var i=t;e.complete([0,"",i])})).exception((function(t){e.complete([1,""])}))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.joinLuckyDrawMembers=function(e,t){var i=new Cr.AsyncResult;try{this._conferenceRequest.joinLuckyDrawMembers(e,t).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.terminalMsg=function(e,t,i,n){var r=new Cr.AsyncResult;try{this._conferenceRequest.terminalMsg(e,t,i,n).then((function(){r.complete([0,""])})).exception((function(e){r.complete([1,""])}))}catch(e){r.complete([3,e.toString()])}return r},Cr.LHProxy.prototype.VideoResolutionReport=function(e,t,i){var n=new Cr.AsyncResult;try{this._clientReport.VideoResolutionReport(e,t,i).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.setAudioDeviceStatus=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setDeviceStatus(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.closeMicEx=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.closeMicEx(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.closeAll=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.closeAll().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.setVoiceEnergy=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setVoiceEnergy(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.pstnSwitchMicStatus=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.pstnSwitchMicStatus().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.startRecord=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.startRecord().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.isRecording=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.isRecording().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.stopRecord=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.stopRecord().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.playApplause=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.playApplause().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.getMusicList=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.getMusicList().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.getPlayBGMusic=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.getPlayBGMusic().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.startBGMusic=function(e,t){var i=new Cr.AsyncResult;try{this._audioCtrl.startBGMusic(e,t).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.stopPlayBGMusic=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.stopPlayBGMusic().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.setPlayBGMusicVolumn=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setPlayBGMusicVolumn(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.getPlayBGMusicVolumn=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.getPlayBGMusicVolumn().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,""]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.voiceHowling=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.voiceHowling(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.voiceNoise=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.voiceNoise(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.remoteAudioSet=function(e,t){var i=new Cr.AsyncResult;try{this._audioCtrl.remoteAudioSet(e,t).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.getRemoteAudioInf=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.getRemoteAudioInf(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,""]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.conferenceRequest=(e,...t)=>new Promise(((i,n)=>{try{Cr._proxy._conferenceRequest[e](...t).then((function(...e){return i(e)})).exception((function(e){return console.crlog("[RTC] conferenceRequest fail: "+e.toString()),n(window.CRVideo_ERR_DEF.UNKNOWERR)}))}catch(e){return console.crlog("[RTC] conferenceRequest error: "+e.toString()),n(window.CRVideo_ERR_DEF.UNKNOWERR)}}));__webpack_require__(473);var m=__webpack_require__(1440);window.__Rtc.CRICEAPI=new class{constructor(){}GetScreenShareInfo(){(0,m.V)("_screenShareCtrl","getScreenShareInfo").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getScreenShareInfoRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getScreenShareInfoRslt.apply(__Rtc.CRRTCScreen,[e])}))}StartScreenShare(){(0,m.V)("_screenShareCtrl","startScreenShare").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startScreenShareRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startScreenShareRslt.apply(__Rtc.CRRTCScreen,[e])}))}StopScreenShare(){(0,m.V)("_screenShareCtrl","stopScreenShare").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopScreenShareRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopScreenShareRslt.apply(__Rtc.CRRTCScreen,[e])}))}StartMarked(){(0,m.V)("_screenShareCtrl","startMarked").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startMarkedRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startMarkedRslt.apply(__Rtc.CRRTCScreen,[e])}))}StopMarked(){(0,m.V)("_screenShareCtrl","stopMarked").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopMarkedRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopMarkedRslt.apply(__Rtc.CRRTCScreen,[e])}))}ClearAllMarksV4(){(0,m.V)("_screenShareCtrl","clearAllMarksV4").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.clearAllMarksV4Rslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.clearAllMarksV4Rslt.apply(__Rtc.CRRTCScreen,[e])}))}GetAllMarkData(){(0,m.V)("_screenShareCtrl","getAllMarkData").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataRslt.apply(__Rtc.CRRTCScreen,[e])}))}GetAllMarkDataV4(){(0,m.V)("_screenShareCtrl","getAllMarkDataV4").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,[e])}))}SendMarkData({termid:e,color:t,mousePosSeq:i}={}){}SendMarkDataV4({termid:e,markid:t,type:i,mousePosSeq:n}={}){const r=new Conference.MarkDataV4(e,t,i,n);(0,m.V)("_screenShareCtrl","sendMarkDataV4",r).then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.sendMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.sendMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,[e])}))}setCtrlReqState(e){return new Promise(((t,i)=>{(0,m.V)("_screenShareCtrl","setCtrlReqState",e).then((e=>t())).catch((e=>i(e)))}))}StartPlayMedia(e){(0,m.V)("_mediaCtrl","startPlayMedia",e).then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.startPlayMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.startPlayMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}StopPlayMedia(){(0,m.V)("_mediaCtrl","stopPlayMedia").then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.stopPlayMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.stopPlayMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}GetMediaInfo(){(0,m.V)("_mediaCtrl","getMediaInfo").then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.getMediaInfoRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.getMediaInfoRslt.apply(__Rtc.CRRTCMedia,[e])}))}PausePlayMedia(e){(0,m.V)("_mediaCtrl","pausePlayMedia",e).then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.pausePlayMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.pausePlayMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}SubscribeMedia(e){(0,m.V)("_mediaCtrl","subscribeMedia",e).then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.subscribeMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.subscribeMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}SetCurrentTab(e,t){return new Promise(((i,n)=>{const r=new Conference.TabID(e.termID,e.localID),o=new Conference.TabID(t.termID,t.localID);(0,m.V)("_syncCtrl","setCurrentTab",r,o).then((e=>i(e))).catch((e=>n(e)))}))}SaveLastTabValue(e){return new Promise(((t,i)=>{(0,m.V)("_syncCtrl","saveLastTabValue",e).then((e=>t(e))).catch((e=>i(e)))}))}setContainerSize(){}Create(e){return new Promise(((t,i)=>{const n=new Conference.TabID(e.wID.termID,e.wID.localID),r=new Conference.WhiteBoardDescribe(n,e.wType,e.docType,e.name,e.docName,e.width,e.height,e.scaleType,e.rotation,e.pageCount,e.curPage,e.animID,e.animFrames,e.showThum,e.bAll,e.allowTerms);(0,m.V)("_whiteBoardCtrl","create",r).then((e=>t(e)),(e=>i(e)))}))}ImportPage(e,t){return new Promise(((i,n)=>{e=new Conference.TabID(e.termID,e.localID);const r=[];for(let e=0;e<t.length;e++){const i=t[e].pageNo,n=t[e].imgID,o=n?Conference.WB_BAKIMG_TYPE.WB_BAKIMG_JPG:Conference.WB_BAKIMG_TYPE.WB_BAKIMG_NULL,s=t[e].elementList||[];r[e]=new Conference.PageData(i,o,n,s)}(0,m.V)("_whiteBoardCtrl","importPage",e,r).then((e=>i(e)),(e=>n(e)))}))}Close(e){return new Promise(((t,i)=>{const n=new Conference.TabID(e.termID,e.localID);(0,m.V)("_whiteBoardCtrl","close",n).then((e=>t(e)),(e=>i(e)))}))}changeName(){}changeScale(){}changeRatote(){}SetCurrentPage(e,t,i,n){return new Promise(((r,o)=>{e=new Conference.TabID(e.termID,e.localID),(0,m.V)("_whiteBoardCtrl","setCurrentPage",e,t,i,n).then((e=>r(e)),(e=>o(e)))}))}showThumPage(){}AddElement(e,t,i){return new Promise(((n,r)=>{const o=new Conference.ElementID(i.eID.ownerID,i.eID.ID),s=new Conference.ElementData(o,i.orderId,i.left,i.top,i.type,i.noused,i.data);(0,m.V)("_whiteBoardCtrl","addElement",e,t,s).then((e=>n(e)),(e=>r(e)))}))}AddElementEx(e,t,i){return new Promise(((n,r)=>{const o=[];for(var s=0;s<i.length;s++){const e=new Conference.ElementID(i[s].eID.ownerID,i[s].eID.ID);o.push(new Conference.ElementData(e,i[s].orderId,i[s].left,i[s].top,i[s].type,i[s].noused,i[s].data))}(0,m.V)("_whiteBoardCtrl","addElementEx",e,t,o).then((e=>n(e)),(e=>r(e)))}))}moveElement(){}modifyElement(){}DelElement(e,t,i){return new Promise(((n,r)=>{e=new Conference.TabID(e.termID,e.localID);const o=[];for(var s=0;s<i.length;s++)o.push(new Conference.ElementID(i[s].ownerID,i[s].ID));(0,m.V)("_whiteBoardCtrl","delElement",e,t,o).then((e=>n(e)),(e=>r(e)))}))}setElementZPos(){}setIndicator(){}setHotspot(){}queryIndicator(){}QueryAllBoardList(){return new Promise(((e,t)=>{(0,m.V)("_whiteBoardCtrl","queryAllBoardList").then((t=>e(t))).catch((e=>t(e)))}))}QueryElementByIDs(e,t){return new Promise(((i,n)=>{const r=new Conference.TabID(e.termID,e.localID);(0,m.V)("_whiteBoardCtrl","queryElementByIDs",r,t).then((e=>i(e))).catch((e=>n(e)))}))}QueryPageElementByIDs(e,t,i){return new Promise(((n,r)=>{const o=[];for(var s=0;s<i.length;s++)o.push(new Conference.ElementID(i[s]));const a=new Conference.TabID(e.termID,e.localID);(0,m.V)("_whiteBoardCtrl","queryPageElementByIDs",a,t,o).then((e=>n(e))).catch((e=>r(e)))}))}SetMarkTerms(){}Kickout(e){return new Promise(((t,i)=>{(0,m.V)("_conferenceRequest","kickout",e).then((e=>t(e))).catch((e=>i(e)))}))}ChangeNickname(e,t){return new Promise(((i,n)=>{(0,m.V)("_conferenceRequest","changeNickname",e,t).then((e=>i(e))).catch((e=>n(e)))}))}changeMemberRights(e){return new Promise(((t,i)=>{const n=[];e.forEach((e=>{n.push(new Conference.ChangedRights(e.termID,new Uint8Array(e.addedRights),new Uint8Array(e.reducedRights)))})),(0,m.V)("_conferenceRequest","changeMemberRights",n).then((e=>t(e))).catch((e=>i(e)))}))}NetDetectResults(e,t){return new Promise(((i,n)=>{(0,m.V)("_conferenceRequest","netDetectResults",e,t).then((e=>i(e))).catch((e=>n(e)))}))}MediaConnectionBreakReport(e){return new Promise(((t,i)=>{(0,m.V)("_clientReport","MediaConnectionBreakReport",e).then((e=>t(e))).catch((e=>(console.error(e),i(e))))}))}};__webpack_require__(8989);const R=window.CRVideo,S=window.Ice;window.CRVideo_CreateMeeting2=e=>{try{console.crlog(`[MeetMgr] CRVideo_CreateMeeting2(${e})`)}catch(e){console.error(e)}window.CRVideo_CreateMeeting("",e)},window.CRVideo_CreateMeeting=function(e,t){try{console.crlog(`[MeetMgr] CRVideo_CreateMeeting(${JSON.stringify(e)},${t})`)}catch(e){console.error(e)}const i=`https://${R.webServerAddr}${n.Z.ClientCreateNetMeet}`,o=null!=e&&null!=e.meetSubject?e.meetSubject:"H5_SDK_REGULAR_ROOM",s=null!=e&&null!=e.needPswd?e.needPswd:0,a=null!=e&&null!=e.isRegular?e.isRegular:1,c={RequestId:S.generateUUID(),MeetSubject:encodeURI(o),IsRegular:a,NeedPswd:s,AsyncMeetMode:1,...R.webLoginOAuth};let l={};l=window.__Rtc._ReplaceObjParam(c,"UserPswd","******"),l=window.__Rtc._ReplaceObjParam(l,"Token","******"),console.crlog("[MeetMgr] WebAPI request url: "+i+", data:"+JSON.stringify(l)),R.meetSubject=o,(0,r.Z)({url:i,timeout:1e4,data:c,dataType:"jsonp",jsonp:"CallBack",success:function(e){let i;if(i=window.__Rtc._ReplaceObjParam(e,"CRMTStr","******"),i=window.__Rtc._ReplaceObjParam(e,"MeetPswd","******"),console.crlog("[MeetMgr] WebAPI /servlet/ClientCreateNetMeet request success, result: "+JSON.stringify(i)),0==e.RspCode){const i={ID:e.MeetID,pswd:e.MeetPswd,subject:o,pubMeetUrl:e.PublicUrl};R.pubMeetUrl=i.publicUrl,__Rtc.postCmd.meetJson=i,console.crlog("[MeetMgr] CreateMeetingSuccess! meetID: "+i.ID);try{console.crlog(`[MeetMgr] CRVideo_CreateMeetingSuccess.target(${JSON.stringify(window.__Rtc._ReplaceObjParam(i,"pswd","******"))},${t})`)}catch(e){console.error(e)}window.CRVideo_CreateMeetingSuccess.target(i,t)}else{console.crlog(`[MeetMgr] CreateMeetingFail! ResJson: ${JSON.stringify(e)}`);try{console.crlog(`[MeetMgr] CRVideo_CreateMeetingFail.target(${window.WEB_SDK_ERR(e.RspCode)},${t})`)}catch(e){console.error(e)}7==e.RspCode&&e.RspCode,window.CRVideo_CreateMeetingFail.target(window.WEB_SDK_ERR(e.RspCode),t)}},error:function(e){console.crlog("[MeetMgr] WebAPI /servlet/ClientCreateNetMeet request fail!");try{console.crlog(`[MeetMgr] CRVideo_CreateMeetingFail.target(202,${t})`)}catch(e){console.error(e)}window.CRVideo_CreateMeetingFail.target(202,t)}})},window.CRVideo_EnterMeeting3=(e,t,i)=>{if(console.crlog(`[MeetMgr] CRVideo_EnterMeeting3(${e},${t},${i})`),1!==R.loginAuthFlag||!R.LoginParam)return console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(7, ${t})`),CRVideo_EnterMeetingRslt.target(7,t),void CRVideo_UploadingLog();if(!e||8!==e.toString().length||NaN==(+e).toString())return console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(5, ${t})`),CRVideo_EnterMeetingRslt.target(5,t),void CRVideo_UploadingLog();const n=i||"",r=R.LoginParam.user_id,o=R.LoginParam.nick_name;CRVideo_EnterMeeting(e,n,r,o,t)},window.CRVideo_EnterMeeting2=(e,t,i,n)=>{console.crlog(`[MeetMgr] CRVideo_EnterMeeting2(${e},${t},${i},${n})`),CRVideo_EnterMeeting(e,"",t,i,n)},window.CRVideo_EnterMeeting=async function(e,t,i,o,s=""){if(console.crlog(`[MeetMgr] CRVideo_EnterMeeting(${e},***,${i},${o},${s})`),"MeetSDK"!=R.SDKKey&&(1!==R.loginAuthFlag||!R.LoginParam))return console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(7, ${s})`),CRVideo_EnterMeetingRslt.target(7,s),void CRVideo_UploadingLog();function a(){const i=`https://${R.webServerAddr}${n.Z.joinMeetingAPI}`;console.crlog("[MeetMgr] CR.EnterMeeting begin "+e);const a={ClientVer:R.sdkver,PRODUCT:"MeetSDK"==R.SDKKey?"WebMeetApp":"H5SDK",RequestId:S.generateUUID(),MeetID:e,MeetPswd:t,NickName:encodeURI(o),MeetWay:0,AsyncMeetMode:1};"MeetSDK"!=R.SDKKey&&Object.assign(a,{UserType:4,...R.webLoginOAuth});let c={};c=window.__Rtc._ReplaceObjParam(a,"UserPswd","******"),c=window.__Rtc._ReplaceObjParam(c,"Token","******"),c=window.__Rtc._ReplaceObjParam(c,"MeetPswd","******"),console.crlog("[MeetMgr] WebAPI request url: "+i+", data:"+JSON.stringify(c));const l={_data_:JSON.stringify(a)};CRVideo.lastJoinApiRequest=a.RequestId,(0,r.Z)({url:i,timeout:2e3,data:l,dataType:"jsonp",jsonp:"jsoncallback",success:function(t){if(a.RequestId===CRVideo.lastJoinApiRequest)if(console.crlog("[MeetMgr] WebAPI /servlet/joinMeetingAPI request success, result: "+JSON.stringify(t)),0==t.RspCode){function i(){R.meetingExiting?(console.crlog("[MeetMgr] meeting exiting... waiting 100ms..."),setTimeout((()=>{i()}),100)):R.initweb()}R.meetingID=+e,R.crmtStr=t.CRMTStr.replace(/CRMT[\.|\w]{0,}:/,""),i()}else"MeetSDK"==R.SDKKey?(console.crlog(`[MeetMgr] MeetSDK.enterMeetingRslt.target(${window.WEB_SDK_ERR(t.RspCode)}, '', '', ${s})`),g.Z.enterMeetingRslt.target(window.WEB_SDK_ERR(t.RspCode),"","",s)):(console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(${window.WEB_SDK_ERR(t.RspCode)},${s})`),CRVideo_EnterMeetingRslt.target(window.WEB_SDK_ERR(t.RspCode),s)),CRVideo_UploadingLog()},error:function(e){console.error(e),console.crlog("[MeetMgr] WebAPI /servlet/joinMeetingAPI request fail!"),"MeetSDK"==R.SDKKey?(console.crlog(`[MeetMgr] MeetSDK.enterMeetingRslt.target(202, '', '', ${s})`),g.Z.enterMeetingRslt.target(202,"","",s)):(console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(202,${s})`),CRVideo_EnterMeetingRslt.target(202,s)),CRVideo_UploadingLog()}})}R.startEnterTimestamp=(new Date).getTime(),R.enterMeetingCookie=s,R.destroyMeetingConnect(),await R.leftMeetingFun(),null==R.LoginParam&&(R.LoginParam={}),R.LoginParam.user_id||""==i||(R.LoginParam.user_id=i),R.LoginParam.nick_name=o,R.isWebRTC?(window.__Rtc.CRRTCAudio.createAudioElement(),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(console.crlog("[MeetMgr] EnumerateDevices on enterMeeting..."),navigator.mediaDevices.enumerateDevices().then((e=>{console.crlog(`[MeetMgr] EnumerateDevices success:${JSON.stringify(e)}`),R.updateDevicesList(e),a()})).catch((function(e){console.crlog(`navigator.mediaDevices.enumerateDevices error: ${e}`),"MeetSDK"==R.SDKKey?(console.crlog(`[MeetMgr] MeetSDK.enterMeetingRslt.target(8003, '', '', ${s})`),g.Z.enterMeetingRslt.target(8003,"","",s)):(console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(8003,${s})`),CRVideo_EnterMeetingRslt.target(8003,s)),CRVideo_UploadingLog(),console.error(e)}))):(console.crlog(`[MeetMgr] navigator.mediaDevices is undefined!!! protocal: ${window.location.protocol}`),"MeetSDK"==R.SDKKey?(console.crlog(`[MeetMgr] MeetSDK.enterMeetingRslt.target(8004, '', '', ${s})`),g.Z.enterMeetingRslt.target(8004,"","",s)):(console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(8004,${s})`),CRVideo_EnterMeetingRslt.target(8004,s)))):a()},window.CRVideo_DestroyMeeting=function(e,t,i){console.crlog(`[MeetMgr] CRVideo_DestroyMeeting(${e},${t},${i})`);const o=`https://${R.webServerAddr}${n.Z.closeConf}`,s={RequestId:S.generateUUID(),MeetID:e,ClientVer:"",...R.webLoginOAuth};let a={};a=__Rtc._ReplaceObjParam(s,"UserPswd","******"),a=__Rtc._ReplaceObjParam(a,"Token","******"),console.crlog("[MeetMgr] WebAPI request url: "+o+", data:"+JSON.stringify(a));const c={_data_:JSON.stringify(s)};(0,r.Z)({url:o,timeout:5e3,data:c,dataType:"jsonp",jsonp:"jsoncallback",success:function(e){console.crlog("[MeetMgr] WebAPI /api/servlet/closeConf request success: "+JSON.stringify(e)),i?(console.crlog(`[MeetMgr] CRVideo_StopMeetingRslt.target(${window.WEB_SDK_ERR(e.RspCode)},${t})`),CRVideo_StopMeetingRslt.target(window.WEB_SDK_ERR(e.RspCode),t)):(console.crlog(`[MeetMgr] CRVideo_DestroyMeetingRslt.target(${window.WEB_SDK_ERR(e.RspCode)},${t})`),CRVideo_DestroyMeetingRslt.target(window.WEB_SDK_ERR(e.RspCode),t))},error:function(e){console.error(e),console.crlog("[MeetMgr] WebAPI /api/servlet/closeConf request fail!"),i?(console.crlog(`[MeetMgr] CRVideo_StopMeetingRslt.target(202,${t})`),CRVideo_StopMeetingRslt.target(202,t)):(console.crlog(`[MeetMgr] CRVideo_DestroyMeetingRslt.target(202,${t})`),CRVideo_DestroyMeetingRslt.target(202,t))}})},window.CRVideo_StopMeeting=(e,t)=>{console.crlog(`[MeetMgr] CRVideo_StopMeeting(${e},${t})`),window.CRVideo_DestroyMeeting(e,t,!0)},window.CRVideo_CreateMeetingSuccess=new R.CbProxy("CRVideo_CreateMeetingSuccess"),window.CRVideo_CreateMeetingFail=new R.CbProxy("CRVideo_CreateMeetingFail"),window.CRVideo_EnterMeetingRslt=new R.CbProxy("CRVideo_EnterMeetingRslt"),window.CRVideo_DestroyMeetingRslt=new R.CbProxy("CRVideo_DestroyMeetingRslt"),window.CRVideo_StopMeetingRslt=new R.CbProxy("CRVideo_StopMeetingRslt");const I=window.Conference,y=(window.Cr,window.Ice),v=window.__Rtc;v.ConferenceReceptor=y.Class(I.ConferenceCallback,{setProxy:function(e){this.proxy=e},entered(...e){v.CRRTCConf&&v.CRRTCConf.entered(...e)},left(...e){v.CRRTCConf&&v.CRRTCConf.left(...e)},actorChanged(...e){v.CRRTCConf&&v.CRRTCConf.actorChanged(...e)},nicknameChanged(...e){v.CRRTCConf&&v.CRRTCConf.nicknameChanged(...e)},optionChanged(...e){v.CRRTCConf&&v.CRRTCConf.optionChanged(...e)},rightChanged(...e){v.CRRTCConf&&v.CRRTCConf.rightChanged(...e)},roomStateChanged(...e){console.log("===== roomStateChanged =====",e)},inviteStateChanged(...e){console.log("===== inviteStateChanged =====",e)},conferenceBegan(...e){console.log("===== conferenceBegan =====",e)},conferenceEnded(...e){v.CRRTCConf&&v.CRRTCConf.conferenceEnded(...e)},memberCount(...e){console.log("===== memberCount =====",e)},confirmAutoEnd(...e){console.log("===== confirmAutoEnd =====",e)},autoEndCancelled(...e){console.log("===== autoEndCancelled =====",e)},roomKnocked(...e){console.log("===== roomKnocked =====",e)},agendaUpdated(...e){console.log("===== agendaUpdated =====",e)},subjectUpdated(...e){console.log("===== subjectUpdated =====",e)},notifyApplyDemo(...e){console.log("===== notifyApplyDemo =====",e)},notifyApplyRejected(...e){console.log("===== notifyApplyRejected =====",e)},serverNotify(...e){console.log("===== serverNotify =====",e)},serverNotifyMsg(...e){console.log("===== serverNotifyMsg =====",e)},updateAppStatus(...e){console.log("===== updateAppStatus =====",e)},notifyAssistantChanged(...e){v.CRRTCConf&&v.CRRTCConf.notifyAssistantChanged(...e)},notifyNetDetectResults(...e){console.log("===== notifyNetDetectResults =====",e)},notifyReportStatus(...e){console.log("===== notifyReportStatus =====",e)},notifyReportStatus_async(...e){console.log("===== notifyReportStatus_async =====",e)},exeCmd(...e){console.log("===== exeCmd =====",e)},exeCmd_async(...e){console.log("===== exeCmd_async =====",e)},notifyStart1v1SubMeeting_async(...e){console.log("===== notifyStart1v1SubMeeting_async =====",e)},notifyStart1v1SubMeeting(...e){console.log("===== notifyStart1v1SubMeeting =====",e)},notifyStop1v1SubMeeting(...e){console.log("===== notifyStop1v1SubMeeting =====",e)},notifyStart1v1SubMeetingRslt(...e){console.log("===== notifyStart1v1SubMeetingRslt =====",e)},setWDT1v1SubMeetingMode(...e){console.log("===== setWDT1v1SubMeetingMode =====",e)},notifyIVRStatus(...e){console.log("===== notifyIVRStatus =====",e)},notifyStartSvrBroadcast(...e){console.log("===== notifyStartSvrBroadcast =====",e)},notifyStartBroadCast(...e){console.log("===== notifyStartBroadCast =====",e)},notifyStopBroadCast(...e){console.log("===== notifyStopBroadCast =====",e)},notifyWebViewerNum(...e){console.log("===== notifyWebViewerNum =====",e)},notifyBroadCastStartPush(...e){console.log("===== notifyBroadCastStartPush =====",e)},notifyBroadCastStopPush(...e){console.log("===== notifyBroadCastStopPush =====",e)},notifyBroadCastPlayback(...e){console.log("===== notifyBroadCastPlayback =====",e)},notifyBroadCastPlaybackStop(...e){console.log("===== notifyBroadCastPlaybackStop =====",e)},notifypayback(...e){console.log("===== notifypayback =====",e)},notifySwtichLiveAppElements(...e){console.log("===== notifySwtichLiveAppElements =====",e)},notifyThumbUp(...e){console.log("===== notifyThumbUp =====",e)},notifyLuckyDrawCfg(...e){console.log("===== notifyLuckyDrawCfg =====",e)},notifyLDMembersStatus(...e){console.log("===== notifyLDMembersStatus =====",e)},notifyLuckyDrawResult(...e){console.log("===== notifyLuckyDrawResult =====",e)},notifySvrRecordStateChanged(...e){v.CRRTCRecord&&v.CRRTCRecord.ICECallback.notifySvrRecordStateChanged(...e)},notifySvrRecordCfgChanged(...e){v.CRRTCRecord&&v.CRRTCRecord.ICECallback.notifySvrRecordCfgChanged(...e)},notifySvrRecordFileState(...e){v.CRRTCRecord&&v.CRRTCRecord.ICECallback.notifySvrRecordFileState(...e)},notifySvrBroadcastCfgChanged(...e){console.log("===== notifySvrBroadcastCfgChanged =====",e)},notifyAppUILocked(...e){console.log("===== notifyAppUILocked =====",e)},notifyBeginVote(...e){console.log("===== notifyBeginVote =====",e)},notifyEndVote(...e){console.log("===== notifyEndVote =====",e)},notifyPublishVoteResult(...e){console.log("===== notifyPublishVoteResult =====",e)},notifyCommitVote(...e){console.log("===== notifyCommitVote =====",e)},notifyTerminalMsg(...e){v.CRRTCTermMsg&&v.CRRTCTermMsg.ICECallback.notifyTerminalMsg(...e)},notifySCEPChanged(...e){console.log("===== notifySCEPChanged =====",e)},notifyMeetingAttrsChanged(...e){v.CRRTCAttr&&v.CRRTCAttr.ICECallback.notifyMeetingAttrsChanged(...e)},notifyUserAttrsChanged(...e){v.CRRTCAttr&&v.CRRTCAttr.ICECallback.notifyUserAttrsChanged(...e)},notifyShareStateChanged(...e){v.CRRTCConf&&v.CRRTCConf.notifyShareStateChanged(...e)},notifyEnterWaitingRoom(...e){console.log("===== notifyEnterWaitingRoom =====",e)},notifyLeftWaitingRoom(...e){console.log("===== notifyLeftWaitingRoom =====",e)},notifyJoinSubMeeting(...e){console.log("===== notifyJoinSubMeeting =====",e)},notifyClodudRecordStateChanged(...e){v.CRRTCCloudRecord&&v.CRRTCCloudRecord.ICECallback.notifyCloudRecordStateChanged(...e)},notifyClodudRecordCfgChanged(...e){v.CRRTCCloudRecord&&v.CRRTCCloudRecord.ICECallback.notifyCloudRecordCfgChanged(...e)},notifyClodudRecordFileState(...e){v.CRRTCCloudRecord&&v.CRRTCCloudRecord.ICECallback.notifyCloudRecordFileState(...e)}});const w={changeOption:e=>new Promise(((t,i)=>{(0,m.V)("_conferenceRequest","changeOption",e).then((e=>t(e))).catch((e=>i(e)))})),setAssistantActor:(e,t)=>new Promise(((i,n)=>{(0,m.V)("_conferenceRequest","setAssistantActor",e,t).then((e=>i(e))).catch((e=>n(e)))})),setHostActor:(e,t)=>new Promise(((i,n)=>{(0,m.V)("_conferenceRequest","setHostActor",e,t).then((e=>i(e))).catch((e=>(e=e.toString().includes("AuthError")?"AuthError":e.toString(),n(e))))})),endConference:()=>new Promise(((e,t)=>{(0,m.V)("_conferenceRequest","endConference").then((t=>e(t))).catch((e=>t(e)))})),startSvrRecord:e=>new Promise(((t,i)=>{(0,m.V)("_conferenceRequest","startSvrRecord",e).then((e=>t(e))).catch((e=>i(e)))})),updateSvrRecCfg:e=>new Promise(((t,i)=>{(0,m.V)("_conferenceRequest","updateSvrRecCfg",e).then((e=>t(e))).catch((e=>i(e)))})),stopSvrRecord:()=>new Promise(((e,t)=>{(0,m.V)("_conferenceRequest","stopSvrRecord").then((t=>e(t))).catch((e=>t(e)))})),startShare:e=>new Promise(((t,i)=>{(0,m.V)("_conferenceRequest","startShare",e).then((e=>t(e))).catch((e=>i(e)))})),stopShare:e=>new Promise(((t,i)=>{(0,m.V)("_conferenceRequest","stopShare",e).then((e=>t(e))).catch((e=>i(e)))})),startCloudRecord:(e,t)=>new Promise(((i,n)=>{(0,m.V)("_conferenceRequest","startCloudRecord",e,t).then((e=>i(e))).catch((e=>n(e)))})),stopCloudRecord:e=>new Promise(((t,i)=>{(0,m.V)("_conferenceRequest","stopCloudRecord",e).then((e=>t(e))).catch((e=>i(e)))})),updateCloudRecord:(e,t)=>new Promise(((i,n)=>{(0,m.V)("_conferenceRequest","updateCloudRecord",e,t).then((e=>i(e))).catch((e=>n(e)))}))};var E=__webpack_require__(5004);const b=window.CRVideo,D=window.Ice;window.__crConferenceClass=class{constructor(){this.initData(),this.initIceCallback(),this.initIceNotify(),this.initSDKInterface()}initData(){console.crlog("[Conference] ConferenceModule initData..."),this.curActorID=0,this.curPresenterID=0,this.curOption=0,this.shareState={state:0,shareID:0},this.rights=[],this.compVideoHD="2"}initIceCallback(){}initIceNotify(){this.entered=e=>{if(this.parseMemberInfo(e),console.crlog(`[Conference] ICE Notify: new member entered, params:${JSON.stringify({newMember:e})}`),!b.isMeeting)return console.crlog("[Conference] New member entered callback, now is not in meeting, return false!");console.crlog(`[Conference] User termID:${e.termId}, userID:${e.userId}, nickname:${e.nickname} entered meeting... `);let t=!0;b.allMemberInfo.forEach((function(i){i.termId!=e.termId||(t=!1)})),e.termId!==b.userInfo.termId&&t&&(e.userId=e.userId||D.generateUUID(),e.audioStatus="AUNKNOWN",e.videoStatus="VUNKNOWN","family"==e.privRole?b.privRoleFamily=e.userId:"prisoner"==e.privRole&&(b.privRolePrison=e.userId),b.allMemberInfo.push(e),window.CRVideo_UserEnterMeeting.target(e.userId))},this.left=(e,t,i,n)=>{if(console.crlog(`[Conference] ICE Notify: member left, params:${JSON.stringify({termID:t,reason:n})}`),t!=b.userInfo.termId){const e=b.allMemberInfo.findIndex((e=>e.termId==t));if(e>-1){__Rtc.CRRTCRemoteVideo.userLeftHandler(b.allMemberInfo[e].termId);const i=b.allMemberInfo[e].userId;b.allMemberInfo.splice(e,1),window.CRVideo_UserLeftMeeting.target(i,n),console.crlog(`[Conference] TermID:${t}, userID: ${i} left meeting, reason: ${n}`)}}else"kick"===n&&(b.leftMeetingFun(n),b.destroyMeetingConnect(),window.CRVideo_UserLeftMeeting.target(b.userInfo.userId,n))},this.nicknameChanged=(e,t,i)=>{console.crlog(`[Conference] ICE Notify: nicknameChanged, params:${JSON.stringify({operatorID:e,termID:t,newNickname:i})}`);const n=CRVideo.allMemberInfo.find((e=>e.termId==t));if(!n)return;const r=n.nickname;if(n.nickname=i,t==CRVideo.userInfo.termId&&(CRVideo.userInfo.nickname=i),__Rtc.CRRTCUI.videoContainerList.forEach((e=>{if(e._userID==n.userId){let t=e.nickNameContent||e._nicknameEle.innerText;t=t.replace(r,i),e.nickNameContent&&(e.nickNameContent=t),e._nicknameEle.innerText=t}})),__Rtc.CRRTCUI.screenContainerList.forEach((e=>{if(e._userID==n.userId){let t=e.nickNameContent||e._nicknameEle.innerText;t=t.replace(r,i),e.nickNameContent&&(e.nickNameContent=t),e._nicknameEle.innerText=t}})),__Rtc.CRRTCMedia.container&&__Rtc.CRRTCMedia.container._userID==n.userId){let e=__Rtc.CRRTCMedia.container.nickNameContent||__Rtc.CRRTCMedia.container._nicknameEle.innerText;e=e.replace(r,i),__Rtc.CRRTCMedia.container.nickNameContent&&(__Rtc.CRRTCMedia.container.nickNameContent=e),__Rtc.CRRTCMedia.container._nicknameEle.innerText=e}console.crlog(`[Conference] CRVideo_NotifyNickNameChanged.target(${n.userId},${r},${i})`),window.CRVideo_NotifyNickNameChanged.target(n.userId,r,i)},this.optionChanged=e=>{console.crlog(`[Conference] ICE Notify: optionChanged, params:${JSON.stringify({option:e})}`),this.curOption=e,g.Z.notifyOptionChanged.target(e)},this.rightChanged=e=>{if(console.crlog(`[Conference] ICE Notify: rightChanged, params: ${JSON.stringify(e)}`),e.addedRights.length>0&&(this.rights.push(e.addedRights[0]),g.Z.notifyAddedRights.target(e.addedRights[0])),e.reducedRights.length>0){const t=this.rights.findIndex((t=>t==e.reducedRights[0]));this.rights.splice(t,1),g.Z.notifyReducedRights.target(e.reducedRights[0])}},this.actorChanged=(e,t,i)=>{console.crlog(`[Conference] ICE Notify: actorChanged, params:${JSON.stringify({operatorID:e,termID:t,actorType:i})}`),b.allMemberInfo.forEach((e=>{e.termId==t?(e.actor=e.actor|i,g.Z.notifyActorChanged.target(e.userId,e.actor)):(1==i&&e.termId==this.curPresenterID||2==i&&e.termId==this.curActorID)&&(e.actor=e.actor&~i,g.Z.notifyActorChanged.target(e.userId,e.actor))})),1==i&&(this.curPresenterID=t),2==i&&(this.curActorID=t),console.crlog(`[Conference] Current actorID:${this.curActorID}, Current PresenterID:${this.curPresenterID}`)},this.notifyAssistantChanged=(e,t,i)=>{console.crlog(`[Conference] ICE Notify: notifyAssistantChanged, params:${JSON.stringify({operatorID:e,termID:t,isAssistant:i})}`);const n=b.allMemberInfo.find((e=>e.termId==t));n&&(n.actor=i?8|n.actor:-9&n.actor,g.Z.notifyActorChanged.target(n.userId,n.actor))},this.conferenceEnded=e=>{console.crlog(`[Conference] ICE Notify: conferenceEnded, params:${JSON.stringify({operatorID:e})}`),b.leftMeetingFun(),clearTimeout(b.KEEPALIVE_TIMER),clearTimeout(b.REFRESH_SESSION_TIMER),CRVideo_NotifyMeetEnded.target(),CRVideo_MeetingStopped.target()},this.notifyShareStateChanged=e=>{console.crlog(`[Conference] ICE Notify: notifyShareStateChanged, params:${JSON.stringify({shareState:e})}`),this.shareState=JSON.parse(e)}}initSDKInterface(){window.CRVideo_Kickout=e=>{console.crlog(`[Conference] CRVideo_Kickout(${e})`);return new Promise(((t,i)=>{const n=b.findMemberInfo({want:"termId",use:"userId",value:e});__Rtc.CRICEAPI.Kickout(n).then((i=>{const n={errCode:0,userID:e};return console.crlog(`[Conference] CRVideo_Kickout, success! userID:${JSON.stringify(n)}`),t(n)}),(e=>(console.crlog(`[Conference][Error] CRVideo_Kickout, fail! userID:${e}`),i({errCode:1,errDesc:e}))))}))},window.CRVideo_SetNickName=(e,t)=>{console.crlog(`[Conference] CRVideo_SetNickName(${e},${t})`);return new Promise(((i,n)=>{const r=b.findMemberInfo({want:"termId",use:"userId",value:e});__Rtc.CRICEAPI.ChangeNickname(r,t).then((n=>{const r={errCode:0,userID:e,newname:t};return console.crlog(`[Conference] CRVideo_SetNickName, success! ${JSON.stringify(r)}`),i(r)}),(e=>(console.crlog(`[Conference] CRVideo_SetNickName, fail! ${e}`),n({errCode:1,errDesc:e}))))}))},g.Z.startShare=e=>(console.crlog(`[Conference] MeetSDK.startShare(${e})`),new Promise(((t,i)=>{w.startShare(e).then((e=>t({errCode:0})),(e=>i({errCode:1,errDesc:e})))}))),g.Z.stopShare=e=>(console.crlog(`[Conference] MeetSDK.stopShare(${e})`),new Promise(((t,i)=>{w.stopShare(e).then((e=>t({errCode:0})),(e=>i({errCode:1,errDesc:e})))}))),g.Z.getMeetInfo=()=>{const e={};if(b.meetingInfo&&b.meetingInfo.confInfo)for(var t in b.meetingInfo.confInfo)e[t]=b.meetingInfo.confInfo[t];return console.crlog(`[Conference] MeetSDK.getMeetInfo(), return: ${JSON.stringify(e)}`),e},g.Z.getCurOption=()=>(console.crlog(`[Conference] MeetSDK.getCurOption(), return: ${this.curOption}`),this.curOption),g.Z.changeOption=e=>(console.crlog(`[Conference] MeetSDK.changeOption(${e})`),new Promise(((t,i)=>{w.changeOption(e).then((e=>t({errCode:0})),(e=>i({errCode:1,errDesc:e})))}))),g.Z.setAssistantActor=(e,t)=>(console.crlog(`[Conference] MeetSDK.changeOption(${e},${t})`),new Promise(((n,r)=>{let o=i.Z.userIDtoTermID(e);if(!o)return r({errCode:1102,errDesc:""});this.setAssistantActor(o,t).then((e=>n({errCode:0})),(e=>r({errCode:1,errDesc:e})))}))),g.Z.setHostActor=(e,t,n)=>(console.crlog(`[Conference] MeetSDK.setHostActor(${e},${t},${n})`),new Promise(((r,o)=>{let s=i.Z.userIDtoTermID(e);if(!s)return o({errCode:1102,errDesc:""});this.setHostActor(s,t).then((e=>r({errCode:0,cookie:n})),(e=>o({errCode:1,errDesc:e,cookie:n})))}))),g.Z.endConference=()=>(console.crlog("[Conference] MeetSDK.endConference()"),new Promise(((e,t)=>{w.endConference().then((t=>e({errCode:0})),(e=>t({errCode:1,errDesc:e})))}))),g.Z.getCurRights=()=>Array.from(this.rights),g.Z.getVoiceOnly=()=>!(!CRVideo.meetingInfo.confInfo||1!=+CRVideo.meetingInfo.confInfo.ccfg_voice_only),g.Z.changeMemberRights=e=>{console.crlog(`[Conference] MeetSDK.changeMemberRights(${JSON.stringify(e)})`);return new Promise(((t,i)=>{const n=[];e.forEach((e=>{const t={termId:b.findMemberInfo({want:"termId",use:"userId",value:e.userID||""})||0,addedRights:e.add||[],reducedRights:e.reduce||[]};n.push(t)})),__Rtc.CRICEAPI.changeMemberRights(JSON.parse(JSON.stringify(n))).then((e=>{const i={errCode:0};return console.crlog(`[Conference] MeetSDK.changeMemberRights, success! ${JSON.stringify(i)}`),t(i)}),(e=>(console.crlog(`[Conference] MeetSDK.changeMemberRights, fail! ${e}`),i({errCode:1,errDesc:e}))))}))}}parseMemberInfo(e){let t=e.extProperty,i=t.get(Conference.MINFO_OPENEDCAMIDS);if(null!=i){i=i.split(";");for(let e=0;e<i.length;e++)i[e]=+i[e];e.defaultCam=i[0],e.openedCamIDs=i.slice(1)}void 0!==t.get(Conference.MINFO_ALLCAMS)&&(e.allCams=t.get(Conference.MINFO_ALLCAMS).split("\n").slice(0,-1)),e.userId=t.get(Conference.CLIETN_PRIV_DAT),e.platform=t.get(Conference.CLINET_PLATFORM),e.sdk_ver=t.get(Conference.CLINET_SDK_VER),e.slice_ver=t.get(Conference.CLIENT_SLICE_VER),e.iswifi=t.get(Conference.CLINET_ISWIFI)||!1,e.privRole=t.get(Conference.CLIETN_PRIV_ROLE)||"others",e.voiceChangeType=t.get("voiceChangeType")||0,e.client_device=t.get(Conference.CLINET_DEVICETYPE)}setAssistantActor(e,t){return new Promise(((i,n)=>{w.setAssistantActor(e,t).then((e=>i()),(e=>n(e)))}))}setHostActor(e,t){return new Promise(((i,n)=>{w.setHostActor(e,t).then((e=>i()),(e=>n(e)))}))}},window.__Rtc.CRRTCConf=new window.__crConferenceClass,window.CRVideo_UserLeftMeeting=new b.CbProxy("CRVideo_UserLeftMeeting"),window.CRVideo_UserEnterMeeting=new b.CbProxy("CRVideo_UserEnterMeeting"),window.CRVideo_NotifyNickNameChanged=new b.CbProxy("CRVideo_NotifyNickNameChanged"),window.CRVideo_NotifyMeetEnded=new CRVideo.CbProxy("CRVideo_NotifyMeetEnded"),window.CRVideo_MeetingStopped=new CRVideo.CbProxy("CRVideo_MeetingStopped"),g.Z.notifyActorChanged=new E.Z("notifyActorChanged"),g.Z.notifyOptionChanged=new E.Z("notifyOptionChanged"),g.Z.notifyAddedRights=new E.Z("notifyAddedRights"),g.Z.notifyReducedRights=new E.Z("notifyReducedRights");__webpack_require__(9327),__webpack_require__(724);const M=window.Conference,P=window.Ice,x=window.__Rtc;x.AudioReceptor=P.Class(M.AudioCallback,{setProxy:function(e){this.proxy=e},updateStatus(...e){x.CRRTCAudio&&x.CRRTCAudio.ICECallback.audioUpdateStatus.call(x.CRRTCAudio,...e)},updateVoiceEnergy(...e){x.CRRTCAudio&&x.CRRTCAudio.ICECallback.updateVoiceEnergy.call(x.CRRTCAudio,...e)},updateSpeaker(...e){x.CRRTCAudio&&x.CRRTCAudio.ICECallback.updateSpeaker.call(x.CRRTCAudio,...e)},closeAll(...e){x.CRRTCAudio&&x.CRRTCAudio.ICECallback.closeAll.call(x.CRRTCAudio,...e)},playBackgroundMusic(...e){x.CRRTCAudio&&x.CRRTCAudio.ICECallback.playBackgroundMusic.call(x.CRRTCAudio,...e)},notifyVoiceHowling(...e){x.CRRTCAudio&&x.CRRTCAudio.ICECallback.notifyVoiceHowling.call(x.CRRTCAudio,...e)},notifyVoiceNoise(...e){x.CRRTCAudio&&x.CRRTCAudio.ICECallback.notifyVoiceNoise.call(x.CRRTCAudio,...e)},getRemoteAudioInfNotify(...e){x.CRRTCAudio&&x.CRRTCAudio.ICECallback.getRemoteAudioInfNotify.call(x.CRRTCAudio,...e)},remoteAudioSetNotify(...e){x.CRRTCAudio&&x.CRRTCAudio.ICECallback.remoteAudioSetNotify.call(x.CRRTCAudio,...e)},notifyLanLessMicOpen(...e){x.CRRTCAudio&&x.CRRTCAudio.ICECallback.notifyLanLessMicOpen.call(x.CRRTCAudio,...e)},notifySetVoiceChange(...e){x.CRRTCAudio&&x.CRRTCAudio.ICECallback.notifySetVoiceChange.call(x.CRRTCAudio,...e)}});const T={askForMic:()=>new Promise(((e,t)=>{(0,m.V)("_audioCtrl","askForMic").then((t=>e(t))).catch((e=>t(e)))})),openMicEx:e=>new Promise(((t,i)=>{(0,m.V)("_audioCtrl","openMicEx",e).then((e=>t(e))).catch((e=>i(e)))})),setVoiceChange:(e,t)=>new Promise(((i,n)=>{(0,m.V)("_audioCtrl","setVoiceChange",e,t).then((e=>i(e))).catch((e=>n(e)))}))};var A=__webpack_require__(3227);const O=window.CRVideo,V=window.Ice;window.__crAudioClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[Audio] AudioModule initData..."),this.localAudioStream=null,this.localAudioTracks=[],this.audioMSID=11e4,this.audioPeerConnections=[],this.audioInput=[],this.audioOutput=[],this.audioCfg={micID:1,speakerID:1,speakerPause:!1,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,micVolume:100},this.playerAudioContext=Object,this.micAudioContext=Object,this.micAudioSource=Object,this.micAudioGainNode=Object,clearInterval(this.rtpLogTimer),this.rtpLogTimer=-1,clearInterval(this.mediaSourceLogTimer),this.mediaSourceLogTimer=-1,this.myAudioLevel=0,this.audioFirstOpenWaiting=!0,this.audioFirstOpenWaitingTimout=-1,this.defaultGainVal=8,this.packetsLostRate=0,this.networkScore=-1,this.networkScoreResetTimout=-1}initIceCallback(){this.ICECallback={AudioAllocRawExt2_async:(e,t,i,n)=>{console.crlog(`[Audio] ICE Notify: AudioAllocRawExt2_async, params:${JSON.stringify({asParam:t,strParams:i})}`),"1"==i.get("mediashare")?setTimeout((()=>{__Rtc.CRRTCMedia.audioAllocRawExt2(e,t,i,n)}),500):this.audioAllocRawExt2(e,t,i||{},n)},updateVoiceEnergy:e=>{const t=e._head._key,i=e._head._value;let n=null,r=0;O.allMemberInfo.forEach((e=>{e.termId==t&&(n=e.userId,r=e.voiceEnergy||0,e.voiceEnergy=i)})),n&&CRVideo_MicEnergyUpdate.target(n,r,i)},audioUpdateStatus:(e,t,i)=>{console.crlog(`[Audio] ICE Notify: audioUpdateStatus, params:${JSON.stringify({terminalID:t,status:i,opId:e})}`);const n={AUNKNOWN:0,ANULL:1,ACLOSE:2,AOPEN:3,AOPENING:4};let r,o,s;O.allMemberInfo.forEach((e=>{e.termId==t&&(r=e.userId,o=e.audioStatus,e.audioStatus=i.name,e.userId==O.userInfo.userId&&("ACLOSE"===i.name&&this.isEnableAudioTrack(!1),"AOPEN"===i.name&&this.isEnableAudioTrack(!0)),s=e.audioStatus,s!==o&&console.crlog(`[Audio] CRVideo_AudioStatusChanged.target(${r},${n[o]},${n[s]})`),s!==o&&CRVideo_AudioStatusChanged.target(r,n[o],n[s]))}))},updateSpeaker:e=>{console.crlog(`[Audio] ICE Notify: updateSpeaker, params:${JSON.stringify({terminalID:e})}`)},closeAll:e=>{console.crlog(`[Audio] ICE Notify: closeAll, params:${JSON.stringify({operatorID:e})}`),e!==O.userInfo.termId&&this.isEnableAudioTrack(!1),O.allMemberInfo.forEach((t=>{t.termId!==e&&"AOPEN"==t.audioStatus&&(t.audioStatus="ACLOSE",console.crlog(`[Audio] CRVideo_AudioStatusChanged.target(${t.userId},3,2)`),CRVideo_AudioStatusChanged.target(t.userId,3,2))}))},playBackgroundMusic:(e,t)=>{console.crlog(`[Audio] ICE Notify: playBackgroundMusic, params:${JSON.stringify({operatorID:e,sPlay:t})}`)},notifyVoiceHowling:(e,t)=>{console.crlog(`[Audio] ICE Notify: notifyVoiceHowling, params:${JSON.stringify({termid:e,bHowling:t})}`)},notifyVoiceNoise:(e,t)=>{console.crlog(`[Audio] ICE Notify: notifyVoiceNoise, params:${JSON.stringify({termid:e,bNoising:t})}`)},getRemoteAudioInfNotify:(e,t)=>{try{console.crlog(`[Audio] ICE Notify: getRemoteAudioInfNotify, params:${JSON.stringify({cb:e,reqTermID:t})}`)}catch(e){console.error(e)}e.ice_response()},remoteAudioSetNotify:(e,t)=>{console.crlog(`[Audio] ICE Notify: remoteAudioSetNotify, params:${JSON.stringify({opeTermId:e,rAudio:t})}`)},notifyLanLessMicOpen:()=>{console.crlog("[Audio] ICE Notify: notifyLanLessMicOpen, params:null")},closeMicExRslt:(e,t)=>{console.crlog(`[Audio] ICE Callback --\x3e closeMicExRslt, params:${JSON.stringify({errCode:e,errDesc:t})}`)},setAudioDeviceStatusRslt:(e,t)=>{console.crlog(`[Audio] ICE Callback --\x3e setAudioDeviceStatusRslt, params:${JSON.stringify({errCode:e,errDesc:t})}`)},closeAllRslt:(e,t)=>{console.crlog(`[Audio] ICE Callback --\x3e closeAllRslt, params:${JSON.stringify({errCode:e,errDesc:t})}`)},notifySetVoiceChange:(e,t,i)=>{console.crlog(`[Audio] ICE Callback --\x3e notifySetVoiceChange, params:${JSON.stringify({})}`);const n=O.allMemberInfo.find((e=>e.termId==t));n&&(n.voiceChangeType=i,console.crlog(`[Audio] CRVideo_NotifySetVoiceChange.target(${n.userId},${i})`),window.CRVideo_NotifySetVoiceChange.target(n.userId,i))}}}initSDKInterface(){window.CRVideo_OpenMic=e=>{console.crlog(`[Audio] CRVideo_OpenMic(${e})`);return new Promise(((t,n)=>{const r=i.Z.userIDtoTermID(e);if(e==O.userInfo.userId&&0===this.audioInput.length)return console.crlog("[Audio][Error] CRVideo_OpenMic fail, no mic devices!"),console.error("[Audio][Error] CRVideo_OpenMic fail, no mic devices!"),n();const o=()=>{this.audioFirstOpenWaiting?setTimeout((()=>{o()}),100):r&&T.openMicEx(r).then((e=>t(e[0])),(e=>n(__Rtc.CRCONFERR.Parse(e))))};o()}))},window.CRVideo_CloseMic=e=>{console.crlog(`[Audio] CRVideo_CloseMic(${e})`),this.closeMicEx(e)},window.CRVideo_PlaySpeaker=()=>{console.crlog("[Audio] CRVideo_PlaySpeaker()"),document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").play().then((()=>{console.log("[Audio] ")})).catch((e=>{console.log("[Audio] "),setTimeout((()=>{document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").play()}),1e3)})),document.querySelector("#CRSDKAudioPlayer").isPaused=!1,!document.querySelector("#CRSDKAudioPlayer").paused&&console.crlog("[Audio] Audio elememt is playing...")},window.CRVideo_PauseSpeaker=()=>{console.crlog("[Audio] CRVideo_PauseSpeaker()"),this.audioCfg.speakerPause=!0,document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").pause(),document.querySelector("#CRSDKAudioPlayer").isPaused=!0,document.querySelector("#CRSDKAudioPlayer").paused&&console.crlog("[Audio] Audio elememt is paused...")},window.CRVideo_GetAudioMicNames=()=>{const e=[];this.audioInput.forEach((t=>{e.push({micID:t.id,micName:t.name})}));try{console.crlog(`[Audio] CRVideo_GetAudioMicNames(), return:${JSON.stringify(e)}`)}catch(e){console.error(e)}return e},window.CRVideo_GetAudioSpkNames=()=>{const e=[];this.audioOutput.forEach((t=>{e.push({speakerID:t.id,speakerName:t.name})}));try{console.crlog(`[Audio] CRVideo_GetAudioSpkNames(), return:${JSON.stringify(e)}`)}catch(e){console.error(e)}return e},window.CRVideo_SetAudioCfg=e=>{console.crlog(`[Audio] CRVideo_SetAudioCfg(${JSON.stringify(e)})`),this.setAudioCfg(e)},window.CRVideo_GetAudioCfg=()=>{const e=this.audioCfg;return console.crlog(`[Audio] CRVideo_GetAudioCfg(), return:${JSON.stringify(e)}`),e},window.CRVideo_GetMicEnergy=e=>{let t=null;return O.allMemberInfo.forEach((i=>{i.userId==e&&(t=void 0===i.voiceEnergy?null:i.voiceEnergy)})),t},window.CRVideo_GetAudioStatus=e=>{const t=this.getAudioStatus(e);return console.crlog(`[Audio] CRVideo_GetAudioStatus(${e}), return:${t}`),t},window.CRVideo_SetAllAudioClose=()=>{console.crlog("[Audio] CRVideo_SetAllAudioClose()"),__Rtc.CR__CloseAll()},window.CRVideo_SetVoiceChange=(e,t=0)=>(console.crlog(`[Audio] CRVideo_SetVoiceChange(${e},${t})`),new Promise(((n,r)=>{const o=i.Z.userIDtoTermID(e);if(!o)return r({errCode:5,errDesc:""});T.setVoiceChange(o,t).then((()=>n())).catch((e=>r({errCode:1,errDesc:e.toString()})))}))),window.CRVideo_GetVoiceChangeType=e=>{console.crlog(`[Audio] CRVideo_GetVoiceChangeType(${e})`);let t=0;const i=O.allMemberInfo.find((t=>t.userId==e));return i&&i.voiceChangeType&&(t=+i.voiceChangeType),t},g.Z.askForMic=()=>{console.crlog("[MeetSDK][Audio] MeetSDK.askForMic()");return new Promise(((e,t)=>{T.askForMic().then((t=>e({errCode:0,errDesc:"success"})),(e=>(console.error(e),t(__Rtc.CRCONFERR.Parse(e)))))}))}}createAudioElement(){console.crlog("[Audio] Do create audio element...");const e=this;!O.changyiweb&&function(t){if(!(i=t.document.getElementById("CRSDKAudioPlayer"))){var i,n=t.document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex="99999",n.style.display="none",n.id="CRSDKAudioBox",(i=t.document.createElement("audio")).autoplay=!0,i.controls=!0,i.id="CRSDKAudioPlayer",n.appendChild(i),t.document.body.appendChild(n),e.setAudioCfg(e.audioCfg)}}(window)}connectToSpeaker(e,t){window.document.getElementById("CRSDKAudioPlayer").srcObject=e,window.document.getElementById("CRSDKAudioPlayer").muted=!0,console.crlog("[Audio] Use audioContext & gain to play audio..."),window.AudioContext=window.AudioContext||window.webkitAudioContext,this.playerAudioContext.close&&"running"===this.playerAudioContext.state&&this.playerAudioContext.close(),this.playerAudioContext=new window.AudioContext;const i=this.playerAudioContext.createMediaStreamSource(e),n=this.playerAudioContext.createGain();n.gain.value=t||+this.defaultGainVal,console.crlog(`[Audio] Audio gain value: ${n.gain.value}`),i.connect(n),n.connect(this.playerAudioContext.destination)}audioAllocRawExt2(e,t,i,n){const r=t.shareListen,o=t.codecType.name;console.crlog(`[Audio] AudioAllocRawExt2, isRecvonly:${r}, codeType:${o}, subformic:${i.get("subformic")||"0"}, liteice:${i.get("liteice")||"0"}, rtc_streamid:${i.get("rtc_streamid")||null}`),setTimeout((()=>{e.isResponsed||(console.crlog("Audio RTCPeerConnection didn't get candidate after 10 secend, do cb.ice_response()..."),e.ice_response(),e.isResponsed=!0)}),1e4);const s=function(e,i,n){this.type=e,this.cb=i,this.codeType=o,this.candidates=[],this.caComplete=!1,this.connection=null,this.remoteStream=null,this.offer=null,this.answer=null,this.asParam=t,this.rtc_streamid=n.get("rtc_streamid")||null,this.rtc_streamid2=n.get("rtc_streamid2")||null,this.rtc_eid=n.get("rtc_eid")||null,this.subformic=n.get("subformic")||"0",this.liteice=n.get("liteice")||"0",this.HashMap=new V.HashMap};if(r){const t=new s("recvonly",e,i);t.msid=this.audioMSID++,this.audioPeerConnections.push(t),this.setPeerConnection(t)}else if("1"===i.get("subformic")){const t=new s("recvonly",e,i);t.msid=this.audioMSID++,this.audioPeerConnections.push(t),this.setPeerConnection(t);const n=new s("sendonly",e,i);n.msid=t.msid+1e3,this.audioPeerConnections.push(n),n.micID=this.audioCfg.micID;const r=this.audioInput.find((e=>e.id===this.audioCfg.micID)).deviceId;this.localAudioStream&&this.localAudioTracks[0].micID===this.audioCfg.micID&&this.localAudioTracks[0].autoGainControl===this.audioCfg.autoGainControl&&this.localAudioTracks[0].echoCancellation===this.audioCfg.echoCancellation&&this.localAudioTracks[0].noiseSuppression===this.audioCfg.noiseSuppression?setTimeout((()=>{this.isEnableAudioTrack(!0),this.setPeerConnection(n)}),50):this.getAudioStream(r&&!__Rtc.CRBrowser.curBrowserCfg.isMobile||!r.includes("default")?{audio:{deviceId:{ideal:r},autoGainControl:this.audioCfg.autoGainControl,echoCancellation:this.audioCfg.echoCancellation,noiseSuppression:this.audioCfg.noiseSuppression},video:!1}:{audio:{autoGainControl:this.audioCfg.autoGainControl,echoCancellation:this.audioCfg.echoCancellation,noiseSuppression:this.audioCfg.noiseSuppression},video:!1}).then((()=>{this.setPeerConnection(n)}),(e=>{const t=O.allMemberInfo.find((e=>e.userId==O.userInfo.userId)).audioStatus;this.uploadAudioDevicesStatus(!1),"ANULL"!=t&&setTimeout((()=>{this.uploadAudioDevicesStatus()}),1e3),console.crlog(`[Audio] CRVideo_OpenMicFailed.target(${e})`),CRVideo_OpenMicFailed.target(e),console.error(`Open mic failed: ${e}`)}))}else{const t=new s("sendrecv",e,i);t.msid=this.audioMSID++,t.micID=this.audioCfg.micID,this.audioPeerConnections.push(t);const n=this.audioInput.find((e=>e.id===this.audioCfg.micID)).deviceId;this.localAudioStream&&this.localAudioTracks[0].micID===this.audioCfg.micID&&this.localAudioTracks[0].autoGainControl===this.audioCfg.autoGainControl&&this.localAudioTracks[0].echoCancellation===this.audioCfg.echoCancellation&&this.localAudioTracks[0].noiseSuppression===this.audioCfg.noiseSuppression?(this.isEnableAudioTrack(!0),this.setPeerConnection(t)):this.getAudioStream(n&&!__Rtc.CRBrowser.curBrowserCfg.isMobile||!n.includes("default")?{audio:{deviceId:{ideal:n},autoGainControl:this.audioCfg.autoGainControl,echoCancellation:this.audioCfg.echoCancellation,noiseSuppression:this.audioCfg.noiseSuppression},video:!1}:{audio:{autoGainControl:this.audioCfg.autoGainControl,echoCancellation:this.audioCfg.echoCancellation,noiseSuppression:this.audioCfg.noiseSuppression},video:!1}).then((()=>{this.setPeerConnection(t)}),(e=>{const t=O.allMemberInfo.find((e=>e.userId==O.userInfo.userId)).audioStatus;this.uploadAudioDevicesStatus(!1),"ANULL"!=t&&setTimeout((()=>{this.uploadAudioDevicesStatus()}),1e3),console.crlog(`[Audio] CRVideo_OpenMicFailed.target(${e})`),CRVideo_OpenMicFailed.target(e),console.error(`Open mic failed: ${e}`)}))}}modifyOfferSDP(e,t){let i=(e=(e=e.replace("a=sendrecv",`a=${t.type}`)).replace("useinbandfec=1","useinbandfec=0")).split("\r\n"),n="opus";switch(t.codeType){case"ACT_OPUS":n="opus";break;case"ACT_PCMA":n="PCMA";break;case"ACT_ISAC":n="isac"}const r=i.find((e=>e.includes(n))).split(" ")[0].split(":")[1];i=i.filter((e=>!((e.includes("a=rtcp-fb")||e.includes("a=rtpmap")||e.includes("a=fmtp"))&&e.split(" ")[0].split(":")[1]!=r)));const o=i.findIndex((e=>e.includes("m=audio"))),s=[];i[o].split(" ").forEach(((e,t)=>{t<3&&s.push(e),t>=3&&!isNaN(e)&&e==r&&s.push(e)})),i[o]=s.join(" ");for(let e=0;e<i.length;e++){let t=i[e];if(!t.includes("nack")&&t.includes("a=rtpmap:")){let n=/a=rtpmap:(\d+)/,r=t.match(n)[1];i.splice(e+1,0,`a=rtcp-fb:${r} nack`)}t.includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete i[e]}return e=(e=i.join("\r\n")).replace("\r\n\r\n","\r\n")}modifyAnswerSDP(e,t){const i=e.split("\r\n");for(let t=0;t<i.length;t++){let n=i[t];if(!e.includes("nack")&&n.includes("a=rtpmap:")){let e=/a=rtpmap:(\d+)/,r=n.match(e)[1];i.splice(t+1,0,`a=rtcp-fb:${r} nack`)}n.includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete i[t]}return e=(e=i.join("\r\n")).replace("\r\n\r\n","\r\n")}setPeerConnection(e){const t=`[Audio] MSID:${e.msid}(${e.type}) --`;console.crlog(`${t} Audio create connection object, type:${e.type}, subformic:${e.subformic}, liteice:${e.liteice}, rtc_streamid:${e.rtc_streamid}`),console.crlog(`${t} Audio RTCPeerConnection new RTCPeerConnection... >> ${e.type} <<`);const i="1"===e.liteice?new RTCPeerConnection:new RTCPeerConnection(O.rtcCfg);if(e.connection=i,"recvonly"==e.type){const n={offerToReceiveAudio:!0,offerToReceiveVideo:!1};console.crlog(`${t} Audio RTCPeerConnection offerOptions: ${JSON.stringify(n)}`),i.createOffer(n).then((i=>{i.sdp=this.modifyOfferSDP(i.sdp,e),console.crlog(`${t} Audio RTCPeerConnection createOffer success! offer sdp:\r\n${i.sdp}`),e.offer=i,this.offerSetLocalDescription(e)})).catch((t=>{console.crlog(`[Audio][Error] MSID:${e.msid}(${e.type}) -- Audio RTCPeerConnection createOffer fail!`),console.error(t)}))}else this.localAudioStream?i.addTrack?(console.crlog(`${t} Audio RTCPeerConnection addTrack`),i.addTrack(this.localAudioTracks[0],this.localAudioStream)):setTimeout((function(){console.crlog(`${t} Audio RTCPeerConnection dispatchEvent:negotiationneeded`),i.dispatchEvent(new Event("negotiationneeded"))}),1e3):(console.crlog(`[Audio][Error] MSID:${e.msid}(${e.type}) -- Audio RTCPeerConnection addTrack fail, no localAudioStream!`),console.error(`[Audio][Error] MSID:${e.msid}(${e.type}) -- Audio RTCPeerConnection addTrack fail, no localAudioStream!`)),i.createOffer().then((i=>{i.sdp=this.modifyOfferSDP(i.sdp,e),console.crlog(`${t} Audio RTCPeerConnection createOffer success! offer sdp:\r\n${i.sdp}`),e.offer=i,this.offerSetLocalDescription(e)})).catch((t=>{console.crlog(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection createOffer fail!`),console.error(t)}));i.onicecandidate=i=>{"1"===e.liteice||e.caComplete||(console.crlog(`${t} Audio RTCPeerConnection onicecandidate: ${JSON.stringify(i.candidate)}`),i.candidate?e.candidates.push(i.candidate):e.caComplete=!0,e.caComplete&&this.iceResponse(e),setTimeout((()=>{e.caComplete||(e.caComplete=!0,this.iceResponse(e))}),300))},i.onicecandidateerror=e=>{e.address,e.errorCode,e.errorText,e.hostCandidate},i.ontrack=n=>{console.crlog(`${t} Audio RTCPeerConnection ontrack`);const r=n.streams[0];console.crlog(`${t} Audio RTCPeerConnection got audio stream: ${JSON.stringify({active:r.active,id:r.id})}`),e.remoteStream=r,this.distantAudioStream=r,console.crlog("[Audio] CRVideo_NotifyAudioStream.target(1, remoteStream)"),CRVideo_NotifyAudioStream.target(1,r),this.getDistantAudioEnergy(r,i,e.msid);const o=__Rtc.CRBrowser.curBrowserCfg;o.isMobile&&"iOS"==o.platform&&15==o.OSVer.split(".")[0]&&o.OSVer.split(".")[1]<=3?this.connectToSpeaker(r):document.getElementById("CRSDKAudioPlayer")?(console.crlog(`${t} Audio RTCPeerConnection found the audio element success and set srcObject!`),document.getElementById("CRSDKAudioPlayer").srcObject=r,document.getElementById("CRSDKAudioPlayer").isPaused?CRVideo_PauseSpeaker():setTimeout((()=>{try{document.getElementById("CRSDKAudioPlayer").srcObject&&1==document.getElementById("CRSDKAudioPlayer").srcObject.active&&(document.getElementById("CRSDKAudioPlayer").click(),document.getElementById("CRSDKAudioPlayer").play().then((()=>{console.log("[Audio] ")})).catch((e=>{console.log("[Audio] "),setTimeout((()=>{document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").play()}),1e3)})))}catch(e){console.error(e)}}),100)):console.crlog(`[Audio][Error] MSID:${e.msid} -- Can not find audio elemment, set srcObject fail!`)},i.onconnectionstatechange=n=>{const r=n.currentTarget.connectionState;console.crlog(`${t} Audio RTCPeerConnection onconnectionstatechange, connectionState: ${r}`),"connected"==r?this.startWebrtcLog(i,t):"disconnected"!=r&&"failed"!=r||e.msid==this.audioMSID-1&&(console.crlog(`[Audio] ${t} Audio RTCPeerConnection abnormal disconnect...!`),clearInterval(this.mediaSourceLogTimer),clearInterval(this.rtpLogTimer),"failed"==r&&(CRVideo_NotifyNetworkLostRate.target(1),"connected"!=i.lastState&&"connecting"!=i.lastState||(console.crlog(`[Audio] ${t} Audio RTCPeerConnection connection state failed!`),setTimeout((()=>{__Rtc.CRICEAPI.MediaConnectionBreakReport(e.msid)}),1e3)))),"failed"==r&&i.audioContext&&"running"===i.audioContext.state&&i.audioContext.close&&i.audioContext.close(),i.lastState=r},i.ondatachannel=e=>{console.crlog(`${t} Audio RTCPeerConnection ondatachannel`)},i.oniceconnectionstatechange=e=>{console.crlog(`${t} Audio RTCPeerConnection oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`)},i.onicegatheringstatechange=e=>{console.crlog(`${t} Audio RTCPeerConnection onicegatheringstatechange, iceGatheringState: ${e.currentTarget.iceGatheringState}`)},i.onnegotiationneeded=e=>{console.crlog(`${t} Audio RTCPeerConnection onnegotiationneeded`)},i.onremovestream=e=>{console.crlog(`${t} Audio RTCPeerConnection onremovestream`)},i.onsignalingstatechange=e=>{console.crlog(`${t} Audio RTCPeerConnection onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}offerSetLocalDescription=e=>{const t=`[Audio] MSID:${e.msid}(${e.type}) --`;console.crlog(`${t} Audio RTCPeerConnection setLocalDescription...`),e.connection.setLocalDescription(e.offer).then((i=>{if(console.crlog(`${t} Audio RTCPeerConnection setLocalDescription success!`),e.rtc_streamid){if(!e.cb.isResponsed&&console.crlog(`${t} Audio RTCPeerConnection ice_response(${e.msid}, new HashMap())`),!e.cb.isResponsed&&e.cb.ice_response(e.msid,new V.HashMap),!e.cb.isResponsed&&(e.cb.isResponsed=!0),"recvonly"==e.type&&"1"==e.subformic)return;if("recvonly"==e.type&&"1"!=e.subformic)e.HashMap.set("sdp",e.offer.sdp),e.HashMap.set("rtc_streamid",e.rtc_streamid),e.HashMap.set("rtc_mode","play"),e.HashMap.set("rtc_eid",e.rtc_eid);else if("sendonly"==e.type){const t=this.audioPeerConnections.find((t=>t.msid==e.msid-1e3));e.HashMap.set("sdp",e.offer.sdp),e.HashMap.set("speakersdp",t.offer.sdp),e.HashMap.set("rtc_streamid",e.rtc_streamid),e.HashMap.set("rtc_streamid2",t.rtc_streamid2),e.HashMap.set("rtc_mode","push"),e.HashMap.set("rtc_mode2","play"),e.HashMap.set("rtc_eid",e.rtc_eid)}"1"==e.liteice&&this.RtcGwAudioAlloc2(e,t)}})).catch((t=>{console.error(t),console.crlog(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection setLocalDescription fail!`)}))};RtcGwAudioAlloc2(e,t){console.crlog(`${t} Audio RTCPeerConnection request GwAudioAlloc2(asParam, HashMap)`),A.Z.GwAudioAlloc2(e.asParam,e.HashMap).then((i=>{if(i.answerSdp)if(console.crlog(`${t} Audio RTCPeerConnection request GwAudioAlloc2 success...`),"1"!=e.subformic||"sendrecv"==e.type)this.answerSetRemoteDescription(e,{type:"answer",sdp:i.answerSdp});else if("sendonly"==e.type){const t=this.audioPeerConnections.find((t=>t.msid==e.msid-1e3));this.answerSetRemoteDescription(e,{type:"answer",sdp:i.answerSdp}),this.answerSetRemoteDescription(t,{type:"answer",sdp:i.answerSdp2})}})).catch((e=>{console.error(e)}))}iceResponse(e){const t=e.cb,i=`[Audio] MSID:${e.msid}(${e.type}) --`;if("sendrecv"==e.type||"recvonly"==e.type&&"0"==e.subformic)!e.rtc_streamid&&e.HashMap.set("sdp",e.offer.sdp),"1"!=e.liteice&&e.HashMap.set("icecandidate",JSON.stringify(e.candidates)),"1"!=e.liteice&&console.crlog(`${i} Audio RTCPeerConnection response candidates(${e.candidates.length}): ${JSON.stringify(e.candidates)}`),"1"===e.liteice&&console.crlog(`${i} Audio RTCPeerConnection response without candidates when liteice==='1'`),e.rtc_streamid?this.RtcGwAudioAlloc2(e,i):(!t.isResponsed&&console.crlog(`${i} Audio RTCPeerConnection ice_response(${e.msid}, HashMap)`),!t.isResponsed&&t.ice_response(e.msid,e.HashMap),!t.isResponsed&&(t.isResponsed=!0));else if("recvonly"==e.type){const n=this.audioPeerConnections.find((t=>t.msid==e.msid+1e3));"1"===e.liteice?n.offer?(!e.rtc_streamid2&&e.HashMap.set("speakersdp",e.offer.sdp),!e.rtc_streamid&&e.HashMap.set("sdp",n.offer.sdp),console.crlog(`${i} Audio RTCPeerConnection response without candidates when liteice==='1'`),e.rtc_streamid?this.RtcGwAudioAlloc2(e,i):(!t.isResponsed&&console.crlog(`${i} Audio RTCPeerConnection ice_response(${e.msid}, HashMap)`),!t.isResponsed&&t.ice_response(e.msid,e.HashMap),!t.isResponsed&&(t.isResponsed=!0))):!n.offer&&console.crlog(`${i} Audio RTCPeerConnection wait for sendonly connection create offer...`):(e.HashMap=n.HashMap,e.HashMap.set("speakersdp",e.offer.sdp),e.HashMap.set("speakericecandidate",JSON.stringify(e.candidates)),n.caComplete&&(console.crlog(`${i} Audio RTCPeerConnection response candidates(${e.candidates.length}): ${JSON.stringify(e.candidates)}`),e.rtc_streamid?this.RtcGwAudioAlloc2(e,i):(!t.isResponsed&&console.crlog(`${i} Audio RTCPeerConnection ice_response(${e.msid}, HashMap)`),!t.isResponsed&&t.ice_response(e.msid,e.HashMap),!t.isResponsed&&(t.isResponsed=!0))))}else if("sendonly"==e.type){const n=this.audioPeerConnections.find((t=>t.msid==e.msid-1e3));"1"===e.liteice?n.offer?(!e.rtc_streamid&&e.HashMap.set("speakersdp",n.offer.sdp),!e.rtc_streamid&&e.HashMap.set("sdp",e.offer.sdp),console.crlog(`${i} Audio RTCPeerConnection response without candidates when liteice==='1'`),e.rtc_streamid?this.RtcGwAudioAlloc2(e,i):(!t.isResponsed&&console.crlog(`${i} Audio RTCPeerConnection ice_response(${e.msid}, HashMap)`),!t.isResponsed&&t.ice_response(e.msid,e.HashMap),!t.isResponsed&&(t.isResponsed=!0))):!n.offer&&console.crlog(`${i} Audio RTCPeerConnection wait for recvonly connection create offer...`):(!e.rtc_streamid&&e.HashMap.set("sdp",e.offer.sdp),e.HashMap.set("icecandidate",JSON.stringify(e.candidates)),n.caComplete&&(e.HashMap=n.HashMap,console.crlog(`${i} Audio RTCPeerConnection response candidates(${e.candidates.length}): ${JSON.stringify(e.candidates)}`),e.rtc_streamid?this.RtcGwAudioAlloc2(e,i):(!t.isResponsed&&console.crlog(`${i} Audio RTCPeerConnection ice_response(${e.msid}, HashMap)`),!t.isResponsed&&t.ice_response(e.msid,e.HashMap),!t.isResponsed&&(t.isResponsed=!0))))}}getDistantAudioEnergy(e,t,i){let n=new AudioContext,r=n.createScriptProcessor(2048,1,1);n.createMediaStreamSource(e).connect(r),r.connect(n.destination),t.audioContext=n,r.onaudioprocess=t=>{let i=t.inputBuffer.getChannelData(0),o=0,s=0;for(let e=0;e<i.length;++e)s+=i[e]*i[e];o=Math.sqrt(s/i.length),this.distantAudioEnergy=parseInt(100*o)/100,0!=this.audioPeerConnections.length&&e.active||(r.onaudioprocess=null,r=null,n.close&&"running"===n.state&&n.close())}}startWebrtcLog(e,t){const i=2e3;clearInterval(this.rtpLogTimer),clearInterval(this.mediaSourceLogTimer),this.codeRateSend=0,this.packetsLostRate=0,this.codeRateReceived=0;let n=0,r=0,o=-1,s=0,a=0,c=0,l=[],d=0;this.rtpLogTimer=setInterval((()=>{e.getStats().then((e=>{e.forEach((e=>{if("inbound-rtp"==e.type)try{const s=e.packetsReceived-n,a=e.packetsLost-r;if(this.packetsLostRate=0==s?0:a/(s+a),this.packetsLostRate>0||o>=5||-1===o){let i=parseInt(1e4*this.packetsLostRate)/100;const n={},r=["id","timestamp","type","ssrc","kind","trackId","transportId","codecId","mediaType","mid"],c=["trackIdentifier","bytesReceived","headerBytesReceived","lastPacketReceivedTimestamp"],l=["mediaSourceId","bytesSent","headerBytesSent","retransmittedBytesSent"];for(let t in e)r.includes(t)||c.includes(t)||l.includes(t)||(n[t]=e[t]);O.isRtcLog&&console.crlog(`${t} inbound-rtp(2s), audioLevel:${parseInt(1e4*e.audioLevel)/1e4}, packetsTotal:${s+a}, packetsLost:${a}, packetsLostRate:${i}%, ${JSON.stringify(n)}`),CRVideo_NotifyNetworkLostRate.target(i/100),o=0}o++,n=e.packetsReceived,r=e.packetsLost,this.codeRateReceived=(e.bytesReceived-c)/i,c=e.bytesReceived;const l=this.networkScore;s>0?this.packetsLostRate<=.05?this.networkScore=10:this.packetsLostRate<=.1?this.networkScore=9:this.packetsLostRate<=.15?this.networkScore=8:this.packetsLostRate<=.2?this.networkScore=7:this.packetsLostRate<=.25?this.networkScore=6:this.packetsLostRate<=.3?this.networkScore=5:this.packetsLostRate<=.35?this.networkScore=4:this.packetsLostRate<=.4?this.networkScore=3:this.packetsLostRate<=.45?this.networkScore=2:this.packetsLostRate<=.5?this.networkScore=1:this.networkScore=0:this.networkScore=-1,clearTimeout(this.networkScoreResetTimout),this.networkScoreResetTimout=setTimeout((()=>{-1!=this.networkScore&&(this.networkScore=-1,CRVideo_NetStateChanged.target(this.networkScore))}),4e3),this.networkScore!=l&&CRVideo_NetStateChanged.target(this.networkScore);const d=-1==this.networkScore?0:this.networkScore;navigator.connection&&navigator.connection.type&&"wifi"==navigator.connection.type||navigator.userAgent.includes("WIFI")?__Rtc.CRICEAPI.NetDetectResults(d,!0):__Rtc.CRICEAPI.NetDetectResults(d,!1)}catch(e){console.error(e)}if("outbound-rtp"==e.type&&(this.codeRateSend=(e.bytesSent-a)/i,a=e.bytesSent,s++,s>=5)){s=0;const i={},n=["id","timestamp","type","ssrc","kind","trackId","transportId","codecId","mediaType","mid"],r=["trackIdentifier","bytesReceived","headerBytesReceived","lastPacketReceivedTimestamp"],o=["mediaSourceId","bytesSent","headerBytesSent","retransmittedBytesSent"];for(let t in e)n.includes(t)||r.includes(t)||o.includes(t)||(i[t]=e[t]);O.isRtcLog&&console.crlog(`${t} outbound-rtp: ${JSON.stringify(i)}`)}if("media-source"==e.type&&e.audioLevel){const i={audioLevel:parseInt(100*e.audioLevel)/100,totalAudioEnergy:parseInt(100*e.totalAudioEnergy)/100,totalSamplesDuration:parseInt(100*e.totalSamplesDuration)/100,echoReturnLoss:parseInt(100*e.echoReturnLoss)/100,echoReturnLossEnhancement:parseInt(100*e.echoReturnLossEnhancement)/100};d++,l.push(i),d>=5&&(O.isRtcLog&&console.crlog(`${t} media-source arr: ${JSON.stringify(l)}`),d=0,l=[])}"ssrc"==e.type&&O.isRtcLog&&console.crlog(`${t} ssrc${JSON.stringify(e)}`)}))}))}),i),this.mediaSourceLogTimer=setInterval((()=>{e.getStats().then((e=>{e.forEach((e=>{"media-source"==e.type&&(this.myAudioLevel=e.audioLevel,clearTimeout(this.myAudioLevelResetTimer),this.myAudioLevelResetTimer=setTimeout((()=>{this.myAudioLevel=0}),1e3))}))}))}),1e3)}modifyPeerAddrExt(e,t,i){console.crlog(`[Audio] ModifyPeerAddrExt, MSID:${t}`);let n=this.audioPeerConnections.find((e=>e.msid===t));if(null!=n)if("1"===n.subformic){const e={type:"answer",sdp:i.get("speakersdp")},r={type:"answer",sdp:i.get("sdp")};if("recvonly"==n.type){const i=this.audioPeerConnections.find((e=>e.msid==t+1e3));this.answerSetRemoteDescription(n,e),this.answerSetRemoteDescription(i,r)}if("sendonly"==n.type){const i=this.audioPeerConnections.find((e=>e.msid==t-1e3));this.answerSetRemoteDescription(n,r),this.answerSetRemoteDescription(i,e)}}else e={type:"answer",sdp:i.get("sdp")},this.answerSetRemoteDescription(n,e);else console.crlog(`[Audio][Error] Can not find MSID:${t} corresponding connection object!!!`)}answerSetRemoteDescription(e,t){const i=`[Audio] MSID:${e.msid}(${e.type}) --`;t.sdp=this.modifyAnswerSDP(t.sdp,e.type),console.crlog(`${i} Audio RTCPeerConnection got remote answer, answer.sdp:\r\n${t.sdp}`),e.answer=t,e.connection.setRemoteDescription(new RTCSessionDescription(t)).then((e=>{console.crlog(`${i} Audio RTCPeerConnection answer setRemoteDescription success!`),t.sdp.includes("sendonly")&&(clearTimeout(this.audioFirstOpenWaitingTimout),this.audioFirstOpenWaiting=!1)})).catch((t=>{console.crlog(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection setRemoteDescription fail!`),console.error(t)}))}getAudioStream(e){console.crlog(`[Audio] Do get audio stream...  constraints: ${JSON.stringify(e)}`);return new Promise(((t,i)=>{e=e||{audio:{autoGainControl:this.audioCfg.autoGainControl,echoCancellation:this.audioCfg.echoCancellation,noiseSuppression:this.audioCfg.noiseSuppression},video:!1},window.__Rtc.firstInitStream&&1==window.__Rtc.firstInitStream.active&&window.__Rtc.firstInitStream.getAudioTracks().forEach((e=>{console.crlog("[Audio] Stop first init audio stream tracks..."),e.stop()})),this.localAudioStream&&this.localAudioStream.getAudioTracks().forEach((e=>{console.crlog("[Audio] Do stop old audio stream tracks..."),e.stop()})),this.micAudioSource.mediaStream&&this.micAudioSource.mediaStream.getAudioTracks()[0].stop(),this.micAudioContext.close&&"running"===this.micAudioContext.state&&this.micAudioContext.close(),console.crlog(`[Audio] Open or change mic, constraints: ${JSON.stringify(e)}`),navigator.mediaDevices.getUserMedia(e).then((e=>(console.crlog(`[Audio] Local audio getUserMedia success! ${JSON.stringify({active:e.active,id:e.id})}`),this.getLocalAudioEnergy(e),e))).then((e=>{if(console.crlog("[Audio] CRVideo_NotifyAudioStream.target(0, localStream)"),CRVideo_NotifyAudioStream.target(0,e),this.audioCfg.autoGainControl)console.crlog("[Audio] Local audio track use AGC mode"),this.localAudioStream=e,this.localAudioTracks=e.getAudioTracks();else{console.crlog("[Audio] Local audio track use web audio api, manual control gain value"),this.micAudioContext.close&&"running"===this.micAudioContext.state&&this.micAudioContext.close(),this.micAudioContext=new AudioContext;const t=this.micAudioContext.createGain(),i=this.micAudioContext.createMediaStreamSource(e),n=this.micAudioContext.createMediaStreamDestination();i.connect(t),t.connect(n),this.micAudioGainNode=t,this.micAudioSource=i,this.localAudioStream=n.stream,this.localAudioTracks=this.localAudioStream.getAudioTracks(),this.setMicGainValue(this.audioCfg.micVolume)}try{console.crlog(`[Audio] Local audio stream track settings: ${JSON.stringify(this.localAudioTracks[0].getSettings())}`)}catch(e){console.error(e)}return this.localAudioTracks[0].micID=this.audioCfg.micID,this.localAudioTracks[0].autoGainControl=this.audioCfg.autoGainControl,this.localAudioTracks[0].echoCancellation=this.audioCfg.echoCancellation,this.localAudioTracks[0].noiseSuppression=this.audioCfg.noiseSuppression,t()})).catch((e=>(console.crlog(`[Audio][Error] Local audio getUserMedia fail! ${e}`),console.error(e),i(e))))}))}getLocalAudioEnergy(e){let t=new AudioContext,i=t.createScriptProcessor(2048,1,1);t.createMediaStreamSource(e).connect(i),i.connect(t.destination),i.onaudioprocess=n=>{let r=n.inputBuffer.getChannelData(0),o=0,s=0;for(let e=0;e<r.length;++e)s+=r[e]*r[e];o=Math.sqrt(s/r.length),this.localAudioEnergy=parseInt(100*o)/100,e.active||(i.onaudioprocess=null,i=null,t.close&&"running"===t.state&&t.close())}}isEnableAudioTrack(e){this.localAudioTracks.forEach((t=>{e?console.crlog("[Audio] Enable local audio track!"):console.crlog("[Audio] Disable local audio track!"),t.enabled=e}))}stopAllAudioTrack(){console.crlog("[Audio] Do stop all audio track..."),this.localAudioTracks.forEach((e=>{"ended"!==e.readyState&&e.stop()})),this.micAudioSource.mediaStream&&this.micAudioSource.mediaStream.getAudioTracks()[0].stop(),this.micAudioContext.close&&"running"===this.micAudioContext.state&&this.micAudioContext.close(),this.localAudioTracks=[],this.localAudioStream=null,this.micAudioContext=Object,this.micAudioGainNode=Object,this.micAudioSource=Object}closeAllPeerConnection(){console.crlog("[Audio] Do close all peerConnections..."),this.audioPeerConnections.forEach((e=>{e.connection&&e.connection.close()})),this.audioPeerConnections=[],clearInterval(this.mediaSourceLogTimer),clearInterval(this.rtpLogTimer)}closeMicEx(e){const t=i.Z.userIDtoTermID(e);e==O.userInfo.userId&&this.isEnableAudioTrack(!1),t&&console.crlog(`[Audio] CR__CloseMicEx(${t})`),t&&__Rtc.CR__CloseMicEx(t)}audioMSIDFree(e){console.crlog(`[Audio] Audio MSID free, MSID:${e}`);const t=e=>{const t=this.audioPeerConnections.findIndex((t=>t.msid===e)),i=this.audioPeerConnections[t];i&&i.audioContext&&"running"===i.audioContext.state&&i.audioContext.close&&(console.crlog(`[Audio] MSID:${e}(${i.type}) -- Audio audioContext close() on msid free..`),audioContext.close()),i&&i.connection&&i.connection.close&&(console.crlog(`[Audio] MSID:${e}(${i.type}) -- Audio RTCPeerConnection close() on msid free..`),i.connection.close()),-1!=t&&this.audioPeerConnections.splice(t,1)};t(e),e>111e3&&t(e-1e3),(e===this.audioMSID-1||e-1e3==this.audioMSID-1)&&this.audioPeerConnections.length>0&&(console.crlog("[Audio] Fast on/off mic"),this.resetAudioPeerConnection(e)),CRVideo_UploadingLog()}resetAudioPeerConnection(){console.crlog("[Audio] Do reset audio peerConnection...");const e=this.audioPeerConnections[0];if(console.crlog(`[Audio] Current audio connection type: ${e.type}`),"recvonly"===e.type){const t=e.remoteStream;console.crlog("[Audio] CRVideo_NotifyAudioStream.target(1, remoteStream)"),CRVideo_NotifyAudioStream.target(1,t);const i=__Rtc.CRBrowser.curBrowserCfg;i.isMobile&&"iOS"==i.platform&&15==i.OSVer.split(".")[0]&&i.OSVer.split(".")[1]<=3?this.connectToSpeaker(t):document.getElementById("CRSDKAudioPlayer")?(console.crlog(`[Audio] MSID:${e.msid} -- Audio RTCPeerConnection found the audio element success and set srcObject on free notify!`),document.getElementById("CRSDKAudioPlayer").srcObject=t,document.getElementById("CRSDKAudioPlayer").isPaused?CRVideo_PauseSpeaker():setTimeout((()=>{try{document.getElementById("CRSDKAudioPlayer").srcObject&&1==document.getElementById("CRSDKAudioPlayer").srcObject.active&&(document.getElementById("CRSDKAudioPlayer").click(),document.getElementById("CRSDKAudioPlayer").play().then((()=>{console.log("[Audio] ")})).catch((e=>{console.log("[Audio] "),setTimeout((()=>{document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").play()}),1e3)})))}catch(e){console.error(e)}}),100)):console.crlog(`[Audio][Error] MSID:${e.msid} -- Can not find audio elemment, set srcObject fail on free notify!`)}else if(this.isEnableAudioTrack(!0),e.micID===this.audioCfg.micID){console.crlog("[Audio] Audio micID did not changed...");const t=e.remoteStream;console.crlog("[Audio] CRVideo_NotifyAudioStream.target(1, remoteStream)"),CRVideo_NotifyAudioStream.target(1,t);const i=__Rtc.CRBrowser.curBrowserCfg;i.isMobile&&"iOS"==i.platform&&15==i.OSVer.split(".")[0]&&i.OSVer.split(".")[1]<=3?this.connectToSpeaker(t):document.getElementById("CRSDKAudioPlayer")?(console.crlog(`[Audio] MSID:${e.msid} -- Audio RTCPeerConnection found the audio element success and set srcObject on free notify!`),document.getElementById("CRSDKAudioPlayer").srcObject=t,document.getElementById("CRSDKAudioPlayer").isPaused?CRVideo_PauseSpeaker():setTimeout((()=>{try{document.getElementById("CRSDKAudioPlayer").srcObject&&1==document.getElementById("CRSDKAudioPlayer").srcObject.active&&(document.getElementById("CRSDKAudioPlayer").click(),document.getElementById("CRSDKAudioPlayer").play().then((()=>{console.log("[Audio] ")})).catch((e=>{console.log("[Audio] "),setTimeout((()=>{document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").play()}),1e3)})))}catch(e){console.error(e)}}),100)):console.crlog(`[Audio][Error] MSID:${e.msid} -- Can not find audio elemment, set srcObject fail on free notify!`)}else console.crlog("[Audio] Audio micID has changed, do changeMicID now..."),this.changeMicID(this.audioCfg.micID)}uploadAudioDevicesStatus(e){console.crlog("[Audio] Do upload audio devices status..."),void 0===e&&console.crlog(`[Audio] Audio input devices: ${JSON.stringify(this.audioInput)}`),void 0===e?this.audioInput.length>0?(console.crlog("[Audio] CR__SetAudioDeviceStatus(true)"),__Rtc.CR__SetAudioDeviceStatus(!0)):(console.crlog("[Audio] CR__SetAudioDeviceStatus(false)"),__Rtc.CR__SetAudioDeviceStatus(!1)):e?(console.crlog("[Audio] CR__SetAudioDeviceStatus(true)"),__Rtc.CR__SetAudioDeviceStatus(!0)):(console.crlog("[Audio] CR__SetAudioDeviceStatus(false)"),__Rtc.CR__SetAudioDeviceStatus(!1)),this.audioFirstOpenWaitingTimout=setTimeout((()=>{this.audioFirstOpenWaiting=!1}),2e3)}setAudioCfg(e){for(var t in e)this.audioCfg[t]=e[t];e.micID&&this.changeMicID(+e.micID),e.speakerID&&this.changeSpeakerID(+e.speakerID),null==e.autoGainControl&&null==e.echoCancellation&&null==e.noiseSuppression||this.changeMicID(this.audioCfg.micID),e.micVolume&&!this.audioCfg.autoGainControl&&this.micAudioGainNode.gain&&this.setMicGainValue(e.micVolume)}setMicGainValue(e){const t=parseInt(e)/100;console.crlog(`[Audio] Set local audio web audio api gain value: ${t}`),this.micAudioGainNode.gain.setValueAtTime(t,this.micAudioContext.currentTime)}changeMicID(e){console.crlog(`[Audio] Set mic device, micID:${e}`),this.audioInput.forEach((t=>{if(t.id===e){let i=!1;this.localAudioTracks.forEach((e=>{1==e.enabled&&(i=!0)})),this.audioCfg.micID=e,i&&this.getAudioStream({audio:{deviceId:{ideal:t.deviceId},autoGainControl:this.audioCfg.autoGainControl,echoCancellation:this.audioCfg.echoCancellation,noiseSuppression:this.audioCfg.noiseSuppression}}).then((()=>{this.uploadAudioDevicesStatus(!0)}),(e=>{console.crlog(`[Audio] CRVideo_OpenMicFailed.target(${e})`),CRVideo_OpenMicFailed.target(e),console.error(`Open mic failed: ${e}`)}))}}))}changeSpeakerID(e){console.crlog(`[Audio] Set speaker device, speakerID:${e}`);const t=document.getElementById("CRSDKAudioPlayer");for(let i=0;i<this.audioOutput.length;i++)e==this.audioOutput[i].id&&t&&t.setSinkId&&t.setSinkId(this.audioOutput[i].deviceId).then((()=>{console.crlog(`[Audio] Change speaker devices success, audio output device attached: ${this.audioOutput[i].deviceId}`)})).catch((e=>{console.crlog(`[Audio] Change speaker devices fail! ${e.name}`);let t=e;"SecurityError"==e.name&&(t="You need to use HTTPS for selecting audio output"),console.error(e)}))}getAudioStatus(e){let t="AUNKNOWN";return t=O.findMemberInfo({use:"userId",want:"audioStatus",value:e})||t,window.CRVideo_ASTATUS[t]}},window.__Rtc.CRRTCAudio=new window.__crAudioClass,window.CRVideo_AudioStatusChanged=new O.CbProxy("CRVideo_AudioStatusChanged"),window.CRVideo_NotifyAudioStream=new O.CbProxy("CRVideo_NotifyAudioStream"),window.CRVideo_MicEnergyUpdate=new O.CbProxy("CRVideo_MicEnergyUpdate"),window.CRVideo_NetStateChanged=new O.CbProxy("CRVideo_NetStateChanged"),window.CRVideo_PeerConnectionError=new O.CbProxy("CRVideo_PeerConnectionError"),window.CRVideo_OpenMicFailed=new O.CbProxy("CRVideo_OpenMicFailed"),window.CRVideo_NotifyNetworkLostRate=new O.CbProxy("CRVideo_NotifyNetworkLostRate"),window.CRVideo_NotifySetVoiceChange=new O.CbProxy("CRVideo_NotifySetVoiceChange"),E.Z.AudioPlayError;__webpack_require__(3321);((e,t,i)=>{e.__crIMMsgClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[Message] IMMsgModule initData...")}initIceCallback(){this.ICECallback={receiveIMMsg:e=>{console.crlog(`[Message] ICE Notify: receiveIMMsg, params: ${JSON.stringify({data:e})}`),this.receiveIMMsg(e)},notifyIMForbidStatus:(e,t,i)=>{console.crlog(`[Message] ICE Notify: notifyIMForbidStatus, params:${JSON.stringify({operId:e,dstId:t,bForbid:i})}`)},notifyClearIMMsg:e=>{console.crlog(`[Message] ICE Notify: notifyClearIMMsg, params:${JSON.stringify({operId:e})}`)},notifyDeleteIMMsg:e=>{console.crlog(`[Message] ICE Notify: notifyDeleteIMMsg, params:${JSON.stringify({sn:e})}`)},sendIMMsgRslt:(e,t,i,n)=>{console.crlog(`[Message] ICE Callback --\x3e sendIMMsgRslt, params:${JSON.stringify({errCode:e,errDesc:t,taskID:i,cookie:n})}`),this.sendIMMsgRslt(e,t,i,n)}}}initSDKInterface(){e.CRVideo_SendIMMsg=(e,t,i)=>(console.crlog(`[Message] CRVideo_SendIMMsg(${e},${t},${i})`),this.sendIMMsg(e,t,i))}sendIMMsg(n,r,o){let s=32767,a="",c=new Conference.IMFont(4278190080,12),l=(new Date).getTime()/1e3;""!==r&&void 0!==r&&(s=i.findMemberInfo({use:"userId",want:"termId",value:r}),a=i.findMemberInfo({use:"userId",want:"nickname",value:r}));const d=t.generateUUID();try{console.crlog(`[Message] CR__SendIMMsg(${s},${a},${c},${n},${l},${d},${o})`)}catch(e){console.error(e)}return e.__Rtc.CR__SendIMMsg(s,a,c,n,l,d,o),d}sendIMMsgRslt(t,i,n,r){let o=0;900==t?o=1001:901==t?o=1002:3==t&&(o=3),console.crlog(`[Message] CRVideo_SendIMMsgRslt.target(${n},${o},${r})`),e.CRVideo_SendIMMsgRslt.target(n,o,r)}receiveIMMsg(t){const n=t.inMsg;let r=i.findMemberInfo({use:"termId",want:"userId",value:t.srcTermId}),o=i.findMemberInfo({use:"termId",want:"userId",value:n.targetTermId}),s=n.msg,a=1e3*n.sendTime;r=r||t.srcNickname,o=o||n.targetNickname,console.crlog(`[Message] CRVideo_NotifyIMmsg/CRVideo_NotifyIMMsg.target(${r},${s},${a},${o||""})`),e.CRVideo_NotifyIMmsg.target(r,s,a,o||""),e.CRVideo_NotifyIMMsg.target(r,s,a,o||"")}},e.__crTerminalMsgClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[Message] TerminalMsgModule initData...")}initIceCallback(){this.ICECallback={terminalMsgRslt:(e,t,i)=>{console.crlog(`[Message] ICE Callback --\x3e terminalMsgRslt, params:${JSON.stringify({errCode:e,errDesc:t,cookie:i})}`),this.terminalMsgRslt(e,t,i)},notifyTerminalMsg:(t,i,n,r)=>{console.crlog(`[Message] ICE Callback --\x3e notifyTerminalMsg, params:${JSON.stringify({moduleName:t===`${e.__CRNamC}MeetingSDK`?"MeetingSDK":t,jsonMsg:i,dstTermID:n,srcTermId:r})}`),"Vote"===t?g.Z.notifyVoteChange.target(i):this.notifyTerminalMsg(t,i,n,r)}}}initSDKInterface(){e.CRVideo_SendMeetingCustomMsg=(e,t)=>{console.crlog(`[Message] CRVideo_SendMeetingCustomMsg(${e},${t})`),this.sendMeetingCustiomMsg(e,t)}}sendMeetingCustiomMsg(t,i){const n=`${e.__CRNamC}MeetingSDK`;console.crlog(`[Message] CR__TerminalMsg('MeetingSDK',${t},,true,${i})`),e.__Rtc.CR__TerminalMsg(n,t,"",true,i)}terminalMsgRslt(e,t,i){console.crlog(`[Message] CRVideo_SendMeetingCustomMsgRslt.target(${e},${i})`),CRVideo_SendMeetingCustomMsgRslt.target(e,i)}notifyTerminalMsg(t,n,r,o){const s=i.findMemberInfo({use:"termId",want:"userId",value:o});t==`${e.__CRNamC}MeetingSDK`&&(console.crlog(`[Message] CRVideo_NotifyMeetingCustomMsg.target(${s},${n})`),e.CRVideo_NotifyMeetingCustomMsg.target(s,n))}},e.__Rtc.CRRTCIMMsg=new e.__crIMMsgClass,e.__Rtc.CRRTCTermMsg=new e.__crTerminalMsgClass,e.CRVideo_SendIMMsgRslt=new i.CbProxy("CRVideo_SendIMMsgRslt"),e.CRVideo_NotifyIMmsg=new i.CbProxy("CRVideo_NotifyIMmsg"),e.CRVideo_NotifyIMMsg=new i.CbProxy("CRVideo_NotifyIMMsg"),e.CRVideo_NotifyMeetingCustomMsg=new i.CbProxy("CRVideo_NotifyMeetingCustomMsg"),e.CRVideo_SendMeetingCustomMsgRslt=new i.CbProxy("CRVideo_SendMeetingCustomMsgRslt"),g.Z.notifyVoteChange=new E.Z("notifyVoteChange")})(window,Ice,CRVideo);const k=window.CRVideo,N=window.Ice;window.__crSvrRecordClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[SvrRecord] SvrRecordModule initData..."),this.MixersList=[],this.svrRecordStatus=0}initIceCallback(){this.ICECallback={notifySvrRecordStateChanged:(e,t,i)=>{console.crlog(`[SvrRecord] ICE Notify: notifySvrRecordStateChanged, params:${JSON.stringify({operatorID:e,state:t,err:i})}`);const n=t._value,r=k.findMemberInfo({use:"termId",want:"userId",value:e});let o;switch(this.svrRecordStatus=n,t.name){case"NO_RECORD":o=0;break;case"STARTING":o=1;break;case"RECORDING":o=2;break;case"PAUSED":o=3;break;case"STOPPING":o=4;break;default:o=t._value}console.crlog(`[SvrRecord] CRVideo_SvrMixerStateChanged/CRVideo_SvrRecordStateChanged.target(${o},${i})`),CRVideo_SvrMixerStateChanged.target(o,i,r),window.CRVideo_SvrRecordStateChanged.target(o,i),setTimeout((()=>{window.CRVideo_UploadingLog()}),1e3)},notifySvrRecordCfgChanged:(e,t)=>{const i=JSON.parse(t);console.crlog(`[SvrRecord] ICE Notify: notifySvrRecordCfgChanged, params:${JSON.stringify({operatorID:e,svrConfig:i})}`),console.crlog("[SvrRecord] CRVideo_SvrRecVideosChanged/CRVideo_SvrMixerCfgChanged.target()"),window.CRVideo_SvrRecVideosChanged.target(),window.CRVideo_SvrMixerCfgChanged.target()},notifySvrRecordFileState:e=>{const t=JSON.parse(e);console.crlog(`[SvrRecord] ICE Notify: notifySvrRecordFileState, params:${JSON.stringify({State:t})}`);const i={errCode:t.errCode,state:t.state,duration:t.duration,fileSize:t.fileSize,fileName:t.fileName,id:t.id};console.crlog(`[SvrRecord] CRVideo_NotifySvrRecordFileState.target(${JSON.stringify(t)})`),console.crlog(`[SvrRecord] CRVideo_SvrMixerOutputInfo.target(${JSON.stringify(i)})`),window.CRVideo_NotifySvrRecordFileState.target(t),window.CRVideo_SvrMixerOutputInfo.target(i)}}}initSDKInterface(){window.CRVideo_StartSvrMixer=(e,t=[],i=[])=>{try{console.crlog("[SvrRecord] CRVideo_StartSvrMixer(MutiMixerCfgs, MutiMixerContents, MutiMixerOutputs)"),console.crlog(`[SvrRecord] MutiMixerCfgs: ${JSON.stringify(e)}`),console.crlog(`[SvrRecord] MutiMixerContents: ${JSON.stringify(t)}`),console.crlog(`[SvrRecord] MutiMixerOutputs: ${JSON.stringify(i)}`)}catch(e){console.error(e)}return new Promise(((n,r)=>{this.MixersList=[],e.forEach((e=>{let n,r,o={};if(o.id=e.id,o.recCfg={},o.contents=[],o.clientType=null==e.clientType?1:e.clientType,null!=e.speechText&&(o.speechText=e.speechText),null!=e.live&&(o.live=e.live),e.streamTypes=e.streamTypes?e.streamTypes:3,t.forEach((t=>{t.id===e.id&&(n=t.content)})),i.forEach((t=>{t.id==e.id&&(r=t.output)})),e.streamTypes&&3!=e.streamTypes){if(e.streamTypes&&1==e.streamTypes){let t=e.aCfg;t&&(o.recCfg.audioFormat=t.audioFormat||1,o.recCfg.channelType=t.channelType||1,o.recCfg.streamTypes=1),r&&r.forEach((e=>{0==e.type&&(o.recCfg.serverPathFileName=e.filename,CRVideo.APPIDMode&&(o.recCfg.userNetDiskId=k.multiProject.userId))})),n&&(o.contents=this.fmtAudioContent(n)),this.MixersList.push(o)}}else{let t=e.cfg;t&&(o.recCfg.dstResolutionWidth=t.width||1280,o.recCfg.dstResolutionHeight=t.height||720,o.recCfg.fps=t.frameRate||20,o.recCfg.gop=t.gop||120,o.recCfg.maxBPS=t.bitRate||35e4,o.recCfg.qp=t.defaultQP||26,o.recCfg.streamTypes=3),r&&r.forEach((e=>{0==e.type?(o.recCfg.serverPathFileName=e.filename,CRVideo.APPIDMode&&(o.recCfg.userNetDiskId=k.multiProject.userId)):1==e.type&&(o.recCfg.liveUrl=e.liveUrl)})),n&&(o.contents=this.fmtVideoContent(n)),this.MixersList.push(o)}}));let o=JSON.stringify(this.MixersList);1==this.MixersList.length&&0==this.MixersList[0].clientType&&(o=JSON.stringify(this.MixersList[0])),w.startSvrRecord(o).then((e=>n({errCode:0})),(e=>r(__Rtc.CRCONFERR.Parse(e))))}))},window.CRVideo_UpdateSvrMixerContent=e=>{try{console.crlog(`[SvrRecord] CRVideo_UpdateSvrMixerContent(${JSON.stringify(e)})`)}catch(e){console.error(e)}return new Promise(((t,i)=>{e.forEach((e=>{this.MixersList.forEach((t=>{t.id===e.id&&(3===t.recCfg.streamTypes&&(t.contents=this.fmtVideoContent(e.content)),1===t.recCfg.streamTypes&&(t.contents=this.fmtAudioContent(e.content)))}))})),w.updateSvrRecCfg(JSON.stringify(this.MixersList)).then((e=>t({errCode:0})),(e=>i(__Rtc.CRCONFERR.Parse(e))))}))},window.CRVideo_StopSvrMixer=()=>new Promise(((e,t)=>{console.crlog("[SvrRecord] CRVideo_StopSvrMixer()"),w.stopSvrRecord().then((t=>e({errCode:0})),(e=>t(__Rtc.CRCONFERR.Parse(e))))})),window.CRVideo_GetSvrMixerState=()=>{const e=this.svrRecordStatus||0;return console.crlog(`[SvrRecord] CRVideo_GetSvrMixerState(), return: ${e}`),e}}fmtAudioContent(){const e=JSON.parse(JSON.stringify(contents));return e.forEach((e=>{if(9==e.type){const t=k.findMemberInfo({use:"userId",want:"termId",value:e.param});e.param={termId:t}}})),e}fmtVideoContent(){const e=JSON.parse(JSON.stringify(contents));return e.forEach((e=>{if(4==e.type)e.param={},e.param.resourceid=N.generateUUID();else if(0==e.type){var t,i,n,r;i=(t=e.param.camid.split("."))[t.length-1],t.length=t.length-1,n=t.join(".");const o=k.allMemberInfo.find((e=>e.userId==n));r=o&&o.termId?o.termId:"",e.param={},e.param.camId=+i,e.param.termId=r}else 7==e.type&&(e.param.resourceid=N.generateUUID())})),e}},window.__Rtc.CRRTCRecord=new window.__crSvrRecordClass,window.CRVideo_SvrRecordStateChanged=new k.CbProxy("CRVideo_SvrRecordStateChanged"),window.CRVideo_SvrRecVideosChanged=new k.CbProxy("CRVideo_SvrRecVideosChanged"),window.CRVideo_NotifySvrRecordFileState=new k.CbProxy("CRVideo_NotifySvrRecordFileState"),window.CRVideo_SvrMixerCfgChanged=new k.CbProxy("CRVideo_SvrMixerCfgChanged"),window.CRVideo_SvrMixerStateChanged=new k.CbProxy("CRVideo_SvrMixerStateChanged"),window.CRVideo_SvrMixerOutputInfo=new k.CbProxy("CRVideo_SvrMixerOutputInfo");const L=window.CRVideo,U=window.Ice;window.__crCloudRecordClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[CloudRecord] CloudRecordModule initData..."),this.cloudRecordList=[]}initIceCallback(){this.ICECallback={notifyCloudRecordStateChanged:(e,t,i,n)=>{const r=i.value;let o=JSON.parse(n);console.crlog(`[CloudRecord] ICE Notify: notifyCloudRecordStateChanged, params:${JSON.stringify({operatorId:e,MixerID:t,status:r})}`),this.updateRecordList({MixerID:t,state:r});const s=L.findMemberInfo({use:"termId",want:"userId",value:e})||"CRMCU";if(0===r)o={err:this.errCodeTo(o.err),errDesc:o.errDesc},0!==o.err&&(console.crlog(`[CloudRecord] CRVideo_CreateCloudMixerFailed.target(${t}, ${o.err})`),CRVideo_CreateCloudMixerFailed.target(t,o.err));else if(1===r){const e=JSON.parse(o.jsonCfg);o=this.IceCfg2UserCfg(e)}console.crlog(`[CloudRecord] CRVideo_CloudMixerStateChanged.target(${t},${r},${JSON.stringify(o)},${s})`),window.CRVideo_CloudMixerStateChanged.target(t,r,o,s)},notifyCloudRecordCfgChanged:(e,t,i)=>{i=JSON.parse(i);const n=JSON.parse(JSON.stringify(i));n.storageConfig&&(n.storageConfig.accessKey&&(n.storageConfig.accessKey="******"),n.storageConfig.secretKey&&(n.storageConfig.secretKey="******")),console.crlog(`[CloudRecord] ICE Notify: notifyCloudRecordCfgChanged, params:${JSON.stringify({operatorId:e,MixerID:t,jsonCfg:n})}`),this.updateRecordList({MixerID:t,jsonCfg:i}),console.crlog(`[CloudRecord] CRVideo_CloudMixerInfoChanged.target(${t})`),window.CRVideo_CloudMixerInfoChanged.target(t)},notifyCloudRecordFileState:(e,t)=>{(t=JSON.parse(t)).errCode&&(t.errCode=this.errCodeTo(t.errCode)),console.crlog(`[CloudRecord] CRVideo_CloudMixerOutputInfoChanged.target(${e}, ${JSON.stringify(t)})`),window.CRVideo_CloudMixerOutputInfoChanged.target(e,t)}}}initSDKInterface(){window.CRVideo_CreateCloudMixer=e=>{try{const t=JSON.parse(JSON.stringify(e));t.storageConfig&&(t.storageConfig.accessKey&&(t.storageConfig.accessKey="******"),t.storageConfig.secretKey&&(t.storageConfig.secretKey="******")),console.crlog(`[CloudRecord] CRVideo_CreateCloudMixer(${JSON.stringify(t)})`)}catch(e){console.error(e),Promise.resolve().then((()=>{console.crlog(`[CloudRecord] CRVideo_CreateCloudMixerFailed.target(${t}, 5)`),CRVideo_CreateCloudMixerFailed.target(t,5)}))}const t=U.generateUUID().replace(/-/g,"");return this.userCfg2IceCfg(e).then((e=>{console.crlog(`[CloudRecord] _conference.startCloudRecord(${t}, ${JSON.stringify(e)})`),w.startCloudRecord(t,JSON.stringify(e)).catch((e=>{console.error(e),e.toString().indexOf("SeviceNotEnabled")>-1&&(e="806"),console.crlog(`[CloudRecord] CRVideo_CreateCloudMixerFailed.target(${t}, 806)`),CRVideo_CreateCloudMixerFailed.target(t,806)}))})).catch((e=>{console.error(e),console.crlog(`[CloudRecord] CRVideo_CreateCloudMixerFailed.target(${t}, 1)`),CRVideo_CreateCloudMixerFailed.target(t,1)})),t},window.CRVideo_DestroyCloudMixer=e=>new Promise(((t,i)=>{console.crlog(`[CloudRecord] CRVideo_DestroyCloudMixer(${e})`),console.crlog(`[CloudRecord] _conference.stopCloudRecord(${e})`),w.stopCloudRecord(e).then((e=>t({errCode:0,errDesc:"success"})),(e=>(console.error(e),i(__Rtc.CRCONFERR.Parse(e)))))})),window.CRVideo_UpdateCloudMixerContent=(e,t)=>new Promise(((i,n)=>{try{console.crlog(`[CloudRecord] CRVideo_UpdateCloudMixerContent(${e},${JSON.stringify(t)})`)}catch(e){return console.error(e),n({errCode:5,errDesc:""})}this.cloudRecordList.some((r=>{if(r.MixerID==e){const o=JSON.parse(JSON.stringify(r.jsonCfg));if(1===o.mode)for(let e in t){if("videoFileCfg"===e){if(!o.videoFileCfg)return n({errCode:5,errDesc:""});o[e].subscribeVideos=this.videoCfgUID2TermId(t[e].subscribeVideos)}if("audioFileCfg"===e){if(!o.audioFileCfg)return n({errCode:5,errDesc:""});o[e].subscribeAudios=this.audioCfgUID2TermId(t[e].subscribeAudios)}}else if(0===o.mode)for(let e in t){if("videoFileCfg"===e){if(!o.videoFileCfg)return n({errCode:5,errDesc:""});t[e].layoutConfig&&(t[e].layoutConfig.reduce(((e,t)=>(0===t.type&&(t.param.camid=this.uidACamid2TermIdACamId(t.param.camid)),e.push(t),e)),[]),o[e].layoutConfig=t[e].layoutConfig),t[e].aChannelContent&&(o[e].aChannelContent=this.Uids2termIds(t[e].aChannelContent,!0))}"audioFileCfg"===e&&t[e].aChannelContent&&(o[e].aChannelContent=this.Uids2termIds(t[e].aChannelContent,!0))}return console.crlog(`[Cloudrecord] _conference.updateCloudRecord(${e}, ${JSON.stringify(o)})`),w.updateCloudRecord(e,JSON.stringify(o)).then((e=>i({errCode:0,errDesc:"success"})),(e=>(console.error(e),n(__Rtc.CRCONFERR.Parse(e))))),!0}}))})),window.CRVideo_GetCloudMixerInfo=e=>{console.crlog(`[CloudRecord] CRVideo_GetCloudMixerInfo(${e})`);let t=null;return this.cloudRecordList.some((i=>{if(i.MixerID==e){const e=this.IceCfg2UserCfg(i.jsonCfg);return t={ID:i.MixerID,owner:L.findMemberInfo({use:"termId",want:"userId",value:i.jsonCfg.owner})||"",cfg:e,state:i.state},!0}})),console.crlog(`[CloudRecord] CRVideo_GetCloudMixerInfo, return: ${JSON.stringify(t)}`),t},window.CRVideo_GetAllCloudMixerInfo=()=>{console.crlog("[CloudRecord] CRVideo_GetAllCloudMixerInfo()");const e=[];return this.cloudRecordList.forEach((t=>{if(0!==t.state){const i=this.IceCfg2UserCfg(t.jsonCfg),n={ID:t.MixerID,owner:L.findMemberInfo({use:"termId",want:"userId",value:t.jsonCfg.owner})||"",cfg:i,state:t.state};e.push(n)}})),console.crlog(`[CloudRecord] CRVideo_GetAllCloudMixerInfo, return: ${JSON.stringify(e)}`),e}}errCodeTo(e){return{0:0,1:900,2:901,3:902,4:1,5:5,6:904,7:5,8:5,9:905,200:907}[e]}initRecord(e){if(e.confInfo&&e.confInfo.cloud_record){const i=JSON.parse(e.confInfo.cloud_record);for(var t in i)this.cloudRecordList.push({MixerID:t,jsonCfg:JSON.parse(i[t].jsonCfg||"{}"),state:i[t].state})}}updateRecordList(e){const t=this.cloudRecordList.findIndex((t=>t.MixerID==e.MixerID));if(-1!==t)if(0==e.state)this.cloudRecordList.splice(t,1);else for(var i in e)this.cloudRecordList[t][i]=e[i];else{const t={};for(var i in e)t[i]=e[i];this.cloudRecordList.push(t)}}userCfg2IceCfg(e){return new Promise(((t,i)=>{const n={clientType:1};if(n.owner=L.userInfo.termId,n.storageConfig=Object.assign(e.storageConfig||{},{userNetDiskId:+L.multiProject.userId}),n.mode=e.mode||0,1==n.mode){if(e.audioFileCfg){n.audioFileCfg={svrPath:e.audioFileCfg.svrPath?e.audioFileCfg.svrPath:"",svrFileNameSuffix:e.audioFileCfg.svrFileNameSuffix?e.audioFileCfg.svrFileNameSuffix:".mp3"},n.audioFileCfg.subscribeAudios=[];try{e.audioFileCfg.subscribeAudios&&e.audioFileCfg.subscribeAudios.forEach((e=>{if("_cr_all_"===e)n.audioFileCfg.subscribeAudios.push(e);else{const t=L.findMemberInfo({use:"userId",want:"termId",value:e});if(!t)return i({errCode:5,errDesc:`: ${e}`});n.audioFileCfg.subscribeAudios.push(t)}}))}catch(e){return console.error(e),i({errCode:5,errDesc:'"subscribeAudios"'})}}if(e.videoFileCfg){n.videoFileCfg={svrPath:e.videoFileCfg.svrPath?e.videoFileCfg.svrPath:"",svrFileNameSuffix:e.videoFileCfg.svrFileNameSuffix?e.videoFileCfg.svrFileNameSuffix:".mp4",aStreamType:e.videoFileCfg.aStreamType?e.videoFileCfg.aStreamType:0},n.videoFileCfg.subscribeVideos=[];try{e.videoFileCfg.subscribeVideos&&e.videoFileCfg.subscribeVideos.forEach((e=>{if("_cr_all_"===e||"_cr_allDefCam_"===e)n.videoFileCfg.subscribeVideos.push(e);else{const t=e.lastIndexOf("."),r=e.substr(0,t),o=e.substr(t+1)||-1,s=L.findMemberInfo({use:"userId",want:"termId",value:r});if(!s)return i({errCode:5,errDesc:`: ${r}`});n.videoFileCfg.subscribeVideos.push(`${s}.${o}`)}}))}catch(e){return console.error(e),i({errCode:5,errDesc:'"subscribeVideos"'})}}}if(0===n.mode){if(e.audioFileCfg){const t=Object.assign({aChannelType:0},e.audioFileCfg);if(t.aChannelContent){const e=[];t.aChannelContent.forEach((t=>{const n=L.findMemberInfo({use:"userId",want:"termId",value:t});if(!n)return i({errCode:5,errDesc:`: ${t}`});e.push(n)})),t.aChannelContent=e}n.audioFileCfg=t}if(e.videoFileCfg){const t=Object.assign({mixedLayout:1},e.videoFileCfg);if(t.layoutConfig.forEach((e=>{if(0===e.type){const t=e.param.camid,n=t.lastIndexOf("."),r=t.substr(0,n),o=t.substr(n+1),s=L.findMemberInfo({use:"userId",want:"termId",value:r});if(!s)return i({errCode:5,errDesc:`: ${r}`});e.param.camid=`${s}.${o}`}})),t.aChannelContent){const e=[];t.aChannelContent.forEach((t=>{const n=L.findMemberInfo({use:"userId",want:"termId",value:t});if(!n)return i({errCode:5,errDesc:`: ${t}`});e.push(n)})),t.aChannelContent=e}n.videoFileCfg=t}}return t(n)}))}IceCfg2UserCfg(e){const t=JSON.parse(JSON.stringify(e)),i={mode:t.mode,audioFileCfg:t.audioFileCfg,videoFileCfg:t.videoFileCfg};return t.videoFileCfg&&(t.videoFileCfg.aChannelContent&&(i.videoFileCfg.aChannelContent=this.Uids2termIds(t.videoFileCfg.aChannelContent,!1)),t.videoFileCfg.subscribeVideos&&(i.videoFileCfg.subscribeVideos=this.videoCfgTermId2UID(t.videoFileCfg.subscribeVideos)),t.videoFileCfg.layoutConfig&&i.videoFileCfg.layoutConfig.map((e=>(0===e.type&&(e.param.camid=this.uidACamid2TermIdACamId(e.param.camid,!0)),e)))),t.audioFileCfg&&(t.audioFileCfg.aChannelContent&&(i.audioFileCfg.aChannelContent=this.Uids2termIds(t.audioFileCfg.aChannelContent,!1)),t.audioFileCfg.subscribeAudios&&(i.audioFileCfg.subscribeAudios=this.audioCfgTermId2UID(t.audioFileCfg.subscribeAudios))),i}Uids2termIds(e,t){return e.map((e=>L.findMemberInfo({use:t?"userId":"termId",want:t?"termId":"userId",value:e})))}uidACamid2TermIdACamId(e,t){const i=e.lastIndexOf("."),n=e.substr(0,i),r=e.substr(i+1)||-1;return`${L.findMemberInfo({use:t?"termId":"userId",want:t?"userId":"termId",value:n})||""}.${r}`}videoCfgTermId2UID(e){const t=[];return e.forEach((e=>{if("_cr_all_"===e||"_cr_allDefCam_"===e)t.push(e);else{const i=e.lastIndexOf("."),n=e.substr(0,i),r=e.substr(i+1)||-1,o=L.findMemberInfo({use:"termId",want:"userId",value:n})||"";t.push(`${o}.${r}`)}})),t}videoCfgUID2TermId(e){return e.forEach(((t,i)=>{if("_cr_all_"!==t&&"_cr_allDefCam_"!==t){const n=t.lastIndexOf("."),r=t.substr(0,n),o=t.substr(n+1)||-1,s=L.findMemberInfo({use:"userId",want:"termId",value:r})||"";e[i]=`${s}.${o}`}})),e}audioCfgTermId2UID(e){const t=[];return e.forEach((e=>{if("_cr_all_"===e)t.push(e);else{const i=L.findMemberInfo({use:"termId",want:"userId",value:e})||"";t.push(i)}})),t}audioCfgUID2TermId(e){return e.forEach(((t,i)=>{if("_cr_all_"!==t){const n=L.findMemberInfo({use:"userId",want:"termId",value:t})||"";e[i]=n}})),e}},window.__Rtc.CRRTCCloudRecord=new window.__crCloudRecordClass,window.CRVideo_CreateCloudMixerFailed=new L.CbProxy("CRVideo_CreateCloudMixerFailed"),window.CRVideo_CloudMixerStateChanged=new L.CbProxy("CRVideo_CloudMixerStateChanged"),window.CRVideo_CloudMixerInfoChanged=new L.CbProxy("CRVideo_CloudMixerInfoChanged"),window.CRVideo_CloudMixerOutputInfoChanged=new L.CbProxy("CRVideo_CloudMixerOutputInfoChanged");const B=window.CRVideo;window.Ice;window._crMemberClass=class{constructor(){this.initIceCallback(),this.initSDKInterface()}initIceCallback(){this.ICECallback={kickoutRslt:(e,t,i)=>{CRVideo_KickoutRslt.target()}}}initSDKInterface(){window.CRVideo_GetAllMembers=()=>{const e=[];return B.allMemberInfo.forEach((t=>{const i={};i.userID=t.userId,i.nickname=t.nickname,i.audioStatus=window.CRVideo_ASTATUS[t.audioStatus],i.videoStatus=window.CRVideo_VSTATUS[t.videoStatus],e.push(i)})),e},window.CRVideo_GetMemberInfo=e=>{const t={};B.allMemberInfo.forEach((i=>{e==i.userId&&(t.userID=i.userId,t.nickname=i.nickname,t.audioStatus=window.CRVideo_ASTATUS[i.audioStatus],t.videoStatus=window.CRVideo_VSTATUS[i.videoStatus])}));try{console.crlog(`[Member] CRVideo_GetMemberInfo(${e}), return: ${JSON.stringify(t)}`)}catch(e){console.error(e)}return t},window.CRVideo_GetMemberNickName=e=>{let t="";return e==B.userInfo.userId?t=B.userInfo.nickname:B.allMemberInfo.forEach((i=>{e==i.userId&&(t=i.nickname)})),t},window.CRVideo_IsUserInMeeting=e=>{let t=!1;return B.allMemberInfo.forEach((function(i){e==i.userId&&(t=!0)})),console.crlog(`[Member] CRVideo_IsUserInMeeting(${e}), return: ${t}`),t},g.Z.getAllMembers=()=>{const e=[];return B.allMemberInfo.forEach((t=>{const i={};i.actor=t.actor,i.userID=t.userId,i.nickname=t.nickname,i.audioStatus=window.CRVideo_ASTATUS[t.audioStatus],i.videoStatus=window.CRVideo_VSTATUS[t.videoStatus],e.push(i)})),e},g.Z.getMemberInfo=e=>{const t={};return B.allMemberInfo.forEach((i=>{e==i.userId&&(t.actor=i.actor,t.userID=i.userId,t.nickname=i.nickname,t.audioStatus=window.CRVideo_ASTATUS[i.audioStatus],t.videoStatus=window.CRVideo_VSTATUS[i.videoStatus])})),t}}},window.__Rtc.CRRTCMember=new window._crMemberClass;const F=window.CRVideo,j=window.Ice;class ${constructor(e){this.msid=e,this.offer_cb=null,this.offer=null,this.answer_cb=null,this.answer=null,this.candidates=[],this.stream=null,this.connection=null,this.logStr=null}}window.__crScreenClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[Screen] ScreenShareModule initData..."),this.getDisplayMediaAPI=!1,this.screenHeight=window.screen.height<=1080?window.screen.height:1080,this.screenShareCfg={maxFPS:8,maxKbps:2e3},this.screenCfg={audio:!1,video:{frameRate:{ideal:this.screenShareCfg.maxFPS},height:{ideal:this.screenHeight}}},this.isSharing=!1,this.isMySharing=!1,this.isMarking=!1,this.localScreenBaseStream=null,this.localScreenStream=null,this.remoteScreenStream=null,this.userInterfaceStop=!1,this.lastLocalMSID=13e4,this.lastRemoteMSID=23e4,this.localConnectionH264=new $(this.lastLocalMSID++),this.localConnectionVP8=new $(this.lastLocalMSID++),this.remoteConnection=new $(this.lastRemoteMSID++),this.screenShareInfo={},this.allMarkDataList=[],this.ctrlReqState=!1,navigator.mediaDevices&&void 0!==navigator.mediaDevices.getDisplayMedia&&(this.getDisplayMediaAPI=!0)}initIceCallback(){this.ICECallback={notifyStartScreenShare:e=>{console.crlog(`[Screen] ICE Notify --\x3e notifyStartScreenShare, params:${JSON.stringify(e)}`),this.screenShareInfo=e;const t=F.allMemberInfo.find((t=>t.termId==e.sharer));console.crlog(`[Screen] CRVideo_NotifyScreenShareStarted.target(${t.userId},${e.state})`),t&&CRVideo_NotifyScreenShareStarted.target(t.userId,e.state),this.isSharing=!0,e.sharer==F.userInfo.termId&&(this.isMySharing=!0),3==e.state&&(this.ICECallback.notifyStartMarked(e.sharer),__Rtc.CRICEAPI.GetAllMarkData(),__Rtc.CRICEAPI.GetAllMarkDataV4())},notifyStopScreenShare:e=>{console.crlog(`[Screen] ICE Notify --\x3e notifyStopScreenShare, params:${JSON.stringify({operator:e})}`),this.isMySharing&&this.stopScreenShareHandle(!0),this.ICECallback.notifyClearAllMarks();const t=F.allMemberInfo.find((t=>t.termId==e));this.isSharing=!1,e==F.userInfo.termId&&(this.isMySharing=!1),t&&F.isMeeting&&console.crlog(`[Screen] CRVideo_NotifyScreenShareStopped.target(${t.userId})`),t&&F.isMeeting&&CRVideo_NotifyScreenShareStopped.target(t.userId)},notifyScMakeIFrame:()=>{console.crlog("[Screen] ICE Notify --\x3e notifyScMakeIFrame, params: null"),this.handleScMakeIFrame()},notifyStartMarked:e=>{console.crlog(`[Screen] ICE Notify --\x3e notifyStartMarked, params:${JSON.stringify({operator:e})}`),this.pauseCanvasRender&&this.pauseCanvasRender();const t=F.allMemberInfo.find((t=>t.termId==e));t&&console.crlog(`[Screen] CRVideo_NotifyScreenMarkStarted.target(${t.userId})`),this.isMarking=!0,__Rtc.CRRTCUI.screenContainerList.forEach((e=>{e.canvasContainer&&(e.canvasContainer._canvas.style.display="block",e.canvasContainer.resize())})),t&&CRVideo_NotifyScreenMarkStarted.target(t.userId)},notifyStopMarked:e=>{console.crlog(`[Screen] ICE Notify --\x3e notifyStopMarked, params:${JSON.stringify({operator:e})}`),this.startCanvasRender&&this.startCanvasRender();const t=F.allMemberInfo.find((t=>t.termId==e));t&&console.crlog(`[Screen] CRVideo_NotifyScreenMarkStopped.target(${t.userId})`),this.isMarking=!1,__Rtc.CRRTCUI.screenContainerList.forEach((e=>{e.canvasContainer&&(e.canvasContainer._canvas.style.display="none",e.canvasContainer.resize())})),t&&CRVideo_NotifyScreenMarkStopped.target(t.userId)},notifyMarkData:e=>{const t=e.termid,i=e.type,n=e.markid;console.crlog(`[Screen] ICE Notify --\x3e notifyMarkData, params:${JSON.stringify({termID:t,type:i,markID:n,mousePosSeq:"mousePoseqDataArr"})}`)},notifyMarkDataV4:e=>{const t=e.termid,i=e.type,n=e.markid;console.crlog(`[Screen] ICE Notify --\x3e notifyMarkDataV4, params:${JSON.stringify({termID:t,type:i,markID:n,mousePosSeq:"mousePoseqDataArr"})}`),this.allMarkDataList.push(e),__Rtc.CRRTCUI.screenContainerList.forEach((t=>{const i=this.parseMarkData(e);t.canvasContainer._markDataList.push(i),t.canvasContainer&&t.canvasContainer._drawData(i)}))},notifyClearAllMarks:()=>{console.crlog("[Screen] ICE Notify --\x3e notifyClearAllMarks, params: null"),this.allMarkDataList=[],__Rtc.CRRTCUI.screenContainerList.forEach((e=>{e.canvasContainer.clearAllMark()}))},notifyClearAllMarksV4:()=>{console.crlog("[Screen] ICE Notify --\x3e notifyClearAllMarksV4, params: null"),this.allMarkDataList=[],__Rtc.CRRTCUI.screenContainerList.forEach((e=>{e.canvasContainer.clearAllMark()}))},notifyCtrlReqState:(e,t)=>{console.crlog(`[Conference] ICE Notify: notifyCtrlReqState, params:${JSON.stringify({operatorID:e,state:t})}`),this.ctrlReqState=t;const i=F.allMemberInfo.find((t=>t.termId==e));g.Z.notifyCtrlReqState.target(i.userId,t)},getScreenShareInfoRslt:(e,t)=>{try{console.crlog(`[Screen] ICE Callback --\x3e getScreenShareInfoRslt, params:${JSON.stringify({errCode:e,data:t})}`)}catch(e){console.error(e)}0==e?(0!==t.state&&(console.crlog("[Screen] ScreenShare is strated in this meeting..."),this.ICECallback.notifyStartScreenShare(t)),this.ctrlReqState=t.allowCtrlReq,g.Z.notifyCtrlReqState.target("",t.allowCtrlReq)):console.crlog(`[Screen][Error] Get screenShare info fail! ${e}`)},startScreenShareRslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e startScreenShareRslt, params:${JSON.stringify({errCode:e})}`),console.crlog(`[Screen] CRVideo_StartScreenShareRslt.target(${e})`),CRVideo_StartScreenShareRslt.target(e)},stopScreenShareRslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e stopScreenShareRslt, params:${JSON.stringify({errCode:e})}`),console.crlog(`[Screen] CRVideo_StopScreenShareRslt.target(${e})`),CRVideo_StopScreenShareRslt.target(e)},startMarkedRslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e startMarkedRslt, params:${JSON.stringify({errCode:e})}`),console.crlog(`[Screen] CRVideo_StartScreenMarkRslt.target(${e})`),CRVideo_StartScreenMarkRslt.target(e)},stopMarkedRslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e stopMarkedRslt, params:${JSON.stringify({errCode:e})}`),console.crlog(`[Screen] CRVideo_StopScreenMarkRslt.target(${e})`),CRVideo_StopScreenMarkRslt.target(e)},clearAllMarksV4Rslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e clearAllMarksV4Rslt, params:${JSON.stringify({errCode:e})}`)},getAllMarkDataRslt:(e,t)=>{try{console.crlog(`[Screen] ICE Callback --\x3e getAllMarkDataRslt, params:${JSON.stringify({errCode:e,data:t})}`)}catch(e){console.error(e)}},getAllMarkDataV4Rslt:(e,t)=>{try{console.crlog(`[Screen] ICE Callback --\x3e getAllMarkDataV4Rslt, params:${JSON.stringify({errCode:e,data:"markData"})}`)}catch(e){console.error(e)}0==e&&(this.allMarkDataList=t),this.allMarkDataList.forEach((e=>{__Rtc.CRRTCUI.screenContainerList.forEach((t=>{const i=this.parseMarkData(e);t.canvasContainer._markDataList.push(i),t.canvasContainer&&t.canvasContainer._drawData(i)}))}))},sendMarkDataV4Rslt:e=>{try{console.crlog(`[Screen] ICE Callback --\x3e sendMarkDataV4Rslt, params:${JSON.stringify({errCode:e})}`)}catch(e){console.error(e)}}}}initSDKInterface(){window.CRVideo_SetScreenShareCfg=e=>{for(var t in console.crlog(`[Screen] CRVideo_SetScreenShareCfg(${JSON.stringify(e)})`),e)this.screenShareCfg[t]=e[t]},window.CRVideo_GetScreenShareCfg=()=>JSON.parse(JSON.stringify(this.screenShareCfg)),window.CRVideo_StartScreenShare=({constraints:e}={})=>{if(console.crlog("[Screen] CRVideo_StartScreenShare()"),this.isSharing)return CRVideo_StartScreenShareRslt.target(1);e?this.electronStartScreenShare(e):this.startScreenShare(this.screenShareCfg)},window.CRVideo_StopScreenShare=()=>{console.crlog("[Screen] CRVideo_StopScreenShare()"),this.userInterfaceStop=!0,this.stopScreenShareHandle()},window.CRVideo_StartScreenMark=()=>{console.crlog("[Screen] CRVideo_StartScreenMark()"),__Rtc.CRICEAPI.StartMarked()},window.CRVideo_StopScreenMark=()=>{console.crlog("[Screen] CRVideo_StopScreenMark()"),__Rtc.CRICEAPI.StopMarked(),__Rtc.CRICEAPI.ClearAllMarksV4()},g.Z.setCtrlReqState=e=>(console.crlog(`[Screen] MeetSDK.setCtrlReqState(${e})`),new Promise(((t,i)=>{__Rtc.CRICEAPI.setCtrlReqState(e).then((()=>t({errCode:0}))).catch((e=>i({errCode:1,errDesc:e.toString()})))})))}videoAllocRawExt2(e,t,i,n){console.crlog(`[Screen] VideoAllocRawExt2... cameraID:${t.cameraID}, srcSelf:${i}, liteice:${n.get("liteice")||"0"}, rtc_streamid:${n.get("rtc_streamid")||null}`),setTimeout((()=>{e.isResponsed||(console.crlog("[Screen] Screen share connection gather candidates, waited more than 10s, do cb.ice_response()"),e.ice_response(),e.isResponsed=!0)}),1e4),i?this.setLocalScreenConnection(e,t,n):this.setRemoteScreenConnection(e,t,n)}modifyPeerAddrExt(e,t,i,n){const r={type:"answer",sdp:n.get("sdp")};"localScreen"==e&&this.localScreenModifyPeerAddrExt(t,i,r),"remoteScreen"==e&&this.remoteScreenModifyPeerAddrExt(t,i,r)}modifyOfferSDP(e,t){const i=t.type,n=t.isVp8?"VP8":"H264",r=[];let o=e.split("\r\n");e.match(new RegExp(`(\\d+)(?=\\s+${n})`,"g")).forEach((e=>r.push(e.replace(` ${n}`,"")))),o=o.filter((e=>!((e.includes("a=rtcp-fb")||e.includes("a=rtpmap")||e.includes("a=fmtp"))&&!r.includes(e.split(" ")[0].split(":")[1]))));const s=o.findIndex((e=>e.includes("m=video"))),a=[];o[s].split(" ").forEach(((e,t)=>{t<3&&a.push(e),t>=3&&!isNaN(e)&&r.includes(e)&&a.push(e)})),o[s]=a.join(" ");for(let e=0;e<o.length;e++){o[e].includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete o[e]}let c=o.join("\r\n");for(i&&(c=c.replace("a=sendrecv",`a=${i}`)),"sendonly"==i&&(console.crlog(`${t.logStr} b=AS:${this.screenShareCfg.maxKbps}`),c=c.replace("c=IN IP4 0.0.0.0",`c=IN IP4 0.0.0.0\r\nb=AS:${this.screenShareCfg.maxKbps}`));c.includes("\r\n\r\n");)c=c.replace("\r\n\r\n","\r\n");return c}modifyAnswerSDP(e,t){let i=e.split("\r\n");for(let e=0;e<i.length;e++){i[e].includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete i[e]}for(e=i.join("\r\n");e.includes("\r\n\r\n");)e=e.replace("\r\n\r\n","\r\n");const n=e.match(/c=IN IP4(.*?)\r\n/)?e.match(/c=IN IP4(.*?)\r\n/)[0]:"",r=e.match(/b=AS:(.*?)\r\n/)?e.match(/b=AS:(.*?)\r\n/)[0]:"";return n&&e.split(n).length>2&&(e=e.replace(`${n}${r}`,"")),e=e.replace("a=rtcp-fb:102 nack\r\n",""),e="sendonly"==t?e.replace("profile-level-id=42001f",`x-google-min-bitrate=${this.screenShareCfg.maxKbps/4};x-google-start-bitrate=${this.screenShareCfg.maxKbps/2};x-google-max-bitrate=${this.screenShareCfg.maxKbps};`):e.replace("a=sendrecv","a=sendonly")}startScreenShare(e){if(e&&e.maxFPS&&(this.screenCfg.video.frameRate.ideal=e.maxFPS),e&&e.height&&(this.screenHeight=e.height,this.screenCfg.video.height.ideal=e.height),this.getDisplayMediaAPI){try{console.crlog(`[Screen] navigator.mediaDevices.getDisplayMedia(${JSON.stringify(this.screenCfg)})`)}catch(e){console.error(e)}navigator.mediaDevices.getDisplayMedia(this.screenCfg).then((e=>{this.localScreenBaseStream=e,this.gotLocalScreenStream(e)})).catch((e=>{console.crlog(`[Screen] getDisplayMedia fail: ${e}`),CRVideo_StartScreenShareRslt.target(8002),console.error(e)}))}else console.crlog("[Screen] CRVideo_StartScreenShareRslt.target(8004)"),CRVideo_StartScreenShareRslt.target(8004)}electronStartScreenShare(e){navigator.mediaDevices.getUserMedia(e).then((e=>{this.localScreenBaseStream=e,this.gotLocalScreenStream(e)})).catch((e=>{console.crlog(`[Screen] getUserMedia fail: ${e}`),CRVideo_StartScreenShareRslt.target(8002),console.error(e)}))}stopScreenShareHandle(e){(this.localScreenBaseStream||this.localScreenStream)&&(console.crlog("[Screen] Stop local screen stream track"),this.localScreenBaseStream&&this.localScreenBaseStream.getTracks().forEach((e=>{e.stop()})),this.localScreenStream&&this.localScreenStream.getTracks().forEach((e=>{e.stop()})),this.pauseCanvasRender("stop")),this.isMarking&&(__Rtc.CRICEAPI.StopMarked(),__Rtc.CRICEAPI.ClearAllMarksV4()),!e&&window.__Rtc.CRICEAPI.StopScreenShare(),this.isSharing=!1,this.isMySharing=!1,this.baseVideoEle&&(this.baseVideoEle.onplay=null,this.baseVideoEle.onplaying=null,this.baseVideoEle.srcObject=null,this.baseVideoEle.remove(),this.baseVideoEle=null),this.localScreenBaseStream=null,this.localScreenStream=null,this.streamCanvas=null,this.ctx=null,this.startCanvasRender=null,this.pauseCanvasRender=null,this.handleScMakeIFrame=null;const t={};for(var i in this.screenShareCfg)t[i]=this.screenShareCfg[i];this.initData(),this.screenShareCfg=t}gotLocalScreenStream(e){console.crlog(`[Screen] GetDisplayMedia success! stream: ${e.id}`),this.localScreenStream=this.getCanvasStream(e),this.userInterfaceStop=!1,e.getTracks()[0].onended=e=>{this.userInterfaceStop?console.crlog("[Screen] Screen share stoped by interface."):(console.crlog("[Screen] Screen share stoped by plug-in button."),this.userInterfaceStop=!1,this.stopScreenShareHandle())},window.__Rtc.CRICEAPI.StartScreenShare()}getCanvasStream(e){console.crlog("[Screen] Start to get canvas stream...");const t=this;this.baseVideoEle=document.createElement("video"),this.streamCanvas=document.createElement("canvas"),this.baseVideoEle.autoplay=!0,this.baseVideoEle.playsinline=!0,this.baseVideoEle.click(),this.baseVideoEle.srcObject=e,setTimeout((()=>{this.baseVideoEle.isplay||"Mac"!=__Rtc.CRBrowser.curBrowserCfg.platform||"Safari"!=__Rtc.CRBrowser.curBrowserCfg.name||(this.baseVideoEle.click(),this.baseVideoEle.play())}),1e3),this.baseVideoEle.onplay=function(){t.baseVideoEle.isplay=!0,console.crlog("[Screen] Get canvas stream:baseVideoEle on play..."),t.streamCanvas.width=t.baseVideoEle.videoWidth,t.streamCanvas.height=t.baseVideoEle.videoHeight,t.startCanvasRender()},this.baseVideoEle.onplaying=function(){console.crlog("[Screen] Get canvas stream:baseVideoEle on playing...")},this.ctx=this.streamCanvas.getContext("2d");const i=URL.createObjectURL(new Blob([(console.crlog("[Screen] Get canvas stream:new Worker..."),"("+function(){let e;self.onmessage=function(i){const{cmd:n,data:r}=i.data;if("start"===n){clearTimeout(e);const i=()=>{self.postMessage("draw"),e=setTimeout(i,r&&r.rote||1e3/t.screenShareCfg.maxFPS)};i()}else"stop"===n&&(clearTimeout(e),e=null)}}.toString()+"());")],{type:"text/javascript"}));t.worker&&t.worker.terminate&&t.worker.terminate();const n=new Worker(i);t.worker=n,n.onmessage=function(e){if("draw"===e.data){if(!t.baseVideoEle||!t.streamCanvas)return;if(t.screenShareCfg&&t.screenShareCfg.catchRect){const{left:e,top:i,width:n,height:r}=t.screenShareCfg.catchRect;t.streamCanvas.width=n,t.streamCanvas.height=r,t.ctx.drawImage(t.baseVideoEle,e,i,t.streamCanvas.width,t.streamCanvas.height,0,0,t.streamCanvas.width,t.streamCanvas.height)}else t.streamCanvas.width=t.baseVideoEle.videoWidth,t.streamCanvas.height=t.baseVideoEle.videoHeight,t.ctx.drawImage(t.baseVideoEle,0,0,t.streamCanvas.width,t.streamCanvas.height)}};this.startCanvasRender=function(){console.crlog("[Screen] Get canvas stream:startCanvasRender..."),t.baseVideoEle.click(),t.baseVideoEle.play();const e=1e3/t.screenShareCfg.maxFPS;n.postMessage({cmd:"start",data:{rote:e}})},this.pauseCanvasRender=function(e){console.crlog("[Screen] Get canvas stream:pauseCanvasRender..."),t.baseVideoEle.pause(),n.postMessage({cmd:"stop",data:{isStop:e}})},this.handleScMakeIFrame=function(){let e;return console.crlog("[Screen] Get canvas stream:handleScMakeIFrame..."),function(){if(t.baseVideoEle.paused){clearTimeout(e);let i=0;function n(){if(!(i++>=10)){if(t.screenShareCfg&&t.screenShareCfg.catchRect){const{left:e,top:i,width:n,height:r}=t.screenShareCfg.catchRect;t.streamCanvas.width=n,t.streamCanvas.height=r,t.ctx.drawImage(t.baseVideoEle,e,i,t.streamCanvas.width,t.streamCanvas.height,0,0,t.streamCanvas.width,t.streamCanvas.height)}else t.streamCanvas.width=t.baseVideoEle.videoWidth,t.streamCanvas.height=t.baseVideoEle.videoHeight,t.ctx.drawImage(t.baseVideoEle,0,0,t.streamCanvas.width,t.streamCanvas.height);e=setTimeout(n,300)}}n()}}}();const r=function(e=8){return console.crlog(`[Screen] Get canvas stream:this.streamCanvas.captureStream(${e})...`),t.streamCanvas.captureStream(e)}(t.screenShareCfg.maxFPS);return console.crlog(`[Screen] Get canvas stream success! ${r.id}`),r}setLocalScreenConnection(e,t,i){let n,r;1e4==t.cameraID?(n=this.localConnectionVP8,r=`[Screen] Local screenShare RTCPeerConnection(vp8), msid:${n.msid} `):(n=this.localConnectionH264,r=`[Screen] Local screenShare RTCPeerConnection(h264), msid:${n.msid} `),n.type="sendonly",n.logStr=r,n.offer_cb=e,n.offer_cb.isResponsed=!1,n.isVp8=1e4==t.cameraID,n.liteice=i.get("liteice")||"0",n.vsParam=t,n.rtc_streamid=i.get("rtc_streamid")||null,n.rtc_eid=i.get("rtc_eid")||null,n.rtc_mode="push",n.HashMap=new j.HashMap,n.caComplete=!1,console.crlog(`${r} new RTCPeerConnection...`);const o="1"===n.liteice?new RTCPeerConnection:new RTCPeerConnection(F.rtcCfg);n.connection=o,n.stream=this.localScreenStream,console.crlog(`${r} addTrack(localScreenTrack, localScreenStream)`),o.addTrack(n.stream.getTracks()[0],n.stream),console.crlog(`${r} createOffer()`),o.createOffer().then((e=>{console.crlog(`${r} createOffer success!`),e.sdp=this.modifyOfferSDP(e.sdp,n);let t=" ";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+=" H264"),console.crlog(`${r} offer.sdp - ${t}\r\n${e.sdp}`),n.offer=e,console.crlog(`${r} offer setLocalDescription(offer)`),o.setLocalDescription(e).then((e=>{console.crlog(`${r} offer setLocalDescription success!`),n.rtc_streamid&&(!n.offer_cb.isResponsed&&console.crlog(`${r} ice_response(${n.msid}, new Ice.HashMap())`),!n.offer_cb.isResponsed&&n.offer_cb.ice_response(n.msid,new j.HashMap),!n.offer_cb.isResponsed&&(n.offer_cb.isResponsed=!0),n.HashMap.set("sdp",n.offer.sdp),n.HashMap.set("rtc_streamid",n.rtc_streamid),n.HashMap.set("rtc_mode","push"),n.HashMap.set("rtc_eid",n.rtc_eid)),"1"===n.liteice&&this.RtcGwVideoAlloc2(n)})).catch((e=>{console.crlog(`${r} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${r} createOffer fail! ${e}`),console.error(e)})),o.onicecandidate=e=>{"1"===n.liteice||n.caComplete||(console.crlog(`${r} onicecandidate: ${JSON.stringify(e.candidate)}`),e.candidate?n.candidates.push(e.candidate):n.caComplete=!0,n.caComplete&&this.iceResponse(n),setTimeout((()=>{n.caComplete||(n.caComplete=!0,this.iceResponse(n))}),300))},o.oniceconnectionstatechange=e=>{console.crlog(`${r} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),n&&n.iceConnectionState&&"completed"==n.iceConnectionState&&setTimeout((()=>{n.answer_cb&&!n.answer_cb.isResponsed&&(console.crlog(`${r} answer_cb ice_response()...`),n.answer_cb.ice_response(),n.answer_cb.isResponsed=!0)}),500)},o.onconnectionstatechange=e=>{const t=e.currentTarget.connectionState;if(console.crlog(`${r} onconnectionstatechange, connectionState: ${t}`),"connected"==t){n.lastBytesSent=0,clearInterval(n.rtpLogTimer);let e=()=>{o.getStats().then((e=>{e.forEach((e=>{"outbound-rtp"==e.type&&(n.width=e.frameWidth,n.height=e.frameHeight,n.frameRate=e.framesPerSecond,n.codeRate=(e.bytesSent-n.lastBytesSent)/2e3,n.lastBytesSent=e.bytesSent)}))}))};e(),n.rtpLogTimer=setInterval(e,2e3)}else"disconnected"!=t&&"failed"!=t||(clearInterval(n.rtpLogTimer),"failed"==t&&("connected"!=o.lastState&&"connecting"!=o.lastState||(console.crlog(`${r} connection state failed!`),setTimeout((()=>{__Rtc.CRICEAPI.MediaConnectionBreakReport(n.msid)}),1e3))));o.lastState=t},o.onsignalingstatechange=e=>{console.crlog(`${r} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}localScreenModifyPeerAddrExt(e,t,i){let n;t==this.localConnectionH264.msid&&(n=this.localConnectionH264),t==this.localConnectionVP8.msid&&(n=this.localConnectionVP8),n.answer_cb=e;const r=n.logStr,o=n.connection;i.sdp=this.modifyAnswerSDP(i.sdp,"sendonly");let s=" ";i.sdp.includes("VP8")&&(s+="VP8"),i.sdp.includes("H264")&&(s+=" H264"),console.crlog(`${r} ModifyPeerAddrExt, answerSDP - ${s}\r\n${i.sdp}`),n.answer=i,console.crlog(`${r} answer setRemoteDescription(answer)`),o.setRemoteDescription(new RTCSessionDescription(i)).then((e=>{console.crlog(`${r} answer setRemoteDescription success!`),videoResolutionReport(n.msid,"screen"),this.refreshContainerSrc()})).catch((e=>{console.crlog(`${r} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{n.answer_cb.isResponsed||(console.crlog(`${r} answer_cb ice_response()...`),n.answer_cb.ice_response(),n.answer_cb.isResponsed=!0)}),500)}setRemoteScreenConnection(e,t,i){const n=this.remoteConnection,r=`[Screen] Remote screenShare RTCPeerConnection, msid:${this.remoteConnection.msid} `;n.type="reveonly",n.logStr=r,n.offer_cb=e,n.offer_cb.isResponsed=!1,n.isVp8=1e4==t.cameraID,n.liteice=i.get("liteice")||"0",n.vsParam=t,n.rtc_streamid=i.get("rtc_streamid")||null,n.rtc_mode="play",n.rtc_eid=i.get("rtc_eid")||null,n.HashMap=new j.HashMap,n.caComplete=!1,console.crlog(`${r} new RTCPeerConnection...)`);const o="1"===n.liteice?new RTCPeerConnection:new RTCPeerConnection(F.rtcCfg);n.connection=o;const s={offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1};console.crlog(`${r} createOffer(${JSON.stringify(s)})`),o.createOffer(s).then((e=>{console.crlog(`${r} createOffer success!`),e.sdp=this.modifyOfferSDP(e.sdp,n);let t=" ";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+=" H264"),console.crlog(`${r} offer.sdp - ${t}\r\n${e.sdp}`),n.offer=e,console.crlog(`${r} offer setLocalDescription(offer)`),o.setLocalDescription(e).then((e=>{console.crlog(`${r} offer setLocalDescription success!`),n.rtc_streamid&&(!n.offer_cb.isResponsed&&console.crlog(`${r} ice_response(${n.msid}, new Ice.HashMap())`),!n.offer_cb.isResponsed&&n.offer_cb.ice_response(n.msid,new j.HashMap),!n.offer_cb.isResponsed&&(n.offer_cb.isResponsed=!0),n.HashMap.set("sdp",n.offer.sdp),n.HashMap.set("rtc_streamid",n.rtc_streamid),n.HashMap.set("rtc_mode","play"),n.HashMap.set("rtc_eid",n.rtc_eid),"1"===n.liteice&&this.RtcGwVideoAlloc2(n))})).catch((e=>{console.crlog(`${r} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${r} createOffer fail! ${e}`),console.error(e)})),o.onicecandidate=e=>{"1"===n.liteice||n.caComplete||(console.crlog(`${r} onicecandidate: ${JSON.stringify(e.candidate)}`),e.candidate?n.candidates.push(e.candidate):n.caComplete=!0,n.caComplete&&this.iceResponse(n),setTimeout((()=>{n.caComplete||(n.caComplete=!0,this.iceResponse(n))}),300))},o.oniceconnectionstatechange=e=>{console.crlog(`${r} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),n&&n.iceConnectionState&&"completed"==n.iceConnectionState&&setTimeout((()=>{n.answer_cb&&!n.answer_cb.isResponsed&&(console.crlog(`${r} answer_cb ice_response()...`),n.answer_cb.ice_response(),n.answer_cb.isResponsed=!0)}),500)},o.onconnectionstatechange=e=>{const t=e.currentTarget.connectionState;if(console.crlog(`${r} onconnectionstatechange, connectionState: ${t}`),"connected"==t){n.lastBytesReceived=0,n.codeRate=0,n.width=0,n.height=0,n.frameRate=0,n.lastPacketsLost=0,n.lastPacketsReceived=0,n.packetsLostRate=0,clearInterval(n.rtpLogTimer);let e=()=>{o.getStats().then((e=>{e.forEach((e=>{if("inbound-rtp"==e.type){n.codeRate=(e.bytesReceived-n.lastBytesReceived)/2e3,n.lastBytesReceived=e.bytesReceived,n.width=e.frameWidth,n.height=e.frameHeight,n.frameRate=e.framesPerSecond;let t=e.packetsLost-n.lastPacketsLost,i=e.packetsReceived-n.lastPacketsReceived;n.packetsLostRate=t<0?0:parseInt(t/(i+t)*1e4)/1e4,n.lastPacketsLost=e.packetsLost,n.lastPacketsReceived=e.packetsReceived}}))}))};e(),n.rtpLogTimer=setInterval(e,2e3)}else"disconnected"!=t&&"failed"!=t||(clearInterval(n.rtpLogTimer),"failed"==t&&("connected"!=o.lastState&&"connecting"!=o.lastState||(console.crlog(`${r} connection state failed!`),setTimeout((()=>{__Rtc.CRICEAPI.MediaConnectionBreakReport(n.msid)}),1e3))));o.lastState=t},o.onsignalingstatechange=e=>{console.crlog(`${r} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)},o.ontrack=e=>{console.crlog(`${r} ontrack, get stream now...`),n.stream=e.streams[0],this.refreshContainerSrc()}}iceResponse(e){const t=e.logStr;"1"===e.liteice?(console.crlog(`${t} response without candidates when liteice === '1'`),e.rtc_streamid?this.RtcGwVideoAlloc2(e):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog(`${t} offer_cb ice_response(${e.msid}, HashMap)`),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0))):(e.HashMap.set("icecandidate",JSON.stringify(e.candidates)),console.crlog(`${t} response candidates(${e.candidates.length}): ${JSON.stringify(e.candidates)}`),e.rtc_streamid?this.RtcGwVideoAlloc2(e):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog(`${t} offer_cb ice_response(${e.msid}, HashMap)`),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0)))}RtcGwVideoAlloc2(e){const t=e.logStr;console.crlog(`${t} request GwVideoAlloc2(vsParam, HashMap)`),A.Z.GwVideoAlloc2(e.vsParam,e.HashMap).then((i=>{if(i.answerSdp){console.crlog(`${t} request GwVideoAlloc2 success...`);const n={type:"answer",sdp:i.answerSdp};n.sdp=this.modifyAnswerSDP(n.sdp,e.type),e.answer=n;let r=" ";n.sdp.includes("VP8")&&(r+="VP8"),n.sdp.includes("H264")&&(r+=" H264"),console.crlog(`${t} received answer sdp:${n.sdp.length} ${r}`),console.crlog(`${n.sdp}`),console.crlog(`${t} setRemoteDescription(answer)`),e.connection.setRemoteDescription(new RTCSessionDescription(n)).then((()=>{console.crlog(`${t} setRemoteDescription success!`)})).catch((e=>{console.crlog(`${t} setRemoteDescription fail! ${e}`),console.error(e)}))}})).catch((e=>{console.error(e)}))}remoteScreenModifyPeerAddrExt(e,t,i){this.remoteConnection.answer_cb=e;const n=this.remoteConnection.logStr,r=this.remoteConnection.connection;i.sdp=this.modifyAnswerSDP(i.sdp,"recvonly");let o=" ";i.sdp.includes("VP8")&&(o+="VP8"),i.sdp.includes("H264")&&(o+=" H264"),console.crlog(`${n} ModifyPeerAddrExt, answerSDP - ${o}\r\n${i.sdp}`),this.remoteConnection.answer=i,console.crlog(`${n} answer setRemoteDescription(answer)`),r.setRemoteDescription(new RTCSessionDescription(i)).then((e=>{console.crlog(`${n} answer setRemoteDescription success!`)})).catch((e=>{console.crlog(`${n} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{this.remoteConnection.answer_cb.isResponsed||(console.crlog(`${n} answer_cb ice_response()...`),this.remoteConnection.answer_cb.ice_response(),this.remoteConnection.answer_cb.isResponsed=!0)}),500)}refreshContainerSrc(){console.crlog("[Screen] Refresh all screen container src..."),__Rtc.CRRTCUI.screenContainerList.forEach((e=>{if(e._userID==F.userInfo.userId){if(!this.localScreenStream)return;console.crlog(`[Screen] Local screenShare, containerID:${e._id} set srcObject, stream:${this.localScreenStream.id}, active:${this.localScreenStream.active}`),e._videoEle.srcObject=this.localScreenStream,setTimeout((()=>{"Chrome"!==__Rtc.CRBrowser.curBrowserCfg.name&&e&&e._videoEle&&e._videoEle.srcObject&&(e._videoEle.click(),e._videoEle.play())}),2e3)}else{if(!this.remoteConnection.stream)return;console.crlog(`[Screen] Remote screenShare, userID:${e._userID}, containerID:${e._id} set srcObject, stream:${this.remoteConnection.stream.id}, active:${this.remoteConnection.stream.active}`),e._videoEle.srcObject=this.remoteConnection.stream,e&&e._videoEle&&e._videoEle.srcObject&&(e._videoEle.click(),e._videoEle.play().then().catch((t=>{e._videoEle.click(),e._videoEle.play()})))}}))}parseMarkData(e){const t={};t.type=e.type,t.markId=e.markid;const i=e.mousePosSeq,n=i[3].toString(16),r=i[2].toString(16),o=i[1].toString(16);t.color="#"+(Array(2).join(0)+n).slice(-2)+(Array(2).join(0)+r).slice(-2)+(Array(2).join(0)+o).slice(-2);let s=4;t.width=i[s++]<<8|i[s++],t.size=i[s++]<<8|i[s++];const a=[],c=new DataView(i.buffer);for(;s<i.length;){let e={};e.x=c.getInt16(s),s+=2,e.y=c.getInt16(s),s+=2,a.push(e)}return t.data=a,t}},window.__Rtc.CRRTCScreen=new window.__crScreenClass,window.CRVideo_StartScreenShareRslt=new F.CbProxy("CRVideo_StartScreenShareRslt"),window.CRVideo_StopScreenShareRslt=new F.CbProxy("CRVideo_StopScreenShareRslt"),window.CRVideo_StartScreenMarkRslt=new F.CbProxy("CRVideo_StartScreenMarkRslt"),window.CRVideo_StopScreenMarkRslt=new F.CbProxy("CRVideo_StopScreenMarkRslt"),window.CRVideo_NotifyScreenShareStarted=new F.CbProxy("CRVideo_NotifyScreenShareStarted"),window.CRVideo_NotifyScreenShareStopped=new F.CbProxy("CRVideo_NotifyScreenShareStopped"),window.CRVideo_NotifyScreenShareData=new F.CbProxy("CRVideo_NotifyScreenShareData"),window.CRVideo_NotifyCatchScreen=new F.CbProxy("CRVideo_NotifyCatchScreen"),window.CRVideo_NotifyGiveCtrlRight=new F.CbProxy("CRVideo_NotifyGiveCtrlRight"),window.CRVideo_NotifyReleaseCtrlRight=new F.CbProxy("CRVideo_NotifyReleaseCtrlRight"),window.CRVideo_NotifyShareRectChanged=new F.CbProxy("CRVideo_NotifyShareRectChanged"),window.CRVideo_NotifyScreenMarkStarted=new F.CbProxy("CRVideo_NotifyScreenMarkStarted"),window.CRVideo_NotifyScreenMarkStopped=new F.CbProxy("CRVideo_NotifyScreenMarkStopped"),g.Z.notifyCtrlReqState=new E.Z("notifyCtrlReqState");const H=[{size:3840,defaultKbps:48,maxKbps:96},{size:7168,defaultKbps:53,maxKbps:106},{size:15360,defaultKbps:75,maxKbps:150},{size:28672,defaultKbps:100,maxKbps:200},{size:46080,defaultKbps:123,maxKbps:246},{size:67584,defaultKbps:160,maxKbps:320},{size:114688,defaultKbps:230,maxKbps:440},{size:147456,defaultKbps:260,maxKbps:520},{size:184320,defaultKbps:300,maxKbps:600},{size:230400,defaultKbps:350,maxKbps:700},{size:281600,defaultKbps:420,maxKbps:840},{size:407040,defaultKbps:500,maxKbps:1e3},{size:589824,defaultKbps:650,maxKbps:1300},{size:921600,defaultKbps:1e3,maxKbps:2e3},{size:2073600,defaultKbps:2e3,maxKbps:4e3},{size:3686400,defaultKbps:3e3,maxKbps:6e3},{size:8294400,defaultKbps:5e3,maxKbps:8e3}];const q=window.CRVideo,K=window.Ice;class W{constructor(e){this.msid=e,this.offer=null,this.answer=null,this.offer_cb=null,this.answer_cb=null,this.connection=null,this.candidates=[],this.stream=null,this.logStr=null,this.isResponsedCandidate=!1}}window.__crMediaClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[Media] MediaShareModule initData..."),this.mediaFileInfo={isAudioFile:!1,name:null,url:null,FileObj:null},this.mediaShareInfo={userID:null,mediaName:null,state:null},this.mediaCfg={size:null,fps:null,userSetMaxKbps:null,defMaxKbps:null},this.container=null,this.bPauseWhenFinished=!1,this.isLocalPlay=!1,this.localMediaAudioConnection=new W(this.mediaAudioMSID++),this.localMediaVideoConnection_H264=new W(this.localMediaMSID++),this.localMediaVideoConnection_VP8=new W(this.localMediaMSID++),this.remoteMediaConnection=new W(this.remoteMediaMSID++),this.localMediaMSID=14e4,this.mediaAudioMSID=15e4,this.remoteMediaMSID=24e4,clearInterval(this.canvasDrawTimer),this.canvasDrawTimer=-1}initIceCallback(){this.ICECallback={notifyStartPlayMedia:e=>{console.crlog(`[Media] ICE Notify --\x3e notifyStartPlayMedia, params:${JSON.stringify({mediaShareInfo:e})}`),e.state=e.state.value;const t=q.allMemberInfo.find((t=>t.termId==e.termid)),i=t?t.userId:"";e.termid!==CRVideo.userInfo.termId&&__Rtc.CRICEAPI.SubscribeMedia(!0),this.mediaShareInfo.userID=i,this.mediaShareInfo.mediaName=e.mediaName,this.mediaShareInfo.state=e.state,console.crlog(`[Media] CRVideo_NotifyMediaStart.target(${i})`),CRVideo_NotifyMediaStart.target(i)},notifyStopPlayMedia:e=>{console.crlog(`[Media] ICE Notify --\x3e notifyStopPlayMedia, params:${JSON.stringify({operator:e})}`),q.isMeeting&&e!==q.userInfo.termId&&__Rtc.CRICEAPI.SubscribeMedia(!1);const t=q.allMemberInfo.find((t=>t.termId==e)),i=t?t.userId:"";this.container&&(this.container._videoEle.srcObject=null),this.mediaShareInfo.userID=null,this.mediaShareInfo.mediaName=null,this.mediaShareInfo.state=2,q.isMeeting&&console.crlog(`[Media] CRVideo_NotifyMediaStop.target(${i})`),q.isMeeting&&CRVideo_NotifyMediaStop.target(i)},notifyPausePlayMedia:(e,t)=>{console.crlog(`[Media] ICE Notify --\x3e notifyPausePlayMedia, params:${JSON.stringify({operator:e,bPause:t})}`);const i=q.allMemberInfo.find((t=>t.termId==e)),n=i?i.userId:"",r=t?1:0;this.mediaShareInfo.state=r,console.crlog(`[Media] CRVideo_NotifyMediaPause.target(${n},${r})`),CRVideo_NotifyMediaPause.target(n,r)},notifyMakeIFrame:e=>{console.crlog("[Media] ICE Notify --\x3e notifyMakeIFrame")},notifySubscribeMedia:e=>{console.crlog(`[Media] ICE Notify --\x3e notifySubscribeMedia, params:${JSON.stringify({bSub:e})}`)},startPlayMediaRslt:e=>{console.crlog(`[Media] ICE Callback --\x3e startPlayMediaRslt, params:${JSON.stringify({errCode:e})}`)},stopPlayMediaRslt:e=>{console.crlog(`[Media] ICE Callback --\x3e stopPlayMediaRslt, params:${JSON.stringify({errCode:e})}`)},getMediaInfoRslt:(e,t)=>{if(console.crlog(`[Media] ICE Callback --\x3e getMediaInfoRslt, params:${JSON.stringify({errCode:e,data:t})}`),0==e){if(2!==t.state.value)return void __Rtc.CRRTCMedia.ICECallback.notifyStartPlayMedia(t);t.state=t.state.value;const e=q.allMemberInfo.find((e=>e.termId==t.termid));this.mediaShareInfo.userID=e?e.userId:"",this.mediaShareInfo.state=t.state,this.mediaShareInfo.mediaName=t.mediaName}},pausePlayMediaRslt:e=>{console.crlog(`[Media] ICE Callback --\x3e pausePlayMediaRslt, params:${JSON.stringify({errCode:e})}`)},subscribeMediaRslt:e=>{console.crlog(`[Media] ICE Callback --\x3e subscribeMediaRslt, params:${JSON.stringify({errCode:e})}`)}}}initSDKInterface(){window.CRVideo_StartPlayMedia=(e,t,i,n)=>{if(console.crlog(`[Media] CRVideo_StartPlayMedia(${e},${t},${i},${n})`),!e||!e._id)return console.crlog("[Media] Start play media fail, did not create mediaObj"),0;if(this.container=e,this.container._userID=q.userInfo.userId,this.isLocalPlay=void 0!==i&&!!i,this.bPauseWhenFinished=void 0===n?0:n,!MediaSource&&!t)return console.crlog("[Media] Start play media fail, the File object is not audio or video"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;try{if(t instanceof File){if("Chrome"==__Rtc.CRBrowser.curBrowserCfg.name||"Edg"==__Rtc.CRBrowser.curBrowserCfg.name){if(!/(.mp3|.mkv|.mp4|.webm)$/.test(t.name))return console.crlog("[Media] Start play media fail, Chrome does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}else if("Firefox"==__Rtc.CRBrowser.curBrowserCfg.name){if(!/(.mp3|.mp4|.webm)$/.test(t.name))return console.crlog("[Media] Start play media fail, Firefox does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}else if("Safari"==__Rtc.CRBrowser.curBrowserCfg.name&&!/(.mp3|.mp4)$/.test(t.name))return console.crlog("[Media] Start play media fail, Safari does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;/(.mp3)$/.test(t.name)&&(this.mediaFileInfo.isAudioFile=!0),this.mediaFileInfo.FileObj=t,this.mediaFileInfo.name=t.name,this.mediaFileInfo.url=URL.createObjectURL(t)}else{if("string"!=typeof t)return console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;this.mediaFileInfo.name=t.match(/[^/]+(?!.*\/)/),this.mediaFileInfo.url=t}const e=this.container._videoEle;return e.loop=2==this.bPauseWhenFinished,e.srcObject=null,e.src=this.mediaFileInfo.url,setTimeout((()=>{e.click(),e.play()}),100),e.onplaying=()=>{console.crlog("[Media] Video event: onplaying"),q.isMeeting&&!this.isLocalPlay&&!this.ispaused&&__Rtc.CRICEAPI.StartPlayMedia(this.mediaFileInfo.name),this.ispaused=!1,this.pausePlayMedia(!1)},e.onpause=()=>{console.crlog("[Media] Video event: onpause"),this.ispaused=!0,this.pausePlayMedia(!0)},e.onended=()=>{console.crlog("[Media] Video event: onended"),this.ispaused=!1,0==this.bPauseWhenFinished&&this.endMediaPlay()},e.onerror=e=>{console.crlog(`[Media] Video event: error, ${e}`)},1}catch(e){return console.crlog(`[Media] Start play media fail, err: ${e}`),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}},window.CRVideo_PausePlayMedia=e=>{console.crlog(`[Media] CRVideo_PausePlayMedia(${e})`),this.pausePlayMedia(e)},window.CRVideo_StopPlayMedia=()=>{console.crlog("[Media] CRVideo_StopPlayMedia()"),this.endMediaPlay()},window.CRVideo_SetMediaplaypos=e=>{console.crlog(`[Media] CRVideo_SetMediaplaypos(${e}`),this.container&&(this.container._videoEle.currentTime=e/1e3),console.crlog(`[Media] CRVideo_NotifyPlayPosSetted.target(${e})`),CRVideo_NotifyPlayPosSetted.target(e)},window.CRVideo_SetMediaVolume=e=>{console.crlog(`[Media] CRVideo_SetMediaVolume(${e})`);const t=this.container._videoEle;t&&(t.volume=e/100,t.muted=!1)},window.CRVideo_GetMediaInfo=()=>{const e={};return e.userID=this.mediaShareInfo.userID,e.mediaName=this.mediaShareInfo.mediaName,e.state=this.mediaShareInfo.state,console.crlog(`[Media] CRVideo_GetMediaInfo(), return: ${JSON.stringify(e)}`),e},window.CRVideo_Getmediainfo=window.CRVideo_GetMediaInfo,window.CRVideo_GetMediaImg=(e,t)=>{console.crlog(`[Media] CRVideo_GetMediaImg(${e},${t})`);const i=document.createElement("canvas"),n=this.container._videoEle;if(!n)return{dat,width,height};i.width=n.videoWidth,i.height=n.videoHeight,i.getContext("2d").drawImage(n,0,0,i.width,i.height);return{dat:i.toDataURL("image/"+t||0),width:i.width,height:i.height}},window.CRVideo_SetMediaCfg=e=>{try{console.crlog(`[Media] CRVideo_SetMediaCfg(${JSON.stringify(e)})`)}catch(e){console.error(e),console.crlog(`[Media] ${e.toString()}`)}void 0===e.size||null!==e.size&&!e.size.includes("*")||(this.mediaCfg.size=e.size),void 0!==e.maxKbps&&(this.mediaCfg.userSetMaxKbps=e.maxKbps),void 0!==e.fps&&(this.mediaCfg.fps=e.fps)},window.CRVideo_GetMediaCfg=()=>({size:this.mediaCfg.size,fps:this.mediaCfg.fps,maxKbps:this.mediaCfg.userSetMaxKbps})}updateMediaShareInfo(){console.crlog("[Media] Update media share info"),__Rtc.CRICEAPI.GetMediaInfo()}pausePlayMedia(e){this.container&&(e?(this.container._videoEle.click(),this.container._videoEle.pause(),this.isLocalPlay||__Rtc.CRICEAPI.PausePlayMedia(!0)):(this.container._videoEle.click(),this.container._videoEle.play(),this.isLocalPlay||__Rtc.CRICEAPI.PausePlayMedia(!1)))}endMediaPlay(){this.container&&this.container._videoEle&&(this.container._videoEle.pause(),this.container._videoEle.src=null,this.container._videoEle.srcObject=null,this.container._videoEle.onplay=null,this.container._videoEle.onplaying=null,this.container._videoEle.onpause=null,this.container._videoEle.onended=null,this.container._videoEle.onerror=null,this.container=null),this.isLocalPlay||__Rtc.CRICEAPI.StopPlayMedia(),this.ispaused=!1,clearInterval(this.canvasDrawTimer)}getBaseStream(e){let t=null;if(this.container){const i=this.container._videoEle,n=__Rtc.CRBrowser.curBrowserCfg;if("audio"==e){console.crlog("[Media] Capture media audio stream from video element...");try{"captureStream"in i?t=i.captureStream():"mozCaptureStream"in i?t=i.mozCaptureStream():"webkitCaptureStream"in i&&(t=i.webkitCaptureStream())}catch(e){console.crlog(`[Media][Error] Get media audio base stream fail: ${e}`),console.error(e)}}else if("Safari"!==n.name&&"Chrome"==n.name&&n.ver<88||"Edg"==n.name&&n.ver<88){console.crlog("[Media] Capture media video stream from video element...");try{"captureStream"in i?t=i.captureStream():"mozCaptureStream"in i?t=i.mozCaptureStream():"webkitCaptureStream"in i&&(t=i.webkitCaptureStream())}catch(e){console.crlog(`[Media][Error] Get media video base stream fail: ${e}`),console.error(e)}}else{console.crlog("[Media] Capture media video base stream from canvas element...");try{const e=this.container._videoEle,i=document.createElement("canvas");if(i.style.height="1px",i.style.width="1px",this.container._handler.appendChild(i),i.width=e.videoWidth,i.height=e.videoHeight,null!=this.mediaCfg.size)try{let e=+this.mediaCfg.size.split("*")[0],t=+this.mediaCfg.size.split("*")[1];i.width=e,i.height=t}catch(e){console.error(e)}this.mediaCfg.defMaxKbps=function(e){try{const t=e.split("*")[0],i=e.split("*")[1];for(let e=0;e<H.length;e++)if(t*i<=H[e].size)return H[e];return{size:2073600,defaultKbps:2e3,maxKbps:4e3}}catch(e){return console.error(e),{size:2073600,defaultKbps:2e3,maxKbps:4e3}}}(`${i.width}*${i.height}`).maxKbps;const n=null==this.mediaCfg.fps?25:this.mediaCfg.fps;console.crlog(`[Media] width:${i.width}, height:${i.height}, fps:${n}, defMaxKbps:${this.mediaCfg.defMaxKbps}, userMaxKbps:${this.mediaCfg.userSetMaxKbps}`),this.canvasDrawTimer=setInterval((()=>{i.getContext("2d").drawImage(e,0,0,i.width,i.height)}),1e3/n),t=i.captureStream(n)}catch(e){console.error(e)}}}return t||console.crlog("[Media][Error] Your browser does NOT supports pre-recorded media streaming!"),t}audioAllocRawExt2(e,t,i,n){const r=t.codecType.name;console.crlog(`[Media] Local media audio, audioAllocRawExt2... (codeType:${r}, liteice:${i.get("liteice")||"0"}, rtc_streamid:${i.get("rtc_streamid")||null})`);const o=this.localMediaAudioConnection,s=`[Media] MSID:${o.msid}, Local media audio RTCPeerConnection,`;o.type="sendonly",o.logStr=s,o.offer_cb=e,o.offer_cb.isResponsed=!1,o.codeType=r,o.liteice=i.get("liteice")||"0",o.asParam=t,o.rtc_streamid=i.get("rtc_streamid")||null,o.rtc_eid=i.get("rtc_eid")||null,o.HashMap=new K.HashMap,o.caComplete=!1;const a=this.getBaseStream("audio");if(!a)return;console.crlog(`${s} new RTCPeerConnection...`);const c="1"===o.liteice?new RTCPeerConnection:new RTCPeerConnection(q.rtcCfg);o.connection=c,console.crlog("[Media] New MediaStream()");const l=new MediaStream;if(a.getTracks().forEach((e=>{"audio"==e.kind&&(console.crlog("[Media] MediaStream add audioTrack"),l.addTrack(e))})),o.stream=l,console.crlog(`${s} addStream(${o.stream})`),0==a.getAudioTracks().length)return console.crlog(`${s} addTrack fail, base stream have not audio track`),console.crlog(`${s} offer_cb ice_response()...`),o.offer_cb.ice_response(),void(o.offer_cb.isResponsed=!0);c.addTrack(a.getAudioTracks()[0],l),console.crlog(`${s} createOffer()`),c.createOffer().then((e=>{console.crlog(`${s} createOffer success!`),e.sdp=this.modifyAudioOfferSDP(e.sdp,o),console.crlog(`${s} offer.sdp:\r\n${e.sdp}`),o.offer=e,console.crlog(`${s} offer setLocalDescription(offer)`),c.setLocalDescription(e).then((e=>{if(console.crlog(`${s} offer setLocalDescription success!`),o.rtc_streamid&&(!o.offer_cb.isResponsed&&console.crlog(`${s} ice_response(${o.msid}, new Ice.HashMap())`),!o.offer_cb.isResponsed&&o.offer_cb.ice_response(o.msid,new K.HashMap),!o.offer_cb.isResponsed&&(o.offer_cb.isResponsed=!0),o.HashMap.set("sdp",o.offer.sdp),o.HashMap.set("rtc_streamid",o.rtc_streamid),o.HashMap.set("rtc_mode","push"),o.HashMap.set("rtc_eid",o.rtc_eid)),"1"===o.liteice&&this.RtcGwAudioAlloc2(o),"1"===o.liteice){console.crlog(`${s} offer_cb ice_response(${o.msid}, HashMap) without candidates on liteice === '1' ...`);const e=new K.HashMap;e.set("sdp",o.offer.sdp),o.offer_cb.ice_response(o.msid,e),o.offer_cb.isResponsed=!0}})).catch((e=>{console.crlog(`${s} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${s} createOffer fail! ${e}`),console.error(e)})),c.onicecandidate=e=>{"1"===o.liteice||o.caComplete||(console.crlog(`${s} onicecandidate: ${JSON.stringify(e.candidate)}`),e.candidate?o.candidates.push(e.candidate):o.caComplete=!0,o.caComplete&&this.iceResponse(o),setTimeout((()=>{o.caComplete||(o.caComplete=!0,this.iceResponse(o))}),300))},c.oniceconnectionstatechange=e=>{console.crlog(`${s} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),o&&o.iceConnectionState&&"completed"==o.iceConnectionState&&setTimeout((()=>{o.answer_cb&&!o.answer_cb.isResponsed&&(console.crlog(`${s} answer_cb ice_response()...`),o.answer_cb.ice_response(),o.answer_cb.isResponsed=!0)}),500)},c.onconnectionstatechange=e=>{const t=e.currentTarget.connectionState;console.crlog(`${s} onconnectionstatechange, connectionState: ${t}`),"connected"==t||"disconnected"!=t&&"failed"!=t||"failed"==t&&("connected"!=c.lastState&&"connecting"!=c.lastState||(console.crlog(`${s} connection state failed!`),setTimeout((()=>{__Rtc.CRICEAPI.MediaConnectionBreakReport(o.msid)}),1e3))),c.lastState=t},c.onsignalingstatechange=e=>{console.crlog(`${s} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}RtcGwAudioAlloc2(e){const t=e.logStr;console.crlog(`${t} request GwAudioAlloc2(asParam, HashMap)`),A.Z.GwAudioAlloc2(e.asParam,e.HashMap).then((i=>{if(i.answerSdp){console.crlog(`${t} request GwAudioAlloc2 success...`);const n={type:"answer",sdp:this.modifyAudioAnswerSDP(i.answerSdp,"sendonly")};e.answer=n,console.crlog(`${t} answer setRemoteDescription(answer)`),e.connection.setRemoteDescription(new RTCSessionDescription(n)).then((e=>{console.crlog(`${t} answer setRemoteDescription success!`)})).catch((e=>{console.crlog(`${t} answer setRemoteDescription fail! ${e}`),console.error(e)}))}})).catch((e=>{console.error(e)}))}videoAllocRawExt2(e,t,i,n){console.crlog(`[Media] VideoAllocRawExt2... cameraID:${t.cameraID},srcSelf:${i},rtc_streamid:${n.get("rtc_streamid")||null},liteice:${n.get("liteice")}`),setTimeout((()=>{e.isResponsed||(console.crlog("[Media] Media share connection gather candidates, waited more than 10s, do cb.ice_response()"),e.ice_response(),e.isResponsed=!0)}),1e4),i?this.setLocalMediaVideoConnection(e,t,n):this.setRemoteMediaConnection(e,t,n)}modifyPeerAddrExt(e,t,i,n){const r={type:"answer",sdp:n.get("sdp")};"localMediaAudio"==e&&this.localMediaAudioModifyPeerAddrExt(t,i,r),"localMediaVideo"==e&&this.localMediaVideoModifyPeerAddrExt(t,i,r),"remoteMedia"==e&&this.remoteMediaModifyPeerAddrExt(t,i,r)}modifyAudioOfferSDP(e,t){let i=(e=(e=e.replace("a=sendrecv","a=sendonly")).replace("useinbandfec=1","useinbandfec=0")).split("\r\n"),n="opus";switch(t.codeType){case"ACT_OPUS":n="opus";break;case"ACT_PCMA":n="PCMA";break;case"ACT_ISAC":n="isac"}const r=i.find((e=>e.includes(n))).split(" ")[0].split(":")[1];i=i.filter((e=>!((e.includes("a=rtcp-fb")||e.includes("a=rtpmap")||e.includes("a=fmtp"))&&e.split(" ")[0].split(":")[1]!=r)));const o=i.findIndex((e=>e.includes("m=audio"))),s=[];i[o].split(" ").forEach(((e,t)=>{t<3&&s.push(e),t>=3&&!isNaN(e)&&e==r&&s.push(e)})),i[o]=s.join(" ");for(let e=0;e<i.length;e++){let t=i[e];if(!t.includes("nack")&&t.includes("a=rtpmap:")){let n=/a=rtpmap:(\d+)/,r=t.match(n)[1];i.splice(e+1,0,`a=rtcp-fb:${r} nack`)}t.includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete i[e]}return e=(e=i.join("\r\n")).replace("\r\n\r\n","\r\n")}modifyAudioAnswerSDP(e,t){const i=e.split("\r\n");for(let t=0;t<i.length;t++){let n=i[t];if(!e.includes("nack")&&n.includes("a=rtpmap:")){let e=/a=rtpmap:(\d+)/,r=n.match(e)[1];i.splice(t+1,0,`a=rtcp-fb:${r} nack`)}n.includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete i[t]}return e=(e=i.join("\r\n")).replace("\r\n\r\n","\r\n"),"sendonly"==t&&(e=e.replace("a=sendrecv","a=recvonly")),e}modifyVideoOfferSDP(e,t){const i=t.type,n=t.isVp8?"VP8":"H264",r=[];let o=e.split("\r\n");e.match(new RegExp(`(\\d+)(?=\\s+${n})`,"g")).forEach((e=>r.push(e.replace(` ${n}`,"")))),o=o.filter((e=>!((e.includes("a=rtcp-fb")||e.includes("a=rtpmap")||e.includes("a=fmtp"))&&!r.includes(e.split(" ")[0].split(":")[1]))));const s=o.findIndex((e=>e.includes("m=video"))),a=[];o[s].split(" ").forEach(((e,t)=>{t<3&&a.push(e),t>=3&&!isNaN(e)&&r.includes(e)&&a.push(e)})),o[s]=a.join(" ");for(let e=0;e<o.length;e++){o[e].includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete o[e]}let c=o.join("\r\n");if(i&&(c=c.replace("a=sendrecv",`a=${i}`)),"sendonly"==i){let e=this.mediaCfg.userSetMaxKbps?this.mediaCfg.userSetMaxKbps:this.mediaCfg.defMaxKbps;console.crlog(`${t.logStr} b=AS:${e}`),c=c.replace("c=IN IP4 0.0.0.0",`c=IN IP4 0.0.0.0\r\nb=AS:${e}`)}for(;c.includes("\r\n\r\n");)c=c.replace("\r\n\r\n","\r\n");return c}modifyVideoAnswerSDP(e,t){let i=e.split("\r\n");for(let e=0;e<i.length;e++){i[e].includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete i[e]}for(e=i.join("\r\n");e.includes("\r\n\r\n");)e=e.replace("\r\n\r\n","\r\n");const n=e.match(/c=IN IP4(.*?)\r\n/)?e.match(/c=IN IP4(.*?)\r\n/)[0]:"",r=e.match(/b=AS:(.*?)\r\n/)?e.match(/b=AS:(.*?)\r\n/)[0]:"";if(n&&e.split(n).length>2&&(e=e.replace(`${n}${r}`,"")),"sendonly"==t){let t=this.mediaCfg.userSetMaxKbps?this.mediaCfg.userSetMaxKbps:this.mediaCfg.defMaxKbps;e=e.replace("profile-level-id=42001f",`x-google-min-bitrate=${Math.round(t/4)};x-google-start-bitrate=${Math.round(t/2)};x-google-max-bitrate=${Math.round(t)};`)}else e=e.replace("a=sendrecv","a=sendonly");return e}setLocalMediaVideoConnection(e,t,i){let n;n=1e4==t.cameraID?this.localMediaVideoConnection_VP8:this.localMediaVideoConnection_H264;const r=this.getBaseStream();if(!r)return;const o=`[Media] MSID:${n.msid}, Local media video RTCPeerConnection,`;n.type="sendonly",n.logStr=o,n.offer_cb=e,n.offer_cb.isResponsed=!1,n.isVp8=1e4==t.cameraID,n.liteice=i.get("liteice")||"0",n.vsParam=t,n.rtc_streamid=i.get("rtc_streamid")||null,n.rtc_eid=i.get("rtc_eid")||null,n.rtc_mode="push",n.HashMap=new K.HashMap,n.caComplete=!1,console.crlog(`${o} new RTCPeerConnection...`);const s="1"===n.liteice?new RTCPeerConnection:new RTCPeerConnection(q.rtcCfg);n.connection=s,console.crlog("[Media] New MediaStream()");const a=new MediaStream;if(r.getTracks().forEach((e=>{console.crlog("[Media] MediaStream add videoTrack"),"video"==e.kind&&a.addTrack(e)})),n.stream=a,console.crlog(`${o} addStream(localMediaVideoStream)`),0==r.getVideoTracks().length)return console.crlog(`${o} addTrack fail, base stream have not video track (mp3?)`),console.crlog(`${o} offer_cb ice_response()...`),n.offer_cb.ice_response(),void(n.offer_cb.isResponsed=!0);s.addTrack(r.getVideoTracks()[0],a),console.crlog(`${o} createOffer()`),s.createOffer().then((e=>{console.crlog(`${o} createOffer success!`),e.sdp=this.modifyVideoOfferSDP(e.sdp,n);let t=" ";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+=" H264"),console.crlog(`${o} offer.sdp - ${t}\r\n${e.sdp}`),n.offer=e,console.crlog(`${o} offer setLocalDescription(offer)`),s.setLocalDescription(e).then((e=>{console.crlog(`${o} offer setLocalDescription success!`),n.rtc_streamid&&(!n.offer_cb.isResponsed&&console.crlog(`${o} ice_response(${n.msid}, new Ice.HashMap())`),!n.offer_cb.isResponsed&&n.offer_cb.ice_response(n.msid,new K.HashMap),!n.offer_cb.isResponsed&&(n.offer_cb.isResponsed=!0),n.HashMap.set("sdp",n.offer.sdp),n.HashMap.set("rtc_streamid",n.rtc_streamid),n.HashMap.set("rtc_mode","push"),n.HashMap.set("rtc_eid",n.rtc_eid)),"1"===n.liteice&&this.RtcGwVideoAlloc2(n)})).catch((e=>{console.crlog(`${o} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${o} createOffer fail! ${e}`),console.error(e)})),s.onicecandidate=e=>{"1"===n.liteice||n.caComplete||(console.crlog(`${o} onicecandidate: ${JSON.stringify(e.candidate)}`),e.candidate?n.candidates.push(e.candidate):n.caComplete=!0,n.caComplete&&this.iceResponse(n),setTimeout((()=>{n.caComplete||(n.caComplete=!0,this.iceResponse(n))}),300))},s.oniceconnectionstatechange=e=>{console.crlog(`${o} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),n&&n.iceConnectionState&&"completed"==n.iceConnectionState&&setTimeout((()=>{n.answer_cb&&!n.answer_cb.isResponsed&&(console.crlog(`${o} answer_cb ice_response()...`),n.answer_cb.ice_response(),n.answer_cb.isResponsed=!0)}),500)},s.onconnectionstatechange=e=>{const t=e.currentTarget.connectionState;if(console.crlog(`${o} onconnectionstatechange, connectionState: ${t}`),"connected"==t){n.lastBytesSent=0,clearInterval(n.rtpLogTimer);let e=()=>{s.getStats().then((e=>{e.forEach((e=>{"outbound-rtp"==e.type&&(n.width=e.frameWidth,n.height=e.frameHeight,n.frameRate=e.framesPerSecond,n.codeRate=(e.bytesSent-n.lastBytesSent)/2e3,n.lastBytesSent=e.bytesSent)}))}))};e(),n.rtpLogTimer=setInterval(e,2e3)}else"disconnected"!=t&&"failed"!=t||(clearInterval(n.rtpLogTimer),"failed"==t&&("connected"!=s.lastState&&"connecting"!=s.lastState||(console.crlog(`${o} connection state failed!`),setTimeout((()=>{__Rtc.CRICEAPI.MediaConnectionBreakReport(n.msid)}),1e3))));s.lastState=t},s.onsignalingstatechange=e=>{console.crlog(`${o} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}setRemoteMediaConnection(e,t,i){const n=this.remoteMediaConnection,r=`[Media] MSID:${this.remoteMediaMSID}, remoteMediaConnection`;n.type="recvonly",n.logStr=r,n.offer_cb=e,n.offer_cb.isResponsed=!1,n.isVp8=1e4==t.cameraID,n.liteice=i.get("liteice")||"0",n.vsParam=t,n.rtc_streamid=i.get("rtc_streamid")||null,n.rtc_mode="play",n.rtc_eid=i.get("rtc_eid")||null,n.HashMap=new K.HashMap,n.caComplete=!1,console.crlog(`${r} new RTCPeerConnection...`);const o="1"===n.liteice?new RTCPeerConnection:new RTCPeerConnection(q.rtcCfg);n.connection=o;const s={offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1};console.crlog(`${r} createOffer(${JSON.stringify(s)})`),o.createOffer(s).then((e=>{console.crlog(`${r} createOffer success! `),e.sdp=this.modifyVideoOfferSDP(e.sdp,n);let t=" ";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+=" H264"),console.crlog(`${r} offer.sdp - ${t}\r\n${e.sdp}`),n.offer=e,console.crlog(`${r} offer setLocalDescription(offer)`),o.setLocalDescription(e).then((()=>{console.crlog(`${r} offer setLocalDescription success!`),n.rtc_streamid&&(!n.offer_cb.isResponsed&&console.crlog(`${r} ice_response(${n.msid}, new Ice.HashMap())`),!n.offer_cb.isResponsed&&n.offer_cb.ice_response(n.msid,new K.HashMap),!n.offer_cb.isResponsed&&(n.offer_cb.isResponsed=!0),n.HashMap.set("sdp",n.offer.sdp),n.HashMap.set("rtc_streamid",n.rtc_streamid),n.HashMap.set("rtc_mode","play"),n.HashMap.set("rtc_eid",n.rtc_eid),"1"===n.liteice&&this.RtcGwVideoAlloc2(n))})).catch((e=>{console.error(`${r} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${r} createOffer fail! ${e}`),console.error(e)})),o.onicecandidate=e=>{"1"===n.liteice||n.caComplete||(console.crlog(`${r} onicecandidate: ${JSON.stringify(e.candidate)}`),e.candidate?n.candidates.push(e.candidate):n.caComplete=!0,n.caComplete&&this.iceResponse(n),setTimeout((()=>{n.caComplete||(n.caComplete=!0,this.iceResponse(n))}),300))},o.oniceconnectionstatechange=e=>{console.crlog(`${r} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),n.connection&&n.connection.iceConnectionState&&"completed"==n.connection.iceConnectionState&&setTimeout((function(){n.answer_cb&&!n.answer_cb.isResponsed&&(console.crlog(`${r} answer_cb ice_response()...`),n.answer_cb.ice_response(),n.answer_cb.isResponsed=!0)}),500)},o.ontrack=e=>{console.crlog(`${r} ontrack!`),console.crlog(`${r}, video stream:${e.streams[0].id}`),n.stream=e.streams[0],this.refreshContainerSrc()},o.onconnectionstatechange=e=>{const t=e.currentTarget.connectionState;if(console.crlog(`${r} onconnectionstatechange, connectionState: ${t}`),"connected"==t){n.lastBytesReceived=0,n.codeRate=0,n.width=0,n.height=0,n.frameRate=0,n.lastPacketsLost=0,n.lastPacketsReceived=0,n.packetsLostRate=0,clearInterval(n.rtpLogTimer);let e=()=>{o.getStats().then((e=>{e.forEach((e=>{if("inbound-rtp"==e.type){n.codeRate=(e.bytesReceived-n.lastBytesReceived)/2e3,n.lastBytesReceived=e.bytesReceived,n.width=e.frameWidth,n.height=e.frameHeight,n.frameRate=e.framesPerSecond;let t=e.packetsLost-n.lastPacketsLost,i=e.packetsReceived-n.lastPacketsReceived;n.packetsLostRate=t<0?0:parseInt(t/(i+t)*1e4)/1e4,n.lastPacketsLost=e.packetsLost,n.lastPacketsReceived=e.packetsReceived}}))}))};e(),n.rtpLogTimer=setInterval(e,2e3)}else"disconnected"!=t&&"failed"!=t||(clearInterval(n.rtpLogTimer),"failed"==t&&("connected"!=o.lastState&&"connecting"!=o.lastState||(console.crlog(`${r} connection state failed!`),setTimeout((()=>{__Rtc.CRICEAPI.MediaConnectionBreakReport(n.msid)}),1e3))));o.lastState=t},o.onsignalingstatechange=e=>{console.crlog(`${r} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}iceResponse(e){const t=e.logStr;"1"===e.liteice?(console.crlog(`${t} response without candidates when liteice === '1'`),e.rtc_streamid?(e.vsParam&&this.RtcGwVideoAlloc2(e),e.asParam&&this.RtcGwAudioAlloc2(e)):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog(`${t} offer_cb ice_response(${e.msid}, HashMap)`),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0))):(e.HashMap.set("icecandidate",JSON.stringify(e.candidates)),console.crlog(`${t} response candidates(${e.candidates.length}): ${JSON.stringify(e.candidates)}`),e.rtc_streamid?(e.vsParam&&this.RtcGwVideoAlloc2(e),e.asParam&&this.RtcGwAudioAlloc2(e)):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog(`${t} offer_cb ice_response(${e.msid}, HashMap)`),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0)))}localMediaVideoModifyPeerAddrExt(e,t,i){let n;n=t==this.localMediaVideoConnection_H264.msid?this.localMediaVideoConnection_H264:this.localMediaVideoConnection_VP8,n.answer_cb=e;const r=n.logStr,o=n.connection;i.sdp=this.modifyVideoAnswerSDP(i.sdp,"sendonly");let s=" ";i.sdp.includes("VP8")&&(s+="VP8"),i.sdp.includes("H264")&&(s+=" H264"),console.crlog(`${r} ModifyPeerAddrExt, answerSDP - ${s}\r\n${i.sdp}`),n.answer=i,console.crlog(`${r} answer setRemoteDescription(answer)`),o.setRemoteDescription(new RTCSessionDescription(i)).then((e=>{console.crlog(`${r} answer setRemoteDescription success!`),window.videoResolutionReport(n.msid,"media")})).catch((e=>{console.crlog(`${r} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{n.answer_cb&&!n.answer_cb.isResponsed&&(console.crlog(`${r} answer_cb ice_response()...`),n.answer_cb.ice_response(),n.answer_cb.isResponsed=!0)}),500)}localMediaAudioModifyPeerAddrExt(e,t,i){this.localMediaAudioConnection.answer_cb=e;const n=this.localMediaAudioConnection.logStr,r=this.localMediaAudioConnection.connection;i.sdp=i.sdp.replace("a=sendrecv","a=recvonly"),console.crlog(`${n} ModifyPeerAddrExt, answerSDP:\r\n${i.sdp}`),this.localMediaAudioConnection.answer=i,console.crlog(`${n} answer setRemoteDescription(answer)`),r.setRemoteDescription(new RTCSessionDescription(i)).then((e=>{console.crlog(`${n} answer setRemoteDescription success!`)})).catch((e=>{console.crlog(`${n} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{this.localMediaAudioConnection.answer_cb.isResponsed||(console.crlog(`${n} answer_cb ice_response()...`),this.localMediaAudioConnection.answer_cb.ice_response(),this.localMediaAudioConnection.answer_cb.isResponsed=!0)}),500)}remoteMediaModifyPeerAddrExt(e,t,i){this.remoteMediaConnection.answer_cb=e;const n=this.remoteMediaConnection.logStr,r=this.remoteMediaConnection.connection;i.sdp=this.modifyVideoAnswerSDP(i.sdp,"recvonly");let o=" ";i.sdp.includes("VP8")&&(o+="VP8"),i.sdp.includes("H264")&&(o+=" H264"),console.crlog(`${n} ModifyPeerAddrExt, answerSDP - ${o}\r\n${i.sdp}`),this.remoteMediaConnection.answer=i,console.crlog(`${n} answer setRemoteDescription(answer)`),r.setRemoteDescription(new RTCSessionDescription(i)).then((e=>{console.crlog(`${n} answer setRemoteDescription success!`)})).catch((e=>{console.crlog(`${n} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{this.remoteMediaConnection.answer_cb&&!this.remoteMediaConnection.answer_cb.isResponsed&&(console.crlog(`${n} answer_cb ice_response()...`),this.remoteMediaConnection.answer_cb.ice_response(),this.remoteMediaConnection.answer_cb.isResponsed=!0)}),500)}RtcGwVideoAlloc2(e){const t=e.logStr;console.crlog(`${t} request GwVideoAlloc2(vsParam, HashMap)`),A.Z.GwVideoAlloc2(e.vsParam,e.HashMap).then((i=>{if(i.answerSdp){console.crlog(`${t} request GwVideoAlloc2 success...`);const n={type:"answer",sdp:i.answerSdp};n.sdp=this.modifyVideoAnswerSDP(n.sdp,e.type),e.answer=n;let r=" ";n.sdp.includes("VP8")&&(r+="VP8"),n.sdp.includes("H264")&&(r+=" H264"),console.crlog(`${t} received answer sdp:${n.sdp.length} ${r}`),console.crlog(`${n.sdp}`),console.crlog(`${t} setRemoteDescription(answer)`),e.connection.setRemoteDescription(new RTCSessionDescription(n)).then((()=>{console.crlog(`${t} setRemoteDescription success!`)})).catch((e=>{console.crlog(`${t} setRemoteDescription fail! ${e}`),console.error(e)}))}})).catch((e=>{console.error(e)}))}refreshContainerSrc(){try{if(this.container&&this.container._userID!==q.userInfo.userId){const e=this.container._videoEle;console.crlog(`${this.remoteMediaConnection.logStr} containerID:${this.container._id}, videoEle set srcObject...`),e.srcObject=this.remoteMediaConnection.stream,setTimeout((()=>{"Chrome"!==__Rtc.CRBrowser.curBrowserCfg.name&&e.srcObject&&"true"==e.srcObject.active&&(e.click(),e.play())}),2e3)}}catch(e){console.error(e)}}},window.__Rtc.CRRTCMedia=new window.__crMediaClass,window.CRVideo_NotifyMediaOpened=new q.CbProxy("CRVideo_NotifyMediaOpened"),window.CRVideo_NotifyMediaStart=new q.CbProxy("CRVideo_NotifyMediaStart"),window.CRVideo_NotifyMediaStop=new q.CbProxy("CRVideo_NotifyMediaStop"),window.CRVideo_NotifyMediaPause=new q.CbProxy("CRVideo_NotifyMediaPause"),window.CRVideo_NotifyPlayPosSetted=new q.CbProxy("CRVideo_NotifyPlayPosSetted"),window.CRVideo_NotifyMemberMediaData=new q.CbProxy("CRVideo_NotifyMemberMediaData");__webpack_require__(7331),__webpack_require__(1955);var G=__webpack_require__(246),z=__webpack_require__(5273);const J=window.Ice;const Q=new class{constructor(){this._initData()}_initData(){this._proxyString="",this._ic=null,this._proxy=null,this._adapter=null,this._connection=null,this.serverPrx=null,this.isConnected=!1}_initializationData(){const e=new J.InitializationData;return e.properties=J.createProperties(),e.properties.setProperty("Ice.Trace.Network","0"),e.properties.setProperty("Ice.Trace.Protocol","0"),e.properties.setProperty("Ice.ACM.Client","0"),e.properties.setProperty("Ice.ACM.Server","0"),e.properties.setProperty("Ice.Default.EncodingVersion","1.0"),J.initialize(e)}getProxyString(){const e=t.Z.server.wbServer;let i=e.split(":")[0],n=e.split(":")[1];if(n&&n.indexOf("sig")>-1){let e=parseInt(n.split("/sig/")[0]),t="/sig/"+n.split("/sig/")[1];this._proxyString=`WhiteBoardServer:wss -r ${t} -h ${i} -p ${e}`}}createConnection(e){console.crlog("[BoardV2] Server createConnection..");const t=new Promise(((t,i)=>{this.getProxyString(),this._ic=this._initializationData(),console.crlog(`[BoardV2] ServerProxy: ${this._proxyString}`),this._proxy=this._ic.stringToProxy(this._proxyString),WhiteBoard.WhiteBoardCtrl2_V4Prx.checkedCast(this._proxy).then((n=>{this.serverPrx=n,this._ic.createObjectAdapter("").then((n=>{this._adapter=n,n.add(new e,this._ic.stringToIdentity("WhiteBoardClient")),n.activate();const r=this.serverPrx.ice_getCachedConnection();return null!=r?(this._connection=r,r.setAdapter(n),this.isConnected=!0,t()):(console.crlog("[BoardV2] Server whiteBoard connection, ice_getCachedConnection is null!"),i(window.__Rtc.CRCONFERR.Parse()))})).exception((e=>(console.crlog(`[BoardV2] Server createObjectAdapter fail! ${e.toString()}`),i(window.__Rtc.CRCONFERR.Parse(e)))))})).exception((e=>(console.crlog(`[BoardV2] Server checkedCast fail! ${e.toString()}`),i(window.__Rtc.CRCONFERR.Parse(e)))))}));return t}destroyConnect(){return new Promise(((e,t)=>{console.crlog("[BoardV2] Server destroyConnect..."),this._ic&&this._ic.destroy&&this._ic.destroy().then((()=>(this._initData(),e())))}))}},Z=Q;const X=new class{constructor(){}handlers={};addEventListener(e,t){e in this.handlers||(this.handlers[e]=[]),this.handlers[e].push(t)}dispatchEvent(e,...t){if(!(e in this.handlers))return new Error("");this.handlers[e].forEach((e=>{try{e(...t)}catch(e){console.error(e)}}))}removeEventListener(e,t){if(!(e in this.handlers))return new Error("");if(t){const i=this.handlers[e].findIndex((e=>e===t));if(-1===i)return new Error("");this.handlers[e].splice(i,1),0===this.handlers[e].length&&delete this.handlers[e]}else delete this.handlers[e]}},Y=window.Ice;const ee=new class{constructor(){this.serverPrx=null,this.sessionID="",this.heartBeatTimer=-1,this.initCallback(),this.noLog=["heartBeat","appendShapeDat","notifyAppendShapeDat","notifyCurrentPos","setCurrentPos"]}initCallback(){const e=this;this.IceCallback=Y.Class(WhiteBoard.WhiteBoardCtrl2_V4,{sendCmd_async(...t){(null==e.noLog||!e.noLog.includes(t[2]))&&console.crlog(`[BoardV2] Ice Notify: ${t[2]}, ${t[3]}`),t[0].ice_response("",[]),X.dispatchEvent(t[2],JSON.parse(t[3]),t[4])}})}sendCmd(e,t={}){return new Promise(((i,n)=>{if(!this.serverPrx)return n({errCode:202,errDesc:""});"login"!=e&&null==t.sessionID&&this.sessionID&&(t.sessionID=this.sessionID),(null==this.noLog||!this.noLog.includes(e))&&console.crlog(`[BoardV2] Ice request: ${e} - ${JSON.stringify(t)}`),this.serverPrx.sendCmd("WhiteBoardCtrl2",e,JSON.stringify(t),null,null,null).then((t=>((null==this.noLog||!this.noLog.includes(e))&&console.crlog(`[BoardV2] Ice request: ${e} - success!`),i(t)))).exception((t=>((null==this.noLog||!this.noLog.includes(e))&&console.crlog(`[BoardV2] Ice request: ${e} - fail! ${t.toString()}`),n(t))))}))}login(e,t){return new Promise(((i,n)=>{const r=()=>{this.sendCmd("login",{confId:e,opId:t}).then((e=>{const t=JSON.parse(e).rslt;return this.sessionID=t.sessionId,console.crlog(`[BoardV2] SessionID:${this.sessionID}`),console.crlog("[BoardV2] Ice start to keep heartbeat..."),this.heartBeat(),clearInterval(this.heartBeatTimer),this.heartBeatTimer=setInterval((()=>{this.heartBeat()}),6e4),i(t.descs)})).catch((e=>n(window.__Rtc.CRCONFERR.Parse(e))))},o=()=>{Z.createConnection(this.IceCallback).then((()=>{this.serverPrx=Z.serverPrx,r()})).catch((e=>(console.crlog(`[BoardV2] Server create connect fail! ${e}`),n(window.__Rtc.CRCONFERR.Parse(e)))))};Z.isConnected?this.logout().then((()=>{o()})):o()}))}logout(){return new Promise(((e,t)=>{this.sendCmd("logout").then((()=>{Z.destroyConnect().then((()=>(this.serverPrx=null,console.crlog("[BoardV2] Ice stop heartbeat..."),clearInterval(this.heartBeatTimer),e())))})).catch((e=>t(window.__Rtc.CRCONFERR.Parse(e))))}))}heartBeat(){return new Promise(((e,t)=>{this.sendCmd("heartBeat").then((()=>e())).catch((e=>(console.crlog("[BoardV2] Heartbeat fail..."),console.crlog("[BoardV2] Ice stop heartbeat..."),clearInterval(this.heartBeatTimer),CRVideo.destroyMeetingConnect(),CRVideo_NotifyNetworkDelay.target(""),CRVideo_NetStateChanged.target(0),console.crlog(`[BoardV2] CRVideo_MeetingDropped.target(${CRVideo_ERR_DEF.SOCKETEXCEPTION})`),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SOCKETEXCEPTION),t(window.__Rtc.CRCONFERR.Parse(e)))))}))}create(e){return new Promise(((t,i)=>{this.sendCmd("create",{wb:e}).then((()=>t(e))).catch((e=>i(window.__Rtc.CRCONFERR.Parse(e))))}))}delete(e){return new Promise(((t,i)=>{this.sendCmd("delete",{wId:e}).then((()=>t())).catch((e=>i(window.__Rtc.CRCONFERR.Parse(e))))}))}queryAllBoardList(){return new Promise(((e,t)=>{this.sendCmd("queryAllBoardList").then((t=>e(t))).catch((e=>t(window.__Rtc.CRCONFERR.Parse(e))))}))}setExtInfo(e,t){return new Promise(((i,n)=>{this.sendCmd("setExtInfo",{wId:e,extInfo:t}).then((()=>i())).catch((e=>n(window.__Rtc.CRCONFERR.Parse(e))))}))}setCurrentWB(e){return new Promise(((t,i)=>{this.sendCmd("setCurrentWB",{wId:e}).then((()=>t())).catch((e=>i(window.__Rtc.CRCONFERR.Parse(e))))}))}queryShapeByIds(e,t){return new Promise(((i,n)=>{this.sendCmd("queryShapeByIds",{wId:e,pageIds:t}).then((e=>i(JSON.parse(e).rslt))).catch((e=>n(window.__Rtc.CRCONFERR.Parse(e))))}))}setScale(e,t){return new Promise(((i,n)=>{this.sendCmd("setScale",{wId:e,scale:t}).then((()=>i())).catch((e=>n(window.__Rtc.CRCONFERR.Parse(e))))}))}setCurrentPos(e,t,i){return new Promise(((n,r)=>{this.sendCmd("setCurrentPos",{wId:e,xPos:t,yPos:i}).then((e=>n())).catch((e=>r(window.__Rtc.CRCONFERR.Parse(e))))}))}addShape(e,t,i){return new Promise(((n,r)=>{this.sendCmd("addShape",{wId:e,page:t,shape:i}).then((()=>n())).catch((e=>r(window.__Rtc.CRCONFERR.Parse(e))))}))}appendShapeDat(e,t,i,n){return new Promise(((r,o)=>{this.sendCmd("appendShapeDat",{wId:e,page:t,sId:i,dat:n}).then((()=>r())).catch((e=>o(window.__Rtc.CRCONFERR.Parse(e))))}))}delShape(e,t){return new Promise(((i,n)=>{this.sendCmd("delShape",{wId:e,shapeIdsMap:t}).then((()=>i())).catch((e=>n(window.__Rtc.CRCONFERR.Parse(e))))}))}moveShape(e,t,i){return new Promise(((n,r)=>{this.sendCmd("moveShape",{wId:e,page:t,sPos:i}).then((e=>n())).catch((e=>r(window.__Rtc.CRCONFERR.Parse(e))))}))}modifyShapeAttr(e,t,i,n){return new Promise(((r,o)=>{this.sendCmd("modifyShapeAttr",{wId:e,page:t,sId:i,attr:n}).then((e=>r())).catch((e=>o(window.__Rtc.CRCONFERR.Parse(e))))}))}setPageDat(e,t){return new Promise(((i,n)=>{if(!this.serverPrx)return n({errCode:202,errDesc:""});const r=this.sessionID,o=new whiteBoard.WBPageData;for(var s in wbDesc)o[s]=t[s];console.crlog(`[BoardV2] Ice request: setPageDat - ${JSON.stringify(o)},${r}`),this.serverPrx.setPageDat(e,o,r).then((e=>(console.crlog("[BoardV2] Ice request: setPageDat - success!"),console.log("=================",e),i()))).exception((e=>(console.crlog(`[BoardV2] Ice request: setPageDat - fail! ${e.toString()}`),n(window.__Rtc.CRCONFERR.Parse(e)))))}))}modifyShape(e,t,i){return new Promise(((n,r)=>{if(!this.serverPrx)return r({errCode:202,errDesc:""});const o=this.sessionID,s=new whiteBoard.WBShapeData;for(var a in wbDesc)s[a]=i[a];console.crlog(`[BoardV2] Ice request: modifyShape - ${e},${t},${JSON.stringify(s)},${o}`),this.serverPrx.modifyShape(e,t,s,o).then((e=>(console.crlog("[BoardV2] Ice request: modifyShape - success!"),console.log("=================",e),n()))).exception((e=>(console.crlog(`[BoardV2] Ice request: modifyShape - fail! ${e.toString()}`),r(window.__Rtc.CRCONFERR.Parse(e)))))}))}setHotspot(e){return new Promise(((t,i)=>{if(!this.serverPrx)return i({errCode:202,errDesc:""});const n=this.sessionID,r=new whiteBoard.WBHotspot;for(var o in wbDesc)r[o]=e[o];console.crlog(`[BoardV2] Ice request: setHotspot - ${JSON.stringify(r)},${n}`),this.serverPrx.setHotspot(r,n).then((e=>(console.crlog("[BoardV2] Ice request: setHotspot - success!"),console.log("=================",e),t()))).exception((e=>(console.crlog(`[BoardV2] Ice request: setHotspot - fail! ${e.toString()}`),i(window.__Rtc.CRCONFERR.Parse(e)))))}))}getHotspot(){return new Promise(((e,t)=>{if(!this.serverPrx)return t({errCode:202,errDesc:""});const i=this.sessionID;console.crlog(`[BoardV2] Ice request: getHotspot - ${i}`),this.serverPrx.getHotspot(i).then((t=>(console.crlog("[BoardV2] Ice request: getHotspot - success!"),console.log("=================",t),e()))).exception((e=>(console.crlog(`[BoardV2] Ice request: getHotspot - fail! ${e.toString()}`),t(window.__Rtc.CRCONFERR.Parse(e)))))}))}};window.boardapi=ee;const te=ee,ie=window.CRVideo,ne=window.Ice;class re{constructor(e){this.boardID=e.wId,this.owner=e.owner,this.width=e.width,this.height=e.height,this.pageCount=e.pageCount,this.pageMode=null!=e.extProperty.show_multi_page?parseInt(e.extProperty.show_multi_page):0,this.scale=e.scale,this.extInfo=e.extInfo}}class oe{constructor({wId:e=ne.generateUUID(),owner:t=ie.userInfo.userId,width:i,height:n,wType:r=0,imgType:o=0,pageCount:s=1,xPos:a=0,yPos:c=0,scale:l=100,extInfo:d="",show_multi_page:u=0}){this.wId=e,this.owner=t,this.wType=r,this.imgType=o,this.width=i,this.height=n,this.pageCount=s,this.xPos=a,this.yPos=c,this.scale=l,this.extInfo=d,this.extProperty={show_multi_page:u}}}const se=new class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[BoardV2] initData..."),this.heartBeatTimer=-1,this.wbDescList=[],this.viewList=[],this.curWB=""}initIceCallback(){this.notifyInitBoardListCallback=new ie.CbProxy("CRBoard_NotifyInitBoardList"),this.notifyCreateBoardCallback=new ie.CbProxy("CRBoard_NotifyCreateBoard"),this.notifyCloseBoardCallback=new ie.CbProxy("CRBoard_NotifyCloseBoard"),this.notifyBoardExinfoUpdatedCallback=new ie.CbProxy("CRBoard_NotifyBoardExinfoUpdated"),this.notifyCurrentBoardCallback=new ie.CbProxy("CRBoard_NotifyCurrentBoard"),this.notifyBoardScaleCallback=new ie.CbProxy("CRBoard_NotifyBoardScale"),X.addEventListener("notifyCreate",(e=>{null==e.wb.shapeList&&(e.wb.shapeList=[]),this.wbDescList.push(e.wb),this.notifyCreateBoardCallback.target(new re(e.wb),e.opId)})),X.addEventListener("notifySetPageDat",(e=>{console.log("----- notifySetPageDat -----",e)})),X.addEventListener("notifyDelete",(e=>{let t=this.wbDescList.findIndex((t=>t.wId==e.wId));-1!=t&&this.wbDescList.splice(t,1),this.notifyCloseBoardCallback.target(e.wId,e.opId)})),X.addEventListener("notifyCurrentWB",(e=>{0==this.wbDescList.length?(this.curWB="",this.notifyCurrentBoardCallback.target("",e.opId)):(this.curWB=e.wId||"",this.notifyCurrentBoardCallback.target(e.wId||"",e.opId))})),X.addEventListener("notifySetExtInfo",(e=>{let t=this.wbDescList.find((t=>t.wId==e.wId));t&&(t.extInfo=e.extInfo),this.notifyBoardExinfoUpdatedCallback.target(e.wId,e.extInfo,e.opId)})),X.addEventListener("notifySetScale",(e=>{const t=this.wbDescList.find((t=>t.wId==e.wId));t&&(t.scale=e.scale,this.notifyBoardScaleCallback.target(e.wId,e.scale,e.opId))})),X.addEventListener("notifyCurrentPos",(e=>{const t=this.wbDescList.find((t=>t.wId==e.wId));t&&(t.xPos=e.xPos,t.yPos=e.yPos,e.opId!=ie.userInfo.userId&&this.viewList.forEach((e=>{e._wbDesc.wId==t.wId&&e._attr.followPage&&e._refreshPos()})))})),X.addEventListener("notifyAddShape",(e=>{const t=this.wbDescList.find((t=>t.wId==e.wId));if(!t||e.opId==ie.userInfo.userId)return;let i=t.shapeList.find((t=>t.pageId==e.page));i||(i={pageId:e.page,shapes:[]},t.shapeList.push(i)),null==i.shapes&&(i.shapes=[]),e.shape.attr=JSON.parse(e.shape.attr),e.shape.attr.penColor=this.decodeShapeColor(e.shape.attr.penColor),void 0!==e.shape.attr.txtBkColor&&(e.shape.attr.txtBkColor=this.decodeShapeColor(e.shape.attr.txtBkColor)),e.shape.dat=this.decodeShapeDat(e.shape.dat);const n=JSON.parse(JSON.stringify(e.shape));i.shapes.push(n),this.viewList.forEach((e=>{if(e._wbDesc.wId==t.wId){const t=e._canvasList.find((e=>e.pageID==i.pageId));e._drawShape(t,n)}}))})),X.addEventListener("notifyAppendShapeDat",(e=>{const t=this.wbDescList.find((t=>t.wId==e.wId));t&&e.opId!=ie.userInfo.userId&&t.shapeList.forEach((i=>{i.pageId==e.page&&i.shapes.forEach((n=>{if(n.sId==e.sId){const r=this.decodeShapeDat(e.dat),o=n.dat,s=r;this.viewList.forEach((e=>{e._wbDesc.wId==t.wId&&e._drawAppendShapeDat(i.pageId,n,o,s)})),n.dat=[...n.dat,...r]}}))}))})),X.addEventListener("notifyMoveShape",(e=>{const t=this.wbDescList.find((t=>t.wId==e.wId));t&&(e.sPos.forEach((i=>{t.shapeList.forEach((t=>{t.pageId==e.page&&t.shapes.forEach((e=>{e.sId==i.sId&&(e.top=i.top,e.left=i.left)}))}))})),this.viewList.forEach((i=>{i._wbDesc.wId==t.wId&&i._drawAllShapes({pageID:e.page},"notifyMoveShape")})))})),X.addEventListener("notifyModifyShapeAttr",(e=>{const t=this.wbDescList.find((t=>t.wId==e.wId));t&&(t.shapeList.forEach((t=>{t.pageId==e.page&&t.shapes.forEach((t=>{if(t.sId==e.sId){const i=JSON.parse(e.attr);t.attr=i,t.attr.penColor=this.decodeShapeColor(i.penColor),void 0!==i.txtBkColor&&(t.attr.txtBkColor=this.decodeShapeColor(i.txtBkColor))}}))})),this.viewList.forEach((i=>{i._wbDesc.wId==t.wId&&i._drawAllShapes({pageID:e.page},"notifyModifyShapeAttr")})))})),X.addEventListener("notifyDelShape",(e=>{const t=this.wbDescList.find((t=>t.wId==e.wId));if(t){for(let i in e.shapeIdsMap)e.shapeIdsMap[i].forEach((e=>{t.shapeList.forEach((t=>{if(t.pageId==i){let i=t.shapes.findIndex((t=>t.sId==e));i>-1&&t.shapes.splice(i,1)}}))}));this.viewList.forEach((i=>{if(i._wbDesc.wId==t.wId){i._drawAllShapes({pageID:e.page},"notifyDelShape");let n=e.opId!=ie.userInfo.userId;for(let e=0;e<t.shapeList.length;e++)t.shapeList[e].shapes.length>0&&(n=!1);n&&(i._revocableShapesArr=[],i._changeRedoUndoState())}}))}})),X.addEventListener("notifySetHotspot",(e=>{console.log("----- notifySetHotspot -----",e)}))}initSDKInterface(){this.createWhiteBoard=(e,t,i,n,r)=>new Promise(((o,s)=>{if(console.crlog(`[BoardV2] CRBoard_CreateWhiteBoard(${e},${t},${i},${n},${r})`),this.wbDescList.length>=10)return s({errCode:1,errDesc:""});if(i>300)return s({errCode:1,errDesc:""});let a=new oe({width:e,height:t,pageCount:i,extInfo:r,show_multi_page:1==n?1:0});te.create(a).then((e=>o(new re(e)))).catch((e=>s({errCode:1,errDesc:e.err?e.err:e.toString()})))})),this.closeWhiteBoard=e=>new Promise(((t,i)=>{console.crlog(`[BoardV2] CRBoard_CloseBoard(${e})`),te.delete(e).then((()=>t())).catch((e=>i({errCode:1,errDesc:e.toString()})))})),this.getAllBoard=()=>{let e=[];return this.wbDescList.forEach((t=>{e.push(new re(t))})),e},this.updateBoardExInfo=(e,t)=>new Promise(((i,n)=>{console.crlog(`[BoardV2] CRBoard_UpdateBoardExInfo(${e},${t})`),te.setExtInfo(e,t).then((()=>i())).catch((e=>n({errCode:1,errDesc:e.toString()})))})),this.getBoardInfo=e=>{const t=this.wbDescList.find((t=>t.wId==e));return t?new re(t):""},this.getCurrentBoard=()=>this.curWB,this.setCurrentBoard=e=>new Promise(((t,i)=>{console.crlog(`[BoardV2] CRBoard_SetCurrentBoard(${e})`),te.setCurrentWB(e).then((()=>t())).catch((e=>i({errCode:1,errDesc:e.toString()})))}))}init(){return new Promise(((e,t)=>{console.crlog("[BoardV2] Init whiteBoard v2...");const i=ie.meetingID,n=ie.userInfo.userId;if(!i||8!==i.toString().length||null==n)return t({errCode:5,errDesc:""});this.initData(),te.login(i,n).then((t=>{this.wbDescList=t.wbDescList||[],this.curWB=t.wbDescList&&t.wbDescList.length>0?t.curWB:"",this.wbDescList.find((e=>e.wId==this.curWB))||(this.curWB="");let i=[];return this.wbDescList.forEach((e=>{if(e.wId==this.curWB){let t=[];for(let i=0;i<e.pageCount;i++)t.push(i);te.queryShapeByIds(this.curWB,t).then((t=>{this.handleShapes(e,t),this.viewList.forEach((t=>{t._wbDesc.wId==e.wId&&t._drawAllShapes({},"queryShapeByIds")}))}))}})),this.wbDescList.forEach((e=>{if(i.push(new re(e)),e.wId!=this.curWB){let t=[];for(let i=0;i<e.pageCount;i++)t.push(i);te.queryShapeByIds(e.wId,t).then((t=>{this.handleShapes(e,t)}))}})),this.notifyInitBoardListCallback.target(i),this.notifyCurrentBoardCallback.target(this.curWB),e()}),(e=>t(window.__Rtc.CRCONFERR.Parse(e))))}))}handleShapes(e,t){console.crlog("[BoardV2] Handle shapes after init..."),t.forEach((e=>{null==e.shapes&&(e.shapes=[]),e.shapes.forEach((e=>{e.attr=JSON.parse(e.attr),e.attr.penColor=this.decodeShapeColor(e.attr.penColor),void 0!==e.attr.txtBkColor&&(e.attr.txtBkColor=this.decodeShapeColor(e.attr.txtBkColor)),e.dat=this.decodeShapeDat(e.dat)}));for(var t=0;t<e.shapes.length-1;t++)for(var i=0;i<e.shapes.length-1-t;i++)if(e.shapes[i].order>e.shapes[i+1].order){var n=e.shapes[i];e.shapes[i]=e.shapes[i+1],e.shapes[i+1]=n}})),e.shapeList=t}uninit(){console.crlog("[BoardV2] Uninit()"),te.logout().then((()=>{this.initData()}))}decodeShapeDat(e){const t=i.Z.base64ToUint8Array(e),n=[],r=[];for(var o=0;o<t.length;o+=2)r[o]=t[o],r[o+1]=t[o+1],t[o]>=240&&(r[o]=t[o]-256,r[o+1]=t[o+1]+256*(t[o]-256));for(o=0;o<r.length;o+=4)n.push({x:r[o]<<8|r[o+1],y:r[o+2]<<8|r[o+3]});return n}encodeShapeDat(e){const t=new ArrayBuffer(4*e.length),n=new Uint8Array(t);let r=[];for(var o=0;o<e.length;o++)r.push(e[o].x>>8),r.push(255&e[o].x),r.push(e[o].y>>8),r.push(255&e[o].y);return n.set(r),i.Z.uint8ArrayToBase64(n)}decodeShapeColor(e){return`rgba(${e>>>16&255},${e>>>8&255},${255&e},${((e>>>24)/255).toFixed(2)})`}encodeShapeColor(e){const t=+e.split("(")[1].split(",")[0],i=+e.split(",")[1],n=+e.split(",")[2];return 255*e.split(",")[3].split(")")[0]<<24|t<<16|i<<8|n}addShape(e,t,i){const n=JSON.parse(JSON.stringify(i));n.dat=this.encodeShapeDat(n.dat),n.attr.penColor=this.encodeShapeColor(n.attr.penColor),n.attr.txtBkColor&&(n.attr.txtBkColor=this.encodeShapeColor(n.attr.txtBkColor)),te.addShape(e,t,n).then((()=>{})).catch((e=>{console.error(e)}))}appendShapeDat(e,t,i,n){const r=this.encodeShapeDat(n);te.appendShapeDat(e,t,i,r).then((()=>{})).catch((e=>{console.error(e)}))}delShape(e,t,i){const n=new Object;n[t]=i,te.delShape(e,n).then((()=>{})).catch((e=>{console.error(e)}))}modifyShapeAttr(e,t,i){const n=JSON.parse(JSON.stringify(i));n.dat=this.encodeShapeDat(n.dat),n.attr.penColor=this.encodeShapeColor(n.attr.penColor),n.attr.txtBkColor&&(n.attr.txtBkColor=this.encodeShapeColor(n.attr.txtBkColor)),te.modifyShapeAttr(e,t,n.sId,n.attr).then((()=>{})).catch((e=>{console.error(e)}))}};window.__Rtc.CRBoardV2=se;const ae=se,ce=window.Conference,le=(window.Cr,window.Ice),de={getRollCallInfo:()=>new Promise(((e,t)=>{(0,m.V)("_rollCallSession","getRollCallInfo").then((t=>e(t))).catch((e=>t(e)))})),startRollCall:()=>new Promise(((e,t)=>{(0,m.V)("_rollCallSession","startRollCall").then((t=>e(t))).catch((e=>t(e)))})),stopRollCall:()=>new Promise(((e,t)=>{(0,m.V)("_rollCallSession","stopRollCall").then((t=>e(t))).catch((e=>t(e)))})),confirmRollCall:()=>new Promise(((e,t)=>{(0,m.V)("_rollCallSession","confirmRollCall").then((t=>e(t))).catch((e=>t(e)))}))};window.__Rtc.RollCallReceptor=le.Class(ce.RollCallCallback,{setProxy:function(e){this.proxy=e},rollCallStarted(...e){fe.ICECallback.rollCallStarted(...e)},rollCallStoped(...e){fe.ICECallback.rollCallStoped(...e)},rollCallConfirmed(...e){fe.ICECallback.rollCallConfirmed(...e)},rollCallConfirmed2(...e){fe.ICECallback.rollCallConfirmed(...e)}});const ue=de,he=window.CRVideo;g.Z.rollCallStarted=new E.Z("rollCallStarted"),g.Z.rollCallStoped=new E.Z("rollCallStoped"),g.Z.rollCallConfirmed=new E.Z("rollCallConfirmed");const fe=new class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[RollCall] RollCallModule initData...")}initIceCallback(){this.ICECallback={rollCallStarted(e){console.crlog(`[RollCall] ICE Callback --\x3e rollCallStarted, params:${JSON.stringify({operatorID:e})}`);const t=he.allMemberInfo.find((t=>t.termId==e));t&&g.Z.rollCallStarted.target(t.userId)},rollCallStoped(e){console.crlog(`[RollCall] ICE Callback --\x3e rollCallStoped, params:${JSON.stringify({operatorID:e})}`);const t=he.allMemberInfo.find((t=>t.termId==e));t&&g.Z.rollCallStoped.target(t.userId)},rollCallConfirmed(e){console.crlog(`[RollCall] ICE Callback --\x3e rollCallConfirmed, params:${JSON.stringify({termID:e})}`);const t=he.allMemberInfo.find((t=>t.termId==e));t&&g.Z.rollCallConfirmed.target(t.userId,t.nickname)}}}initSDKInterface(){g.Z.getRollCallInfo=()=>(console.crlog("[RollCall] MeetSDK.getRollCallInfo()"),new Promise(((e,t)=>{ue.getRollCallInfo().then((t=>{const i=t[1],n=he.allMemberInfo.find((e=>e.termId==t[1].rollCaller));return n&&(i.rollCaller=n.userId),console.crlog(`[RollCall] GetRollCallInfo return: ${JSON.stringify(i)}`),e(i)}),(e=>t({errCode:1,errDesc:e})))}))),g.Z.startRollCall=()=>(console.crlog("[RollCall] MeetSDK.startRollCall()"),new Promise(((e,t)=>{g.Z.stopRollCall(),ue.startRollCall().then((t=>e({errCode:0})),(e=>t({errCode:1,errDesc:e})))}))),g.Z.stopRollCall=()=>(console.crlog("[RollCall] MeetSDK.stopRollCall()"),new Promise(((e,t)=>{ue.stopRollCall().then((t=>e({errCode:0})),(e=>t({errCode:1,errDesc:e})))}))),g.Z.confirmRollCall=()=>(console.crlog("[RollCall] MeetSDK.confirmRollCall()"),new Promise(((e,t)=>{ue.confirmRollCall().then((t=>e({errCode:0})),(e=>t({errCode:1,errDesc:e})))})))}};var pe,_e;window.__Rtc._proxy=z.Z,CRVideo.APPIDMode=1,CRVideo.changyiweb=!1,CRVideo.LOCAL_KEY="CRwebRTC",CRVideo.KEEPLIVE_COMMIT=!1,CRVideo.KEEPALIVE_TIMER=-1,CRVideo.REFRESH_SESSION_TIMER=-1,CRVideo.userInfo={},CRVideo.allMemberInfo=[],CRVideo.isExitmeet=!1,CRVideo.isMeeting=!1,CRVideo.isWebRTC=!0,CRVideo.msType={localAudio:11,localVideo:12,localScreen:13,localMediaVideo:14,localMediaAudio:15,remoteVideo:22,remoteScreen:23,remoteMedia:24},CRVideo.firstEnterStatus=!1,CRVideo.meetingExiting=!1,CRVideo.callserverExiting=!1,window.enmeet={config:{controlSharkTime:3e4,refreshSessionTime:1e4}},function(e){!function(t){var i={findUserInfo:function(t,i){return e.allMemberInfo.find((function(e){return e[t]==i}))}};t.findUserInfo=i.findUserInfo,i.controlSharkHand=function(){__Rtc.CR__KeepAlive(1,(new Date).getTime()),clearTimeout(e.KEEPALIVE_TIMER),e.KEEPALIVE_TIMER=setTimeout(i.controlSharkHand,enmeet.config.controlSharkTime)},t.controlSharkHand=i.controlSharkHand,i.refreshSessionSharkHand=function(){__Rtc.CR__RefreshSession((new Date).getTime()),clearTimeout(e.REFRESH_SESSION_TIMER),e.REFRESH_SESSION_TIMER=setTimeout(i.refreshSessionSharkHand,enmeet.config.refreshSessionTime)},t.refreshSessionSharkHand=i.refreshSessionSharkHand,i.destroyMeetingConnect=function(){console.crlog("[SDK] Websockt destroy meeting connect..."),e.communicatorIc&&e.communicatorIc.destroy(),e.communicatorIc=null,console.crlog("[SDK] CRVideo.communicatorIc && CRVideo.communicatorIc.destroy();CRVideo.communicatorIc = null")},t.destroyMeetingConnect=i.destroyMeetingConnect}(e)}(CRVideo),window.findMemberInfo=function(e){var t=!1;return CRVideo.allMemberInfo.forEach((function(i){i[e.use]==e.value&&(t=i[e.want])})),t},CRVideo.findMemberInfo=findMemberInfo,CRVideo.initweb=function(){__Rtc.CR__Init("js",{protocol:"wss",CheckFlash:!1})},__Rtc.CR_InitRslt.callback=function(e,t){0==e?CRVideo.loginWebMeeting():console.crlog("[SDK] CR_InitRslt.callback fail!")},CRVideo.loginWebMeeting=function(){var e=CRVideo.crmtStr,t={};t.nickname=CRVideo.userInfo.nickname||"",t.userId=CRVideo.userInfo.userId||"",CRVideo.KEEPLIVE_COMMIT=!0,CRVideo.isExitmeet=!1,z.Z.loginControl(e,t)},__Rtc.CR__LoginRslt.callback=function(e,n,r){CRVideo.reEnterMeetTimes=0;var o=null==n||""==n?"":" ----errDesc: \n"+n;if(console.crlog("[SDK] Login Access CallBack, errCode: "+e+o),CRVideo_UploadingLog(),"3"==e||"1"==e)console.crlog("[SDK] access: "+n);else if("800"==e)console.crlog("[SDK] !");else if("801"==e)console.crlog("[SDK] !");else if("802"==e)console.crlog("[SDK] license)!");else if("803"==e)console.crlog("[SDK] !");else if("804"==e)console.crlog("[SDK] !");else if("805"==e)console.crlog("[SDK] !");else if("806"==e)console.crlog("[SDK] !");else if("807"==e)console.crlog("[SDK] ");else if("0"==e){if(CRVideo.isMeeting=!0,CRVideo.meetingID=r.meetID,null!=z.Z.crmt.ACNT[4]&&8==z.Z.crmt.ACNT[4]&&window.__Rtc.CRRTCConf.setAssistantActor(r.termId,!0),CRVideo.firstEnterStatus=!0,setTimeout((()=>{CRVideo.firstEnterStatus=!1}),3e3),window.__Rtc.CRRTCVideo.mainVideoTermID=r.mainVideoTermID||0,window.__Rtc.CRRTCVideo.windowMode=r.windowMode.value,window.__Rtc.CRRTCBoard.lastElemValue=++r.lastElemValue,window.__Rtc.CRRTCBoard.lastTabValue=++r.lastTabValue,window.__Rtc.CRRTCConf.curOption=r.option,window.__Rtc.CRRTCConf.shareState=r.confInfo.share_cfg?JSON.parse(r.confInfo.share_cfg):{state:0,shareID:0},window.__Rtc.CRRTCLocalVideo.selfieSegmentationPermission="1"===r.confInfo.ccfg_portrait_segmentation,window.__Rtc.CRRTCBoard.wbDescibes=r.wbDescibes?r.wbDescibes:[],window.__Rtc.CRRTCRecord.svrRecordStatus=null!=r.confInfo.srv_record_state?+r.confInfo.srv_record_state:0,window.__Rtc.CRRTCRecord.MixersList=r.confInfo.srv_record_cfg?JSON.parse(r.confInfo.srv_record_cfg):[],window.__Rtc.CRRTCVideo.vwalllo=null!=r.confInfo.vwalllo?+r.confInfo.vwalllo:0,null!=r.confInfo.hd){switch(r.confInfo.hd.toString()){case"true":r.confInfo.hd="1";break;case"false":r.confInfo.hd="0"}window.__Rtc.CRRTCConf.compVideoHD=r.confInfo.hd.toString()}for(let l=0;l<r.activeMembers.length;l++)CRVideo.allMemberInfo.push(r.activeMembers[l]);function s(){CRVideo.stunServerAddr||(CRVideo.webServerAddr.includes(`${window.__CRName}.com`)&&!CRVideo.webServerAddr.includes(`crlab.${window.__CRName}.com`)?CRVideo.stunServerAddr="47.104.128.57:30000":CRVideo.stunServerAddr=`${CRVideo.webServerAddr}:2699`);let e=[];e=1==CRVideo.MSProtocol?["turn:"+CRVideo.stunServerAddr+"?transport=udp"]:2==CRVideo.MSProtocol?["turn:"+CRVideo.stunServerAddr+"?transport=tcp"]:["turn:"+CRVideo.stunServerAddr+"?transport=udp","turn:"+CRVideo.stunServerAddr+"?transport=tcp"];const t=null!=__Rtc.postCmd.CallServerInfo?__Rtc.postCmd.CallServerInfo.RtcCfgVer:0;if(CRVideo.rtcCfg={iceServers:[{username:1==t?"conference":`${window.__CRName}`,credential:1==t?"Nsyhl9t":`${window.__CRName}`,urls:e}],iceTransportPolicy:"relay"},r.confInfo.ccfg_rtc_cfg){const e=JSON.parse(r.confInfo.ccfg_rtc_cfg);CRVideo.rtcCfg.iceServers[0].username=e.username,CRVideo.rtcCfg.iceServers[0].credential=e.credential}}function a(e){CRVideo.rtcCfg.iceServers.forEach((t=>{let i=t.urls,n=[];t.urls=i.map((t=>{let i=String(CRVideo.stunServerAddr),r=String(e);n.push(t.replace(i,r))})),console.crlog(`[SDK] New stun server urls: ${JSON.stringify(n)}`),t.urls=n}))}CRVideo.userInfo.detail=r.myDetail,CRVideo.userInfo.termId=r.termId,CRVideo.userInfo.nickname=r.nickname,CRVideo.userInfo.userId=r.userId||CRVideo.userInfo.userId,r.myDetail.userId=r.userId,t.Z.userInfo.setUserInfo(CRVideo.userInfo.nickname,CRVideo.userInfo.userId),s(),z.Z.crmt.STUNSVR?a(z.Z.crmt.STUNSVR):z.Z.crmt.STUNSVRPORT?a(`${CRVideo.accessSvr}:${z.Z.crmt.STUNSVRPORT}`):a(`${CRVideo.accessSvr}:${CRVideo.stunServerAddr.split(":")[CRVideo.stunServerAddr.split(":").length-1]}`);const c=_.cloneDeep(CRVideo.rtcCfg);c.iceServers[0].username=CRVideo.rtcCfg.iceServers[0].username.includes("oudro")?"cl***om":CRVideo.rtcCfg.iceServers[0].username.replace("fere","***"),c.iceServers[0].credential="******",console.crlog(`[SDK] New webrtc RTCPeerConnection config: ${JSON.stringify(c)}`),console.crlog(`[SDK] ${CRVideo.sdkInfo}`),console.crlog(`[SDK] Browser Info: ${navigator.userAgent}`),console.crlog(`[SDK] CRVideo.isWebRTC:${CRVideo.isWebRTC}`),CRVideo.meetingInfo=r,CRVideo.isWebRTC&&(console.crlog(`[SDK] RTC Codecs: ${window.__Rtc.rtc_codecs}`),console.crlog(`[SDK] Video input devices: ${JSON.stringify(__Rtc.CRRTCLocalVideo.videoInput)}`),__Rtc.CRRTCAudio.uploadAudioDevicesStatus(),__Rtc.CRRTCLocalVideo.uploadVideoDeviceStatus(),__Rtc.CRRTCLocalVideo.uploadAllCamInfo(),CRVideo.allMemberInfo.forEach((function(e){e.termId==r.termId?(e.isSelf=!0,e.userId=e.userId||CRVideo.userInfo.userId,__Rtc.CRRTCConf.rights=Array.from(e.rights)):e.isSelf=!1,2!=e.actor&&3!=e.actor&&10!=e.actor&&11!=e.actor||(window.__Rtc.CRRTCConf.curActorID=e.termId),1!=e.actor&&3!=e.actor&&9!=e.actor&&11!=e.actor||(window.__Rtc.CRRTCConf.curPresenterID=e.termId),e.userId=null==e.userId?Ice.generateUUID():e.userId,e.audioStatus=e.audioStatus.name,e.videoStatus=e.videoStatus.name,"family"==e.privRole?CRVideo.privRoleFamily=e.userId:"prisoner"==e.privRole&&(CRVideo.privRolePrison=e.userId)}))),CRVideo.controlSharkHand(),CRVideo.refreshSessionSharkHand(),console.crlog(`[SDK] Enter meeting success, meetID:${CRVideo.meetingID}`)}else console.crlog(`[SDK][Error] Enter meeting fail! Error:${e}`);CRVideo_UploadingLog();try{0==e&&(__Rtc.CRICEAPI.GetScreenShareInfo(),__Rtc.CRICEAPI.GetMediaInfo(),__Rtc.CRRTCSync.initSync(r),__Rtc.CRRTCCloudRecord.initRecord(r),__Rtc.CRRTCPrism.meetInfoUpload&&__Rtc.CRRTCPrism.uploadEnterMeetInfo()),i.Z.SDK_Event.emitEventListener("EnterMeetingSuccess",r),"MeetSDK"==CRVideo.SDKKey?(console.crlog(`[SDK] MeetSDK.enterMeetingRslt.target(${e}, ${CRVideo.userInfo.userId}, ${CRVideo.userInfo.nickname}, ${CRVideo.enterMeetingCookie})`),g.Z.enterMeetingRslt.target(e,CRVideo.userInfo.userId,CRVideo.userInfo.nickname,CRVideo.enterMeetingCookie)):(console.crlog(`[SDK] CRVideo_EnterMeetingRslt.target(${e},${CRVideo.enterMeetingCookie})`),CRVideo_EnterMeetingRslt.target(e,CRVideo.enterMeetingCookie)),0==e&&(__Rtc.CRRTCBoard.initBoards(),ae.init()),CRVideo_UploadingLog()}catch(d){console.error(d)}window.loginData=r},__Rtc.CR__RefreshSessionRslt.callback=function(e,t,i){let n="0"==e?"success":"fail",r=null==t?"":t,o=(new Date).getTime()-i;"success"==n?console.crlog(`[SDK] RefreshSessionRslt: ${n} ${r} delay:${o}ms`):console.crlog(`[SDK] RefreshSessionRslt: ${n} ${r}`),0==e&&-1!=CRVideo.REFRESH_SESSION_TIMER?CRVideo_NotifyNetworkDelay.target(o):-1!=CRVideo.REFRESH_SESSION_TIMER&&(clearTimeout(CRVideo.REFRESH_SESSION_TIMER),CRVideo.REFRESH_SESSION_TIMER=-1,-1==CRVideo.KEEPALIVE_TIMER||CRVideo.isExitmeet||(console.crlog("[SDK] RefreshSession fail, meeting dropped!!!"),console.crlog(`[SDK] CRVideo_MeetingDropped.target(${CRVideo_ERR_DEF.SOCKETEXCEPTION})`),CRVideo.destroyMeetingConnect(),CRVideo_NotifyNetworkDelay.target(""),CRVideo_NetStateChanged.target(0),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SOCKETEXCEPTION)))},__Rtc.CR__KeepAliveRslt.callback=function(e,t,i){let n="0"==e?"success":"fail",r=null==t?"":t,o=(new Date).getTime()-i;"success"==n?console.crlog(`[SDK] KeepAliveRslt: ${n} ${r} delay:${o}ms`):console.crlog(`[SDK] KeepAliveRslt: ${n} ${r}`),0==e&&-1!=CRVideo.KEEPALIVE_TIMER?CRVideo_NotifyNetworkDelay.target(o):-1!=CRVideo.KEEPALIVE_TIMER&&(clearTimeout(CRVideo.KEEPALIVE_TIMER),CRVideo.KEEPALIVE_TIMER=-1,-1==CRVideo.REFRESH_SESSION_TIMER||CRVideo.isExitmeet||(console.crlog("[SDK] KeepAlive fail, meeting dropped!!!"),console.crlog(`[SDK] CRVideo_MeetingDropped.target(${CRVideo_ERR_DEF.SOCKETEXCEPTION})`),CRVideo.destroyMeetingConnect(),CRVideo_NotifyNetworkDelay.target(""),CRVideo_NetStateChanged.target(0),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SOCKETEXCEPTION)))},window.CRVideo_Uninit=function(){console.crlog("[SDK] CRVideo_Uninit()"),CRVideo.loginAuthFlag=0,CRVideo.webLoginOAuth={},__Rtc.CR__UnInit(),i.Z.SDK_Event.removeEventListener("EnterMeetingSuccess").removeEventListener("CleanMeetingData"),i.Z.SDK_Event.emitEventListener("SDKUnInit"),setTimeout((()=>{CRVideo.destroyLogConnect(),clearTimeout(CRVideo.logReportTimer)}),5e3)},pe="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,_e=pe.replace(/hidden/i,"visibilitychange"),document.addEventListener(_e,(function(){document[pe]||(console.crlog("[SDK] CRVideo.KEEPALIVE_TIMER-----"+CRVideo.KEEPALIVE_TIMER),console.crlog("[SDK] CRVideo.REFRESH_SESSION_TIMER-----"+CRVideo.REFRESH_SESSION_TIMER),CRVideo.KEEPLIVE_COMMIT&&(-1!=CRVideo.KEEPALIVE_TIMER&&CRVideo.controlSharkHand(),-1!=CRVideo.REFRESH_SESSION_TIMER&&CRVideo.refreshSessionSharkHand(),CRVideo_ShakeHand()))})),CRVideo.updateDevicesList=e=>{__Rtc.CRRTCAudio.audioInput=[],__Rtc.CRRTCAudio.audioOutput=[],__Rtc.CRRTCLocalVideo.videoInput=[];let t=1,i=1,n=1;for(var r=0;r<e.length;r++){var o=e[r];if("audioinput"==o.kind){var s={};s.deviceId=o.deviceId,s.name=o.label||" - ",s.kind=o.kind,s.id=t++,__Rtc.CRRTCAudio.audioInput.push(s)}else if("audiooutput"==o.kind){var a={};a.deviceId=o.deviceId,a.name=o.label||" - ",a.kind=o.kind,a.id=i++,__Rtc.CRRTCAudio.audioOutput.push(a)}else if("videoinput"==o.kind){var c={};c.deviceId=o.deviceId||n,c.name=o.label||" - ",c.kind=o.kind,c.id=n++,c.disabled=!1,c.locAttr={},c.stream=null,c.ssVal=0,c.connect=new _ConnectItemClass(c.id,++__Rtc.CRRTCLocalVideo.lastLocalVideoMSID),c.connect2=new _ConnectItemClass(c.id+1e4,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID+1e3),__Rtc.CRRTCLocalVideo.videoInput.push(c)}}__Rtc.CRBrowser.curBrowserCfg.isMobile&&__Rtc.CRRTCLocalVideo.videoInput.length>0&&(__Rtc.CRRTCLocalVideo.videoInput=[],__Rtc.CRRTCLocalVideo.videoInput.push({facingMode:"user",name:"",kind:"video",id:1,disabled:!1,locAttr:{},stream:null,ssVal:0,connect:new _ConnectItemClass(1,++__Rtc.CRRTCLocalVideo.lastLocalVideoMSID),connect2:new _ConnectItemClass(10001,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID+1e3)}),__Rtc.CRRTCLocalVideo.videoInput.push({facingMode:"environment",name:"",kind:"video",id:2,disabled:!1,locAttr:{},stream:null,ssVal:0,connect:new _ConnectItemClass(2,++__Rtc.CRRTCLocalVideo.lastLocalVideoMSID),connect2:new _ConnectItemClass(10002,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID+1e3)})),"Firefox"==__Rtc.CRBrowser.name?__Rtc.CRRTCAudio.audioOutput.push({name:"Firefox",deviceId:""}):"Mac"==__Rtc.CRBrowser.curBrowserCfg.platform&&"Safari"==__Rtc.CRBrowser.curBrowserCfg.name&&__Rtc.CRRTCAudio.audioOutput.push({name:"Safari",deviceId:""})},__Rtc.CR__VideoAllocRawExt2.callback=function(e,t,i,n){const r={VCT_CAMERA:"video",VCT_SCREEN:"screen",VCT_FILM:"media"}[t.contentType.name];if("video"==r)__Rtc.CRRTCVideo.videoAllocRawExt2(e,t,i,n);else{if("screen"==r)return void __Rtc.CRRTCScreen.videoAllocRawExt2(e,t,i,n);"media"==r&&__Rtc.CRRTCMedia.videoAllocRawExt2(e,t,i,n)}},__Rtc.CR__ModifyPeerAddrExt.callback=function(e,t,i){console.crlog("[SDK] CR__ModifyPeerAddrExt: MSID-----"+t);var n={type:"answer",sdp:i.get("sdp")},r=t.toString().substr(0,2);if(r==CRVideo.msType.localAudio)__Rtc.CRRTCAudio.modifyPeerAddrExt(n,+t,i);else{if(r==CRVideo.msType.localVideo)return void __Rtc.CRRTCVideo.modifyPeerAddrExt("localVideo",e,t,i);if(r==CRVideo.msType.remoteVideo)return void __Rtc.CRRTCVideo.modifyPeerAddrExt("remoteVideo",e,t,i);if(r==CRVideo.msType.localScreen)return void __Rtc.CRRTCScreen.modifyPeerAddrExt("localScreen",e,t,i);if(r==CRVideo.msType.remoteScreen)return void __Rtc.CRRTCScreen.modifyPeerAddrExt("remoteScreen",e,t,i);if(r==CRVideo.msType.remoteMedia)return void __Rtc.CRRTCMedia.modifyPeerAddrExt("remoteMedia",e,t,i);if(r==CRVideo.msType.localMediaVideo)return void __Rtc.CRRTCMedia.modifyPeerAddrExt("localMediaVideo",e,t,i);if(r==CRVideo.msType.localMediaAudio)return void __Rtc.CRRTCMedia.modifyPeerAddrExt("localMediaAudio",e,t,i)}},window.videoResolutionReport=function(e,t,i,n){if(CRVideo.isMeeting){if("screen"==t){const e=__Rtc.CRRTCScreen.localScreenStream.getTracks()[0].getSettings();n=e.height?e.height:1080,i=e.widht?e.widht:1920}if("media"==t){const e=(__Rtc.CRRTCMedia.localMediaVideoConnection_VP8.stream?__Rtc.CRRTCMedia.localMediaVideoConnection_VP8:__Rtc.CRRTCMedia.localMediaVideoConnection_H264).stream.getTracks()[0].getSettings();n=e.height?e.height:1080,i=e.widht?e.widht:1920}console.crlog(`[SDK] CR__VideoResolutionReport(${e},${i},${n})`),__Rtc.CR__VideoResolutionReport(e,i,n)}},__Rtc.CR__VideoResolutionReportRslt.callback=function(e,t){e=0==e?"success":"fail",t=null==t?"":t},CRVideo.leftMeetingFun=function(e){return new Promise(((t,n)=>{console.crlog("[SDK] CRVideo.leftMeetingFun..."),CRVideo.isWebRTC&&G.Z.stopVideo(),clearTimeout(CRVideo.KEEPALIVE_TIMER),CRVideo.KEEPALIVE_TIMER=-1,clearTimeout(CRVideo.REFRESH_SESSION_TIMER),CRVideo.REFRESH_SESSION_TIMER=-1,window.__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.stopAllAudioTrack(),window.__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.closeAllPeerConnection(),window.__Rtc.CRRTCRemoteVideo&&__Rtc.CRRTCRemoteVideo.closeAllRTCConnection(),window.__Rtc.CRRTCLocalVideo&&__Rtc.CRRTCLocalVideo.stopAllLocalVideoAndConnect(),window.__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.isMySharing&&(CRVideo_StopScreenShare(),__Rtc.CRICEAPI.SetCurrentTab(8,{termID:CRVideo.userInfo.termId,localID:0})),window.__Rtc.CRRTCMedia&&0==__Rtc.CRRTCMedia.mediaShareInfo.state&&__Rtc.CRRTCMedia.mediaShareInfo.userID==CRVideo.userInfo.userId&&(CRVideo_StopPlayMedia(),__Rtc.CRICEAPI.SetCurrentTab(8,{termID:CRVideo.userInfo.termId,localID:0})),"token"==e&&(console.crlog(`[SDK] CRVideo_MeetingDropped.target(${CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT})`),CRVideo.destroyMeetingConnect(),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT)),i.Z.SDK_Event.emitEventListener("CleanMeetingData"),setTimeout((()=>(CRVideo.isMeeting=!1,CRVideo.allMemberInfo=[],window.__Rtc.CRRTCConf.initData(),window.__Rtc.CRRTCIMMsg.initData(),window.__Rtc.CRRTCTermMsg.initData(),window.__Rtc.CRRTCAudio.initData(),window.__Rtc.CRRTCVideo.initData(),window.__Rtc.CRRTCLocalVideo.initData(),window.__Rtc.CRRTCRemoteVideo.initData(),window.__Rtc.CRRTCUI.initData(),window.__Rtc.CRRTCRecord.initData(),window.__Rtc.CRRTCScreen.initData(),window.__Rtc.CRRTCMedia.initData(),window.__Rtc.CRRTCBoard.initData(),window.__Rtc.CRRTCSync.initData(),window.__Rtc.CRRTCCloudRecord.initData(),window.__Rtc.CRRTCPrism.initData(),fe.initData(),z.Z.initData(),t())),0)}))},window.CRVideo_ExitMeeting=function(e){console.crlog(`[SDK] CRVideo_ExitMeeting(${e})`);let t=void 0!==e?e:"";"token"==t&&console.crlog("[SDK] Token Expire, do left meeting!"),__Rtc.CR__Exit(t),CRVideo.isExitmeet||(CRVideo.isExitmeet=!0,CRVideo.isMeeting=!1,CRVideo_UploadingLog(),setTimeout((()=>{CRVideo_UploadingLog()}),1e3),CRVideo.meetingExiting=!0,setTimeout((()=>{CRVideo.meetingExiting=!1}),3e3),console.crlog("[SDK] exit meeting---do left meeting function"),CRVideo.leftMeetingFun(t))},__Rtc.CR__ExitRslt.callback=function(e,t){e=0==e?"success":"fail",t=null==t?"":t,console.crlog("[SDK] ExitRslt Callback"+e+" "+t),CRVideo.CallID="",__Rtc.CR__UnInit(),setTimeout((()=>{CRVideo.destroyMeetingConnect()}),1e3),ae.uninit()},__Rtc.CR__Free.callback=function(e){console.crlog("[SDK] Free Callback: msid is "+e);var t=e.toString().substr(0,2);t==CRVideo.msType.localAudio?__Rtc.CRRTCAudio.audioMSIDFree(+e):t==CRVideo.msType.localVideo?__Rtc.CRRTCLocalVideo.videoMSIDFree(+e):t==CRVideo.msType.remoteVideo&&__Rtc.CRRTCRemoteVideo.videoMSIDFree(+e)};class Ce{constructor(){this.initData(),this.initIceCallback(),this.initIceNotify(),this.initSDKInterface()}initData(){console.crlog("[EnMeet] EnMeetModule initData...")}initIceCallback(){}initIceNotify(){}initSDKInterface(){}}window.__crEnMeetClass=Ce,window.__Rtc.CRRTCEnmeet=new Ce,window.CRVideo_NotifyNetworkDelay=new CRVideo.CbProxy("CRVideo_NotifyNetworkDelay"),window.CRVideo_MeetingDropped=new CRVideo.CbProxy("CRVideo_MeetingDropped");const ge=window.CRVideo;window.Ice;function me(e,t,i){let n=document.createElement("a");n.href=window.URL.createObjectURL(e),n.download=`${t}.${i}`,n.click()}function Re(e,t,i=!0){let n=0,r=e.length*(t/8),o=new ArrayBuffer(r),s=new DataView(o);if(8===t)for(let t=0;t<e.length;t++,n++){let i=Math.max(-1,Math.min(1,e[t])),r=i<0?128*i:127*i;r=+r+128,s.setInt8(n,r)}else for(let t=0;t<e.length;t++,n+=2){let r=Math.max(-1,Math.min(1,e[t]));s.setInt16(n,r<0?32768*r:32767*r,i)}return s}window.__Rtc.CRRTCPrism=new class{constructor(){this.initData()}initData(){console.crlog("[Prism] PrismModule initData..."),this.meetInfoUpload="MeetSDK"==ge.SDKKey,this.UA=navigator.userAgent,this.appId="",this.confId="",this.userId="",this.cost="",this.systemType="",this.systemVersion="",this.terminal="",this.sdkVersion="",this.ip="",this.networkType="",this.server="",this.baseDetail=[],this.streamDetail=[],clearInterval(this.getMeetDetailTimer),this.getMeetDetailTimer=-1,clearInterval(this.meetDetailUploadTimer),this.meetDetailUploadTimer=-1,this.localAudioEnergy=null,this.distantAudioEnergy=null,this.meetDetailUploadTime=3e4}getBaseMessage(){const e={};return e.confId=this.confId=ge.meetingInfo.meetID,e.userId=this.userId="MeetSDK"==ge.SDKKey?ge.userInfo.nickname:ge.userInfo.userId,e.cost=this.cost=(new Date).getTime()-ge.startEnterTimestamp,e.systemType=this.systemType="Web",e.systemVersion=this.systemVersion=`${__Rtc.CRBrowser.curBrowserCfg.name}_${__Rtc.CRBrowser.curBrowserCfg.ver}`,e.terminal=this.terminal=this.UA.split("(")[1].split(")")[0],e.sdkVersion=this.sdkVersion=ge.sdkver,e.ip=this.ip=ge.myPublicIP,e.networkType=this.networkType=this.getNetType()||"",e.server=this.server=ge.resmAccessNo,null!=ge.LoginParam&&null!=ge.LoginParam.account&&(e.appId=this.appId=ge.LoginParam.account),e}getNetType(){return this.UA.includes("WIFI")?"WIFI":this.UA.includes("4G")?"4G":void 0}uploadEnterMeetInfo(){const e=this.getBaseMessage();let t=this;setTimeout((()=>{let i=`https://${ge.webServerAddr}/${window.__CRNameUP}-REPORT/report`;"conference"==ge.rtcCfg.iceServers[0].username&&(i=`https://${ge.webServerAddr}/CLOUDMEETING-REPORT/report`),(0,r.Z)({url:i,type:"post",data:JSON.stringify(e),success(e){t.begainMeetDetailUpload()},error(e){console.crlog("[Prism] ")}})}),2e3)}begainMeetDetailUpload(){this.startGetMeetDetail(),clearInterval(this.meetDetailUploadTimer),setTimeout((()=>{this.uploadMeetDetail()}),1e4),this.meetDetailUploadTimer=setInterval((()=>{ge.isMeeting&&this.baseDetail.length>0&&this.streamDetail.length>0?this.uploadMeetDetail():ge.isMeeting||clearInterval(this.meetDetailUploadTimer)}),this.meetDetailUploadTime)}uploadMeetDetail(){let e=this;const t={confId:this.confId?this.confId:ge.meetingInfo.meetID,userId:this.userId?this.userId:"MeetSDK"==ge.SDKKey?ge.userInfo.nickname:ge.userInfo.userId,baseDetail:this.baseDetail,streamDetail:this.streamDetail};null!=ge.LoginParam&&null!=ge.LoginParam.account&&(t.appId=this.appId?this.appId:ge.LoginParam.account);let i=`https://${ge.webServerAddr}/${window.__CRNameUP}-REPORT/report/detail`;"conference"==ge.rtcCfg.iceServers[0].username&&(i=`https://${ge.webServerAddr}/CLOUDMEETING-REPORT/report/detail`),(0,r.Z)({url:i,type:"post",data:JSON.stringify(t),success(t){(200==t.code||e.baseDetail.length>100)&&(e.baseDetail=[],e.streamDetail=[])},error(t){console.crlog("[Prism] "),clearInterval(e.meetDetailUploadTimer),clearInterval(e.getMeetDetailTimer)}})}startGetMeetDetail(){clearInterval(this.getMeetDetailTimer),this.getMeetDetail(),this.getMeetDetailTimer=setInterval((()=>{0==ge.isMeeting&&clearInterval(this.getMeetDetailTimer),this.getMeetDetail()}),1e4)}getMeetDetail(){this.getBaseDetail(),this.getAudioRecStreamDetail(),this.getAudioSendStreamDetail(),this.getLocalVideoStreamDetail(),this.getRemoteVideoStreamDetail(),this.getLocalScreenShareStreamDetail(),this.getRemoteScreenShareStreamDetail(),this.getLocalMediaStreamDetail(),this.getRemoteMediaStreamDetail()}getBaseDetail(){const e={};e.reportTime=parseInt((new Date).getTime()/1e3),e.networkScore=__Rtc.CRRTCAudio.networkScore>0?__Rtc.CRRTCAudio.networkScore:0,e.localVolume=__Rtc.CRRTCAudio.localAudioEnergy||0,e.distantVolume=__Rtc.CRRTCAudio.distantAudioEnergy||0,this.baseDetail.push(e)}getAudioRecStreamDetail(){let e={streamId:"0.0"};e.reportTime=parseInt((new Date).getTime()/1e3),e.flowType=2,e.peerLossRate=__Rtc.CRRTCAudio.packetsLostRate||0,e.codeRate=__Rtc.CRRTCAudio.codeRateReceived||0,this.streamDetail.push(e)}getAudioSendStreamDetail(){let e={streamId:"0.0"};e.reportTime=parseInt((new Date).getTime()/1e3),e.flowType=1,e.codeRate=__Rtc.CRRTCAudio.codeRateSend||0,this.streamDetail.push(e)}getLocalVideoStreamDetail(){let e=__Rtc.CRRTCLocalVideo.videoInput;for(let t=0;t<e.length;t++){let i=e[t].connect.connection,n=e[t].connect2.connection;if(i&&"connected"===i.connectionState){let i={};i.streamId=`1.${e[t].id}`,i.reportTime=parseInt((new Date).getTime()/1e3),i.flowType=1,i.resolutionWidth=e[t].connect.width||0,i.resolutionHeight=e[t].connect.height||0,i.frameRate=e[t].connect.frameRate||0,i.codeRate=e[t].connect.codeRate||0,this.streamDetail.push(i)}if(n&&"connected"===n.connectionState){let i={};i.streamId=`1.${e[t].id}`,i.reportTime=parseInt((new Date).getTime()/1e3),i.flowType=1,i.resolutionWidth=e[t].connect2.width||0,i.resolutionHeight=e[t].connect2.height||0,i.frameRate=e[t].connect2.frameRate||0,i.codeRate=e[t].connect2.codeRate||0,this.streamDetail.push(i)}}}getRemoteVideoStreamDetail(){__Rtc.CRRTCRemoteVideo.connectList.forEach((e=>{e.list.forEach((t=>{if(t.connection&&"connected"===t.connection.connectionState){let i={};i.streamId=`1.${t.camID}`,i.srcUserId=ge.findMemberInfo({use:"termId",want:"userId",value:e.termID}),i.reportTime=parseInt((new Date).getTime()/1e3),i.flowType=2,i.resolutionWidth=t.width||0,i.resolutionHeight=t.height||0,i.frameRate=t.frameRate||0,i.codeRate=t.codeRate||0,i.peerLossRate=t.packetsLostRate||0,this.streamDetail.push(i)}}))}))}getLocalScreenShareStreamDetail(){let e=__Rtc.CRRTCScreen.localConnectionVP8.stream?__Rtc.CRRTCScreen.localConnectionVP8:__Rtc.CRRTCScreen.localConnectionH264;if(e.connection&&"connected"===e.connection.connectionState){let t={streamId:"2.0"};t.reportTime=parseInt((new Date).getTime()/1e3),t.flowType=1,t.resolutionWidth=e.width||0,t.resolutionHeight=e.height||0,t.frameRate=e.frameRate||0,t.codeRate=e.codeRate||0,this.streamDetail.push(t)}}getRemoteScreenShareStreamDetail(){let e=__Rtc.CRRTCScreen.remoteConnection;if(e.connection&&"connected"===e.connection.connectionState){let t={streamId:"2.0"};t.srcUserId=ge.findMemberInfo({want:"userId",use:"termId",value:__Rtc.CRRTCScreen.screenShareInfo.sharer}),t.reportTime=parseInt((new Date).getTime()/1e3),t.flowType=2,t.resolutionWidth=e.width||0,t.resolutionHeight=e.height||0,t.frameRate=e.frameRate||0,t.codeRate=e.codeRate||0,t.peerLossRate=e.packetsLostRate||0,this.streamDetail.push(t)}}getLocalMediaStreamDetail(){let e=__Rtc.CRRTCMedia.localMediaVideoConnection_VP8.stream?__Rtc.CRRTCMedia.localMediaVideoConnection_VP8:__Rtc.CRRTCMedia.localMediaVideoConnection_H264;if(e.connection&&"connected"===e.connection.connectionState){let t={streamId:"3.0"};t.reportTime=parseInt((new Date).getTime()/1e3),t.flowType=1,t.resolutionWidth=e.width||0,t.resolutionHeight=e.height||0,t.frameRate=e.frameRate||0,t.codeRate=e.codeRate||0,this.streamDetail.push(t)}}getRemoteMediaStreamDetail(){let e=__Rtc.CRRTCMedia.remoteMediaConnection;if(e.connection&&"connected"===e.connection.connectionState){let t={streamId:"3.0"};t.srcUserId=__Rtc.CRRTCMedia.mediaShareInfo.userID,t.reportTime=parseInt((new Date).getTime()/1e3),t.flowType=2,t.resolutionWidth=e.width||0,t.resolutionHeight=e.height||0,t.frameRate=e.frameRate||0,t.codeRate=e.codeRate||0,t.peerLossRate=e.packetsLostRate||0,this.streamDetail.push(t)}}};class Se{constructor(e={},t){this.stream=t,this.aSide=e.aSide,this.getType=e.getType,this.sampleBits=e.jsonParam.sampleBits,this.sampleRate=e.jsonParam.sampleRate,this.eachSize=e.jsonParam.eachSize,this.eachTime=e.jsonParam.eachTime,this.fileName=e.jsonParam.fileName,this.size=0,this.lBuffer=[],this.rBuffer=[],this.tempPCMBuffer=[],this.tempSize=0,this.fileSize=0,this.duration=0,this.needRecord=!0;let i=new(window.AudioContext||window.webkitAudioContext);this.inputSampleRate=i.sampleRate,this.setNewOption(e),this.littleEdian=function(){let e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}()}setNewOption(e={}){this.config={sampleBits:~[8,16].indexOf(this.sampleBits)?this.sampleBits:16,sampleRate:~[8e3,11025,16e3,22050,24e3,44100,48e3].indexOf(this.sampleRate)?this.sampleRate:this.inputSampleRate,numChannels:~[1,2].indexOf(this.numChannels)?this.numChannels:1},this.outputSampleRate=this.config.sampleRate,this.oututSampleBits=this.config.sampleBits}startRecord(){return this.context&&this.destroyRecord(),this.initRecorder(),this.audioInput=this.context.createMediaStreamSource(this.stream),this.audioInput.connect(this.analyser),this.analyser.connect(this.recorder),this.recorder.connect(this.context.destination),0}pauseRecord(){this.needRecord=!1}resumeRecord(){this.needRecord=!0}stopRecord(){0==this.getType&&this.size>0&&this.getPCM(),1==this.getType&&this.downloadPCM(this.fileName),this.audioInput&&this.audioInput.disconnect(),this.source&&this.source.stop(),this.recorder.disconnect(),this.analyser.disconnect(),this.needRecord=!0}initRecorder(){this.clearRecordStatus(),this.context=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.context.createAnalyser(),this.analyser.fftSize=2048;let e=this.context.createScriptProcessor||this.context.createJavaScriptNode;this.recorder=e.apply(this.context,[4096,this.config.numChannels,this.config.numChannels]),this.recorder.onaudioprocess=e=>{if(!this.needRecord)return;let t=e.inputBuffer.getChannelData(0),i=null;this.lBuffer.push(new Float32Array(t)),this.size+=t.length,2===this.config.numChannels&&(i=e.inputBuffer.getChannelData(1),this.rBuffer.push(new Float32Array(i)),this.size+=i.length),this.fileSize=Math.floor(this.size/Math.max(this.inputSampleRate/this.outputSampleRate,1))*(this.oututSampleBits/8),this.duration+=4096/this.inputSampleRate,0==this.getType&&this.eachSize&&this.fileSize>=this.eachSize&&this.getPCM(),0==this.getType&&this.eachTime&&this.duration>=this.eachTime&&this.getPCM()}}destroyRecord(){return this.clearRecordStatus(),this.closeAudioContext()}clearRecordStatus(){this.lBuffer.length=0,this.rBuffer.length=0,this.size=0,this.fileSize=0,this.PCM=null,this.audioInput=null,this.duration=0}closeAudioContext(){return this.context&&this.context.close&&"closed"!==this.context.state?this.context.close():new Promise((e=>{e()}))}getPCM(){let e=this.getData();return e=function(e,t,i){let n=t/i,r=Math.max(n,1),o=e.left,s=e.right,a=Math.floor((o.length+s.length)/n),c=new Float32Array(a),l=0,d=0;for(;l<a;){let e=Math.floor(d);c[l]=o[e],l++,s.length&&(c[l]=s[e],l++),d+=r}return c}(e,this.inputSampleRate,this.outputSampleRate),0==this.getType?window.CRVideo_NotifyAudioPCMDat.target(this.aSide,Re(e,this.oututSampleBits,this.littleEdian)):Re(e,this.oututSampleBits,this.littleEdian)}getPCMBlob(){return new Blob([this.getPCM()])}downloadPCM(e="recorder"){!function(e,t="recorder"){me(e,t,"pcm")}(this.getPCMBlob(),e)}getData(){let e=this.flat();return 0==this.getType&&(this.tempPCMBuffer=this.lBuffer,this.tempSize=this.size,this.lBuffer=[],this.size=0,this.duration=0,this.fileSize=0),e}flat(){let e=null,t=new Float32Array(0);1===this.config.numChannels?e=new Float32Array(this.size):(e=new Float32Array(this.size/2),t=new Float32Array(this.size/2));let i=0;for(let t=0;t<this.lBuffer.length;t++)e.set(this.lBuffer[t],i),i+=this.lBuffer[t].length;i=0;for(let e=0;e<this.rBuffer.length;e++)t.set(this.rBuffer[e],i),i+=this.rBuffer[e].length;return{left:e,right:t}}}window.__Rtc.CRRTCAudioRecorder=new class{constructor(){this.initSDKInterface(),this.micRecorder=null,this.speakerRecorder=null}initSDKInterface(){window.CRVideo_StartGetAudioPCM=(e,t,i)=>{try{console.crlog(`[AudioRecorder] CRVideo_StartGetAudioPCM(${e},${t},${JSON.stringify(i)})`)}catch(e){console.error(e)}return this.startGetAudioPCM(e,t,i)},window.CRVideo_StopGetAudioPCM=e=>{console.crlog(`[AudioRecorder] CRVideo_StopGetAudioPCM(${e})`),this.stopGetAudioPCM(e)}}startGetAudioPCM(e=0,t=0,i={}){let n;if(0==e&&null===this.micRecorder?n=__Rtc.CRRTCAudio.localAudioStream:1==e&&null===this.speakerRecorder&&(n=__Rtc.CRRTCAudio.distantAudioStream),0==t&&!i.eachSize&&!i.eachTime)return 1;if(1==t&&!i.fileName)return 1;if(!n||1!=n.active)return 1;i.sampleBits=void 0===i.sampleBits?i.sampleBits=16:i.sampleBits,i.sampleRate=void 0===i.sampleRate?i.sampleRate=16e3:i.sampleRate;const r=new Se({aSide:e,getType:t,jsonParam:i},n);return 0==e?this.micRecorder=r:this.speakerRecorder=r,r.startRecord()}stopGetAudioPCM(e){0==e&&this.micRecorder&&(this.micRecorder.stopRecord(),this.micRecorder=null),1==e&&this.speakerRecorder&&(this.speakerRecorder.stopRecord(),this.speakerRecorder=null)}},window.CRVideo_NotifyAudioPCMDat=new CRVideo.CbProxy("CRVideo_NotifyAudioPCMDat");var Ie=__webpack_require__(7456),ye=__webpack_require__.n(Ie);const ve=window.CRVideo,we=window.Ice,Ee={NotifyUploadDocFileToNetDiskRslt:new ve.CbProxy("NotifyUploadDocFileToNetDiskRslt"),NotifyNetDiskDocFileTrsfProgress:new ve.CbProxy("NotifyNetDiskDocFileTrsfProgress"),GetNetDiskDocFilePageInfoRslt:new ve.CbProxy("GetNetDiskDocFilePageInfoRslt")};const be=new class{constructor(){}init(){this.downlaodingIDs=[],i.Z.SDK_Event.addEventListener("startNetDiskService",((e,t,i,n)=>{this.userNetDiskId=n||ve.multiProject.userId,this.prx=t.NDClientPrx.uncheckedCast(e.stringToProxy("NetDisk"),"Client"),this.prx.createConfSession(i,ye()(i)).then((e=>{this.meetingPrx=e,this.startKeepAlive()}))})).addEventListener("EnterMeetingSuccess",(e=>{this.compid=e.confInfo.compid})).addEventListener("CleanMeetingData",(()=>{this.stopKeepAlive(),this.userNetDiskId=null,this.meetingPrx=null,this.compid=null,clearTimeout(this.docTrsfProgressTimerId),this.docTrsfProgressTimerId=null,this.ServerConvertStatus=null}))}unInit(){i.Z.SDK_Event.removeAllEvent("startNetDiskService"),this.reset()}reset(){this.userNetDiskId=null,this.compid=null,this.meetingPrx=null,this.downloadingID=[]}startKeepAlive(){this.stopKeepAlive(),console.log("--------NetDisk KeepAlive ---------"),this.meetingPrx.keepAlive(),this.keepAliveTimerId=setTimeout(this.startKeepAlive.bind(this),3e3)}stopKeepAlive(){clearTimeout(this.keepAliveTimerId),this.keepAliveTimerId=null}SDKInterfaceExports(){return{getStat:this.getStat.bind(this),DownloadData:this.DownloadData.bind(this),CreateDownloadId:this.CreateDownloadId.bind(this),CancelDownloadId:this.CancelDownloadId.bind(this),DownloadBoardFile:this.DownloadBoardFile.bind(this),UploadDocFileToNetDisk:this.UploadDocFileToNetDisk.bind(this),GetNetDiskDocFilePageInfo:this.GetNetDiskDocFilePageInfo.bind(this),...Ee}}MeetInterfaceExports(){return{GetListDir:this.GetListDir.bind(this),Import2Conf:this.Import2Conf.bind(this),ConnectUserPan:this.ConnectUserPan.bind(this),ConnectCompanyPan:this.ConnectCompanyPan.bind(this)}}ConnectUserPan(){return new Promise(((e,t)=>{console.log(this.userNetDiskId,ye()(this.userNetDiskId)),this.prx.createUserSession(this.userNetDiskId,ye()(this.userNetDiskId)).then((t=>{this.userPrx=t,e()})).exception((e=>{console.crlog(`[NetDisk] ConnectUserPan Fail: ${e.toString()}`),t()}))}))}ConnectCompanyPan(){return new Promise(((e,t)=>{this.prx.createCompanySession(this.compid,ye()(this.compid)).then((t=>{this.CompanyPrx=t,e()})).exception((e=>{console.crlog(`[NetDisk] ConnectCompanyPan Fail: ${e.toString()}`),t()}))}))}getPanType(e){return e?[this.meetingPrx,this.userPrx,this.CompanyPrx][e]:this.meetingPrx}GetListDir(e,t){const i=this.getPanType(t);return new Promise(((t,n)=>{if(!i)return n();i.listDir(e).then((e=>{t(e)})).exception((e=>{console.crlog("[NetDisk] GetListDir error: }"),console.crlog(e)}))}))}Import2Conf(e,t,i,n){return console.crlog(`[NetDisk] Import2Conf Start path: ${e}`),new Promise(((i,r)=>{const o=new NetDiskService.DataDict;this.getPanType(n).import2ConfDD(e,t,o).then((t=>{console.crlog(`[NetDisk] Import2Conf Success path: ${e}`),i({width:t.get("width"),height:t.get("height"),type:t.get("type"),files:t.get("rsltFiles").split(";")})})).exception((e=>{console.crlog(`[NetDisk] Import2Conf Success Fail: ${e.toString()}`),r()}))}))}getStat(e){let t=0;return new Promise(((i,n)=>{if(!this.meetingPrx)return n();const r=()=>{this.meetingPrx.stat(e).then((e=>{i(e)})).exception((e=>{const i=e.toString();if(console.crlog(`[NetDisk] error getStat error: ${i}`),i.indexOf("NetDiskService::FileOrDirectoryNotExists")>-1){if(t++>10)return n();setTimeout((()=>{r()}),500)}else n()}))};r()}))}beginDownload(e){return new Promise(((t,i)=>{if(!this.meetingPrx)return i();this.meetingPrx.beginDownload(e).then((e=>{t(e)})).exception((e=>{console.crlog(`[NetDisk] error beginDownload error: ${e.toString()}`)}))}))}DownloadBoardFile(e,t,i){return new Promise(((n,r)=>{let o=0;const s=()=>{this.GetListDir("").then((a=>{const c=a.files.find((t=>t.name===e));c?this.DownloadData(c.path,i).then((i=>{const o=FileManager.WriteFile({dir:t,fileName:e,buffer:i.buffer});o?n(o):r(`[NetDisk] error write file: ${o}`)})).catch((e=>{console.crlog(e),r(e)})):o++>10?r(`[NetDisk] error not find file: ${e}`):setTimeout((()=>{s()}),500)})).catch((e=>{console.crlog(e),r(e)}))};s()}))}DownloadData(e,t){console.crlog(`[NetDisk] start download netdisk Data File: ${e}`);const i=()=>this.downloadingID.find((e=>e===t));return new Promise(((t,n)=>{this.getStat(e).then((e=>{if(!i())return n();this.beginDownload(e.md5).then((r=>{if(!i())return n();console.log(`[NetDisk] beginDownload success server length: ${r.length}`);const o=+e.attributes.get("orgSize"),s=e.size.low;if(s>10485760)return;const a=1e6,c=Math.ceil(s/a);const l=new ArrayBuffer(s);let d=new Uint8Array(l);const u=l=>{if(!r[l])return console.crlog("[NetDisk] beginDownload fail: "),void n();r[l].createFSIOSession(e.md5,"r",e.md5).then((e=>{if(!i())return n();let r=0;for(let h=0;h<c;h++){const f=h*a,p=h===c-1?s%a:a;e.read(new we.Long(0,f),new we.Long(0,p)).then((e=>{if(!i())return n();d.set(e,f),++r===c&&(o!=s&&(d=new Zlib.Inflate(d).decompress()),console.crlog("[NetDisk] FSIOSession read Success"),t(d))})).exception((e=>{console.crlog(`[NetDisk] FSIOSession read Fail: ${e.toString()}`),u(++l)}))}})).exception((e=>{console.crlog(`[NetDisk] createFSIOSession Fail: ${e.toString()}`),u(++l)}))};u(0)}))})).catch((e=>{console.crlog(`[NetDisk] getStat Fail: ${e}`)}))}))}CreateDownloadId(e){this.downloadingID.find((t=>t===e))||(console.crlog(`[NetDisk] CreateDownloadId uuid: ${e}`),this.downloadingID.push(e))}CancelDownloadId(e){console.crlog(`[NetDisk] CancelDownloadId uuid: ${e}`),this.downloadingID=this.downloadingID.filter((t=>t!==e))}UploadDocFileToNetDisk(e,t){try{Ee.NotifyUploadDocFileToNetDiskRslt.target(e,0,1);const n=new ArrayBuffer(t.size),r=new Uint8Array(n),o=10485760,s=Math.ceil(t.size/o),a=wx.getFileSystemManager();for(let e=0;e<s;e++){const i=e*o,n=a.readFileSync(t.path,void 0,i,e===s-1?t.size%o:o);r.set(new Uint8Array(n),i)}const c=e.match(/[^<>/\\\|:""\*\?]+\.\w+$/)[0],l=ye()(r),d=new we.Long(0,r.length),u=ve.userInfo,h=new NetDiskService.DataDict;h.set("orgFileName",c),h.set("ownerName",u?String(u.nickname):"0"),h.set("orgSize",String(r.length)),h.set("ownerID",u?String(u.termId):"0");const f=new Date,p=`${f.getFullYear()}-${i.Z.PrefixInteger(f.getMonth()+1,2)}-${i.Z.PrefixInteger(f.getDate(),2)} ${i.Z.PrefixInteger(f.getHours(),2)}:${i.Z.PrefixInteger(f.getMinutes(),2)}:${i.Z.PrefixInteger(f.getSeconds(),2)}`,_=`/progData/${e}`,C=new NetDiskService.StatInfo(c,_,l,d,p,h);this.meetingPrx.beginUpload(C).then(((t,i)=>{console.crlog(`[NetDisk] 1.beginUpload Success services number: ${i.length}`);const n=t=>{console.crlog(`[NetDisk] beginUpload error: ${t.toString()}`),++s>i.length-1?Ee.NotifyUploadDocFileToNetDiskRslt.target(e,1):o()},o=()=>{i[s].createFSIOSession(t,"w",l).then((o=>{console.crlog(`[NetDisk] 2.createFSIOSession Success host: ${o._reference._endpoints[0]._host}`);const a=1e6,c=r.length,l=Math.ceil(c/a);let d=0;const u=()=>{const h=d*a,f=h+(d+1===l?c%a:a),p=r.slice(h,f);console.crlog(`[NetDisk] 3.write data start: ${h},length: ${p.length}`),Ee.NotifyUploadDocFileToNetDiskRslt.target(e,0,2,f/r.length),o.write(new we.Long(0,h),p).then((()=>{++d===l?(console.crlog("[NetDisk] 4.write Success"),i[s].fileUploadCompleted(t,!0).then((r=>{console.crlog("[NetDisk] 5.fileUploadCompleted Success"),this.meetingPrx.endUpload(t,r).then((()=>{console.crlog("[NetDisk] 6.endUpload Success"),Ee.NotifyUploadDocFileToNetDiskRslt.target(e,0,3),this.ServerConvert(_,e,i[s])})).exception(n)})).exception(n)):u()})).exception(n)};u(s)})).exception(n)};let s=0;o()})).exception((t=>{if(console.crlog(`[NetDisk] beginUpload error: ${t.toString()}`),t instanceof NetDiskService.FileAlreadyExists||t instanceof NetDiskService.FdfsFileAlreadyExists)return Ee.NotifyUploadDocFileToNetDiskRslt.target(e,0,4),void this.ServerConvert(_,e);Ee.NotifyUploadDocFileToNetDiskRslt.target(e,1)}))}catch(t){console.crlog(`[NetDisk] beginUpload error: ${t}`),Ee.NotifyUploadDocFileToNetDiskRslt.target(e,1)}}ServerConvert(e,t,i){const n=new NetDiskService.DataDict;i=i||null,this.meetingPrx.convert(e,n,i).then((e=>{console.crlog("[NetDisk] ServerConvert startting"),this.getDocTrsfProgress(e,t)})).exception((function(e){console.crlog(e.toString())}))}getDocTrsfProgress(e,t){this.meetingPrx.getConvertStatus(e).then((i=>{console.log(i),this.ServerConvertStatus!==i.status&&Ee.NotifyNetDiskDocFileTrsfProgress.callback(t,i.status),4===i.status?this.ServerConvertStatus=null:(this.ServerConvertStatus=i.status,this.docTrsfProgressTimerId=setTimeout((()=>{this.getDocTrsfProgress(e,t)}),500))}))}GetNetDiskDocFilePageInfo(e){const t=`/progData/${e}`;function i(){Ee.GetNetDiskDocFilePageInfoRslt.target(e,1,null)}this.getStat(t).then((t=>{this.meetingPrx.getConvertStatus(t.md5).then((t=>{const i={height:+t.attributes.get("height"),width:+t.attributes.get("width"),fileList:t.fileList};Ee.GetNetDiskDocFilePageInfoRslt.target(e,0,i)})).exception((function(){i()}))})).catch((e=>{console.crlog(e),i()}))}};window.__Rtc.CRRTCNetdisk=be,i.Z.SDK_Event.addEventListener("SDKInit",(()=>{be.init()})).addEventListener("SDKUnInit",(()=>{be.unInit()}));be.SDKInterfaceExports(),be.MeetInterfaceExports();function De(e,t,i,n,r=!1){const o=JSON.parse(JSON.stringify(n)),{drawCanvas:s,pageID:a,canvasContainer:c}=i,l=s.width/t._wbDesc.width,d=o.attr||{};let u=null!=d.fontSize?d.fontSize:t._toolAttr.fontSize,h=null!=d.fontWeight?d.fontWeight:"normal",f=null!=d.fontStyle?d.fontStyle:"normal",p=null!=d.fontFamily?d.fontFamily:"sans-serif",_=null!=d.fontUnderLine&&d.fontUnderLine,C=null!=d.penColor?d.penColor:t._toolAttr.color,g=null!=d.txtBkColor?d.txtBkColor:t._toolAttr.fontBackGroundColor;this.minWidth=0,this.minHeight=0,this.calcBKSzie=()=>{let e,t=0,i=0;const n=this.textInput.value.split("\n");return n.forEach((i=>{document.querySelector(`.calTextWidth_${a}`)&&document.querySelector("body").removeChild(document.querySelector(`.calTextWidth_${a}`));const n=document.createElement("text");n.className=`calTextWidth_${a}`,document.querySelector("body").appendChild(n),n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.zIndex=0,n.style.opacity=0,n.style.fontSize=u*l+"px",n.style.fontWeight=h,n.style.fontStyle=f,n.style.fontFamily=p,n.innerText=i;const r=n.clientWidth;t=r>t&&i.length>0?r:t;var o=window.getComputedStyle(n);e=o.getPropertyValue("letter-spacing")})),i=this.textInput.style.lineHeight.replace("px","")*n.length,i=i<this.minHeight?this.minHeight:i,t=t<this.minWidth?this.minWidth:t,{width:t,height:i,letterSpacing:e}},this.onInputHandler=()=>{const{width:e,height:t,letterSpacing:i}=this.calcBKSzie();this.textInput.style.width=e+.1*u+"px",this.textInput.style.height=t+"px",this.textInput.style.letterSpacing=i},this.onBlurHandler=()=>{o.attr.txtBkColor=g,o.attr.fontSize=u,o.attr.fontWeight=h,o.attr.fontStyle=f,o.attr.fontUnderLine=_,o.attr.fontFamily=p,o.attr.txt=this.textInput.value.toString(),r||(o.top=Math.round(o.top-o.attr.fontSize/2-10)),this.textInput.value.length>0&&(r?o.attr.txt!=n.attr.txt&&(e.modifyShapeAttr(t._boardID,a,o),t._resumableShapesArr=[],t._revocableShapesArr.push({action:"modify",oldShape:{boardID:t._boardID,pageID:a,shape:n},newShape:{boardID:t._boardID,pageID:a,shape:o}}),t._changeRedoUndoState()):(e.addShape(t._boardID,a,o),t._resumableShapesArr=[],t._revocableShapesArr.push({action:"add",shape:{boardID:t._boardID,pageID:a,shape:o}}),t._changeRedoUndoState(),t._drawShape(i,o),t._addShapeToShapeList(JSON.parse(JSON.stringify(o)),a))),this.textInput.style.display="none",this.textInput.value="",this.textInput.onblur=null,this.textInput.removeEventListener("blur",this.onBlurHandler),c.removeChild(document.querySelector(`.${this.textInput.className}`))},this.onFocusHandler=()=>{},this.createInput=()=>{const e=document.createElement("textarea");if(e.className=`text-input-${Math.round(1e6*Math.random())}`,e.style.position="absolute",e.style.margin="0",e.style.padding=10*l+"px",e.style.paddingTop=(10-.05*u)*l+"px",e.style.zIndex="2",e.style.resize="none",e.style.display="none",e.style.outline="none",e.style.border="none",e.style.overflow="hidden",e.style.fontSize=u*l+"px",e.style.height=u*l+"px",e.style.width=10*l+"px",e.style.lineHeight=1.1*u*l+"px",e.style.left=o.left*l+"px",e.style.top=(o.top-u/2-10)*l+"px",e.style.color=C,e.style.fontWeight=h,e.style.fontStyle=f,e.style.fontFamily=p,e.style.backgroundColor=g.replace(/(rgba\([^)]+),[^)]+\)/,"$1,1)"),this.textInput=e,r){e.value=o.attr.txt;const{width:t,height:i,letterSpacing:n}=this.calcBKSzie();this.minWidth=t,this.minHeight=i,e.style.top=o.top*l+"px",e.style.width=t+"px",e.style.height=i+"px",e.style.letterSpacing=n,this.onInputHandler()}return e.addEventListener("input",this.onInputHandler),e.addEventListener("blur",this.onBlurHandler),e.addEventListener("focus",this.onFocusHandler),c.appendChild(e),this.showInput(),e},this.showInput=()=>{this.textInput.style.display="block",setTimeout((()=>{this.textInput.focus()}),0)},this.createInput()}const Me=window.CRVideo,Pe=window.Ice,xe=0,Te=1,Ae=2,Oe=3,Ve=4,ke=5,Ne=6,Le=8,Ue=9,Be=10,Fe=11,je=12,$e=1;const He=class{constructor(e,t={}){this._id=`boardView_${Pe.generateUUID()}`,this._boardID=e||"",this._wbDesc=null,this._curPageID=0,this._handlerDiv=null,this._mainContainerDiv=null,this._canvasList=[],this._mainContainerDivStyle={},this._canvasStyle={},this._attr={readOnly:t.readOnly||!1,asyncPage:t.asyncPage||!0,followPage:t.followPage||!0,asyncScale:t.asyncScale||!0,followScale:t.followScale||!0,pageMargin:t.pageMargin||10,showRange:t.showRange||!1},this._toolAttr={lineWidth:1,lineStyle:$e,color:"",fontSize:20,fontFamily:"sans-serif",fontWeight:"normal",fontStyle:"normal",fontUnderLine:!1,fontBackGroundColor:"rgba(0,0,0,1)"},this._shapeType=xe,this._revocableShapesArr=[],this._resumableShapesArr=[],this._undo=!1,this._redo=!1,this._lastOrder=1,this._pageMarginClientHeight=0,this._canvasContainerHeight=0,this._shapeDataCacheContainer=[],this._shapeDataSendTimer=-1,this._shapeDataSendInterval=100,this._drawAllShapesTimeout=-1,this._drawAllShapesWaiting=!1,this._debounce=(e,t)=>{var i;t=t||200;return function(){var n=this,r=arguments;i&&clearTimeout(i),i=setTimeout((function(){i=null,e.apply(n,r)}),t)}},this._throttle=(e,t)=>{var i,n;t=t||200;return function(){var r=this,o=arguments,s=+new Date;i&&s-i<t?(clearTimeout(n),n=setTimeout((function(){i=s,e.apply(r,o)}),t)):(i=s,e.apply(r,o))}},this._drawAllShapes=this._throttle(this._drawAllShapesB,200),this._init()}_init(){this._initCallback(),this._initData(),this._initDom()}_initData(){this._curPageID=0,this._revocableShapesArr=[],this._resumableShapesArr=[],this._undo=!1,this._redo=!1}_initCallback(){this.notifyBoardCurPageChanged=new Me.CbProxy("notifyBoardCurPageChanged"),this.notifyRedoEnableChanged=new Me.CbProxy("notifyRedoEnableChanged"),this.notifyUndoEnableChanged=new Me.CbProxy("notifyUndoEnableChanged"),this.notifyScaleChanged=new Me.CbProxy("notifyScaleChanged"),this.notifyMarkException=new Me.CbProxy("notifyMarkException"),this.notifyUserTextInput=new Me.CbProxy("notifyUserTextInput"),this.notifyMarkException=new Me.CbProxy("notifyMarkException"),X.addEventListener("notifySetScale",(e=>{e.wId==this._boardID&&e.opId!=Me.userInfo.userId&&this._attr.followScale&&(this._wbDesc.scale=e.scale,this.resize("notifySetScale"),this.notifyScaleChanged.target(e.wId,e.scale,e.opId))}))}_initDom(){console.crlog(`[BoardView] ${this._id} _initDom`),this._handlerDiv||(this._handlerDiv=document.createElement("div"),this._handlerDiv.id=this._id,this._handlerDiv.style.width="100%",this._handlerDiv.style.height="100%",this._handlerDiv.style.position="relative",this._handlerDiv.style.boxSizing="border-box",this._handlerDiv.style.overflow="hidden"),this._handlerDiv.innerHTML="",this._mainContainerDiv=document.createElement("div"),this._mainContainerDiv.style.position="absolute",this._mainContainerDiv.style.left="50%",this._mainContainerDiv.style.top="50%",this._mainContainerDiv.style.transform="translate(-50%, -50%)",this._mainContainerDiv.style.display="flex",this._mainContainerDiv.style.flexDirection="column",this._mainContainerDiv.style.justifyContent="flex-start",this._mainContainerDiv.style.alignItems="flex-start",this._mainContainerDiv.style.overflow="auto",this._mainContainerDiv.style.boxSizing="border-box";for(let e in this._mainContainerDivStyle)this._mainContainerDiv.style[e]=this._mainContainerDivStyle[e];this._handlerDiv.appendChild(this._mainContainerDiv);new ResizeObserver((e=>{this.resize("on resize")})).observe(this._handlerDiv)}_bindingBoardInfo(){const e=ae.wbDescList.find((e=>e.wId==this._boardID));e&&(console.crlog(`[BoardView] ${this._id} _bindingBoardInfo, wID: ${this._boardID}`),this._wbDesc=e,this._createCanvas(),this._refreshPos(),-1==ae.viewList.findIndex((e=>e._id==this._id))&&ae.viewList.push(this))}_createCanvas(){this._canvasList=[];for(let e=0;e<this._wbDesc.pageCount;e++){const t=document.createElement("div");t.style.position="relative",this._mainContainerDiv.appendChild(t);const i=document.createElement("canvas"),n=i.getContext("2d");i.style.boxSizing="border-box",i.style.backgroundColor="rgba(255,255,255,1)",i.style.height="100%",i.style.width="100%",i.width=this._wbDesc.width||0,i.height=this._wbDesc.height||0,t.appendChild(i);const r=document.createElement("canvas"),o=r.getContext("2d");r.style.position="absolute",r.width=this._wbDesc.width||0,r.height=this._wbDesc.height||0,r.style.left="0px",r.style.top="0px",r.style.width="100%",r.style.height="100%",t.appendChild(r),this._canvasList.push({canvasContainer:t,shapeCanvas:i,drawCanvas:r,shapeCanvasCtx:n,drawCanvasCtx:o,pageID:e});for(let e in this._canvasStyle)i.style[e]=this._canvasStyle[e]}this._loadEvent()}_refreshPos(){let{xPos:e,yPos:t}=this._wbDesc;this._attr.followPage&&(this._mainContainerDiv.onscroll=null),this._mainContainerDiv.scrollTop=(this._mainContainerDiv.scrollHeight+this._pageMarginClientHeight)*t,this._mainContainerDiv.scrollLeft=e*this._mainContainerDiv.scrollWidth,this._attr.followPage&&(clearTimeout(this._loadEventTimeout),this._loadEventTimeout=setTimeout((()=>{this._loadEvent()}),50)),this._calcCurPageID()}_calcCurPageID(){const e=this._curPageID;let t=this._canvasContainerHeight,i=this._pageMarginClientHeight,n=this._mainContainerDiv.clientHeight,r=this._mainContainerDiv.scrollTop;const o=t+i/2-n/2;this._curPageID=0==r||1==this._wbDesc.pageCount?0:Math.floor((r-o)/(t+i))+1,e!=this._curPageID&&this.notifyBoardCurPageChanged.target(this._curPageID)}_setLineStyle(e,t){const i=e.shapeCanvas.width/this._wbDesc.width;e.drawCanvasCtx.strokeStyle=e.shapeCanvasCtx.strokeStyle=t.attr.penColor,e.drawCanvasCtx.lineWidth=e.shapeCanvasCtx.lineWidth=t.attr.penWidth*i,e.drawCanvasCtx.lineCap=e.shapeCanvasCtx.lineCap="round",e.shapeCanvasCtx.setLineDash([1,0]),e.drawCanvasCtx.setLineDash([1,0]),t.type==ke&&(e.drawCanvasCtx.lineWidth=e.shapeCanvasCtx.lineWidth=1)}_convertToolType(e){let t=e;switch(e){case 11:t=3;break;case 12:t=4}return t}_drawAllShapesB(e={},t){if(!this._wbDesc.shapeList||1==this._drawAllShapesWaiting)return;const i=null==e.pageID?null:e.pageID;this._clearAllMark(i),this._wbDesc.shapeList.forEach((e=>{if(i==e.pageId||null==i){const t=this._canvasList.find((t=>t.pageID==e.pageId));t.drawCanvasCtx.clearRect(0,0,t.drawCanvas.width,t.drawCanvas.height);for(let i=0;i<e.shapes.length;i++)this._drawShape(t,e.shapes[i])}})),e.callback&&e.callback()}_drawAppendShapeDat(e,t,i,n){this._canvasList.forEach((r=>{if(r.pageID==e){const e=i.length,c=i.concat(n);if(0==c.length||0==n.length)return;const{left:l,top:d}=t,u=r.shapeCanvasCtx,h=r.shapeCanvas.width/this._wbDesc.width;if(this._setLineStyle(r,t),u.beginPath(),2==c.length)u.moveTo((l+c[0].x)*h,(d+c[0].y)*h),u.lineTo((2*l+c[0].x+c[1].x)/2*h,(2*d+c[0].y+c[1].y)/2*h);else if(c.length>2)for(var o=0;o<n.length;o++)if(1==e&&0==o)u.moveTo((l+c[e-1].x)*h,(d+c[e-1].y)*h),u.lineTo((2*l+c[e].x+c[e].x)/2*h,(2*d+c[e].y+c[e].y)/2*h);else{const{x:t,y:i}=c[e-1+o],{x:n,y:r}=c[e-2+o],{x:f,y:p}=c[e+o];u.moveTo((2*l+n+t)/2*h,(2*d+r+i)/2*h);var s=(2*l+f+t)/2,a=(2*d+p+i)/2;u.quadraticCurveTo((l+t)*h,(d+i)*h,s*h,a*h)}u.stroke(),this._calcRange(t)}}))}_drawShape(e,t,i){switch(this._lastOrder=t.order>=this._lastOrder?t.order:this._lastOrder,t.type){case 1:this._drawPencil(e,t,i);break;case 2:this._drawStraightLine(e,t,i);break;case 3:this._drawRect(e,t,i);break;case 4:this._drawEllipse(e,t,i);break;case 5:this._drawArrow(e,t,i);break;case 6:this._drawText(e,t,i)}}_uploadCurPosition(){this._attr.asyncPage&&te.setCurrentPos(this._boardID,this._mainContainerDiv.scrollLeft/this._mainContainerDiv.scrollWidth,this._mainContainerDiv.scrollTop/(this._mainContainerDiv.scrollHeight+this._pageMarginClientHeight)).then((e=>{})).catch((e=>{console.error(e)}))}_loadEvent(){this._mainContainerDiv.onmousedown=e=>{this._shapeType==Be&&(e.preventDefault(),this._mainContainerDiv.onmousemove=e=>{e.preventDefault(),this._mainContainerDiv.scrollTop=this._mainContainerDiv.scrollTop-e.movementY,this._mainContainerDiv.scrollLeft=this._mainContainerDiv.scrollLeft-e.movementX},document.addEventListener("mouseup",(()=>{this._mainContainerDiv.onmousemove=null})))},this._mainContainerDiv.onscroll=e=>{this._boardID&&(this._calcCurPageID(),this._uploadCurPosition())},this._canvasList.forEach((e=>{const t=e.drawCanvas,n=e.drawCanvasCtx,r=e.pageID;t.ondblclick=i=>{if(this._shapeType!=Be&&!this._attr.readOnly&&this._shapeType==Le){const n=t.width/this._wbDesc.width,r=i.offsetX/n,o=i.offsetY/n;let s=this._pitchOnShape(e,Math.round(r),Math.round(o));if(s&&s.type==Ne){let t=JSON.parse(JSON.stringify(s));new De(ae,this,e,t,!0)}}},t.onmousedown=o=>{if(this._shapeType==Be||this._attr.readOnly)return;let s=null;const a=t.width/this._wbDesc.width,c=o.offsetX/a,l=o.offsetY/a;let d={type:this._convertToolType(this._shapeType),order:++this._lastOrder,sId:Pe.generateUUID(),owner:Me.userInfo.userId,left:Math.round(c),top:Math.round(l),attr:{penColor:i.Z.colorHexToRgba(this._toolAttr.color,1).rgba,penWidth:this._toolAttr.lineWidth,penStyle:this._toolAttr.lineStyle},dat:[]};if(this._setLineStyle(e,d),this._shapeType==Le){let t=this._pitchOnShape(e,Math.round(c),Math.round(l));t&&(d=t,s={boardID:this._boardID,pageID:r,sPosOld:{sId:t.sId,left:Math.round(t.left),top:Math.round(t.top)}})}else if(this._shapeType==Ue){let t=this._pitchOnShape(e,Math.round(c),Math.round(l));t&&this._drawRange(e,t,a)}else{const t=this._wbDesc.shapeList.find((e=>e.pageId==r));if(t&&t.shapes.length>800)return void this.notifyMarkException.target({errCode:1,errDesc:""});this._shapeType==Te&&(d.dat.push({x:0,y:0}),this._shapeDataCacheContainer=[],ae.addShape(this._boardID,r,d)),this._shapeType!=Ae&&this._shapeType!=ke||(d.attr.lineStartPosX=0,d.attr.lineStartPosY=0),this._shapeType!=Oe&&this._shapeType!=Ve&&this._shapeType!=Fe&&this._shapeType!=je||(d.attr.rectX=0,d.attr.rectY=0,d.attr.rectRadius=0,this._shapeType!=Fe&&this._shapeType!=je||(d.attr.fill=!0)),this._shapeType==Ne&&new De(ae,this,e,d)}let u={x:o.offsetX,y:o.offsetY},h=null;t.onmousemove=i=>{this._setLineStyle(e,d);const o=i.offsetX,s=i.offsetY;if(this._shapeType==Le&&d.range){if(Math.abs(o/a-c)<=5&&Math.abs(s/a-l)<=5)return;d.left=d.left+(o-u.x)/a,d.top=d.top+(s-u.y)/a,u={x:o,y:s},n.clearRect(0,0,t.width,t.height),this._drawShape(e,d,"drawing"),this._calcRange(d),this._drawRange(e,d,a,"drawing")}else if(this._shapeType==Te){n.beginPath();const e={x:(u.x+o)/2,y:(u.y+s)/2},i={x:Math.round(o/a-c),y:Math.round(s/a-l)};if(d.dat.length>=600)return this.notifyMarkException.target({errCode:2,errDesc:""}),void(t.onmousemove=null);d.dat.push(i),this._shapeDataCacheContainer.push(i),-1==this._shapeDataSendTimer&&(this._shapeDataSendTimer=setInterval((()=>{this._shapeDataCacheContainer.length>0&&ae.appendShapeDat(this._boardID,r,d.sId,this._shapeDataCacheContainer),this._shapeDataCacheContainer=[]}),this._shapeDataSendInterval)),h?(n.moveTo(h.x,h.y),n.quadraticCurveTo(u.x,u.y,e.x,e.y)):(n.moveTo(u.x,u.y),n.lineTo(o,s)),n.stroke(),h=e,u={x:o,y:s}}else this._shapeType!=Ae&&this._shapeType!=ke||(d.attr.lineEndPosX=Math.round(i.offsetX/a-c),d.attr.lineEndPosY=Math.round(i.offsetY/a-l),n.clearRect(0,0,t.width,t.height),this._drawShape(e,d,"drawing")),this._shapeType!=Ve&&this._shapeType!=je&&this._shapeType!=Oe&&this._shapeType!=Fe||(d.attr.rectWidth=Math.round(o/a-c-d.attr.rectX),d.attr.rectHeight=Math.round(s/a-l-d.attr.rectY),n.clearRect(0,0,t.width,t.height),this._drawShape(e,d,"drawing"))};const f=i=>{if(this._shapeType==Le&&d.range&&(s.sPosOld.left!=Math.round(d.left)||s.sPosOld.top!=Math.round(d.top))){te.moveShape(this._boardID,r,[{sId:d.sId,left:Math.round(d.left),top:Math.round(d.top)}]),this._resumableShapesArr=[],this._revocableShapesArr.push({action:"move",shape:s});this._revocableShapesArr[this._revocableShapesArr.length-1].shape.sPosNew={sId:d.sId,left:Math.round(d.left),top:Math.round(d.top)},this._changeRedoUndoState()}if(this._shapeType==Ue){let t=this._pitchOnShape(e,Math.round(c),Math.round(l));t&&(t&&ae.delShape(this._boardID,r,[t.sId]),this._resumableShapesArr=[],this._revocableShapesArr.push({action:"del",shape:{boardID:this._boardID,pageID:r,shape:t}}),this._changeRedoUndoState())}this._shapeType==Te&&(this._shapeDataCacheContainer.length>0&&ae.appendShapeDat(this._boardID,r,d.sId,this._shapeDataCacheContainer),this._shapeDataCacheContainer=[]),this._shapeType!=Te&&this._shapeType!=Ae&&this._shapeType!=ke&&this._shapeType!=Oe&&this._shapeType!=Ve&&this._shapeType!=Fe&&this._shapeType!=je||(this._drawShape(e,d),this._addShapeToShapeList(d,r),this._resumableShapesArr=[],this._revocableShapesArr.push({action:"add",shape:{boardID:this._boardID,pageID:r,shape:d}}),this._changeRedoUndoState(),this._shapeType!=Te&&ae.addShape(this._boardID,r,d)),clearInterval(this._shapeDataSendTimer),this._shapeDataSendTimer=-1,t.onmousemove=null,document.removeEventListener("mouseup",f),u=null,h=null};document.addEventListener("mouseup",f)}}))}_addShapeToShapeList(e,t){let i=this._wbDesc.shapeList.find((e=>e.pageId==t));i||(i={pageId:t,shapes:[]},this._wbDesc.shapeList.push(i)),null==i.shapes&&(i.shapes=[]),i.shapes.push(e)}_clearAllMark(e=null){this._canvasList.forEach(((t,i)=>{e!=i&&null!=e||t.shapeCanvasCtx.clearRect(0,0,t.shapeCanvas.width,t.shapeCanvas.height)}))}_pitchOnShape(e,t,i){let n=null;return this._wbDesc.shapeList.forEach((r=>{if(e.pageID==r.pageId)for(let e=r.shapes.length-1;e>=0;e--){const o=r.shapes[e];if(o.range&&o.range.left<=t&&o.range.right>=t&&o.range.top<=i&&o.range.bottom>=i){n=o;break}}})),n}_calcRange(e){if(e.type==Te){let t={left:0,top:0,right:0,bottom:0};const i=10;for(let n=0;n<e.dat.length;n++)0==n?(t.left=Math.ceil(e.dat[n].x+e.left-i),t.right=Math.ceil(e.dat[n].x+e.left+i),t.top=Math.ceil(e.dat[n].y+e.top-i),t.bottom=Math.ceil(e.dat[n].y+e.top+i)):(e.dat[n].x+e.left-i<t.left&&(t.left=Math.ceil(e.dat[n].x+e.left-i)),e.dat[n].x+e.left+i>t.right&&(t.right=Math.ceil(e.dat[n].x+e.left+i)),e.dat[n].y+e.top-i<t.top&&(t.top=Math.ceil(e.dat[n].y+e.top-i)),e.dat[n].y+e.top+i>t.bottom&&(t.bottom=Math.ceil(e.dat[n].y+e.top+i)));e.range=t}}_drawRange(e,t,i,n){const r=n?e.drawCanvasCtx:e.shapeCanvasCtx;this._setLineStyle(e,t),r.lineWidth=1*i,r.setLineDash([parseInt(10*i)]),r.beginPath(),r.moveTo(t.range.left*i,t.range.top*i),r.lineTo(t.range.right*i,t.range.top*i),r.lineTo(t.range.right*i,t.range.bottom*i),r.lineTo(t.range.left*i,t.range.bottom*i),r.lineTo(t.range.left*i,t.range.top*i),r.stroke()}_drawPencil(e,t,i){if(0==t.dat.length)return;const n=t.dat,r=i?e.drawCanvasCtx:e.shapeCanvasCtx,o=e.shapeCanvas.width/this._wbDesc.width;if(this._setLineStyle(e,t),r.beginPath(),r.moveTo(Math.round((n[0].x+t.left)*o),Math.round((n[0].y+t.top)*o)),n.length<2)r.lineTo(Math.round((t.left+n[0].x)*o),Math.round((t.top+n[0].y)*o));else for(var s=0;s<n.length-1;s++){var a=Math.round(t.left+n[s].x+t.left+n[s+1].x)*o/2,c=Math.round(t.top+n[s].y+t.top+n[s+1].y)*o/2;r.quadraticCurveTo((t.left+n[s].x)*o,(t.top+n[s].y)*o,a,c)}r.stroke(),this._calcRange(t),this._attr.showRange&&this._drawRange(e,t,o)}_drawStraightLine(e,t,i){const n=i?e.drawCanvasCtx:e.shapeCanvasCtx,r=e.shapeCanvas.width/this._wbDesc.width;this._setLineStyle(e,t),n.beginPath(),n.moveTo(Math.round((t.attr.lineStartPosX+t.left)*r),Math.round((t.attr.lineStartPosY+t.top)*r)),n.lineTo(Math.round((t.attr.lineEndPosX+t.left)*r),Math.round((t.attr.lineEndPosY+t.top)*r)),n.stroke();let o={left:0,top:0,right:0,bottom:0};const s=10;t.attr.lineStartPosX<=t.attr.lineEndPosX?(o.left=t.attr.lineStartPosX+t.left-s,o.right=t.attr.lineEndPosX+t.left+s):(o.left=t.attr.lineEndPosX+t.left-s,o.right=t.attr.lineStartPosX+t.left+s),t.attr.lineStartPosY<=t.attr.lineEndPosY?(o.top=t.attr.lineStartPosY+t.top-s,o.bottom=t.attr.lineEndPosY+t.top+s):(o.top=t.attr.lineEndPosY+t.top-s,o.bottom=t.attr.lineStartPosY+t.top+s),t.range=o,this._attr.showRange&&this._drawRange(e,t,r)}_drawRect(e,t,i){const n=i?e.drawCanvasCtx:e.shapeCanvasCtx,r=e.shapeCanvas.width/this._wbDesc.width;this._setLineStyle(e,t);const o=(t.attr.rectX+t.left)*r,s=(t.attr.rectY+t.top)*r,a=t.attr.rectWidth*r,c=t.attr.rectHeight*r;t.attr.fill?(n.fillStyle=t.attr.penColor,n.fillRect(o,s,a,c)):n.strokeRect(o,s,a,c);let l={left:0,top:0,right:0,bottom:0};const d=10;a>=0?(l.left=t.attr.rectX+t.left-d,l.right=t.attr.rectX+t.left+t.attr.rectWidth+d):(l.left=t.attr.rectX+t.left+t.attr.rectWidth-d,l.right=t.attr.rectX+t.left+d),c>=0?(l.top=t.attr.rectY+t.top-d,l.bottom=t.attr.rectY+t.top+t.attr.rectHeight+d):(l.top=t.attr.rectY+t.top+t.attr.rectHeight-d,l.bottom=t.attr.rectY+t.top+d),t.range=l,this._attr.showRange&&this._drawRange(e,t,r)}_drawEllipse(e,t,i){const n=i?e.drawCanvasCtx:e.shapeCanvasCtx,r=e.shapeCanvas.width/this._wbDesc.width;this._setLineStyle(e,t);const o=t.attr.rectWidth*r,s=t.attr.rectHeight*r,a=(t.attr.rectX+t.left)*r+o/2,c=(t.attr.rectY+t.top)*r+s/2,l=o/1.5,d=s/2;n.beginPath(),n.moveTo(a,c-d),n.bezierCurveTo(a+l,c-d,a+l,c+d,a,c+d),n.bezierCurveTo(a-l,c+d,a-l,c-d,a,c-d),n.closePath(),t.attr.fill&&(n.fillStyle=t.attr.penColor,n.fill()),n.strokeStyle=t.attr.penColor,n.stroke();let u={left:0,top:0,right:0,bottom:0};const h=10;o>=0?(u.left=t.attr.rectX+t.left-h,u.right=t.attr.rectX+t.left+t.attr.rectWidth+h):(u.left=t.attr.rectX+t.left+t.attr.rectWidth-h,u.right=t.attr.rectX+t.left+h),s>=0?(u.top=t.attr.rectY+t.top-h,u.bottom=t.attr.rectY+t.top+t.attr.rectHeight+h):(u.top=t.attr.rectY+t.top+t.attr.rectHeight-h,u.bottom=t.attr.rectY+t.top+h),t.range=u,this._attr.showRange&&this._drawRange(e,t,r)}_calcByArrowLine(e,t,i){let n=.15*Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y));n>=15&&(n=15),n<5&&(n=5),i.attr.penWidth&&(n*=1+.5*i.attr.penWidth);let r,o,s,a,c,l,d,u,h=.45,f=[];r=e.x-t.x,o=e.y-t.y,0==r&&0==o&&(r=-1),s=r*Math.cos(h)-o*Math.sin(h),a=r*Math.sin(h)+o*Math.cos(h),c=r*Math.cos(h)+o*Math.sin(h),l=r*Math.sin(-.45)+o*Math.cos(h),d=Math.sqrt(s*s+a*a),u=Math.sqrt(c*c+l*l),s=s*n/d,c=c*n/u,a=a*n/d,l=l*n/u,s+=t.x,a+=t.y,c+=t.x,l+=t.y;let p=1*(c-s)/4+s,_=(p-s)*(l-a)/(c-s)+a,C=3*(c-s)/4+s,g=(C-s)*(l-a)/(c-s)+a;return f.push(e),f.push({x:C,y:g}),f.push({x:c,y:l}),f.push(t),f.push({x:s,y:a}),f.push({x:p,y:_}),f}_drawArrow(e,t,i){const n=i?e.drawCanvasCtx:e.shapeCanvasCtx,r=e.shapeCanvas.width/this._wbDesc.width;this._setLineStyle(e,t),t.attr.fill=null==t.attr.fill||t.attr.fill;const o={x:(t.left+t.attr.lineStartPosX)*r,y:(t.top+t.attr.lineStartPosY)*r},s={x:(t.left+t.attr.lineEndPosX)*r,y:(t.top+t.attr.lineEndPosY)*r};let a=this._calcByArrowLine(o,s,t);n.beginPath(),n.moveTo(a[0].x,a[0].y);for(let e=1;e<a.length;e++)n.lineTo(a[e].x,a[e].y);n.lineTo(a[0].x,a[0].y),t.attr.fill&&(n.fillStyle=t.attr.penColor,n.fill()),n.strokeStyle=t.attr.penColor,n.stroke();let c={left:0,top:0,right:0,bottom:0};const l=10;t.attr.lineStartPosX<=t.attr.lineEndPosX?(c.left=t.attr.lineStartPosX+t.left-l,c.right=t.attr.lineEndPosX+t.left+l):(c.left=t.attr.lineEndPosX+t.left-l,c.right=t.attr.lineStartPosX+t.left+l),t.attr.lineStartPosY<=t.attr.lineEndPosY?(c.top=t.attr.lineStartPosY+t.top-l,c.bottom=t.attr.lineEndPosY+t.top+l):(c.top=t.attr.lineEndPosY+t.top-l,c.bottom=t.attr.lineStartPosY+t.top+l),t.range=c,this._attr.showRange&&this._drawRange(e,t,r)}_drawText(e,t,i){const n=i?e.drawCanvasCtx:e.shapeCanvasCtx,r=e.shapeCanvas.width/this._wbDesc.width;t.attr.fontSize=null==t.attr.fontSize?20:t.attr.fontSize;const o=t.left*r,s=t.top*r,a=Math.round(t.attr.fontSize*r),c=t.attr.fontWeight||"normal",l=t.attr.fontStyle||"",d=t.attr.fontFamily||"sans-serif",u=t.attr.txt||"";n.font=`${l} ${c} ${a}px ${d}`,n.textAlign="left",n.textBaseline="middle";const h=u.split("\n"),f=a/10,p=10*r;let _=0;for(let e=0;e<h.length;e++){let t=n.measureText(h[e]).width;_=t>_&&h[e].length>0?t:_}const C=_+2*p,g=a*h.length+f*(h.length-1)+2*p;n.fillStyle=t.attr.txtBkColor,n.fillRect(o,s,C,g),n.fillStyle=t.attr.penColor;for(let i=0;i<h.length;i++)if(n.fillText(h[i],o+p,s+p+(a+f)*i+.58*a),t.attr.fontUnderLine){let r=n.measureText(h[i]).width;this._setLineStyle(e,t),n.beginPath(),n.moveTo(o+p,s+p+a*(i+1)+f*i),n.lineTo(o+p+r,s+p+a*(i+1)+f*i),n.stroke()}let m={left:0,top:0,right:0,bottom:0};m.left=t.left-10,m.right=t.left+C/r+10,m.top=t.top-10,m.bottom=t.top+g/r+10,t.range=m,this._attr.showRange&&this._drawRange(e,t,r)}_changeRedoUndoState(){this._revocableShapesArr.length>10&&this._revocableShapesArr.splice(0,1);const e=!!this._revocableShapesArr.length&&this._resumableShapesArr.length<10,t=!!this._resumableShapesArr.length;void 0!==e&&this._undo!==e&&(this._undo=e,this.notifyUndoEnableChanged.target(e)),void 0!==t&&this._redo!==t&&(this._redo=t,this.notifyRedoEnableChanged.target(t))}handler(){return this._handlerDiv}resize(e){if(!this._wbDesc||!document.querySelector(`#${this._id}`))return;let t=0,i=0,n=document.querySelector(`#${this._id}`).clientWidth,r=document.querySelector(`#${this._id}`).clientHeight,o=this._wbDesc.width,s=this._wbDesc.height,a=this._wbDesc.scale/100,c=o/s;a>1?(this._mainContainerDiv.style.overflowX="auto",this._mainContainerDiv.style.overflowY="auto"):1==a&&1==this._canvasList.length?(this._mainContainerDiv.style.overflowY="hidden",this._mainContainerDiv.style.overflowX="hidden"):(this._mainContainerDiv.style.overflowX="hidden",this._mainContainerDiv.style.overflowY="auto"),n/r>=o/s?(this._mainContainerDiv.style.height="100%",this._mainContainerDiv.style.width=this._mainContainerDiv.clientHeight*c+"px",i=this._mainContainerDiv.clientHeight*a,t=i*c,1==a&&(this._mainContainerDiv.style.width="auto")):(this._mainContainerDiv.style.width="100%",this._mainContainerDiv.style.height=this._mainContainerDiv.clientWidth/c+"px",t=this._mainContainerDiv.clientWidth*a,i=t/c,1==a&&1==this._canvasList.length&&(this._mainContainerDiv.style.height="auto"));let l=Math.ceil(this._attr.pageMargin*(i/s));this._canvasList.forEach(((e,n)=>{e.canvasContainer.style.width=`${t}px`,e.canvasContainer.style.height=`${i}px`,e.shapeCanvas.width=e.drawCanvas.width=t,e.shapeCanvas.height=e.drawCanvas.height=i,n<this._canvasList.length-1&&(e.canvasContainer.style.marginBottom=`${l}px`)})),this._canvasContainerHeight=i,this._pageMarginClientHeight=l,this._mainContainerDiv.scrollHeight>this._mainContainerDiv.offsetHeight?this._mainContainerDiv.style.justifyContent="flex-start":this._mainContainerDiv.style.justifyContent="center",this._mainContainerDiv.scrollWidth>this._mainContainerDiv.offsetWidth?this._mainContainerDiv.style.alignItems="flex-start":this._mainContainerDiv.style.alignItems="center",this._drawAllShapes({},"resize"),this._refreshPos(),"notifySetScale"!=e&&this._uploadCurPosition()}setCursor(e){console.crlog(`[BoardView] ${this._id} setCursor: ${e}`),this._canvasList.forEach((t=>{t.drawCanvas.style.cursor=e}))}setBoardID(e,t){this._boardID=e;for(let e in t)this._attr[e]=t[e];this._bindingBoardInfo(),setTimeout((()=>{this.resize("setBoardID")}),100)}getAttr(){return JSON.parse(JSON.stringify(this._attr))}setAttr(e){console.crlog(`[BoardView] ${this._id} setAttr: ${JSON.stringify(e)}`);for(let t in e)this._attr[t]=e[t]}setCurPage(e){console.crlog(`[BoardView] ${this._id} setCurPage: ${e}`),this._mainContainerDiv.scrollTop=e*(this._canvasContainerHeight+this._pageMarginClientHeight)}getCurPage(){return this._curPageID}setToolType(e){console.crlog(`[BoardView] ${this._id} setToolType: ${JSON.stringify(e)}`),this._shapeType=e}getToolType(){return this._shapeType}setToolAttr(e){console.crlog(`[BoardView] ${this._id} setToolAttr: ${JSON.stringify(e)}`);for(let t in e)this._toolAttr[t]=e[t]}getToolAttr(){return JSON.parse(JSON.stringify(this._toolAttr))}clearCurPage(){if(!this._wbDesc.shapeList||this._attr.readOnly)return;const e=[];this._wbDesc.shapeList.forEach((t=>{t.pageId==this._curPageID&&t.shapes.forEach((t=>{e.push(t.sId)}))})),this._revocableShapesArr=[],this._resumableShapesArr=[],this._changeRedoUndoState(),ae.delShape(this._boardID,this._curPageID,e)}clearAllPage(){if(!this._wbDesc.shapeList||this._attr.readOnly)return;const e=[];this._wbDesc.shapeList.forEach((t=>{t.shapes.forEach((t=>{e.push(t.sId)})),ae.delShape(this._boardID,t.pageId,e)})),this._revocableShapesArr=[],this._resumableShapesArr=[],this._changeRedoUndoState()}getUndoEnableState(){return this._undo}getRedoEnableState(){return this._redo}undo(){if(this._attr.readOnly)return;console.crlog(`[BoardView] ${this._id}, undo()`);const e=this._canvasList.find((e=>e.pageID==this._curPageID)),t=this._revocableShapesArr.pop();t&&(this._resumableShapesArr.push(t),"add"==t.action?ae.delShape(t.shape.boardID,t.shape.pageID,[t.shape.shape.sId]):"move"==t.action?te.moveShape(t.shape.boardID,t.shape.pageID,[{sId:t.shape.sPosOld.sId,left:Math.round(t.shape.sPosOld.left),top:Math.round(t.shape.sPosOld.top)}]):"del"==t.action?(ae.addShape(t.shape.boardID,t.shape.pageID,t.shape.shape),this._drawShape(e,t.shape.shape),this._addShapeToShapeList(t.shape.shape,t.shape.pageID)):"modify"==t.action&&ae.modifyShapeAttr(t.oldShape.boardID,t.oldShape.pageID,t.oldShape.shape)),this._changeRedoUndoState()}redo(){if(this._attr.readOnly)return;console.crlog(`[BoardView] ${this._id}, redo()`);const e=this._canvasList.find((e=>e.pageID==this._curPageID)),t=this._resumableShapesArr.pop();t&&(this._revocableShapesArr.push(t),"add"==t.action?(this._drawShape(e,t.shape.shape),this._addShapeToShapeList(t.shape.shape,t.shape.pageID),ae.addShape(t.shape.boardID,t.shape.pageID,t.shape.shape)):"move"==t.action?te.moveShape(t.shape.boardID,t.shape.pageID,[{sId:t.shape.sPosNew.sId,left:Math.round(t.shape.sPosNew.left),top:Math.round(t.shape.sPosNew.top)}]):"del"==t.action?ae.delShape(t.shape.boardID,t.shape.pageID,[t.shape.shape.sId]):"modify"==t.action&&ae.modifyShapeAttr(t.newShape.boardID,t.newShape.pageID,t.newShape.shape)),this._changeRedoUndoState()}setScale(e){return new Promise(((t,i)=>{if(console.crlog(`[BoardView] ${this._id} setScale: ${e}`),!this._boardID||e<20||e>500)return i({errCode:1,errDesc:""});this._wbDesc.scale=e,this.resize("setScale"),this.notifyScaleChanged.target(this._wbDesc.wId,+e,Me.userInfo.userId),this._attr.asyncScale&&te.setScale(this._boardID,e).then((e=>t())).catch((e=>i({errCode:1,errDesc:e.toString()})))}))}getScale(){return this._wbDesc?this._wbDesc.scale:100}setCanvasStyle(e){console.crlog(`[BoardView] ${this._id} setCanvasStyle: ${JSON.stringify(e)}`);for(let t in e)this._canvasList.forEach((i=>{i.shapeCanvas.style[t]=e[t]}));this._canvasStyle=e}setContainerStyle(e){console.crlog(`[BoardView] ${this._id} setContainerStyle: ${JSON.stringify(e)}`);for(let t in e)this._mainContainerDiv.style[t]=e[t];this._mainContainerDivStyle=e}};window.boardv2=ae,window.CRBoard_BoardView=He,window.CRBoard_CreateWhiteBoard=ae.createWhiteBoard,window.CRBoard_CloseBoard=ae.closeWhiteBoard,window.CRBoard_GetBoardInfo=ae.getBoardInfo,window.CRBoard_GetAllBoard=ae.getAllBoard,window.CRBoard_UpdateBoardExInfo=ae.updateBoardExInfo,window.CRBoard_GetCurrentBoard=ae.getCurrentBoard,window.CRBoard_SetCurrentBoard=ae.setCurrentBoard,window.CRBoard_NotifyInitBoardList=ae.notifyInitBoardListCallback,window.CRBoard_NotifyCreateBoard=ae.notifyCreateBoardCallback,window.CRBoard_NotifyCloseBoard=ae.notifyCloseBoardCallback,window.CRBoard_NotifyBoardExinfoUpdated=ae.notifyBoardExinfoUpdatedCallback,window.CRBoard_NotifyCurrentBoard=ae.notifyCurrentBoardCallback,window.CRBoard_NotifyBoardScale=ae.notifyBoardScaleCallback;const qe={BoardView:He,createWhiteBoard:ae.createWhiteBoard,closeBoard:ae.closeWhiteBoard,getAllBoard:ae.getAllBoard,updateBoardExInfo:ae.updateBoardExInfo,getBoardInfo:ae.getBoardInfo,getCurrentBoard:ae.getCurrentBoard,setCurrentBoard:ae.setCurrentBoard,notifyInitBoardList:ae.notifyInitBoardListCallback,notifyCreateBoard:ae.notifyCreateBoardCallback,notifyCloseBoard:ae.notifyCloseBoardCallback,notifyBoardExinfoUpdated:ae.notifyBoardExinfoUpdatedCallback,notifyCurrentBoard:ae.notifyCurrentBoardCallback,notifyBoardScale:ae.notifyBoardScaleCallback},Ke={GetSDKVersion:CRVideo_GetSDKVersion,WriteLog:CRVideo_WriteLog,SetSDKParams:CRVideo_SetSDKParams,Init:CRVideo_Init,Uninit:CRVideo_Uninit,SetServerAddr:CRVideo_SetServerAddr,Login:CRVideo_Login,LoginByToken:CRVideo_LoginByToken,UpdateToken:CRVideo_UpdateToken,Logout:CRVideo_Logout,LoginSuccess:CRVideo_LoginSuccess,LoginFail:CRVideo_LoginFail,NotifyTokenWillExpire:CRVideo_NotifyTokenWillExpire,LineOff:CRVideo_LineOff,InitQueueDat:CRVideo_InitQueueDat,GetAllQueueInfo:CRVideo_GetAllQueueInfo,RefreshAllQueueStatus:CRVideo_RefreshAllQueueStatus,GetQueueStatus:CRVideo_GetQueueStatus,GetQueuingInfo:CRVideo_GetQueuingInfo,GetServingQueues:CRVideo_GetServingQueues,GetSessionInfo:CRVideo_GetSessionInfo,StartQueuing:CRVideo_StartQueuing,StopQueuing:CRVideo_StopQueuing,StartService:CRVideo_StartService,StopService:CRVideo_StopService,GetQueueUsers:CRVideo_GetQueueUsers,ReqAssignUser:CRVideo_ReqAssignUser,AcceptAssignUser:CRVideo_AcceptAssignUser,RejectAssignUser:CRVideo_RejectAssignUser,InitQueueDatRslt:CRVideo_InitQueueDatRslt,QueueStatusChanged:CRVideo_QueueStatusChanged,GetQueueStatusRslt:CRVideo_GetQueueStatusRslt,QueuingInfoChanged:CRVideo_QueuingInfoChanged,StartQueuingRslt:CRVideo_StartQueuingRslt,StopQueuingRslt:CRVideo_StopQueuingRslt,StartServiceRslt:CRVideo_StartServiceRslt,StopServiceRslt:CRVideo_StopServiceRslt,GetQueueUsersRslt:CRVideo_GetQueueUsersRslt,ResponseAssignUserRslt:CRVideo_ResponseAssignUserRslt,AutoAssignUser:CRVideo_AutoAssignUser,ReqAssignUserRslt:CRVideo_ReqAssignUserRslt,CancelAssignUser:CRVideo_CancelAssignUser,NotifyUserEnter:CRVideo_NotifyUserEnter,NotifyUserLeave:CRVideo_NotifyUserLeave,Call:CRVideo_Call,AcceptCall:CRVideo_AcceptCall,RejectCall:CRVideo_RejectCall,HangupCall:CRVideo_HangupCall,SetDNDStatus:CRVideo_SetDNDStatus,GetUserStatus:CRVideo_GetUserStatus,GetOneUserStatus:CRVideo_GetOneUserStatus,StartUserStatusNotify:CRVideo_StartUserStatusNotify,StopUserStatusNotify:CRVideo_StopUserStatusNotify,CallSuccess:CRVideo_CallSuccess,CallFail:CRVideo_CallFail,AcceptCallSuccess:CRVideo_AcceptCallSuccess,AcceptCallFail:CRVideo_AcceptCallFail,RejectCallSuccess:CRVideo_RejectCallSuccess,RejectCallFail:CRVideo_RejectCallFail,HangupCallSuccess:CRVideo_HangupCallSuccess,HangupCallFail:CRVideo_HangupCallFail,NotifyCallIn:CRVideo_NotifyCallIn,NotifyCallAccepted:CRVideo_NotifyCallAccepted,NotifyCallRejected:CRVideo_NotifyCallRejected,NotifyCallHangup:CRVideo_NotifyCallHangup,SetDNDStatusSuccess:CRVideo_SetDNDStatusSuccess,SetDNDStatusFail:CRVideo_SetDNDStatusFail,GetUserStatusSuccess:CRVideo_GetUserStatusSuccess,GetUserStatusFail:CRVideo_GetUserStatusFail,StartUserStatusNotifyRslt:CRVideo_StartUserStatusNotifyRslt,StopUserStatusNotifyRslt:CRVideo_StopUserStatusNotifyRslt,NotifyUserStatus:CRVideo_NotifyUserStatus,Invite:CRVideo_Invite,AcceptInvite:CRVideo_AcceptInvite,RejectInvite:CRVideo_RejectInvite,CancelInvite:CRVideo_CancelInvite,InviteSuccess:CRVideo_InviteSuccess,InviteFail:CRVideo_InviteFail,AcceptInviteSuccess:CRVideo_AcceptInviteSuccess,AcceptInviteFail:CRVideo_AcceptInviteFail,RejectInviteSuccess:CRVideo_RejectInviteSuccess,RejectInviteFail:CRVideo_RejectInviteFail,CancelInviteSuccess:CRVideo_CancelInviteSuccess,CancelInviteFail:CRVideo_CancelInviteFail,NotifyInviteIn:CRVideo_NotifyInviteIn,NotifyInviteAccepted:CRVideo_NotifyInviteAccepted,NotifyInviteRejected:CRVideo_NotifyInviteRejected,NotifyInviteCanceled:CRVideo_NotifyInviteCanceled,CreateMeeting2:CRVideo_CreateMeeting2,DestroyMeeting:CRVideo_DestroyMeeting,CreateMeetingSuccess:CRVideo_CreateMeetingSuccess,CreateMeetingFail:CRVideo_CreateMeetingFail,DestroyMeetingRslt:CRVideo_DestroyMeetingRslt,MeetingStopped:CRVideo_MeetingStopped,EnterMeeting3:CRVideo_EnterMeeting3,ExitMeeting:CRVideo_ExitMeeting,Kickout:CRVideo_Kickout,EnterMeetingRslt:CRVideo_EnterMeetingRslt,UserEnterMeeting:CRVideo_UserEnterMeeting,UserLeftMeeting:CRVideo_UserLeftMeeting,MeetingDropped:CRVideo_MeetingDropped,GetMainVideo:CRVideo_GetMainVideo,SetMainVideo:CRVideo_SetMainVideo,SetMainVideoMode:CRVideo_SetMainVideoMode,GetMainVideoMode:CRVideo_GetMainVideoMode,SwitchToPage:CRVideo_SwitchToPage,GetCurrentMainPage:CRVideo_GetCurrentMainPage,GetCurrentSubPage:CRVideo_GetCurrentSubPage,NotifyMainVideoChanged:CRVideo_NotifyMainVideoChanged,NotifyMainVideoModeChanged:CRVideo_NotifyMainVideoModeChanged,NotifySwitchToPage:CRVideo_NotifySwitchToPage,PeerConnectionError:CRVideo_PeerConnectionError,NetStateChanged:CRVideo_NetStateChanged,GetMeetingAttrs:CRVideo_GetMeetingAttrs,GetMeetingAllAttrs:CRVideo_GetMeetingAllAttrs,SetMeetingAttrs:CRVideo_SetMeetingAttrs,AddOrUpdateMeetingAttrs:CRVideo_AddOrUpdateMeetingAttrs,DelMeetingAttrs:CRVideo_DelMeetingAttrs,ClearMeetingAttrs:CRVideo_ClearMeetingAttrs,GetUserAttrs:CRVideo_GetUserAttrs,SetUserAttrs:CRVideo_SetUserAttrs,AddOrUpdateUserAttrs:CRVideo_AddOrUpdateUserAttrs,DelUserAttrs:CRVideo_DelUserAttrs,ClearUserAttrs:CRVideo_ClearUserAttrs,ClearAllUserAttrs:CRVideo_ClearAllUserAttrs,GetMeetingAttrsSuccess:CRVideo_GetMeetingAttrsSuccess,GetMeetingAttrsFail:CRVideo_GetMeetingAttrsFail,GetMeetingAllAttrsSuccess:CRVideo_GetMeetingAllAttrsSuccess,GetMeetingAllAttrsFail:CRVideo_GetMeetingAllAttrsFail,SetMeetingAttrsRslt:CRVideo_SetMeetingAttrsRslt,AddOrUpdateMeetingAttrsRslt:CRVideo_AddOrUpdateMeetingAttrsRslt,DelMeetingAttrsRslt:CRVideo_DelMeetingAttrsRslt,ClearMeetingAttrsRslt:CRVideo_ClearMeetingAttrsRslt,GetUserAttrsSuccess:CRVideo_GetUserAttrsSuccess,GetUserAttrsFail:CRVideo_GetUserAttrsFail,SetUserAttrsRslt:CRVideo_SetUserAttrsRslt,AddOrUpdateUserAttrsRslt:CRVideo_AddOrUpdateUserAttrsRslt,DelUserAttrsRslt:CRVideo_DelUserAttrsRslt,ClearUserAttrsRslt:CRVideo_ClearUserAttrsRslt,ClearAllUserAttrsRslt:CRVideo_ClearAllUserAttrsRslt,NotifyMeetingAttrsChanged:CRVideo_NotifyMeetingAttrsChanged,NotifyUserAttrsChanged:CRVideo_NotifyUserAttrsChanged,GetAllMembers:CRVideo_GetAllMembers,GetMemberInfo:CRVideo_GetMemberInfo,GetMemberNickName:CRVideo_GetMemberNickName,IsUserInMeeting:CRVideo_IsUserInMeeting,SetNickName:CRVideo_SetNickName,NotifyNickNameChanged:CRVideo_NotifyNickNameChanged,GetAudioMicNames:CRVideo_GetAudioMicNames,GetAudioSpkNames:CRVideo_GetAudioSpkNames,SetAudioCfg:CRVideo_SetAudioCfg,GetAudioCfg:CRVideo_GetAudioCfg,GetMicEnergy:CRVideo_GetMicEnergy,OpenMic:CRVideo_OpenMic,CloseMic:CRVideo_CloseMic,GetAudioStatus:CRVideo_GetAudioStatus,SetAllAudioClose:CRVideo_SetAllAudioClose,PauseSpeaker:CRVideo_PauseSpeaker,PlaySpeaker:CRVideo_PlaySpeaker,StartGetAudioPCM:CRVideo_StartGetAudioPCM,StopGetAudioPCM:CRVideo_StopGetAudioPCM,SetVoiceChange:CRVideo_SetVoiceChange,GetVoiceChangeType:CRVideo_GetVoiceChangeType,AudioStatusChanged:CRVideo_AudioStatusChanged,MicEnergyUpdate:CRVideo_MicEnergyUpdate,NotifyAudioStream:CRVideo_NotifyAudioStream,OpenMicFailed:CRVideo_OpenMicFailed,NotifyAudioPCMDat:CRVideo_NotifyAudioPCMDat,NotifySetVoiceChange:CRVideo_NotifySetVoiceChange,CreatVideoObj:CRVideo_CreatVideoObj,GetVideoCfg:CRVideo_GetVideoCfg,SetVideoCfg:CRVideo_SetVideoCfg,GetVideoStatus:CRVideo_GetVideoStatus,GetDefaultVideo:CRVideo_GetDefaultVideo,SetDefaultVideo:CRVideo_SetDefaultVideo,GetAllVideoInfo:CRVideo_GetAllVideoInfo,GetOpenedVideoIDs:CRVideo_GetOpenedVideoIDs,OpenVideo:CRVideo_OpenVideo,CloseVideo:CRVideo_CloseVideo,SetEnableMutiVideo:CRVideo_SetEnableMutiVideo,GetEnableMutiVideo:CRVideo_GetEnableMutiVideo,DisableCamera:CRVideo_DisableCamera,SetLocVideoAttributes:CRVideo_SetLocVideoAttributes,GetLocVideoAttributes:CRVideo_GetLocVideoAttributes,GetVideoTrackCapabilities:CRVideo_GetVideoTrackCapabilities,GetVideoTrackSettings:CRVideo_GetVideoTrackSettings,SetVideoPanTiltZoom:CRVideo_SetVideoPanTiltZoom,AddStreamCam:CRVideo_AddStreamCam,RemoveStreamVideo:CRVideo_RemoveStreamVideo,AddCanvasVCam:CRVideo_AddCanvasVCam,RemoveCanvasVCam:CRVideo_RemoveCanvasVCam,SetVirtualBackground:CRVideo_SetVirtualBackground,VideoDevChanged:CRVideo_VideoDevChanged,DefVideoChanged:CRVideo_DefVideoChanged,VideoStatusChanged:CRVideo_VideoStatusChanged,NotifyVideoStream:CRVideo_NotifyVideoStream,OpenVideoFailed:CRVideo_OpenVideoFailed,OpenVideoTimeout:CRVideo_OpenVideoTimeout,CreatScreenShareObj:CRVideo_CreatScreenShareObj,SetScreenShareCfg:CRVideo_SetScreenShareCfg,StartScreenShare:CRVideo_StartScreenShare,StopScreenShare:CRVideo_StopScreenShare,StartScreenMark:CRVideo_StartScreenMark,StopScreenMark:CRVideo_StopScreenMark,StartScreenShareRslt:CRVideo_StartScreenShareRslt,StopScreenShareRslt:CRVideo_StopScreenShareRslt,StartScreenMarkRslt:CRVideo_StartScreenMarkRslt,StopScreenMarkRslt:CRVideo_StopScreenMarkRslt,NotifyScreenShareStarted:CRVideo_NotifyScreenShareStarted,NotifyScreenShareStopped:CRVideo_NotifyScreenShareStopped,NotifyScreenMarkStarted:CRVideo_NotifyScreenMarkStarted,NotifyScreenMarkStopped:CRVideo_NotifyScreenMarkStopped,CreatMediaObj:CRVideo_CreatMediaObj,StartPlayMedia:CRVideo_StartPlayMedia,PausePlayMedia:CRVideo_PausePlayMedia,StopPlayMedia:CRVideo_StopPlayMedia,SetMediaplaypos:CRVideo_SetMediaplaypos,SetMediaVolume:CRVideo_SetMediaVolume,GetMediaInfo:CRVideo_GetMediaInfo,GetMediaImg:CRVideo_GetMediaImg,NotifyMediaOpened:CRVideo_NotifyMediaOpened,NotifyMediaStart:CRVideo_NotifyMediaStart,NotifyMediaStop:CRVideo_NotifyMediaStop,NotifyMediaPause:CRVideo_NotifyMediaPause,NotifyPlayPosSetted:CRVideo_NotifyPlayPosSetted,CreateCloudMixer:CRVideo_CreateCloudMixer,UpdateCloudMixerContent:CRVideo_UpdateCloudMixerContent,DestroyCloudMixer:CRVideo_DestroyCloudMixer,GetAllCloudMixerInfo:CRVideo_GetAllCloudMixerInfo,GetCloudMixerInfo:CRVideo_GetCloudMixerInfo,CreateCloudMixerFailed:CRVideo_CreateCloudMixerFailed,CloudMixerStateChanged:CRVideo_CloudMixerStateChanged,CloudMixerOutputInfoChanged:CRVideo_CloudMixerOutputInfoChanged,CloudMixerInfoChanged:CRVideo_CloudMixerInfoChanged,SendCmd:CRVideo_SendCmd,SendBuffer:CRVideo_SendBuffer,SendFile:CRVideo_SendFile,CancelSend:CRVideo_CancelSend,SendCmdRslt:CRVideo_SendCmdRslt,SendBufferRslt:CRVideo_SendBufferRslt,SendFileRslt:CRVideo_SendFileRslt,SendProgress:CRVideo_SendProgress,NotifyCmdData:CRVideo_NotifyCmdData,NotifyBufferData:CRVideo_NotifyBufferData,NotifyFileData:CRVideo_NotifyFileData,SendMeetingCustomMsg:CRVideo_SendMeetingCustomMsg,SendMeetingCustomMsgRslt:CRVideo_SendMeetingCustomMsgRslt,NotifyMeetingCustomMsg:CRVideo_NotifyMeetingCustomMsg,SetMediaCfg:CRVideo_SetMediaCfg,GetMediaCfg:CRVideo_GetMediaCfg,GetScreenShareCfg:CRVideo_GetScreenShareCfg,...qe};CRVideo.SDKKey="CRSDK",window.__CRName=atob("Y2xvdWRyb29t"),window.__CRNamC=atob("Q2xvdWRyb29t"),window.__CRNameUP=atob("Q0xPVURST09N");const We=Ke})(),__webpack_exports__})()));
//# sourceMappingURL=RTCSDKV2.min.js.map?v=e0be